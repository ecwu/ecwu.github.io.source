var uw=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function cw(ms){return ms&&ms.__esModule&&Object.prototype.hasOwnProperty.call(ms,"default")?ms.default:ms}var G0={exports:{}};(function(ms,lw){(function($n,P){ms.exports=P()})(uw,function(){return function($n){function P(A){if(C[A])return C[A].exports;var gt=C[A]={i:A,l:!1,exports:{}};return $n[A].call(gt.exports,gt,gt.exports,P),gt.l=!0,gt.exports}var C={};return P.m=$n,P.c=C,P.d=function(A,gt,Dt){P.o(A,gt)||Object.defineProperty(A,gt,{configurable:!1,enumerable:!0,get:Dt})},P.n=function(A){var gt=A&&A.__esModule?function(){return A.default}:function(){return A};return P.d(gt,"a",gt),gt},P.o=function(A,gt){return Object.prototype.hasOwnProperty.call(A,gt)},P.p="",P(P.s=4)}([function($n,P,C){function A(){}function gt(ut){var Nt;return ut=(ut+"").trim().toLowerCase(),(Nt=In.exec(ut))?(Nt=parseInt(Nt[1],16),new Ct(Nt>>8&15|Nt>>4&240,Nt>>4&15|240&Nt,(15&Nt)<<4|15&Nt,1)):(Nt=dr.exec(ut))?Dt(parseInt(Nt[1],16)):(Nt=Rt.exec(ut))?new Ct(Nt[1],Nt[2],Nt[3],1):(Nt=je.exec(ut))?new Ct(255*Nt[1]/100,255*Nt[2]/100,255*Nt[3]/100,1):(Nt=$e.exec(ut))?Bt(Nt[1],Nt[2],Nt[3],Nt[4]):(Nt=xn.exec(ut))?Bt(255*Nt[1]/100,255*Nt[2]/100,255*Nt[3]/100,Nt[4]):(Nt=ur.exec(ut))?G(Nt[1],Nt[2]/100,Nt[3]/100,1):(Nt=Kr.exec(ut))?G(Nt[1],Nt[2]/100,Nt[3]/100,Nt[4]):zt.hasOwnProperty(ut)?Dt(zt[ut]):ut==="transparent"?new Ct(NaN,NaN,NaN,0):null}function Dt(ut){return new Ct(ut>>16&255,ut>>8&255,255&ut,1)}function Bt(ut,Nt,Ae,tt){return tt<=0&&(ut=Nt=Ae=NaN),new Ct(ut,Nt,Ae,tt)}function de(ut){return ut instanceof A||(ut=gt(ut)),ut?(ut=ut.rgb(),new Ct(ut.r,ut.g,ut.b,ut.opacity)):new Ct}function fe(ut,Nt,Ae,tt){return arguments.length===1?de(ut):new Ct(ut,Nt,Ae,tt==null?1:tt)}function Ct(ut,Nt,Ae,tt){this.r=+ut,this.g=+Nt,this.b=+Ae,this.opacity=+tt}function G(ut,Nt,Ae,tt){return tt<=0?ut=Nt=Ae=NaN:Ae<=0||Ae>=1?ut=Nt=NaN:Nt<=0&&(ut=NaN),new pe(ut,Nt,Ae,tt)}function Ut(ut){if(ut instanceof pe)return new pe(ut.h,ut.s,ut.l,ut.opacity);if(ut instanceof A||(ut=gt(ut)),!ut)return new pe;if(ut instanceof pe)return ut;ut=ut.rgb();var Nt=ut.r/255,Ae=ut.g/255,tt=ut.b/255,_n=Math.min(Nt,Ae,tt),Sn=Math.max(Nt,Ae,tt),cr=NaN,We=Sn-_n,cn=(Sn+_n)/2;return We?(cr=Nt===Sn?(Ae-tt)/We+6*(Ae<tt):Ae===Sn?(tt-Nt)/We+2:(Nt-Ae)/We+4,We/=cn<.5?Sn+_n:2-Sn-_n,cr*=60):We=cn>0&&cn<1?0:cr,new pe(cr,We,cn,ut.opacity)}function le(ut,Nt,Ae,tt){return arguments.length===1?Ut(ut):new pe(ut,Nt,Ae,tt==null?1:tt)}function pe(ut,Nt,Ae,tt){this.h=+ut,this.s=+Nt,this.l=+Ae,this.opacity=+tt}function xe(ut,Nt,Ae){return 255*(ut<60?Nt+(Ae-Nt)*ut/60:ut<180?Ae:ut<240?Nt+(Ae-Nt)*(240-ut)/60:Nt)}P.a=A,C.d(P,"d",function(){return un}),C.d(P,"c",function(){return ge}),P.e=gt,P.g=de,P.f=fe,P.b=Ct;var ie=C(1),un=.7,ge=1/un,en="\\s*([+-]?\\d+)\\s*",Ye="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",In=/^#([0-9a-f]{3})$/,dr=/^#([0-9a-f]{6})$/,Rt=new RegExp("^rgb\\("+[en,en,en]+"\\)$"),je=new RegExp("^rgb\\("+[Fe,Fe,Fe]+"\\)$"),$e=new RegExp("^rgba\\("+[en,en,en,Ye]+"\\)$"),xn=new RegExp("^rgba\\("+[Fe,Fe,Fe,Ye]+"\\)$"),ur=new RegExp("^hsl\\("+[Ye,Fe,Fe]+"\\)$"),Kr=new RegExp("^hsla\\("+[Ye,Fe,Fe,Ye]+"\\)$"),zt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object(ie.a)(A,gt,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Object(ie.a)(Ct,fe,Object(ie.b)(A,{brighter:function(ut){return ut=ut==null?ge:Math.pow(ge,ut),new Ct(this.r*ut,this.g*ut,this.b*ut,this.opacity)},darker:function(ut){return ut=ut==null?un:Math.pow(un,ut),new Ct(this.r*ut,this.g*ut,this.b*ut,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var ut=this.opacity;return ut=isNaN(ut)?1:Math.max(0,Math.min(1,ut)),(ut===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(ut===1?")":", "+ut+")")}})),Object(ie.a)(pe,le,Object(ie.b)(A,{brighter:function(ut){return ut=ut==null?ge:Math.pow(ge,ut),new pe(this.h,this.s,this.l*ut,this.opacity)},darker:function(ut){return ut=ut==null?un:Math.pow(un,ut),new pe(this.h,this.s,this.l*ut,this.opacity)},rgb:function(){var ut=this.h%360+360*(this.h<0),Nt=isNaN(ut)||isNaN(this.s)?0:this.s,Ae=this.l,tt=Ae+(Ae<.5?Ae:1-Ae)*Nt,_n=2*Ae-tt;return new Ct(xe(ut>=240?ut-240:ut+120,_n,tt),xe(ut,_n,tt),xe(ut<120?ut+240:ut-120,_n,tt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}))},function($n,P,C){function A(gt,Dt){var Bt=Object.create(gt.prototype);for(var de in Dt)Bt[de]=Dt[de];return Bt}P.b=A,P.a=function(gt,Dt,Bt){gt.prototype=Dt.prototype=Bt,Bt.constructor=gt}},function($n,P,C){function A(Ct){if(Ct instanceof Dt)return new Dt(Ct.h,Ct.s,Ct.v,Ct.opacity);Ct instanceof de.b||(Ct=Object(de.b)(Ct));var G=Ct.r/255,Ut=Ct.g/255,le=Ct.b/255,pe=Math.min(G,Ut,le),xe=Math.max(G,Ut,le),ie=xe-pe,un=NaN,ge=ie/xe,en=xe;return ie&&(un=G===xe?(Ut-le)/ie+6*(Ut<le):Ut===xe?(le-G)/ie+2:(G-Ut)/ie+4,un*=60),new Dt(un,ge,en,Ct.opacity)}function gt(Ct,G,Ut,le){return arguments.length===1?A(Ct):new Dt(Ct,G,Ut,le==null?1:le)}function Dt(Ct,G,Ut,le){this.h=+Ct,this.s=+G,this.v=+Ut,this.opacity=+le}function Bt(Ct,G,Ut,le,pe){return Object(de.b)(255*(Ct+le),255*(G+le),255*(Ut+le),pe)}P.a=gt;var de=C(9),fe=Dt.prototype=gt.prototype=Object.create(de.a.prototype);fe.constructor=Dt,fe.brighter=function(Ct){return Ct=Ct==null?1/.7:Math.pow(1/.7,Ct),new Dt(this.h,this.s,this.v*Ct,this.opacity)},fe.darker=function(Ct){return Ct=Ct==null?.7:Math.pow(.7,Ct),new Dt(this.h,this.s,this.v*Ct,this.opacity)},fe.rgb=function(){var Ct=isNaN(this.h)?0:this.h%360+360*(this.h<0),G=isNaN(this.h)||isNaN(this.s)?0:this.s,Ut=this.v,le=this.opacity,pe=Ut*G,xe=pe*(1-Math.abs(Ct/60%2-1)),ie=Ut-pe;return Ct<60?Bt(pe,xe,0,ie,le):Ct<120?Bt(xe,pe,0,ie,le):Ct<180?Bt(0,pe,xe,ie,le):Ct<240?Bt(0,xe,pe,ie,le):Ct<300?Bt(xe,0,pe,ie,le):Bt(pe,0,xe,ie,le)},fe.displayable=function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.v&&this.v<=1&&0<=this.opacity&&this.opacity<=1}},function($n,P,C){C.d(P,"a",function(){return A}),C.d(P,"b",function(){return gt});var A=Math.PI/180,gt=180/Math.PI},function($n,P,C){function A(zt,ut){if(zt.distanceToSquared(ut)>dr){var Nt=new ie.Vector3().subVectors(ut,zt).setLength(In);return zt.add(Nt),!1}return zt.copy(ut),!0}function gt(zt){var ut=un.lab(zt);return new ie.Vector3(ut.b,2*ut.l-100,ut.a)}function Dt(zt){zt.userData.targetReached=!1,zt.userData.target=gt(zt.userData.color)}function Bt(zt){var ut=un.hsl(zt);isNaN(ut.s)&&(ut.s=0),isNaN(ut.h)&&(ut.h=0),ut.h-=45;var Nt=Math.PI*ut.h/180;return new ie.Vector3(100*ut.s,200*ut.l-100,0).applyAxisAngle(je,Nt)}function de(zt){zt.userData.targetReached=!1,zt.userData.target=Bt(zt.userData.color)}function fe(zt){var ut=un.hsv(zt);isNaN(ut.s)&&(ut.s=0),isNaN(ut.h)&&(ut.h=0),ut.h-=45;var Nt=Math.PI*ut.h/180;return new ie.Vector3(100*ut.s,200*ut.v-100,0).applyAxisAngle(je,Nt)}function Ct(zt){zt.userData.targetReached=!1,zt.userData.target=fe(zt.userData.color)}function G(zt){return Ye+ge*zt/Fe}function Ut(zt){return zt=un.rgb(zt),new ie.Vector3(G(zt.r),G(zt.g),G(zt.b)).applyAxisAngle(Rt,xn).applyAxisAngle($e,Kr).applyAxisAngle(je,ur)}function le(zt){zt.userData.targetReached=!1,zt.userData.target=Ut(zt.userData.color)}function pe(zt,ut){Object.keys(ut).forEach(function(Nt){zt[Nt]=ut[Nt]})}function xe(zt,ut){this.options=ut||{},this.scene=new ie.Scene,this.spaceMode=this.options.spaceMode||"hsv";for(var Nt=new ie.SphereGeometry(en),Ae=new ie.MeshBasicMaterial({flatShading:ie.FlatShading}),tt=0;tt<zt.length;tt++){var _n=Ae.clone();_n.color=new ie.Color(zt[tt]);var Sn=new ie.Mesh(Nt,_n);Sn.userData={color:zt[tt]},this.applySpaceMode(Sn),this.scene.add(Sn),Sn.matrixAutoUpdate=!1,pe(Sn.position,Sn.userData.target),Sn.updateMatrix()}this.meshes=this.scene.children.filter(function(cr){return cr instanceof ie.Mesh})}Object.defineProperty(P,"__esModule",{value:!0}),P.default=xe;var ie=C(5),un=C(6);window.THREE=ie,C(7),un.hsv=C(8).hsv;var ge=7,en=ge/4,Ye=17*-ge/2,Fe=15,In=3,dr=Math.pow(In,2),Rt=new ie.Vector3(1,0,0),je=new ie.Vector3(0,1,0),$e=new ie.Vector3(0,0,1),xn=-Math.PI/4,ur=-Math.PI/4,Kr=Math.atan(Math.sqrt(2)/2);xe.prototype.render=function(zt){this.camera=new ie.PerspectiveCamera(50,zt.offsetWidth/zt.offsetHeight,1,1e4),this.camera.position.z=this.options.position&&this.options.position.z||350,this.controls=new ie.OrbitControls(this.camera,zt),this.renderer=new ie.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(this.options.background||15658734),this.renderer.setSize(zt.offsetWidth,zt.offsetHeight),zt.appendChild(this.renderer.domElement),this.onWindowResize=function(){this.camera.aspect=this.container.offsetWidth/this.container.offsetHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.offsetWidth,this.container.offsetHeight)},window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.rafHandler=this.startAnimate(),this.container=zt},xe.prototype.updateData=function(zt){var ut=0;this.scene.children=[];var Nt=new ie.SphereGeometry(en),Ae=new ie.MeshBasicMaterial({flatShading:ie.FlatShading});for(ut=0;ut<zt.length;ut++){var tt=Ae.clone();tt.color=new ie.Color(zt[ut]);var _n=new ie.Mesh(Nt,tt);_n.userData={color:zt[ut]},this.applySpaceMode(_n),this.scene.add(_n),_n.matrixAutoUpdate=!1,pe(_n.position,_n.userData.target),_n.updateMatrix()}this.meshes=this.scene.children.filter(function(Sn){return Sn instanceof ie.Mesh}),this.repaint()},xe.prototype.changeSpaceMode=function(zt){this.spaceMode=zt,this.repaint()},xe.prototype.unmount=function(){window.removeEventListener("resize",this.onWindowResize,!1),this.container.removeChild(this.renderer.domElement),this.rafHandler&&this.rafHandler.cancel&&this.rafHandler.cancel()},xe.prototype.repaint=function(){switch(this.spaceMode){case"hsl":this.meshes.forEach(de);break;case"rgb":this.meshes.forEach(le);break;case"lab":this.meshes.forEach(Dt);break;case"hsv":this.meshes.forEach(Ct);break;default:this.meshes.forEach(Ct)}},xe.prototype.applySpaceMode=function(zt){switch(this.spaceMode){case"hsl":de(zt);break;case"rgb":le(zt);break;case"lab":Dt(zt);break;case"hsv":Ct(zt)}},xe.prototype.renderScene=function(){this.renderer.render(this.scene,this.camera)},xe.prototype.startAnimate=function(){return this.renderScene(),this.meshes.forEach(function(zt){var ut=zt.userData;if(!ut.targetReached){var Nt=zt.position,Ae=ut.target;ut.targetReached=A(Nt,Ae),zt.updateMatrix()}}),this.controls.update(),requestAnimationFrame(this.startAnimate.bind(this))}},function($n,P,C){function A(){}function gt(t,n){this.x=t||0,this.y=n||0}function Dt(t,n,i,o,u,l,f,d,g,v){Object.defineProperty(this,"id",{value:Cp++}),this.uuid=Ce.generateUUID(),this.name="",this.image=t!==void 0?t:Dt.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=n!==void 0?n:Dt.DEFAULT_MAPPING,this.wrapS=i!==void 0?i:nr,this.wrapT=o!==void 0?o:nr,this.magFilter=u!==void 0?u:rr,this.minFilter=l!==void 0?l:Jo,this.anisotropy=g!==void 0?g:1,this.format=f!==void 0?f:ai,this.type=d!==void 0?d:Ec,this.offset=new gt(0,0),this.repeat=new gt(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=v!==void 0?v:mu,this.version=0,this.onUpdate=null}function Bt(t,n,i,o){this.x=t||0,this.y=n||0,this.z=i||0,this.w=o!==void 0?o:1}function de(t,n,i){this.uuid=Ce.generateUUID(),this.width=t,this.height=n,this.scissor=new Bt(0,0,t,n),this.scissorTest=!1,this.viewport=new Bt(0,0,t,n),i=i||{},i.minFilter===void 0&&(i.minFilter=rr),this.texture=new Dt(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.depthBuffer=i.depthBuffer===void 0||i.depthBuffer,this.stencilBuffer=i.stencilBuffer===void 0||i.stencilBuffer,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null}function fe(t,n,i){de.call(this,t,n,i),this.activeCubeFace=0,this.activeMipMapLevel=0}function Ct(t,n,i,o){this._x=t||0,this._y=n||0,this._z=i||0,this._w=o!==void 0?o:1}function G(t,n,i){this.x=t||0,this.y=n||0,this.z=i||0}function Ut(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function le(t,n,i,o,u,l,f,d,g,v,y,b){Dt.call(this,null,l,f,d,g,v,o,u,y,b),this.image={data:t,width:n,height:i},this.magFilter=g!==void 0?g:Lr,this.minFilter=v!==void 0?v:Lr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function pe(t,n,i,o,u,l,f,d,g,v){t=t!==void 0?t:[],n=n!==void 0?n:cu,Dt.call(this,t,n,i,o,u,l,f,d,g,v),this.flipY=!1}function xe(){this.seq=[],this.map={}}function ie(t,n,i){var o=t[0];if(o<=0||o>0)return t;var u=n*i,l=Zf[u];if(l===void 0&&(l=new Float32Array(u),Zf[u]=l),n!==0){o.toArray(l,0);for(var f=1,d=0;f!==n;++f)d+=i,t[f].toArray(l,d)}return l}function un(t,n){var i=Kf[n];i===void 0&&(i=new Int32Array(n),Kf[n]=i);for(var o=0;o!==n;++o)i[o]=t.allocTextureUnit();return i}function ge(t,n){t.uniform1f(this.addr,n)}function en(t,n){t.uniform1i(this.addr,n)}function Ye(t,n){n.x===void 0?t.uniform2fv(this.addr,n):t.uniform2f(this.addr,n.x,n.y)}function Fe(t,n){n.x!==void 0?t.uniform3f(this.addr,n.x,n.y,n.z):n.r!==void 0?t.uniform3f(this.addr,n.r,n.g,n.b):t.uniform3fv(this.addr,n)}function In(t,n){n.x===void 0?t.uniform4fv(this.addr,n):t.uniform4f(this.addr,n.x,n.y,n.z,n.w)}function dr(t,n){t.uniformMatrix2fv(this.addr,!1,n.elements||n)}function Rt(t,n){n.elements===void 0?t.uniformMatrix3fv(this.addr,!1,n):($f.set(n.elements),t.uniformMatrix3fv(this.addr,!1,$f))}function je(t,n){n.elements===void 0?t.uniformMatrix4fv(this.addr,!1,n):(Qf.set(n.elements),t.uniformMatrix4fv(this.addr,!1,Qf))}function $e(t,n,i){var o=i.allocTextureUnit();t.uniform1i(this.addr,o),i.setTexture2D(n||qf,o)}function xn(t,n,i){var o=i.allocTextureUnit();t.uniform1i(this.addr,o),i.setTextureCube(n||Yf,o)}function ur(t,n){t.uniform2iv(this.addr,n)}function Kr(t,n){t.uniform3iv(this.addr,n)}function zt(t,n){t.uniform4iv(this.addr,n)}function ut(t){switch(t){case 5126:return ge;case 35664:return Ye;case 35665:return Fe;case 35666:return In;case 35674:return dr;case 35675:return Rt;case 35676:return je;case 35678:case 36198:return $e;case 35680:return xn;case 5124:case 35670:return en;case 35667:case 35671:return ur;case 35668:case 35672:return Kr;case 35669:case 35673:return zt}}function Nt(t,n){t.uniform1fv(this.addr,n)}function Ae(t,n){t.uniform1iv(this.addr,n)}function tt(t,n){t.uniform2fv(this.addr,ie(n,this.size,2))}function _n(t,n){t.uniform3fv(this.addr,ie(n,this.size,3))}function Sn(t,n){t.uniform4fv(this.addr,ie(n,this.size,4))}function cr(t,n){t.uniformMatrix2fv(this.addr,!1,ie(n,this.size,4))}function We(t,n){t.uniformMatrix3fv(this.addr,!1,ie(n,this.size,9))}function cn(t,n){t.uniformMatrix4fv(this.addr,!1,ie(n,this.size,16))}function Lu(t,n,i){var o=n.length,u=un(i,o);t.uniform1iv(this.addr,u);for(var l=0;l!==o;++l)i.setTexture2D(n[l]||qf,u[l])}function Jn(t,n,i){var o=n.length,u=un(i,o);t.uniform1iv(this.addr,u);for(var l=0;l!==o;++l)i.setTextureCube(n[l]||Yf,u[l])}function Si(t){switch(t){case 5126:return Nt;case 35664:return tt;case 35665:return _n;case 35666:return Sn;case 35674:return cr;case 35675:return We;case 35676:return cn;case 35678:return Lu;case 35680:return Jn;case 5124:case 35670:return Ae;case 35667:case 35671:return ur;case 35668:case 35672:return Kr;case 35669:case 35673:return zt}}function so(t,n,i){this.id=t,this.addr=i,this.setValue=ut(n.type)}function uo(t,n,i){this.id=t,this.addr=i,this.size=n.size,this.setValue=Si(n.type)}function Ea(t){this.id=t,xe.call(this)}function Ai(t,n){t.seq.push(n),t.map[n.id]=n}function Zi(t,n,i){var o=t.name,u=o.length;for(yh.lastIndex=0;;){var l=yh.exec(o),f=yh.lastIndex,d=l[1],g=l[2]==="]",v=l[3];if(g&&(d|=0),v===void 0||v==="["&&f+2===u){Ai(i,v===void 0?new so(d,t,n):new uo(d,t,n));break}var y=i.map,b=y[d];b===void 0&&(b=new Ea(d),Ai(i,b)),i=b}}function pr(t,n,i){xe.call(this),this.renderer=i;for(var o=t.getProgramParameter(n,t.ACTIVE_UNIFORMS),u=0;u<o;++u){var l=t.getActiveUniform(n,u),f=l.name;Zi(l,t.getUniformLocation(n,f),this)}}function ee(t,n,i){return n===void 0&&i===void 0?this.set(t):this.setRGB(t,n,i)}function Xn(t,n){this.min=t!==void 0?t:new gt(1/0,1/0),this.max=n!==void 0?n:new gt(-1/0,-1/0)}function Ki(t,n,i,o,u){function l(){var N=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),F=new Uint16Array([0,1,2,0,2,3]);d=n.createBuffer(),g=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,d),n.bufferData(n.ARRAY_BUFFER,N,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,g),n.bufferData(n.ELEMENT_ARRAY_BUFFER,F,n.STATIC_DRAW),T=n.createTexture(),L=n.createTexture(),i.bindTexture(n.TEXTURE_2D,T),n.texImage2D(n.TEXTURE_2D,0,n.RGB,16,16,0,n.RGB,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),i.bindTexture(n.TEXTURE_2D,L),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,16,16,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),v={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join(`
`),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join(`
`)},y=f(v),b={vertex:n.getAttribLocation(y,"position"),uv:n.getAttribLocation(y,"uv")},w={renderType:n.getUniformLocation(y,"renderType"),map:n.getUniformLocation(y,"map"),occlusionMap:n.getUniformLocation(y,"occlusionMap"),opacity:n.getUniformLocation(y,"opacity"),color:n.getUniformLocation(y,"color"),scale:n.getUniformLocation(y,"scale"),rotation:n.getUniformLocation(y,"rotation"),screenPosition:n.getUniformLocation(y,"screenPosition")}}function f(N){var F=n.createProgram(),D=n.createShader(n.FRAGMENT_SHADER),U=n.createShader(n.VERTEX_SHADER),z="precision "+u.precision+` float;
`;return n.shaderSource(D,z+N.fragmentShader),n.shaderSource(U,z+N.vertexShader),n.compileShader(D),n.compileShader(U),n.attachShader(F,D),n.attachShader(F,U),n.linkProgram(F),F}var d,g,v,y,b,w,T,L;this.render=function(N,F,D,U){if(N.length!==0){var z=new G,B=U.w/U.z,Q=.5*U.z,$=.5*U.w,K=16/U.w,lt=new gt(K*B,K),Y=new G(1,1,0),et=new gt(1,1),ht=new Xn;ht.min.set(U.x,U.y),ht.max.set(U.x+(U.z-16),U.y+(U.w-16)),y===void 0&&l(),i.useProgram(y),i.initAttributes(),i.enableAttribute(b.vertex),i.enableAttribute(b.uv),i.disableUnusedAttributes(),n.uniform1i(w.occlusionMap,0),n.uniform1i(w.map,1),n.bindBuffer(n.ARRAY_BUFFER,d),n.vertexAttribPointer(b.vertex,2,n.FLOAT,!1,16,0),n.vertexAttribPointer(b.uv,2,n.FLOAT,!1,16,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,g),i.disable(n.CULL_FACE),i.buffers.depth.setMask(!1);for(var Tt=0,Z=N.length;Tt<Z;Tt++){K=16/U.w,lt.set(K*B,K);var X=N[Tt];if(z.set(X.matrixWorld.elements[12],X.matrixWorld.elements[13],X.matrixWorld.elements[14]),z.applyMatrix4(D.matrixWorldInverse),z.applyMatrix4(D.projectionMatrix),Y.copy(z),et.x=U.x+Y.x*Q+Q-8,et.y=U.y+Y.y*$+$-8,ht.containsPoint(et)===!0){i.activeTexture(n.TEXTURE0),i.bindTexture(n.TEXTURE_2D,null),i.activeTexture(n.TEXTURE1),i.bindTexture(n.TEXTURE_2D,T),n.copyTexImage2D(n.TEXTURE_2D,0,n.RGB,et.x,et.y,16,16,0),n.uniform1i(w.renderType,0),n.uniform2f(w.scale,lt.x,lt.y),n.uniform3f(w.screenPosition,Y.x,Y.y,Y.z),i.disable(n.BLEND),i.enable(n.DEPTH_TEST),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0),i.activeTexture(n.TEXTURE0),i.bindTexture(n.TEXTURE_2D,L),n.copyTexImage2D(n.TEXTURE_2D,0,n.RGBA,et.x,et.y,16,16,0),n.uniform1i(w.renderType,1),i.disable(n.DEPTH_TEST),i.activeTexture(n.TEXTURE1),i.bindTexture(n.TEXTURE_2D,T),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0),X.positionScreen.copy(Y),X.customUpdateCallback?X.customUpdateCallback(X):X.updateLensFlares(),n.uniform1i(w.renderType,2),i.enable(n.BLEND);for(var ft=0,at=X.lensFlares.length;ft<at;ft++){var wt=X.lensFlares[ft];wt.opacity>.001&&wt.scale>.001&&(Y.x=wt.x,Y.y=wt.y,Y.z=wt.z,K=wt.size*wt.scale/U.w,lt.x=K*B,lt.y=K,n.uniform3f(w.screenPosition,Y.x,Y.y,Y.z),n.uniform2f(w.scale,lt.x,lt.y),n.uniform1f(w.rotation,wt.rotation),n.uniform1f(w.opacity,wt.opacity),n.uniform3f(w.color,wt.color.r,wt.color.g,wt.color.b),i.setBlending(wt.blending,wt.blendEquation,wt.blendSrc,wt.blendDst),o.setTexture2D(wt.texture,1),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0))}}}i.enable(n.CULL_FACE),i.enable(n.DEPTH_TEST),i.buffers.depth.setMask(!0),i.reset()}}}function kr(t,n,i,o,u,l,f,d,g){Dt.call(this,t,n,i,o,u,l,f,d,g),this.needsUpdate=!0}function Qi(t,n,i,o,u){function l(){var D=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),U=new Uint16Array([0,1,2,0,2,3]);g=n.createBuffer(),v=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,g),n.bufferData(n.ARRAY_BUFFER,D,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,v),n.bufferData(n.ELEMENT_ARRAY_BUFFER,U,n.STATIC_DRAW),y=f(),b={position:n.getAttribLocation(y,"position"),uv:n.getAttribLocation(y,"uv")},w={uvOffset:n.getUniformLocation(y,"uvOffset"),uvScale:n.getUniformLocation(y,"uvScale"),rotation:n.getUniformLocation(y,"rotation"),scale:n.getUniformLocation(y,"scale"),color:n.getUniformLocation(y,"color"),map:n.getUniformLocation(y,"map"),opacity:n.getUniformLocation(y,"opacity"),modelViewMatrix:n.getUniformLocation(y,"modelViewMatrix"),projectionMatrix:n.getUniformLocation(y,"projectionMatrix"),fogType:n.getUniformLocation(y,"fogType"),fogDensity:n.getUniformLocation(y,"fogDensity"),fogNear:n.getUniformLocation(y,"fogNear"),fogFar:n.getUniformLocation(y,"fogFar"),fogColor:n.getUniformLocation(y,"fogColor"),alphaTest:n.getUniformLocation(y,"alphaTest")};var z=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");z.width=8,z.height=8;var B=z.getContext("2d");B.fillStyle="white",B.fillRect(0,0,8,8),T=new kr(z)}function f(){var D=n.createProgram(),U=n.createShader(n.VERTEX_SHADER),z=n.createShader(n.FRAGMENT_SHADER);return n.shaderSource(U,["precision "+u.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join(`
`)),n.shaderSource(z,["precision "+u.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join(`
`)),n.compileShader(U),n.compileShader(z),n.attachShader(D,U),n.attachShader(D,z),n.linkProgram(D),D}function d(D,U){return D.renderOrder!==U.renderOrder?D.renderOrder-U.renderOrder:D.z!==U.z?U.z-D.z:U.id-D.id}var g,v,y,b,w,T,L=new G,N=new Ct,F=new G;this.render=function(D,U,z){if(D.length!==0){y===void 0&&l(),i.useProgram(y),i.initAttributes(),i.enableAttribute(b.position),i.enableAttribute(b.uv),i.disableUnusedAttributes(),i.disable(n.CULL_FACE),i.enable(n.BLEND),n.bindBuffer(n.ARRAY_BUFFER,g),n.vertexAttribPointer(b.position,2,n.FLOAT,!1,16,0),n.vertexAttribPointer(b.uv,2,n.FLOAT,!1,16,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,v),n.uniformMatrix4fv(w.projectionMatrix,!1,z.projectionMatrix.elements),i.activeTexture(n.TEXTURE0),n.uniform1i(w.map,0);var B=0,Q=0,$=U.fog;$?(n.uniform3f(w.fogColor,$.color.r,$.color.g,$.color.b),$.isFog?(n.uniform1f(w.fogNear,$.near),n.uniform1f(w.fogFar,$.far),n.uniform1i(w.fogType,1),B=1,Q=1):$.isFogExp2&&(n.uniform1f(w.fogDensity,$.density),n.uniform1i(w.fogType,2),B=2,Q=2)):(n.uniform1i(w.fogType,0),B=0,Q=0);for(var K=0,lt=D.length;K<lt;K++){var Y=D[K];Y.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,Y.matrixWorld),Y.z=-Y.modelViewMatrix.elements[14]}D.sort(d);for(var et=[],K=0,lt=D.length;K<lt;K++){var Y=D[K],ht=Y.material;if(ht.visible!==!1){Y.onBeforeRender(t,U,z,void 0,ht,void 0),n.uniform1f(w.alphaTest,ht.alphaTest),n.uniformMatrix4fv(w.modelViewMatrix,!1,Y.modelViewMatrix.elements),Y.matrixWorld.decompose(L,N,F),et[0]=F.x,et[1]=F.y;var Tt=0;U.fog&&ht.fog&&(Tt=Q),B!==Tt&&(n.uniform1i(w.fogType,Tt),B=Tt),ht.map!==null?(n.uniform2f(w.uvOffset,ht.map.offset.x,ht.map.offset.y),n.uniform2f(w.uvScale,ht.map.repeat.x,ht.map.repeat.y)):(n.uniform2f(w.uvOffset,0,0),n.uniform2f(w.uvScale,1,1)),n.uniform1f(w.opacity,ht.opacity),n.uniform3f(w.color,ht.color.r,ht.color.g,ht.color.b),n.uniform1f(w.rotation,ht.rotation),n.uniform2fv(w.scale,et),i.setBlending(ht.blending,ht.blendEquation,ht.blendSrc,ht.blendDst,ht.blendEquationAlpha,ht.blendSrcAlpha,ht.blendDstAlpha,ht.premultipliedAlpha),i.buffers.depth.setTest(ht.depthTest),i.buffers.depth.setMask(ht.depthWrite),o.setTexture2D(ht.map||T,0),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0),Y.onAfterRender(t,U,z,void 0,ht,void 0)}}i.enable(n.CULL_FACE),i.reset()}}}function _e(){Object.defineProperty(this,"id",{value:Np++}),this.uuid=Ce.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Zo,this.side=fa,this.flatShading=!1,this.vertexColors=uc,this.opacity=1,this.transparent=!1,this.blendSrc=Za,this.blendDst=fc,this.blendEquation=lc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=dc,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function qn(t){_e.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,this.fragmentShader=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,t!==void 0&&(t.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function Hr(t){_e.call(this),this.type="MeshDepthMaterial",this.depthPacking=vh,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function tr(t){_e.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new G,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}function _t(t,n){this.min=t!==void 0?t:new G(1/0,1/0,1/0),this.max=n!==void 0?n:new G(-1/0,-1/0,-1/0)}function Xe(t,n){this.center=t!==void 0?t:new G,this.radius=n!==void 0?n:0}function dn(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function bn(t,n){this.normal=t!==void 0?t:new G(1,0,0),this.constant=n!==void 0?n:0}function Ri(t,n,i,o,u,l){this.planes=[t!==void 0?t:new bn,n!==void 0?n:new bn,i!==void 0?i:new bn,o!==void 0?o:new bn,u!==void 0?u:new bn,l!==void 0?l:new bn]}function Li(t,n,i){function o(et,ht,Tt,Z,X,ft){var at=et.geometry,wt=null,vt=L,Et=et.customDepthMaterial;if(Tt&&(vt=N,Et=et.customDistanceMaterial),Et)wt=Et;else{var St=!1;ht.morphTargets&&(at&&at.isBufferGeometry?St=at.morphAttributes&&at.morphAttributes.position&&at.morphAttributes.position.length>0:at&&at.isGeometry&&(St=at.morphTargets&&at.morphTargets.length>0)),et.isSkinnedMesh&&ht.skinning===!1&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",et);var qt=et.isSkinnedMesh&&ht.skinning,It=0;St&&(It|=b),qt&&(It|=w),wt=vt[It]}if(t.localClippingEnabled&&ht.clipShadows===!0&&ht.clippingPlanes.length!==0){var Ft=wt.uuid,Wt=ht.uuid,ne=F[Ft];ne===void 0&&(ne={},F[Ft]=ne);var kt=ne[Wt];kt===void 0&&(kt=wt.clone(),ne[Wt]=kt),wt=kt}wt.visible=ht.visible,wt.wireframe=ht.wireframe;var $t=ht.side;return Y.renderSingleSided&&$t==Yo&&($t=fa),Y.renderReverseSided&&($t===fa?$t=da:$t===da&&($t=fa)),wt.side=$t,wt.clipShadows=ht.clipShadows,wt.clippingPlanes=ht.clippingPlanes,wt.clipIntersection=ht.clipIntersection,wt.wireframeLinewidth=ht.wireframeLinewidth,wt.linewidth=ht.linewidth,Tt&&wt.isMeshDistanceMaterial&&(wt.referencePosition.copy(Z),wt.nearDistance=X,wt.farDistance=ft),wt}function u(et,ht,Tt,Z){if(et.visible!==!1){if(et.layers.test(ht.layers)&&(et.isMesh||et.isLine||et.isPoints)&&et.castShadow&&(!et.frustumCulled||l.intersectsObject(et))){et.modelViewMatrix.multiplyMatrices(Tt.matrixWorldInverse,et.matrixWorld);var X=n.update(et),ft=et.material;if(Array.isArray(ft))for(var at=X.groups,wt=0,vt=at.length;wt<vt;wt++){var Et=at[wt],St=ft[Et.materialIndex];if(St&&St.visible){var qt=o(et,St,Z,y,Tt.near,Tt.far);t.renderBufferDirect(Tt,null,X,qt,et,Et)}}else if(ft.visible){var qt=o(et,ft,Z,y,Tt.near,Tt.far);t.renderBufferDirect(Tt,null,X,qt,et,null)}}for(var It=et.children,Ft=0,Wt=It.length;Ft<Wt;Ft++)u(It[Ft],ht,Tt,Z)}}for(var l=new Ri,f=new Ut,d=new gt,g=new gt(i,i),v=new G,y=new G,b=1,w=2,T=1+(b|w),L=new Array(T),N=new Array(T),F={},D=[new G(1,0,0),new G(-1,0,0),new G(0,0,1),new G(0,0,-1),new G(0,1,0),new G(0,-1,0)],U=[new G(0,1,0),new G(0,1,0),new G(0,1,0),new G(0,1,0),new G(0,0,1),new G(0,0,-1)],z=[new Bt,new Bt,new Bt,new Bt,new Bt,new Bt],B=0;B!==T;++B){var Q=(B&b)!=0,$=(B&w)!=0,K=new Hr({depthPacking:Xf,morphTargets:Q,skinning:$});L[B]=K;var lt=new tr({morphTargets:Q,skinning:$});N[B]=lt}var Y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ru,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(et,ht,Tt){if(Y.enabled!==!1&&(Y.autoUpdate!==!1||Y.needsUpdate!==!1)&&et.length!==0){var Z=t.context,X=t.state;X.disable(Z.BLEND),X.buffers.color.setClear(1,1,1,1),X.buffers.depth.setTest(!0),X.setScissorTest(!1);for(var ft,at=0,wt=et.length;at<wt;at++){var vt=et[at],Et=vt.shadow,St=vt&&vt.isPointLight;if(Et!==void 0){var qt=Et.camera;if(d.copy(Et.mapSize),d.min(g),St){var It=d.x,Ft=d.y;z[0].set(2*It,Ft,It,Ft),z[1].set(0,Ft,It,Ft),z[2].set(3*It,Ft,It,Ft),z[3].set(It,Ft,It,Ft),z[4].set(3*It,0,It,Ft),z[5].set(It,0,It,Ft),d.x*=4,d.y*=2}if(Et.map===null){var Wt={minFilter:Lr,magFilter:Lr,format:ai};Et.map=new de(d.x,d.y,Wt),Et.map.texture.name=vt.name+".shadowMap",qt.updateProjectionMatrix()}Et.isSpotLightShadow&&Et.update(vt);var ne=Et.map,kt=Et.matrix;y.setFromMatrixPosition(vt.matrixWorld),qt.position.copy(y),St?(ft=6,kt.makeTranslation(-y.x,-y.y,-y.z)):(ft=1,v.setFromMatrixPosition(vt.target.matrixWorld),qt.lookAt(v),qt.updateMatrixWorld(),kt.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),kt.multiply(qt.projectionMatrix),kt.multiply(qt.matrixWorldInverse)),t.setRenderTarget(ne),t.clear();for(var $t=0;$t<ft;$t++){if(St){v.copy(qt.position),v.add(D[$t]),qt.up.copy(U[$t]),qt.lookAt(v),qt.updateMatrixWorld();var Le=z[$t];X.viewport(Le)}f.multiplyMatrices(qt.projectionMatrix,qt.matrixWorldInverse),l.setFromMatrix(f),u(ht,Tt,qt,St)}}else console.warn("THREE.WebGLShadowMap:",vt,"has no shadow.")}Y.needsUpdate=!1}}}function op(t){function n(d,g){var v=d.array,y=d.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW,b=t.createBuffer();t.bindBuffer(g,b),t.bufferData(g,v,y),d.onUploadCallback();var w=t.FLOAT;return v instanceof Float32Array?w=t.FLOAT:v instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):v instanceof Uint16Array?w=t.UNSIGNED_SHORT:v instanceof Int16Array?w=t.SHORT:v instanceof Uint32Array?w=t.UNSIGNED_INT:v instanceof Int32Array?w=t.INT:v instanceof Int8Array?w=t.BYTE:v instanceof Uint8Array&&(w=t.UNSIGNED_BYTE),{buffer:b,type:w,bytesPerElement:v.BYTES_PER_ELEMENT,version:d.version}}function i(d,g,v){var y=g.array,b=g.updateRange;t.bindBuffer(v,d),g.dynamic===!1?t.bufferData(v,y,t.STATIC_DRAW):b.count===-1?t.bufferSubData(v,0,y):b.count===0?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(v,b.offset*y.BYTES_PER_ELEMENT,y.subarray(b.offset,b.offset+b.count)),b.count=-1)}function o(d){return d.isInterleavedBufferAttribute&&(d=d.data),f[d.uuid]}function u(d){d.isInterleavedBufferAttribute&&(d=d.data);var g=f[d.uuid];g&&(t.deleteBuffer(g.buffer),delete f[d.uuid])}function l(d,g){d.isInterleavedBufferAttribute&&(d=d.data);var v=f[d.uuid];v===void 0?f[d.uuid]=n(d,g):v.version<d.version&&(i(v.buffer,d,g),v.version=d.version)}var f={};return{get:o,remove:u,update:l}}function $i(t,n,i,o){this._x=t||0,this._y=n||0,this._z=i||0,this._order=o||$i.DefaultOrder}function sl(){this.mask=1}function Yt(){function t(){u.setFromEuler(o,!1)}function n(){o.setFromQuaternion(u,void 0,!1)}Object.defineProperty(this,"id",{value:Ip++}),this.uuid=Ce.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Yt.DefaultUp.clone();var i=new G,o=new $i,u=new Ct,l=new G(1,1,1);o.onChange(t),u.onChange(n),Object.defineProperties(this,{position:{enumerable:!0,value:i},rotation:{enumerable:!0,value:o},quaternion:{enumerable:!0,value:u},scale:{enumerable:!0,value:l},modelViewMatrix:{value:new Ut},normalMatrix:{value:new dn}}),this.matrix=new Ut,this.matrixWorld=new Ut,this.matrixAutoUpdate=Yt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new sl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function di(){Yt.call(this),this.type="Camera",this.matrixWorldInverse=new Ut,this.projectionMatrix=new Ut}function co(t,n,i,o,u,l){di.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=n,this.top=i,this.bottom=o,this.near=u!==void 0?u:.1,this.far=l!==void 0?l:2e3,this.updateProjectionMatrix()}function zn(t,n,i,o){di.call(this),this.type="PerspectiveCamera",this.fov=t!==void 0?t:50,this.zoom=1,this.near=i!==void 0?i:.1,this.far=o!==void 0?o:2e3,this.focus=10,this.aspect=n!==void 0?n:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Ci(t,n,i,o,u,l){this.a=t,this.b=n,this.c=i,this.normal=o&&o.isVector3?o:new G,this.vertexNormals=Array.isArray(o)?o:[],this.color=u&&u.isColor?u:new ee,this.vertexColors=Array.isArray(u)?u:[],this.materialIndex=l!==void 0?l:0}function Cu(){return Op++}function Ee(){Object.defineProperty(this,"id",{value:Cu()}),this.uuid=Ce.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Re(t,n,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=Ce.generateUUID(),this.name="",this.array=t,this.itemSize=n,this.count=t!==void 0?t.length/n:0,this.normalized=i===!0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Bn(t,n){Re.call(this,new Int8Array(t),n)}function Qr(t,n){Re.call(this,new Uint8Array(t),n)}function Ta(t,n){Re.call(this,new Uint8ClampedArray(t),n)}function Ji(t,n){Re.call(this,new Int16Array(t),n)}function Pi(t,n){Re.call(this,new Uint16Array(t),n)}function gs(t,n){Re.call(this,new Int32Array(t),n)}function Sa(t,n){Re.call(this,new Uint32Array(t),n)}function jt(t,n){Re.call(this,new Float32Array(t),n)}function vs(t,n){Re.call(this,new Float64Array(t),n)}function lo(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function pi(t){if(t.length===0)return-1/0;for(var n=t[0],i=1,o=t.length;i<o;++i)t[i]>n&&(n=t[i]);return n}function Zt(){Object.defineProperty(this,"id",{value:Cu()}),this.uuid=Ce.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Aa(t,n,i,o,u,l){Ee.call(this),this.type="BoxGeometry",this.parameters={width:t,height:n,depth:i,widthSegments:o,heightSegments:u,depthSegments:l},this.fromBufferGeometry(new ta(t,n,i,o,u,l)),this.mergeVertices()}function ta(t,n,i,o,u,l){function f(L,N,F,D,U,z,B,Q,$,K,lt){var Y,et,ht=z/$,Tt=B/K,Z=z/2,X=B/2,ft=Q/2,at=$+1,wt=K+1,vt=0,Et=0,St=new G;for(et=0;et<wt;et++){var qt=et*Tt-X;for(Y=0;Y<at;Y++){var It=Y*ht-Z;St[L]=It*D,St[N]=qt*U,St[F]=ft,v.push(St.x,St.y,St.z),St[L]=0,St[N]=0,St[F]=Q>0?1:-1,y.push(St.x,St.y,St.z),b.push(Y/$),b.push(1-et/K),vt+=1}}for(et=0;et<K;et++)for(Y=0;Y<$;Y++){var Ft=w+Y+at*et,Wt=w+Y+at*(et+1),ne=w+(Y+1)+at*(et+1),kt=w+(Y+1)+at*et;g.push(Ft,Wt,kt),g.push(Wt,ne,kt),Et+=6}d.addGroup(T,Et,lt),T+=Et,w+=vt}Zt.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:n,depth:i,widthSegments:o,heightSegments:u,depthSegments:l};var d=this;o=Math.floor(o)||1,u=Math.floor(u)||1,l=Math.floor(l)||1;var g=[],v=[],y=[],b=[],w=0,T=0;f("z","y","x",-1,-1,i,n,t,l,u,0),f("z","y","x",1,-1,i,n,-t,l,u,1),f("x","z","y",1,1,t,i,n,o,l,2),f("x","z","y",1,-1,t,i,-n,o,l,3),f("x","y","z",1,-1,t,n,i,o,u,4),f("x","y","z",-1,-1,t,n,-i,o,u,5),this.setIndex(g),this.addAttribute("position",new jt(v,3)),this.addAttribute("normal",new jt(y,3)),this.addAttribute("uv",new jt(b,2))}function Ra(t,n,i,o){Ee.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:n,widthSegments:i,heightSegments:o},this.fromBufferGeometry(new $r(t,n,i,o)),this.mergeVertices()}function $r(t,n,i,o){Zt.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:n,widthSegments:i,heightSegments:o};var u,l,f=t/2,d=n/2,g=Math.floor(i)||1,v=Math.floor(o)||1,y=g+1,b=v+1,w=t/g,T=n/v,L=[],N=[],F=[],D=[];for(l=0;l<b;l++){var U=l*T-d;for(u=0;u<y;u++){var z=u*w-f;N.push(z,-U,0),F.push(0,0,1),D.push(u/g),D.push(1-l/v)}}for(l=0;l<v;l++)for(u=0;u<g;u++){var B=u+y*l,Q=u+y*(l+1),$=u+1+y*(l+1),K=u+1+y*l;L.push(B,Q,K),L.push(Q,$,K)}this.setIndex(L),this.addAttribute("position",new jt(N,3)),this.addAttribute("normal",new jt(F,3)),this.addAttribute("uv",new jt(D,2))}function nn(t){_e.call(this),this.type="MeshBasicMaterial",this.color=new ee(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=su,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function ea(t,n){this.origin=t!==void 0?t:new G,this.direction=n!==void 0?n:new G}function ho(t,n){this.start=t!==void 0?t:new G,this.end=n!==void 0?n:new G}function Gr(t,n,i){this.a=t!==void 0?t:new G,this.b=n!==void 0?n:new G,this.c=i!==void 0?i:new G}function wn(t,n){Yt.call(this),this.type="Mesh",this.geometry=t!==void 0?t:new Zt,this.material=n!==void 0?n:new nn({color:16777215*Math.random()}),this.drawMode=dh,this.updateMorphTargets()}function ul(t,n,i,o){function u(b,w,T,L){var N=w.background;N===null?l(v,y):N&&N.isColor&&(l(N,1),L=!0),(t.autoClear||L)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),N&&N.isCubeTexture?(g===void 0&&(g=new wn(new ta(1,1,1),new qn({uniforms:Ja.cube.uniforms,vertexShader:Ja.cube.vertexShader,fragmentShader:Ja.cube.fragmentShader,side:da,depthTest:!0,depthWrite:!1,polygonOffset:!0,fog:!1})),g.geometry.removeAttribute("normal"),g.geometry.removeAttribute("uv"),g.onBeforeRender=function(F,D,U){var z=U.far;this.matrixWorld.makeScale(z,z,z),this.matrixWorld.copyPosition(U.matrixWorld),this.material.polygonOffsetUnits=10*z},i.update(g.geometry)),g.material.uniforms.tCube.value=N,b.push(g,g.geometry,g.material,0,null)):N&&N.isTexture&&(f===void 0&&(f=new co(-1,1,1,-1,0,1),d=new wn(new $r(2,2),new nn({depthTest:!1,depthWrite:!1,fog:!1})),i.update(d.geometry)),d.material.map=N,t.renderBufferDirect(f,null,d.geometry,d.material,d,null))}function l(b,w){n.buffers.color.setClear(b.r,b.g,b.b,w,o)}var f,d,g,v=new ee(0),y=0;return{getClearColor:function(){return v},setClearColor:function(b,w){v.set(b),y=w!==void 0?w:1,l(v,y)},getClearAlpha:function(){return y},setClearAlpha:function(b){y=b,l(v,y)},render:u}}function cl(t,n){return t.renderOrder!==n.renderOrder?t.renderOrder-n.renderOrder:t.program&&n.program&&t.program!==n.program?t.program.id-n.program.id:t.material.id!==n.material.id?t.material.id-n.material.id:t.z!==n.z?t.z-n.z:t.id-n.id}function Pu(t,n){return t.renderOrder!==n.renderOrder?t.renderOrder-n.renderOrder:t.z!==n.z?n.z-t.z:t.id-n.id}function Ni(){function t(){u=0,l.length=0,f.length=0}function n(d,g,v,y,b){var w=o[u];w===void 0?(w={id:d.id,object:d,geometry:g,material:v,program:v.program,renderOrder:d.renderOrder,z:y,group:b},o[u]=w):(w.id=d.id,w.object=d,w.geometry=g,w.material=v,w.program=v.program,w.renderOrder=d.renderOrder,w.z=y,w.group=b),(v.transparent===!0?f:l).push(w),u++}function i(){l.length>1&&l.sort(cl),f.length>1&&f.sort(Pu)}var o=[],u=0,l=[],f=[];return{opaque:l,transparent:f,init:t,push:n,sort:i}}function ll(){function t(o,u){var l=o.id+","+u.id,f=i[l];return f===void 0&&(f=new Ni,i[l]=f),f}function n(){i={}}var i={};return{get:t,dispose:n}}function hl(t,n){return Math.abs(n[1])-Math.abs(t[1])}function fl(t){function n(u,l,f,d){var g=u.morphTargetInfluences,v=g.length,y=i[l.id];if(y===void 0){y=[];for(var b=0;b<v;b++)y[b]=[b,0];i[l.id]=y}for(var w=f.morphTargets&&l.morphAttributes.position,T=f.morphNormals&&l.morphAttributes.normal,b=0;b<v;b++){var L=y[b];L[1]!==0&&(w&&l.removeAttribute("morphTarget"+b),T&&l.removeAttribute("morphNormal"+b))}for(var b=0;b<v;b++){var L=y[b];L[0]=b,L[1]=g[b]}y.sort(hl);for(var b=0;b<8;b++){var L=y[b];if(L){var N=L[0],F=L[1];if(F){w&&l.addAttribute("morphTarget"+b,w[N]),T&&l.addAttribute("morphNormal"+b,T[N]),o[b]=F;continue}}o[b]=0}d.getUniforms().setValue(t,"morphTargetInfluences",o)}var i={},o=new Float32Array(8);return{update:n}}function dl(t,n,i){function o(y){d=y}function u(y){g=y.type,v=y.bytesPerElement}function l(y,b){t.drawElements(d,b,g,y*v),i.calls++,i.vertices+=b,d===t.TRIANGLES?i.faces+=b/3:d===t.POINTS&&(i.points+=b)}function f(y,b,w){var T=n.get("ANGLE_instanced_arrays");if(T===null)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");T.drawElementsInstancedANGLE(d,w,g,b*v,y.maxInstancedCount),i.calls++,i.vertices+=w*y.maxInstancedCount,d===t.TRIANGLES?i.faces+=y.maxInstancedCount*w/3:d===t.POINTS&&(i.points+=y.maxInstancedCount*w)}var d,g,v;this.setMode=o,this.setIndex=u,this.render=l,this.renderInstances=f}function sp(t,n,i){function o(d){f=d}function u(d,g){t.drawArrays(f,d,g),i.calls++,i.vertices+=g,f===t.TRIANGLES?i.faces+=g/3:f===t.POINTS&&(i.points+=g)}function l(d,g,v){var y=n.get("ANGLE_instanced_arrays");if(y===null)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var b=d.attributes.position;b.isInterleavedBufferAttribute?(v=b.data.count,y.drawArraysInstancedANGLE(f,0,v,d.maxInstancedCount)):y.drawArraysInstancedANGLE(f,g,v,d.maxInstancedCount),i.calls++,i.vertices+=v*d.maxInstancedCount,f===t.TRIANGLES?i.faces+=d.maxInstancedCount*v/3:f===t.POINTS&&(i.points+=d.maxInstancedCount*v)}var f;this.setMode=o,this.render=u,this.renderInstances=l}function Nu(t,n,i){function o(v){var y=v.target,b=d[y.id];b.index!==null&&n.remove(b.index);for(var w in b.attributes)n.remove(b.attributes[w]);y.removeEventListener("dispose",o),delete d[y.id];var T=g[y.id];T&&(n.remove(T),delete g[y.id]),T=g[b.id],T&&(n.remove(T),delete g[b.id]),i.geometries--}function u(v,y){var b=d[y.id];return b||(y.addEventListener("dispose",o),y.isBufferGeometry?b=y:y.isGeometry&&(y._bufferGeometry===void 0&&(y._bufferGeometry=new Zt().setFromObject(v)),b=y._bufferGeometry),d[y.id]=b,i.geometries++,b)}function l(v){var y=v.index,b=v.attributes;y!==null&&n.update(y,t.ELEMENT_ARRAY_BUFFER);for(var w in b)n.update(b[w],t.ARRAY_BUFFER);var T=v.morphAttributes;for(var w in T)for(var L=T[w],N=0,F=L.length;N<F;N++)n.update(L[N],t.ARRAY_BUFFER)}function f(v){var y=g[v.id];if(y)return y;var b=[],w=v.index,T=v.attributes;if(w!==null)for(var L=w.array,N=0,F=L.length;N<F;N+=3){var D=L[N+0],U=L[N+1],z=L[N+2];b.push(D,U,U,z,z,D)}else for(var L=T.position.array,N=0,F=L.length/3-1;N<F;N+=3){var D=N+0,U=N+1,z=N+2;b.push(D,U,U,z,z,D)}return y=new(pi(b)>65535?Sa:Pi)(b,1),n.update(y,t.ELEMENT_ARRAY_BUFFER),g[v.id]=y,y}var d={},g={};return{get:u,update:l,getWireframeAttribute:f}}function na(){var t={};return{get:function(n){if(t[n.id]!==void 0)return t[n.id];var i;switch(n.type){case"DirectionalLight":i={direction:new G,color:new ee,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"SpotLight":i={position:new G,direction:new G,color:new ee,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"PointLight":i={position:new G,color:new ee,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new gt,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":i={direction:new G,skyColor:new ee,groundColor:new ee};break;case"RectAreaLight":i={color:new ee,position:new G,halfWidth:new G,halfHeight:new G}}return t[n.id]=i,i}}}function up(){function t(f,d,g){for(var v=0,y=0,b=0,w=0,T=0,L=0,N=0,F=0,D=g.matrixWorldInverse,U=0,z=f.length;U<z;U++){var B=f[U],Q=B.color,$=B.intensity,K=B.distance,lt=B.shadow&&B.shadow.map?B.shadow.map.texture:null;if(B.isAmbientLight)v+=Q.r*$,y+=Q.g*$,b+=Q.b*$;else if(B.isDirectionalLight){var Y=n.get(B);if(Y.color.copy(B.color).multiplyScalar(B.intensity),Y.direction.setFromMatrixPosition(B.matrixWorld),o.setFromMatrixPosition(B.target.matrixWorld),Y.direction.sub(o),Y.direction.transformDirection(D),Y.shadow=B.castShadow,B.castShadow){var et=B.shadow;Y.shadowBias=et.bias,Y.shadowRadius=et.radius,Y.shadowMapSize=et.mapSize}i.directionalShadowMap[w]=lt,i.directionalShadowMatrix[w]=B.shadow.matrix,i.directional[w]=Y,w++}else if(B.isSpotLight){var Y=n.get(B);if(Y.position.setFromMatrixPosition(B.matrixWorld),Y.position.applyMatrix4(D),Y.color.copy(Q).multiplyScalar($),Y.distance=K,Y.direction.setFromMatrixPosition(B.matrixWorld),o.setFromMatrixPosition(B.target.matrixWorld),Y.direction.sub(o),Y.direction.transformDirection(D),Y.coneCos=Math.cos(B.angle),Y.penumbraCos=Math.cos(B.angle*(1-B.penumbra)),Y.decay=B.distance===0?0:B.decay,Y.shadow=B.castShadow,B.castShadow){var et=B.shadow;Y.shadowBias=et.bias,Y.shadowRadius=et.radius,Y.shadowMapSize=et.mapSize}i.spotShadowMap[L]=lt,i.spotShadowMatrix[L]=B.shadow.matrix,i.spot[L]=Y,L++}else if(B.isRectAreaLight){var Y=n.get(B);Y.color.copy(Q).multiplyScalar($/(B.width*B.height)),Y.position.setFromMatrixPosition(B.matrixWorld),Y.position.applyMatrix4(D),l.identity(),u.copy(B.matrixWorld),u.premultiply(D),l.extractRotation(u),Y.halfWidth.set(.5*B.width,0,0),Y.halfHeight.set(0,.5*B.height,0),Y.halfWidth.applyMatrix4(l),Y.halfHeight.applyMatrix4(l),i.rectArea[N]=Y,N++}else if(B.isPointLight){var Y=n.get(B);if(Y.position.setFromMatrixPosition(B.matrixWorld),Y.position.applyMatrix4(D),Y.color.copy(B.color).multiplyScalar(B.intensity),Y.distance=B.distance,Y.decay=B.distance===0?0:B.decay,Y.shadow=B.castShadow,B.castShadow){var et=B.shadow;Y.shadowBias=et.bias,Y.shadowRadius=et.radius,Y.shadowMapSize=et.mapSize,Y.shadowCameraNear=et.camera.near,Y.shadowCameraFar=et.camera.far}i.pointShadowMap[T]=lt,i.pointShadowMatrix[T]=B.shadow.matrix,i.point[T]=Y,T++}else if(B.isHemisphereLight){var Y=n.get(B);Y.direction.setFromMatrixPosition(B.matrixWorld),Y.direction.transformDirection(D),Y.direction.normalize(),Y.skyColor.copy(B.color).multiplyScalar($),Y.groundColor.copy(B.groundColor).multiplyScalar($),i.hemi[F]=Y,F++}}i.ambient[0]=v,i.ambient[1]=y,i.ambient[2]=b,i.directional.length=w,i.spot.length=L,i.rectArea.length=N,i.point.length=T,i.hemi.length=F,i.hash=w+","+T+","+L+","+N+","+F+","+d.length}var n=new na,i={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},o=new G,u=new Ut,l=new Ut;return{setup:t,state:i}}function Jr(t,n){function i(l){var f=n.frame,d=l.geometry,g=t.get(l,d);return u[g.id]!==f&&(d.isGeometry&&g.updateFromObject(l),t.update(g),u[g.id]=f),g}function o(){u={}}var u={};return{update:i,clear:o}}function La(t){for(var n=t.split(`
`),i=0;i<n.length;i++)n[i]=i+1+": "+n[i];return n.join(`
`)}function pl(t,n,i){var o=t.createShader(n);return t.shaderSource(o,i),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),t.getShaderInfoLog(o)!==""&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",n===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(o),La(i)),o}function ml(t){switch(t){case mu:return["Linear","( value )"];case ph:return["sRGB","( value )"];case gh:return["RGBE","( value )"];case Vf:return["RGBM","( value, 7.0 )"];case jf:return["RGBM","( value, 16.0 )"];case Wf:return["RGBD","( value, 256.0 )"];case mh:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function gl(t,n){var i=ml(n);return"vec4 "+t+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function vl(t,n){var i=ml(n);return"vec4 "+t+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function cp(t,n){var i;switch(n){case ih:i="Linear";break;case Uf:i="Reinhard";break;case Df:i="Uncharted2";break;case uu:i="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+n)}return"vec3 "+t+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function Gn(t,n,i){return t=t||{},[t.derivatives||n.envMapCubeUV||n.bumpMap||n.normalMap||n.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||n.logarithmicDepthBuffer)&&i.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&i.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||n.envMap)&&i.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ys).join(`
`)}function cf(t){var n=[];for(var i in t){var o=t[i];o!==!1&&n.push("#define "+i+" "+o)}return n.join(`
`)}function lp(t,n,i){for(var o={},u=t.getProgramParameter(n,t.ACTIVE_ATTRIBUTES),l=0;l<u;l++){var f=t.getActiveAttrib(n,l),d=f.name;o[d]=t.getAttribLocation(n,d)}return o}function ys(t){return t!==""}function lf(t,n){return t.replace(/NUM_DIR_LIGHTS/g,n.numDirLights).replace(/NUM_SPOT_LIGHTS/g,n.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,n.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,n.numPointLights).replace(/NUM_HEMI_LIGHTS/g,n.numHemiLights)}function yl(t){function n(o,u){var l=Je[u];if(l===void 0)throw new Error("Can not resolve #include <"+u+">");return yl(l)}var i=/^[ \t]*#include +<([\w\d.]+)>/gm;return t.replace(i,n)}function xl(t){function n(o,u,l,f){for(var d="",g=parseInt(u);g<parseInt(l);g++)d+=f.replace(/\[ i \]/g,"[ "+g+" ]");return d}var i=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return t.replace(i,n)}function hf(t,n,i,o,u,l){var f=t.context,d=o.defines,g=u.vertexShader,v=u.fragmentShader,y="SHADOWMAP_TYPE_BASIC";l.shadowMapType===ru?y="SHADOWMAP_TYPE_PCF":l.shadowMapType===sc&&(y="SHADOWMAP_TYPE_PCF_SOFT");var b="ENVMAP_TYPE_CUBE",w="ENVMAP_MODE_REFLECTION",T="ENVMAP_BLENDING_MULTIPLY";if(l.envMap){switch(o.envMap.mapping){case cu:case vc:b="ENVMAP_TYPE_CUBE";break;case _c:case bc:b="ENVMAP_TYPE_CUBE_UV";break;case yc:case $o:b="ENVMAP_TYPE_EQUIREC";break;case xc:b="ENVMAP_TYPE_SPHERE"}switch(o.envMap.mapping){case vc:case $o:w="ENVMAP_MODE_REFRACTION"}switch(o.combine){case su:T="ENVMAP_BLENDING_MULTIPLY";break;case Of:T="ENVMAP_BLENDING_MIX";break;case mc:T="ENVMAP_BLENDING_ADD"}}var L,N,F=t.gammaFactor>0?t.gammaFactor:1,D=Gn(o.extensions,l,n),U=cf(d),z=f.createProgram();o.isRawShaderMaterial?(L=[U,`
`].filter(ys).join(`
`),N=[D,U,`
`].filter(ys).join(`
`)):(L=["precision "+l.precision+" float;","precision "+l.precision+" int;","#define SHADER_NAME "+u.name,U,l.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+F,"#define MAX_BONES "+l.maxBones,l.useFog&&l.fog?"#define USE_FOG":"",l.useFog&&l.fogExp?"#define FOG_EXP2":"",l.map?"#define USE_MAP":"",l.envMap?"#define USE_ENVMAP":"",l.envMap?"#define "+w:"",l.lightMap?"#define USE_LIGHTMAP":"",l.aoMap?"#define USE_AOMAP":"",l.emissiveMap?"#define USE_EMISSIVEMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.displacementMap&&l.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.roughnessMap?"#define USE_ROUGHNESSMAP":"",l.metalnessMap?"#define USE_METALNESSMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.vertexColors?"#define USE_COLOR":"",l.flatShading?"#define FLAT_SHADED":"",l.skinning?"#define USE_SKINNING":"",l.useVertexTexture?"#define BONE_TEXTURE":"",l.morphTargets?"#define USE_MORPHTARGETS":"",l.morphNormals&&l.flatShading===!1?"#define USE_MORPHNORMALS":"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+l.numClippingPlanes,l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+y:"",l.sizeAttenuation?"#define USE_SIZEATTENUATION":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",l.logarithmicDepthBuffer&&n.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ys).join(`
`),N=[D,"precision "+l.precision+" float;","precision "+l.precision+" int;","#define SHADER_NAME "+u.name,U,l.alphaTest?"#define ALPHATEST "+l.alphaTest:"","#define GAMMA_FACTOR "+F,l.useFog&&l.fog?"#define USE_FOG":"",l.useFog&&l.fogExp?"#define FOG_EXP2":"",l.map?"#define USE_MAP":"",l.envMap?"#define USE_ENVMAP":"",l.envMap?"#define "+b:"",l.envMap?"#define "+w:"",l.envMap?"#define "+T:"",l.lightMap?"#define USE_LIGHTMAP":"",l.aoMap?"#define USE_AOMAP":"",l.emissiveMap?"#define USE_EMISSIVEMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.roughnessMap?"#define USE_ROUGHNESSMAP":"",l.metalnessMap?"#define USE_METALNESSMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.vertexColors?"#define USE_COLOR":"",l.gradientMap?"#define USE_GRADIENTMAP":"",l.flatShading?"#define FLAT_SHADED":"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+l.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(l.numClippingPlanes-l.numClipIntersection),l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+y:"",l.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",l.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",l.logarithmicDepthBuffer&&n.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",l.envMap&&n.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",l.toneMapping!==Qo?"#define TONE_MAPPING":"",l.toneMapping!==Qo?Je.tonemapping_pars_fragment:"",l.toneMapping!==Qo?cp("toneMapping",l.toneMapping):"",l.dithering?"#define DITHERING":"",l.outputEncoding||l.mapEncoding||l.envMapEncoding||l.emissiveMapEncoding?Je.encodings_pars_fragment:"",l.mapEncoding?gl("mapTexelToLinear",l.mapEncoding):"",l.envMapEncoding?gl("envMapTexelToLinear",l.envMapEncoding):"",l.emissiveMapEncoding?gl("emissiveMapTexelToLinear",l.emissiveMapEncoding):"",l.outputEncoding?vl("linearToOutputTexel",l.outputEncoding):"",l.depthPacking?"#define DEPTH_PACKING "+o.depthPacking:"",`
`].filter(ys).join(`
`)),g=yl(g),g=lf(g,l),v=yl(v),v=lf(v,l),o.isShaderMaterial||(g=xl(g),v=xl(v));var B=L+g,Q=N+v,$=pl(f,f.VERTEX_SHADER,B),K=pl(f,f.FRAGMENT_SHADER,Q);f.attachShader(z,$),f.attachShader(z,K),o.index0AttributeName!==void 0?f.bindAttribLocation(z,0,o.index0AttributeName):l.morphTargets===!0&&f.bindAttribLocation(z,0,"position"),f.linkProgram(z);var lt=f.getProgramInfoLog(z),Y=f.getShaderInfoLog($),et=f.getShaderInfoLog(K),ht=!0,Tt=!0;f.getProgramParameter(z,f.LINK_STATUS)===!1?(ht=!1,console.error("THREE.WebGLProgram: shader error: ",f.getError(),"gl.VALIDATE_STATUS",f.getProgramParameter(z,f.VALIDATE_STATUS),"gl.getProgramInfoLog",lt,Y,et)):lt!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",lt):Y!==""&&et!==""||(Tt=!1),Tt&&(this.diagnostics={runnable:ht,material:o,programLog:lt,vertexShader:{log:Y,prefix:L},fragmentShader:{log:et,prefix:N}}),f.deleteShader($),f.deleteShader(K);var Z;this.getUniforms=function(){return Z===void 0&&(Z=new pr(f,z,t)),Z};var X;return this.getAttributes=function(){return X===void 0&&(X=lp(f,z)),X},this.destroy=function(){f.deleteProgram(z),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Up++,this.code=i,this.usedTimes=1,this.program=z,this.vertexShader=$,this.fragmentShader=K,this}function hp(t,n,i){function o(g){var v=g.skeleton,y=v.bones;if(i.floatVertexTextures)return 1024;var b=i.maxVertexUniforms,w=Math.floor((b-20)/4),T=Math.min(w,y.length);return T<y.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+y.length+" bones. This GPU supports "+T+"."),0):T}function u(g,v){var y;return g?g.isTexture?y=g.encoding:g.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),y=g.texture.encoding):y=mu,y===mu&&v&&(y=mh),y}var l=[],f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},d=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(g,v,y,b,w,T,L){var N=f[g.type],F=L.isSkinnedMesh?o(L):0,D=i.precision;g.precision!==null&&(D=i.getMaxPrecision(g.precision))!==g.precision&&console.warn("THREE.WebGLProgram.getParameters:",g.precision,"not supported, using",D,"instead.");var U=t.getRenderTarget();return{shaderID:N,precision:D,supportsVertexTextures:i.vertexTextures,outputEncoding:u(U?U.texture:null,t.gammaOutput),map:!!g.map,mapEncoding:u(g.map,t.gammaInput),envMap:!!g.envMap,envMapMode:g.envMap&&g.envMap.mapping,envMapEncoding:u(g.envMap,t.gammaInput),envMapCubeUV:!!g.envMap&&(g.envMap.mapping===_c||g.envMap.mapping===bc),lightMap:!!g.lightMap,aoMap:!!g.aoMap,emissiveMap:!!g.emissiveMap,emissiveMapEncoding:u(g.emissiveMap,t.gammaInput),bumpMap:!!g.bumpMap,normalMap:!!g.normalMap,displacementMap:!!g.displacementMap,roughnessMap:!!g.roughnessMap,metalnessMap:!!g.metalnessMap,specularMap:!!g.specularMap,alphaMap:!!g.alphaMap,gradientMap:!!g.gradientMap,combine:g.combine,vertexColors:g.vertexColors,fog:!!b,useFog:g.fog,fogExp:b&&b.isFogExp2,flatShading:g.flatShading,sizeAttenuation:g.sizeAttenuation,logarithmicDepthBuffer:i.logarithmicDepthBuffer,skinning:g.skinning&&F>0,maxBones:F,useVertexTexture:i.floatVertexTextures,morphTargets:g.morphTargets,morphNormals:g.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:v.directional.length,numPointLights:v.point.length,numSpotLights:v.spot.length,numRectAreaLights:v.rectArea.length,numHemiLights:v.hemi.length,numClippingPlanes:w,numClipIntersection:T,dithering:g.dithering,shadowMapEnabled:t.shadowMap.enabled&&L.receiveShadow&&y.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:g.premultipliedAlpha,alphaTest:g.alphaTest,doubleSided:g.side===Yo,flipSided:g.side===da,depthPacking:g.depthPacking!==void 0&&g.depthPacking}},this.getProgramCode=function(g,v){var y=[];if(v.shaderID?y.push(v.shaderID):(y.push(g.fragmentShader),y.push(g.vertexShader)),g.defines!==void 0)for(var b in g.defines)y.push(b),y.push(g.defines[b]);for(var w=0;w<d.length;w++)y.push(v[d[w]]);return y.push(g.onBeforeCompile.toString()),y.push(t.gammaOutput),y.join()},this.acquireProgram=function(g,v,y,b){for(var w,T=0,L=l.length;T<L;T++){var N=l[T];if(N.code===b){w=N,++w.usedTimes;break}}return w===void 0&&(w=new hf(t,n,b,g,v,y),l.push(w)),w},this.releaseProgram=function(g){if(--g.usedTimes==0){var v=l.indexOf(g);l[v]=l[l.length-1],l.pop(),g.destroy()}},this.programs=l}function fp(t,n,i,o,u,l,f){function d(Z,X){if(Z.width>X||Z.height>X){var ft=X/Math.max(Z.width,Z.height),at=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return at.width=Math.floor(Z.width*ft),at.height=Math.floor(Z.height*ft),at.getContext("2d").drawImage(Z,0,0,Z.width,Z.height,0,0,at.width,at.height),console.warn("THREE.WebGLRenderer: image is too big ("+Z.width+"x"+Z.height+"). Resized to "+at.width+"x"+at.height,Z),at}return Z}function g(Z){return Ce.isPowerOfTwo(Z.width)&&Ce.isPowerOfTwo(Z.height)}function v(Z){if(Z instanceof HTMLImageElement||Z instanceof HTMLCanvasElement){var X=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return X.width=Ce.nearestPowerOfTwo(Z.width),X.height=Ce.nearestPowerOfTwo(Z.height),X.getContext("2d").drawImage(Z,0,0,X.width,X.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+Z.width+"x"+Z.height+"). Resized to "+X.width+"x"+X.height,Z),X}return Z}function y(Z){return Z.wrapS!==nr||Z.wrapT!==nr||Z.minFilter!==Lr&&Z.minFilter!==rr}function b(Z,X){return Z.generateMipmaps&&X&&Z.minFilter!==Lr&&Z.minFilter!==rr}function w(Z){return Z===Lr||Z===wc||Z===Mc?t.NEAREST:t.LINEAR}function T(Z){var X=Z.target;X.removeEventListener("dispose",T),N(X),f.textures--}function L(Z){var X=Z.target;X.removeEventListener("dispose",L),F(X),f.textures--}function N(Z){var X=o.get(Z);if(Z.image&&X.__image__webglTextureCube)t.deleteTexture(X.__image__webglTextureCube);else{if(X.__webglInit===void 0)return;t.deleteTexture(X.__webglTexture)}o.remove(Z)}function F(Z){var X=o.get(Z),ft=o.get(Z.texture);if(Z){if(ft.__webglTexture!==void 0&&t.deleteTexture(ft.__webglTexture),Z.depthTexture&&Z.depthTexture.dispose(),Z.isWebGLRenderTargetCube)for(var at=0;at<6;at++)t.deleteFramebuffer(X.__webglFramebuffer[at]),X.__webglDepthbuffer&&t.deleteRenderbuffer(X.__webglDepthbuffer[at]);else t.deleteFramebuffer(X.__webglFramebuffer),X.__webglDepthbuffer&&t.deleteRenderbuffer(X.__webglDepthbuffer);o.remove(Z.texture),o.remove(Z)}}function D(Z,X){var ft=o.get(Z);if(Z.version>0&&ft.__version!==Z.version){var at=Z.image;if(at===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",Z);else{if(at.complete!==!1)return void Q(ft,Z,X);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",Z)}}i.activeTexture(t.TEXTURE0+X),i.bindTexture(t.TEXTURE_2D,ft.__webglTexture)}function U(Z,X){var ft=o.get(Z);if(Z.image.length===6)if(Z.version>0&&ft.__version!==Z.version){ft.__image__webglTextureCube||(Z.addEventListener("dispose",T),ft.__image__webglTextureCube=t.createTexture(),f.textures++),i.activeTexture(t.TEXTURE0+X),i.bindTexture(t.TEXTURE_CUBE_MAP,ft.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Z.flipY);for(var at=Z&&Z.isCompressedTexture,wt=Z.image[0]&&Z.image[0].isDataTexture,vt=[],Et=0;Et<6;Et++)vt[Et]=at||wt?wt?Z.image[Et].image:Z.image[Et]:d(Z.image[Et],u.maxCubemapSize);var St=vt[0],qt=g(St),It=l.convert(Z.format),Ft=l.convert(Z.type);B(t.TEXTURE_CUBE_MAP,Z,qt);for(var Et=0;Et<6;Et++)if(at)for(var Wt,ne=vt[Et].mipmaps,kt=0,$t=ne.length;kt<$t;kt++)Wt=ne[kt],Z.format!==ai&&Z.format!==es?i.getCompressedTextureFormats().indexOf(It)>-1?i.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Et,kt,It,Wt.width,Wt.height,0,Wt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Et,kt,It,Wt.width,Wt.height,0,It,Ft,Wt.data);else wt?i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Et,0,It,vt[Et].width,vt[Et].height,0,It,Ft,vt[Et].data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Et,0,It,It,Ft,vt[Et]);b(Z,qt)&&t.generateMipmap(t.TEXTURE_CUBE_MAP),ft.__version=Z.version,Z.onUpdate&&Z.onUpdate(Z)}else i.activeTexture(t.TEXTURE0+X),i.bindTexture(t.TEXTURE_CUBE_MAP,ft.__image__webglTextureCube)}function z(Z,X){i.activeTexture(t.TEXTURE0+X),i.bindTexture(t.TEXTURE_CUBE_MAP,o.get(Z).__webglTexture)}function B(Z,X,ft){var at;if(ft?(t.texParameteri(Z,t.TEXTURE_WRAP_S,l.convert(X.wrapS)),t.texParameteri(Z,t.TEXTURE_WRAP_T,l.convert(X.wrapT)),t.texParameteri(Z,t.TEXTURE_MAG_FILTER,l.convert(X.magFilter)),t.texParameteri(Z,t.TEXTURE_MIN_FILTER,l.convert(X.minFilter))):(t.texParameteri(Z,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(Z,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),X.wrapS===nr&&X.wrapT===nr||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",X),t.texParameteri(Z,t.TEXTURE_MAG_FILTER,w(X.magFilter)),t.texParameteri(Z,t.TEXTURE_MIN_FILTER,w(X.minFilter)),X.minFilter!==Lr&&X.minFilter!==rr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",X)),at=n.get("EXT_texture_filter_anisotropic")){if(X.type===ki&&n.get("OES_texture_float_linear")===null||X.type===Ka&&n.get("OES_texture_half_float_linear")===null)return;(X.anisotropy>1||o.get(X).__currentAnisotropy)&&(t.texParameterf(Z,at.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(X.anisotropy,u.getMaxAnisotropy())),o.get(X).__currentAnisotropy=X.anisotropy)}}function Q(Z,X,ft){Z.__webglInit===void 0&&(Z.__webglInit=!0,X.addEventListener("dispose",T),Z.__webglTexture=t.createTexture(),f.textures++),i.activeTexture(t.TEXTURE0+ft),i.bindTexture(t.TEXTURE_2D,Z.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,X.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,X.unpackAlignment);var at=d(X.image,u.maxTextureSize);y(X)&&g(at)===!1&&(at=v(at));var wt=g(at),vt=l.convert(X.format),Et=l.convert(X.type);B(t.TEXTURE_2D,X,wt);var St,qt=X.mipmaps;if(X.isDepthTexture){var It=t.DEPTH_COMPONENT;if(X.type===ki){if(!Tt)throw new Error("Float Depth Texture only supported in WebGL2.0");It=t.DEPTH_COMPONENT32F}else Tt&&(It=t.DEPTH_COMPONENT16);X.format===Xr&&It===t.DEPTH_COMPONENT&&X.type!==hu&&X.type!==ah&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),X.type=hu,Et=l.convert(X.type)),X.format===ga&&(It=t.DEPTH_STENCIL,X.type!==fu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),X.type=fu,Et=l.convert(X.type))),i.texImage2D(t.TEXTURE_2D,0,It,at.width,at.height,0,vt,Et,null)}else if(X.isDataTexture)if(qt.length>0&&wt){for(var Ft=0,Wt=qt.length;Ft<Wt;Ft++)St=qt[Ft],i.texImage2D(t.TEXTURE_2D,Ft,vt,St.width,St.height,0,vt,Et,St.data);X.generateMipmaps=!1}else i.texImage2D(t.TEXTURE_2D,0,vt,at.width,at.height,0,vt,Et,at.data);else if(X.isCompressedTexture)for(var Ft=0,Wt=qt.length;Ft<Wt;Ft++)St=qt[Ft],X.format!==ai&&X.format!==es?i.getCompressedTextureFormats().indexOf(vt)>-1?i.compressedTexImage2D(t.TEXTURE_2D,Ft,vt,St.width,St.height,0,St.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(t.TEXTURE_2D,Ft,vt,St.width,St.height,0,vt,Et,St.data);else if(qt.length>0&&wt){for(var Ft=0,Wt=qt.length;Ft<Wt;Ft++)St=qt[Ft],i.texImage2D(t.TEXTURE_2D,Ft,vt,vt,Et,St);X.generateMipmaps=!1}else i.texImage2D(t.TEXTURE_2D,0,vt,vt,Et,at);b(X,wt)&&t.generateMipmap(t.TEXTURE_2D),Z.__version=X.version,X.onUpdate&&X.onUpdate(X)}function $(Z,X,ft,at){var wt=l.convert(X.texture.format),vt=l.convert(X.texture.type);i.texImage2D(at,0,wt,X.width,X.height,0,wt,vt,null),t.bindFramebuffer(t.FRAMEBUFFER,Z),t.framebufferTexture2D(t.FRAMEBUFFER,ft,at,o.get(X.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function K(Z,X){t.bindRenderbuffer(t.RENDERBUFFER,Z),X.depthBuffer&&!X.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,X.width,X.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,Z)):X.depthBuffer&&X.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,X.width,X.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,Z)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,X.width,X.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}function lt(Z,X){if(X&&X.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(t.FRAMEBUFFER,Z),!X.depthTexture||!X.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");o.get(X.depthTexture).__webglTexture&&X.depthTexture.image.width===X.width&&X.depthTexture.image.height===X.height||(X.depthTexture.image.width=X.width,X.depthTexture.image.height=X.height,X.depthTexture.needsUpdate=!0),D(X.depthTexture,0);var ft=o.get(X.depthTexture).__webglTexture;if(X.depthTexture.format===Xr)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ft,0);else{if(X.depthTexture.format!==ga)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ft,0)}}function Y(Z){var X=o.get(Z),ft=Z.isWebGLRenderTargetCube===!0;if(Z.depthTexture){if(ft)throw new Error("target.depthTexture not supported in Cube render targets");lt(X.__webglFramebuffer,Z)}else if(ft){X.__webglDepthbuffer=[];for(var at=0;at<6;at++)t.bindFramebuffer(t.FRAMEBUFFER,X.__webglFramebuffer[at]),X.__webglDepthbuffer[at]=t.createRenderbuffer(),K(X.__webglDepthbuffer[at],Z)}else t.bindFramebuffer(t.FRAMEBUFFER,X.__webglFramebuffer),X.__webglDepthbuffer=t.createRenderbuffer(),K(X.__webglDepthbuffer,Z);t.bindFramebuffer(t.FRAMEBUFFER,null)}function et(Z){var X=o.get(Z),ft=o.get(Z.texture);Z.addEventListener("dispose",L),ft.__webglTexture=t.createTexture(),f.textures++;var at=Z.isWebGLRenderTargetCube===!0,wt=g(Z);if(at){X.__webglFramebuffer=[];for(var vt=0;vt<6;vt++)X.__webglFramebuffer[vt]=t.createFramebuffer()}else X.__webglFramebuffer=t.createFramebuffer();if(at){i.bindTexture(t.TEXTURE_CUBE_MAP,ft.__webglTexture),B(t.TEXTURE_CUBE_MAP,Z.texture,wt);for(var vt=0;vt<6;vt++)$(X.__webglFramebuffer[vt],Z,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+vt);b(Z.texture,wt)&&t.generateMipmap(t.TEXTURE_CUBE_MAP),i.bindTexture(t.TEXTURE_CUBE_MAP,null)}else i.bindTexture(t.TEXTURE_2D,ft.__webglTexture),B(t.TEXTURE_2D,Z.texture,wt),$(X.__webglFramebuffer,Z,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),b(Z.texture,wt)&&t.generateMipmap(t.TEXTURE_2D),i.bindTexture(t.TEXTURE_2D,null);Z.depthBuffer&&Y(Z)}function ht(Z){var X=Z.texture;if(b(X,g(Z))){var ft=Z.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,at=o.get(X).__webglTexture;i.bindTexture(ft,at),t.generateMipmap(ft),i.bindTexture(ft,null)}}var Tt=typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext;this.setTexture2D=D,this.setTextureCube=U,this.setTextureCubeDynamic=z,this.setupRenderTarget=et,this.updateRenderTargetMipmap=ht}function ff(){function t(u){var l=u.uuid,f=o[l];return f===void 0&&(f={},o[l]=f),f}function n(u){delete o[u.uuid]}function i(){o={}}var o={};return{get:t,remove:n,clear:i}}function dp(t,n,i){function o(){var st=!1,ce=new Bt,we=null,ke=new Bt(0,0,0,0);return{setMask:function(te){we===te||st||(t.colorMask(te,te,te,te),we=te)},setLocked:function(te){st=te},setClear:function(te,Ve,qe,on,fr){fr===!0&&(te*=on,Ve*=on,qe*=on),ce.set(te,Ve,qe,on),ke.equals(ce)===!1&&(t.clearColor(te,Ve,qe,on),ke.copy(ce))},reset:function(){st=!1,we=null,ke.set(-1,0,0,0)}}}function u(){var st=!1,ce=null,we=null,ke=null;return{setTest:function(te){te?b(t.DEPTH_TEST):w(t.DEPTH_TEST)},setMask:function(te){ce===te||st||(t.depthMask(te),ce=te)},setFunc:function(te){if(we!==te){if(te)switch(te){case Nf:t.depthFunc(t.NEVER);break;case ou:t.depthFunc(t.ALWAYS);break;case pa:t.depthFunc(t.LESS);break;case dc:t.depthFunc(t.LEQUAL);break;case nh:t.depthFunc(t.EQUAL);break;case pc:t.depthFunc(t.GEQUAL);break;case rh:t.depthFunc(t.GREATER);break;case If:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);we=te}},setLocked:function(te){st=te},setClear:function(te){ke!==te&&(t.clearDepth(te),ke=te)},reset:function(){st=!1,ce=null,we=null,ke=null}}}function l(){var st=!1,ce=null,we=null,ke=null,te=null,Ve=null,qe=null,on=null,fr=null;return{setTest:function(hn){hn?b(t.STENCIL_TEST):w(t.STENCIL_TEST)},setMask:function(hn){ce===hn||st||(t.stencilMask(hn),ce=hn)},setFunc:function(hn,Ln,yt){we===hn&&ke===Ln&&te===yt||(t.stencilFunc(hn,Ln,yt),we=hn,ke=Ln,te=yt)},setOp:function(hn,Ln,yt){Ve===hn&&qe===Ln&&on===yt||(t.stencilOp(hn,Ln,yt),Ve=hn,qe=Ln,on=yt)},setLocked:function(hn){st=hn},setClear:function(hn){fr!==hn&&(t.clearStencil(hn),fr=hn)},reset:function(){st=!1,ce=null,we=null,ke=null,te=null,Ve=null,qe=null,on=null,fr=null}}}function f(st,ce,we){var ke=new Uint8Array(4),te=t.createTexture();t.bindTexture(st,te),t.texParameteri(st,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(st,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var Ve=0;Ve<we;Ve++)t.texImage2D(ce+Ve,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,ke);return te}function d(){for(var st=0,ce=wt.length;st<ce;st++)wt[st]=0}function g(st){wt[st]=1,vt[st]===0&&(t.enableVertexAttribArray(st),vt[st]=1),Et[st]!==0&&(n.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(st,0),Et[st]=0)}function v(st,ce){wt[st]=1,vt[st]===0&&(t.enableVertexAttribArray(st),vt[st]=1),Et[st]!==ce&&(n.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(st,ce),Et[st]=ce)}function y(){for(var st=0,ce=vt.length;st!==ce;++st)vt[st]!==wt[st]&&(t.disableVertexAttribArray(st),vt[st]=0)}function b(st){St[st]!==!0&&(t.enable(st),St[st]=!0)}function w(st){St[st]!==!1&&(t.disable(st),St[st]=!1)}function T(){if(qt===null&&(qt=[],n.get("WEBGL_compressed_texture_pvrtc")||n.get("WEBGL_compressed_texture_s3tc")||n.get("WEBGL_compressed_texture_etc1")))for(var st=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),ce=0;ce<st.length;ce++)qt.push(st[ce]);return qt}function L(st){return It!==st&&(t.useProgram(st),It=st,!0)}function N(st,ce,we,ke,te,Ve,qe,on){if(st!==cc?b(t.BLEND):w(t.BLEND),st!==Zl){if(st!==Ft||on!==Rn)switch(st){case iu:on?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE));break;case ql:on?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR));break;case Yl:on?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR));break;default:on?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA))}Wt=null,ne=null,kt=null,$t=null,Le=null,be=null}else te=te||ce,Ve=Ve||we,qe=qe||ke,ce===Wt&&te===$t||(t.blendEquationSeparate(i.convert(ce),i.convert(te)),Wt=ce,$t=te),we===ne&&ke===kt&&Ve===Le&&qe===be||(t.blendFuncSeparate(i.convert(we),i.convert(ke),i.convert(Ve),i.convert(qe)),ne=we,kt=ke,Le=Ve,be=qe);Ft=st,Rn=on}function F(st){st.side===Yo?w(t.CULL_FACE):b(t.CULL_FACE),D(st.side===da),st.transparent===!0?N(st.blending,st.blendEquation,st.blendSrc,st.blendDst,st.blendEquationAlpha,st.blendSrcAlpha,st.blendDstAlpha,st.premultipliedAlpha):N(cc),X.setFunc(st.depthFunc),X.setTest(st.depthTest),X.setMask(st.depthWrite),Z.setMask(st.colorWrite),B(st.polygonOffset,st.polygonOffsetFactor,st.polygonOffsetUnits)}function D(st){Vn!==st&&(st?t.frontFace(t.CW):t.frontFace(t.CCW),Vn=st)}function U(st){st!==Gl?(b(t.CULL_FACE),st!==Ot&&(st===ha?t.cullFace(t.BACK):st===ac?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):w(t.CULL_FACE),Ot=st}function z(st){st!==Ze&&(or&&t.lineWidth(st),Ze=st)}function B(st,ce,we){st?(b(t.POLYGON_OFFSET_FILL),yn===ce&&En===we||(t.polygonOffset(ce,we),yn=ce,En=we)):w(t.POLYGON_OFFSET_FILL)}function Q(st){st?b(t.SCISSOR_TEST):w(t.SCISSOR_TEST)}function $(st){st===void 0&&(st=t.TEXTURE0+ar-1),Pn!==st&&(t.activeTexture(st),Pn=st)}function K(st,ce){Pn===null&&$();var we=ze[Pn];we===void 0&&(we={type:void 0,texture:void 0},ze[Pn]=we),we.type===st&&we.texture===ce||(t.bindTexture(st,ce||Ne[st]),we.type=st,we.texture=ce)}function lt(){try{t.compressedTexImage2D.apply(t,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function Y(){try{t.texImage2D.apply(t,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function et(st){Pe.equals(st)===!1&&(t.scissor(st.x,st.y,st.z,st.w),Pe.copy(st))}function ht(st){Ue.equals(st)===!1&&(t.viewport(st.x,st.y,st.z,st.w),Ue.copy(st))}function Tt(){for(var st=0;st<vt.length;st++)vt[st]===1&&(t.disableVertexAttribArray(st),vt[st]=0);St={},qt=null,Pn=null,ze={},It=null,Ft=null,Vn=null,Ot=null,Z.reset(),X.reset(),ft.reset()}var Z=new o,X=new u,ft=new l,at=t.getParameter(t.MAX_VERTEX_ATTRIBS),wt=new Uint8Array(at),vt=new Uint8Array(at),Et=new Uint8Array(at),St={},qt=null,It=null,Ft=null,Wt=null,ne=null,kt=null,$t=null,Le=null,be=null,Rn=!1,Vn=null,Ot=null,Ze=null,yn=null,En=null,ar=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),Yn=parseFloat(/^WebGL\ ([0-9])/.exec(t.getParameter(t.VERSION))[1]),or=parseFloat(Yn)>=1,Pn=null,ze={},Pe=new Bt,Ue=new Bt,Ne={};return Ne[t.TEXTURE_2D]=f(t.TEXTURE_2D,t.TEXTURE_2D,1),Ne[t.TEXTURE_CUBE_MAP]=f(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),Z.setClear(0,0,0,1),X.setClear(1),ft.setClear(0),b(t.DEPTH_TEST),X.setFunc(dc),D(!1),U(ha),b(t.CULL_FACE),b(t.BLEND),N(Zo),{buffers:{color:Z,depth:X,stencil:ft},initAttributes:d,enableAttribute:g,enableAttributeAndDivisor:v,disableUnusedAttributes:y,enable:b,disable:w,getCompressedTextureFormats:T,useProgram:L,setBlending:N,setMaterial:F,setFlipSided:D,setCullFace:U,setLineWidth:z,setPolygonOffset:B,setScissorTest:Q,activeTexture:$,bindTexture:K,compressedTexImage2D:lt,texImage2D:Y,scissor:et,viewport:ht,reset:Tt}}function df(t,n,i){function o(){if(l!==void 0)return l;var z=n.get("EXT_texture_filter_anisotropic");return l=z!==null?t.getParameter(z.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function u(z){if(z==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";z="mediump"}return z==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var l,f=i.precision!==void 0?i.precision:"highp",d=u(f);d!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",d,"instead."),f=d);var g=i.logarithmicDepthBuffer===!0&&!!n.get("EXT_frag_depth"),v=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),y=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),b=t.getParameter(t.MAX_TEXTURE_SIZE),w=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),T=t.getParameter(t.MAX_VERTEX_ATTRIBS),L=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),N=t.getParameter(t.MAX_VARYING_VECTORS),F=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),D=y>0,U=!!n.get("OES_texture_float");return{getMaxAnisotropy:o,getMaxPrecision:u,precision:f,logarithmicDepthBuffer:g,maxTextures:v,maxVertexTextures:y,maxTextureSize:b,maxCubemapSize:w,maxAttributes:T,maxVertexUniforms:L,maxVaryings:N,maxFragmentUniforms:F,vertexTextures:D,floatFragmentTextures:U,floatVertexTextures:D&&U}}function xs(t){zn.call(this),this.cameras=t||[]}function fo(t){function n(){if(o!==null&&o.isPresenting){var T=o.getEyeParameters("left"),L=T.renderWidth,N=T.renderHeight;w=t.getPixelRatio(),b=t.getSize(),t.setDrawingBufferSize(2*L,N,1)}else i.enabled&&t.setDrawingBufferSize(b.width,b.height,w)}var i=this,o=null,u=null;"VRFrameData"in window&&(u=new window.VRFrameData);var l=new Ut,f=new Ut,d=new Ut,g=new zn;g.bounds=new Bt(0,0,.5,1),g.layers.enable(1);var v=new zn;v.bounds=new Bt(.5,0,.5,1),v.layers.enable(2);var y=new xs([g,v]);y.layers.enable(1),y.layers.enable(2);var b,w;window.addEventListener("vrdisplaypresentchange",n,!1),this.enabled=!1,this.standing=!1,this.getDevice=function(){return o},this.setDevice=function(T){T!==void 0&&(o=T)},this.getCamera=function(T){if(o===null)return T;o.depthNear=T.near,o.depthFar=T.far,o.getFrameData(u);var L=u.pose;L.position!==null?T.position.fromArray(L.position):T.position.set(0,0,0),L.orientation!==null&&T.quaternion.fromArray(L.orientation),T.updateMatrixWorld();var N=o.stageParameters;if(this.standing&&N&&(f.fromArray(N.sittingToStandingTransform),d.getInverse(f),T.matrixWorld.multiply(f),T.matrixWorldInverse.multiply(d)),o.isPresenting===!1)return T;g.near=T.near,v.near=T.near,g.far=T.far,v.far=T.far,y.matrixWorld.copy(T.matrixWorld),y.matrixWorldInverse.copy(T.matrixWorldInverse),g.matrixWorldInverse.fromArray(u.leftViewMatrix),v.matrixWorldInverse.fromArray(u.rightViewMatrix),this.standing&&N&&(g.matrixWorldInverse.multiply(d),v.matrixWorldInverse.multiply(d));var F=T.parent;F!==null&&(l.getInverse(F.matrixWorld),g.matrixWorldInverse.multiply(l),v.matrixWorldInverse.multiply(l)),g.matrixWorld.getInverse(g.matrixWorldInverse),v.matrixWorld.getInverse(v.matrixWorldInverse),g.projectionMatrix.fromArray(u.leftProjectionMatrix),v.projectionMatrix.fromArray(u.rightProjectionMatrix),y.projectionMatrix.copy(g.projectionMatrix);var D=o.getLayers();if(D.length){var U=D[0];U.leftBounds!==null&&U.leftBounds.length===4&&g.bounds.fromArray(U.leftBounds),U.rightBounds!==null&&U.rightBounds.length===4&&v.bounds.fromArray(U.rightBounds)}return y},this.getStandingMatrix=function(){return f},this.submitFrame=function(){o&&o.isPresenting&&o.submitFrame()},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",n)}}function pp(t){var n={};return{get:function(i){if(n[i]!==void 0)return n[i];var o;switch(i){case"WEBGL_depth_texture":o=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":o=t.getExtension("WEBGL_compressed_texture_etc1");break;default:o=t.getExtension(i)}return o===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),n[i]=o,o}}}function _s(){function t(){v.value!==o&&(v.value=o,v.needsUpdate=u>0),i.numPlanes=u,i.numIntersection=0}function n(y,b,w,T){var L=y!==null?y.length:0,N=null;if(L!==0){if(N=v.value,T!==!0||N===null){var F=w+4*L,D=b.matrixWorldInverse;g.getNormalMatrix(D),(N===null||N.length<F)&&(N=new Float32Array(F));for(var U=0,z=w;U!==L;++U,z+=4)d.copy(y[U]).applyMatrix4(D,g),d.normal.toArray(N,z),N[z+3]=d.constant}v.value=N,v.needsUpdate=!0}return i.numPlanes=L,N}var i=this,o=null,u=0,l=!1,f=!1,d=new bn,g=new dn,v={value:null,needsUpdate:!1};this.uniform=v,this.numPlanes=0,this.numIntersection=0,this.init=function(y,b,w){var T=y.length!==0||b||u!==0||l;return l=b,o=n(y,w,0),u=y.length,T},this.beginShadows=function(){f=!0,n(null)},this.endShadows=function(){f=!1,t()},this.setState=function(y,b,w,T,L,N){if(!l||y===null||y.length===0||f&&!w)f?n(null):t();else{var F=f?0:u,D=4*F,U=L.clippingState||null;v.value=U,U=n(y,T,D,N);for(var z=0;z!==D;++z)U[z]=o[z];L.clippingState=U,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=F}}}function bs(t,n){function i(o){var u;if(o===ii)return t.REPEAT;if(o===nr)return t.CLAMP_TO_EDGE;if(o===ma)return t.MIRRORED_REPEAT;if(o===Lr)return t.NEAREST;if(o===wc)return t.NEAREST_MIPMAP_NEAREST;if(o===Mc)return t.NEAREST_MIPMAP_LINEAR;if(o===rr)return t.LINEAR;if(o===lu)return t.LINEAR_MIPMAP_NEAREST;if(o===Jo)return t.LINEAR_MIPMAP_LINEAR;if(o===Ec)return t.UNSIGNED_BYTE;if(o===ts)return t.UNSIGNED_SHORT_4_4_4_4;if(o===oh)return t.UNSIGNED_SHORT_5_5_5_1;if(o===sh)return t.UNSIGNED_SHORT_5_6_5;if(o===Tc)return t.BYTE;if(o===Ff)return t.SHORT;if(o===hu)return t.UNSIGNED_SHORT;if(o===zf)return t.INT;if(o===ah)return t.UNSIGNED_INT;if(o===ki)return t.FLOAT;if(o===Ka&&(u=n.get("OES_texture_half_float"))!==null)return u.HALF_FLOAT_OES;if(o===Bf)return t.ALPHA;if(o===es)return t.RGB;if(o===ai)return t.RGBA;if(o===uh)return t.LUMINANCE;if(o===ch)return t.LUMINANCE_ALPHA;if(o===Xr)return t.DEPTH_COMPONENT;if(o===ga)return t.DEPTH_STENCIL;if(o===lc)return t.FUNC_ADD;if(o===Ya)return t.FUNC_SUBTRACT;if(o===Lf)return t.FUNC_REVERSE_SUBTRACT;if(o===Ql)return t.ZERO;if(o===hc)return t.ONE;if(o===Cf)return t.SRC_COLOR;if(o===Pf)return t.ONE_MINUS_SRC_COLOR;if(o===Za)return t.SRC_ALPHA;if(o===fc)return t.ONE_MINUS_SRC_ALPHA;if(o===$l)return t.DST_ALPHA;if(o===Jl)return t.ONE_MINUS_DST_ALPHA;if(o===th)return t.DST_COLOR;if(o===au)return t.ONE_MINUS_DST_COLOR;if(o===eh)return t.SRC_ALPHA_SATURATE;if((o===lh||o===Sc||o===Ac||o===Rc)&&(u=n.get("WEBGL_compressed_texture_s3tc"))!==null){if(o===lh)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===Sc)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===Ac)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===Rc)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((o===Cn||o===Hi||o===Gi||o===hh)&&(u=n.get("WEBGL_compressed_texture_pvrtc"))!==null){if(o===Cn)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===Hi)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===Gi)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===hh)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(o===Lc&&(u=n.get("WEBGL_compressed_texture_etc1"))!==null)return u.COMPRESSED_RGB_ETC1_WEBGL;if((o===Kl||o===Ko)&&(u=n.get("EXT_blend_minmax"))!==null){if(o===Kl)return u.MIN_EXT;if(o===Ko)return u.MAX_EXT}return o===fu&&(u=n.get("WEBGL_depth_texture"))!==null?u.UNSIGNED_INT_24_8_WEBGL:0}return{convert:i}}function Iu(t){function n(){return Vn===null?Ne:1}function i(){mn=new pp(yt),mn.get("WEBGL_depth_texture"),mn.get("OES_texture_float"),mn.get("OES_texture_float_linear"),mn.get("OES_texture_half_float"),mn.get("OES_texture_half_float_linear"),mn.get("OES_standard_derivatives"),mn.get("ANGLE_instanced_arrays"),mn.get("OES_element_index_uint")&&(Zt.MaxIndex=4294967296),Pr=new bs(yt,mn),yr=new df(yt,mn,t),Ie=new dp(yt,mn,Pr),Ie.scissor(or.copy(ce).multiplyScalar(Ne)),Ie.viewport(Yn.copy(st).multiplyScalar(Ne)),Zn=new ff,ui=new fp(yt,mn,Ie,Zn,yr,Pr,hn),Oc=new op(yt),qr=new Nu(yt,Oc,hn),Uc=new Jr(qr,Ln),nd=new fl(yt),is=new hp(be,mn,yr),Un=new up,Dc=new ll,to=new ul(be,Ie,qr,It),rd=new sp(yt,mn,Ln),ya=new dl(yt,mn,Ln),Fc=new Ki(be,yt,Ie,ui,yr),Eh=new Qi(be,yt,Ie,ui,yr),be.info.programs=is.programs,be.context=yt,be.capabilities=yr,be.extensions=mn,be.properties=Zn,be.renderLists=Dc,be.state=Ie}function o(k){k.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Rn=!0}function u(k){console.log("THREE.WebGLRenderer: Context Restored."),Rn=!1,i()}function l(k){var q=k.target;q.removeEventListener("dispose",l),f(q)}function f(k){d(k),Zn.remove(k)}function d(k){var q=Zn.get(k).program;k.program=void 0,q!==void 0&&is.releaseProgram(q)}function g(k,q,nt){k.render(function(Lt){be.renderBufferImmediate(Lt,q,nt)})}function v(k,q,nt,Lt){if(nt&&nt.isInstancedBufferGeometry&&mn.get("ANGLE_instanced_arrays")===null)return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");Lt===void 0&&(Lt=0),Ie.initAttributes();var Qt=nt.attributes,ve=q.getAttributes(),De=k.defaultAttributeValues;for(var Te in ve){var He=ve[Te];if(He>=0){var me=Qt[Te];if(me!==void 0){var Se=me.normalized,ae=me.itemSize,kn=Oc.get(me);if(kn===void 0)continue;var Ke=kn.buffer,Nr=kn.type,Nn=kn.bytesPerElement;if(me.isInterleavedBufferAttribute){var jn=me.data,Xi=jn.stride,yu=me.offset;jn&&jn.isInstancedInterleavedBuffer?(Ie.enableAttributeAndDivisor(He,jn.meshPerAttribute),nt.maxInstancedCount===void 0&&(nt.maxInstancedCount=jn.meshPerAttribute*jn.count)):Ie.enableAttribute(He),yt.bindBuffer(yt.ARRAY_BUFFER,Ke),yt.vertexAttribPointer(He,ae,Nr,Se,Xi*Nn,(Lt*Xi+yu)*Nn)}else me.isInstancedBufferAttribute?(Ie.enableAttributeAndDivisor(He,me.meshPerAttribute),nt.maxInstancedCount===void 0&&(nt.maxInstancedCount=me.meshPerAttribute*me.count)):Ie.enableAttribute(He),yt.bindBuffer(yt.ARRAY_BUFFER,Ke),yt.vertexAttribPointer(He,ae,Nr,Se,0,Lt*ae*Nn)}else if(De!==void 0){var Yr=De[Te];if(Yr!==void 0)switch(Yr.length){case 2:yt.vertexAttrib2fv(He,Yr);break;case 3:yt.vertexAttrib3fv(He,Yr);break;case 4:yt.vertexAttrib4fv(He,Yr);break;default:yt.vertexAttrib1fv(He,Yr)}}}}Ie.disableUnusedAttributes()}function y(){ad||((Wi.getDevice()||window).requestAnimationFrame(b),ad=!0)}function b(k){Th!==null&&Th(k),(Wi.getDevice()||window).requestAnimationFrame(b)}function w(k,q,nt){if(k.visible){if(k.layers.test(q.layers)){if(k.isLight)Wt.push(k),k.castShadow&&ne.push(k);else if(k.isSprite)k.frustumCulled&&!ke.intersectsSprite(k)||$t.push(k);else if(k.isLensFlare)Le.push(k);else if(k.isImmediateRenderObject)nt&&fr.setFromMatrixPosition(k.matrixWorld).applyMatrix4(on),kt.push(k,null,k.material,fr.z,null);else if((k.isMesh||k.isLine||k.isPoints)&&(k.isSkinnedMesh&&k.skeleton.update(),!k.frustumCulled||ke.intersectsObject(k))){nt&&fr.setFromMatrixPosition(k.matrixWorld).applyMatrix4(on);var Lt=Uc.update(k),Qt=k.material;if(Array.isArray(Qt))for(var ve=Lt.groups,De=0,Te=ve.length;De<Te;De++){var He=ve[De],me=Qt[He.materialIndex];me&&me.visible&&kt.push(k,Lt,me,fr.z,He)}else Qt.visible&&kt.push(k,Lt,Qt,fr.z,null)}}for(var Se=k.children,De=0,Te=Se.length;De<Te;De++)w(Se[De],q,nt)}}function T(k,q,nt,Lt){for(var Qt=0,ve=k.length;Qt<ve;Qt++){var De=k[Qt],Te=De.object,He=De.geometry,me=Lt===void 0?De.material:Lt,Se=De.group;if(nt.isArrayCamera){ar=nt;for(var ae=nt.cameras,kn=0,Ke=ae.length;kn<Ke;kn++){var Nr=ae[kn];if(Te.layers.test(Nr.layers)){var Nn=Nr.bounds,jn=Nn.x*Pe,Xi=Nn.y*Ue,yu=Nn.z*Pe,Yr=Nn.w*Ue;Ie.viewport(Yn.set(jn,Xi,yu,Yr).multiplyScalar(Ne)),L(Te,q,Nr,He,me,Se)}}}else ar=null,L(Te,q,nt,He,me,Se)}}function L(k,q,nt,Lt,Qt,ve){if(k.onBeforeRender(be,q,nt,Lt,Qt,ve),k.modelViewMatrix.multiplyMatrices(nt.matrixWorldInverse,k.matrixWorld),k.normalMatrix.getNormalMatrix(k.modelViewMatrix),k.isImmediateRenderObject){Ie.setMaterial(Qt);var De=F(nt,q.fog,Qt,k);yn="",g(k,De,Qt)}else be.renderBufferDirect(nt,q.fog,Lt,Qt,k,ve);k.onAfterRender(be,q,nt,Lt,Qt,ve)}function N(k,q,nt){var Lt=Zn.get(k),Qt=is.getParameters(k,Un.state,ne,q,te.numPlanes,te.numIntersection,nt),ve=is.getProgramCode(k,Qt),De=Lt.program,Te=!0;if(De===void 0)k.addEventListener("dispose",l);else if(De.code!==ve)d(k);else{if(Qt.shaderID!==void 0)return;Te=!1}if(Te){if(Qt.shaderID){var He=Ja[Qt.shaderID];Lt.shader={name:k.type,uniforms:vr.clone(He.uniforms),vertexShader:He.vertexShader,fragmentShader:He.fragmentShader}}else Lt.shader={name:k.type,uniforms:k.uniforms,vertexShader:k.vertexShader,fragmentShader:k.fragmentShader};k.onBeforeCompile(Lt.shader),De=is.acquireProgram(k,Lt.shader,Qt,ve),Lt.program=De,k.program=De}var me=De.getAttributes();if(k.morphTargets){k.numSupportedMorphTargets=0;for(var Se=0;Se<be.maxMorphTargets;Se++)me["morphTarget"+Se]>=0&&k.numSupportedMorphTargets++}if(k.morphNormals){k.numSupportedMorphNormals=0;for(var Se=0;Se<be.maxMorphNormals;Se++)me["morphNormal"+Se]>=0&&k.numSupportedMorphNormals++}var ae=Lt.shader.uniforms;(k.isShaderMaterial||k.isRawShaderMaterial)&&k.clipping!==!0||(Lt.numClippingPlanes=te.numPlanes,Lt.numIntersection=te.numIntersection,ae.clippingPlanes=te.uniform),Lt.fog=q,Lt.lightsHash=Un.state.hash,k.lights&&(ae.ambientLightColor.value=Un.state.ambient,ae.directionalLights.value=Un.state.directional,ae.spotLights.value=Un.state.spot,ae.rectAreaLights.value=Un.state.rectArea,ae.pointLights.value=Un.state.point,ae.hemisphereLights.value=Un.state.hemi,ae.directionalShadowMap.value=Un.state.directionalShadowMap,ae.directionalShadowMatrix.value=Un.state.directionalShadowMatrix,ae.spotShadowMap.value=Un.state.spotShadowMap,ae.spotShadowMatrix.value=Un.state.spotShadowMatrix,ae.pointShadowMap.value=Un.state.pointShadowMap,ae.pointShadowMatrix.value=Un.state.pointShadowMatrix);var kn=Lt.program.getUniforms(),Ke=pr.seqWithValue(kn.seq,ae);Lt.uniformsList=Ke}function F(k,q,nt,Lt){ze=0;var Qt=Zn.get(nt);if(Ve&&(qe||k!==En)){var ve=k===En&&nt.id===Ze;te.setState(nt.clippingPlanes,nt.clipIntersection,nt.clipShadows,k,Qt,ve)}nt.needsUpdate===!1&&(Qt.program===void 0||nt.fog&&Qt.fog!==q||nt.lights&&Qt.lightsHash!==Un.state.hash?nt.needsUpdate=!0:Qt.numClippingPlanes===void 0||Qt.numClippingPlanes===te.numPlanes&&Qt.numIntersection===te.numIntersection||(nt.needsUpdate=!0)),nt.needsUpdate&&(N(nt,q,Lt),nt.needsUpdate=!1);var De=!1,Te=!1,He=!1,me=Qt.program,Se=me.getUniforms(),ae=Qt.shader.uniforms;if(Ie.useProgram(me.program)&&(De=!0,Te=!0,He=!0),nt.id!==Ze&&(Ze=nt.id,Te=!0),De||k!==En){if(Se.setValue(yt,"projectionMatrix",k.projectionMatrix),yr.logarithmicDepthBuffer&&Se.setValue(yt,"logDepthBufFC",2/(Math.log(k.far+1)/Math.LN2)),En!==(ar||k)&&(En=ar||k,Te=!0,He=!0),nt.isShaderMaterial||nt.isMeshPhongMaterial||nt.isMeshStandardMaterial||nt.envMap){var kn=Se.map.cameraPosition;kn!==void 0&&kn.setValue(yt,fr.setFromMatrixPosition(k.matrixWorld))}(nt.isMeshPhongMaterial||nt.isMeshLambertMaterial||nt.isMeshBasicMaterial||nt.isMeshStandardMaterial||nt.isShaderMaterial||nt.skinning)&&Se.setValue(yt,"viewMatrix",k.matrixWorldInverse)}if(nt.skinning){Se.setOptional(yt,Lt,"bindMatrix"),Se.setOptional(yt,Lt,"bindMatrixInverse");var Ke=Lt.skeleton;if(Ke){var Nr=Ke.bones;if(yr.floatVertexTextures){if(Ke.boneTexture===void 0){var Nn=Math.sqrt(4*Nr.length);Nn=Ce.nextPowerOfTwo(Math.ceil(Nn)),Nn=Math.max(Nn,4);var jn=new Float32Array(Nn*Nn*4);jn.set(Ke.boneMatrices);var Xi=new le(jn,Nn,Nn,ai,ki);Ke.boneMatrices=jn,Ke.boneTexture=Xi,Ke.boneTextureSize=Nn}Se.setValue(yt,"boneTexture",Ke.boneTexture),Se.setValue(yt,"boneTextureSize",Ke.boneTextureSize)}else Se.setOptional(yt,Ke,"boneMatrices")}}return Te&&(Se.setValue(yt,"toneMappingExposure",be.toneMappingExposure),Se.setValue(yt,"toneMappingWhitePoint",be.toneMappingWhitePoint),nt.lights&&X(ae,He),q&&nt.fog&&Q(ae,q),nt.isMeshBasicMaterial?D(ae,nt):nt.isMeshLambertMaterial?(D(ae,nt),$(ae,nt)):nt.isMeshPhongMaterial?(D(ae,nt),nt.isMeshToonMaterial?lt(ae,nt):K(ae,nt)):nt.isMeshStandardMaterial?(D(ae,nt),nt.isMeshPhysicalMaterial?et(ae,nt):Y(ae,nt)):nt.isMeshDepthMaterial?(D(ae,nt),ht(ae,nt)):nt.isMeshDistanceMaterial?(D(ae,nt),Tt(ae,nt)):nt.isMeshNormalMaterial?(D(ae,nt),Z(ae,nt)):nt.isLineBasicMaterial?(U(ae,nt),nt.isLineDashedMaterial&&z(ae,nt)):nt.isPointsMaterial?B(ae,nt):nt.isShadowMaterial&&(ae.color.value=nt.color,ae.opacity.value=nt.opacity),ae.ltcMat!==void 0&&(ae.ltcMat.value=se.LTC_MAT_TEXTURE),ae.ltcMag!==void 0&&(ae.ltcMag.value=se.LTC_MAG_TEXTURE),pr.upload(yt,Qt.uniformsList,ae,be)),Se.setValue(yt,"modelViewMatrix",Lt.modelViewMatrix),Se.setValue(yt,"normalMatrix",Lt.normalMatrix),Se.setValue(yt,"modelMatrix",Lt.matrixWorld),me}function D(k,q){k.opacity.value=q.opacity,q.color&&(k.diffuse.value=q.color),q.emissive&&k.emissive.value.copy(q.emissive).multiplyScalar(q.emissiveIntensity),q.map&&(k.map.value=q.map),q.alphaMap&&(k.alphaMap.value=q.alphaMap),q.specularMap&&(k.specularMap.value=q.specularMap),q.envMap&&(k.envMap.value=q.envMap,k.flipEnvMap.value=q.envMap&&q.envMap.isCubeTexture?-1:1,k.reflectivity.value=q.reflectivity,k.refractionRatio.value=q.refractionRatio),q.lightMap&&(k.lightMap.value=q.lightMap,k.lightMapIntensity.value=q.lightMapIntensity),q.aoMap&&(k.aoMap.value=q.aoMap,k.aoMapIntensity.value=q.aoMapIntensity);var nt;if(q.map?nt=q.map:q.specularMap?nt=q.specularMap:q.displacementMap?nt=q.displacementMap:q.normalMap?nt=q.normalMap:q.bumpMap?nt=q.bumpMap:q.roughnessMap?nt=q.roughnessMap:q.metalnessMap?nt=q.metalnessMap:q.alphaMap?nt=q.alphaMap:q.emissiveMap&&(nt=q.emissiveMap),nt!==void 0){nt.isWebGLRenderTarget&&(nt=nt.texture);var Lt=nt.offset,Qt=nt.repeat;k.offsetRepeat.value.set(Lt.x,Lt.y,Qt.x,Qt.y)}}function U(k,q){k.diffuse.value=q.color,k.opacity.value=q.opacity}function z(k,q){k.dashSize.value=q.dashSize,k.totalSize.value=q.dashSize+q.gapSize,k.scale.value=q.scale}function B(k,q){if(k.diffuse.value=q.color,k.opacity.value=q.opacity,k.size.value=q.size*Ne,k.scale.value=.5*Ue,k.map.value=q.map,q.map!==null){var nt=q.map.offset,Lt=q.map.repeat;k.offsetRepeat.value.set(nt.x,nt.y,Lt.x,Lt.y)}}function Q(k,q){k.fogColor.value=q.color,q.isFog?(k.fogNear.value=q.near,k.fogFar.value=q.far):q.isFogExp2&&(k.fogDensity.value=q.density)}function $(k,q){q.emissiveMap&&(k.emissiveMap.value=q.emissiveMap)}function K(k,q){k.specular.value=q.specular,k.shininess.value=Math.max(q.shininess,1e-4),q.emissiveMap&&(k.emissiveMap.value=q.emissiveMap),q.bumpMap&&(k.bumpMap.value=q.bumpMap,k.bumpScale.value=q.bumpScale),q.normalMap&&(k.normalMap.value=q.normalMap,k.normalScale.value.copy(q.normalScale)),q.displacementMap&&(k.displacementMap.value=q.displacementMap,k.displacementScale.value=q.displacementScale,k.displacementBias.value=q.displacementBias)}function lt(k,q){K(k,q),q.gradientMap&&(k.gradientMap.value=q.gradientMap)}function Y(k,q){k.roughness.value=q.roughness,k.metalness.value=q.metalness,q.roughnessMap&&(k.roughnessMap.value=q.roughnessMap),q.metalnessMap&&(k.metalnessMap.value=q.metalnessMap),q.emissiveMap&&(k.emissiveMap.value=q.emissiveMap),q.bumpMap&&(k.bumpMap.value=q.bumpMap,k.bumpScale.value=q.bumpScale),q.normalMap&&(k.normalMap.value=q.normalMap,k.normalScale.value.copy(q.normalScale)),q.displacementMap&&(k.displacementMap.value=q.displacementMap,k.displacementScale.value=q.displacementScale,k.displacementBias.value=q.displacementBias),q.envMap&&(k.envMapIntensity.value=q.envMapIntensity)}function et(k,q){k.clearCoat.value=q.clearCoat,k.clearCoatRoughness.value=q.clearCoatRoughness,Y(k,q)}function ht(k,q){q.displacementMap&&(k.displacementMap.value=q.displacementMap,k.displacementScale.value=q.displacementScale,k.displacementBias.value=q.displacementBias)}function Tt(k,q){q.displacementMap&&(k.displacementMap.value=q.displacementMap,k.displacementScale.value=q.displacementScale,k.displacementBias.value=q.displacementBias),k.referencePosition.value.copy(q.referencePosition),k.nearDistance.value=q.nearDistance,k.farDistance.value=q.farDistance}function Z(k,q){q.bumpMap&&(k.bumpMap.value=q.bumpMap,k.bumpScale.value=q.bumpScale),q.normalMap&&(k.normalMap.value=q.normalMap,k.normalScale.value.copy(q.normalScale)),q.displacementMap&&(k.displacementMap.value=q.displacementMap,k.displacementScale.value=q.displacementScale,k.displacementBias.value=q.displacementBias)}function X(k,q){k.ambientLightColor.needsUpdate=q,k.directionalLights.needsUpdate=q,k.pointLights.needsUpdate=q,k.spotLights.needsUpdate=q,k.rectAreaLights.needsUpdate=q,k.hemisphereLights.needsUpdate=q}function ft(){var k=ze;return k>=yr.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+k+" texture units while this GPU supports only "+yr.maxTextures),ze+=1,k}console.log("THREE.WebGLRenderer",qo),t=t||{};var at=t.canvas!==void 0?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),wt=t.context!==void 0?t.context:null,vt=t.alpha!==void 0&&t.alpha,Et=t.depth===void 0||t.depth,St=t.stencil===void 0||t.stencil,qt=t.antialias!==void 0&&t.antialias,It=t.premultipliedAlpha===void 0||t.premultipliedAlpha,Ft=t.preserveDrawingBuffer!==void 0&&t.preserveDrawingBuffer,Wt=[],ne=[],kt=null,$t=[],Le=[];this.domElement=at,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=ih,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var be=this,Rn=!1,Vn=null,Ot=null,Ze=-1,yn="",En=null,ar=null,Yn=new Bt,or=new Bt,Pn=null,ze=0,Pe=at.width,Ue=at.height,Ne=1,st=new Bt(0,0,Pe,Ue),ce=new Bt(0,0,Pe,Ue),we=!1,ke=new Ri,te=new _s,Ve=!1,qe=!1,on=new Ut,fr=new G,hn={geometries:0,textures:0},Ln={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:Ln,memory:hn,programs:null};var yt;try{var Ic={alpha:vt,depth:Et,stencil:St,antialias:qt,premultipliedAlpha:It,preserveDrawingBuffer:Ft};if((yt=wt||at.getContext("webgl",Ic)||at.getContext("experimental-webgl",Ic))===null)throw at.getContext("webgl")!==null?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";yt.getShaderPrecisionFormat===void 0&&(yt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),at.addEventListener("webglcontextlost",o,!1),at.addEventListener("webglcontextrestored",u,!1)}catch(k){console.error("THREE.WebGLRenderer: "+k)}var mn,yr,Ie,Zn,ui,Oc,qr,Uc,Un,is,Dc,to,nd,rd,ya,Fc,Eh,Pr;i();var Wi=new fo(be);this.vr=Wi;var id=new Li(be,Uc,yr.maxTextureSize);this.shadowMap=id,this.getContext=function(){return yt},this.getContextAttributes=function(){return yt.getContextAttributes()},this.forceContextLoss=function(){var k=mn.get("WEBGL_lose_context");k&&k.loseContext()},this.forceContextRestore=function(){var k=mn.get("WEBGL_lose_context");k&&k.restoreContext()},this.getPixelRatio=function(){return Ne},this.setPixelRatio=function(k){k!==void 0&&(Ne=k,this.setSize(Pe,Ue,!1))},this.getSize=function(){return{width:Pe,height:Ue}},this.setSize=function(k,q,nt){var Lt=Wi.getDevice();if(Lt&&Lt.isPresenting)return void console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");Pe=k,Ue=q,at.width=k*Ne,at.height=q*Ne,nt!==!1&&(at.style.width=k+"px",at.style.height=q+"px"),this.setViewport(0,0,k,q)},this.getDrawingBufferSize=function(){return{width:Pe*Ne,height:Ue*Ne}},this.setDrawingBufferSize=function(k,q,nt){Pe=k,Ue=q,Ne=nt,at.width=k*nt,at.height=q*nt,this.setViewport(0,0,k,q)},this.setViewport=function(k,q,nt,Lt){st.set(k,Ue-q-Lt,nt,Lt),Ie.viewport(Yn.copy(st).multiplyScalar(Ne))},this.setScissor=function(k,q,nt,Lt){ce.set(k,Ue-q-Lt,nt,Lt),Ie.scissor(or.copy(ce).multiplyScalar(Ne))},this.setScissorTest=function(k){Ie.setScissorTest(we=k)},this.getClearColor=to.getClearColor,this.setClearColor=to.setClearColor,this.getClearAlpha=to.getClearAlpha,this.setClearAlpha=to.setClearAlpha,this.clear=function(k,q,nt){var Lt=0;(k===void 0||k)&&(Lt|=yt.COLOR_BUFFER_BIT),(q===void 0||q)&&(Lt|=yt.DEPTH_BUFFER_BIT),(nt===void 0||nt)&&(Lt|=yt.STENCIL_BUFFER_BIT),yt.clear(Lt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(k,q,nt,Lt){this.setRenderTarget(k),this.clear(q,nt,Lt)},this.dispose=function(){at.removeEventListener("webglcontextlost",o,!1),at.removeEventListener("webglcontextrestored",u,!1),Dc.dispose(),Wi.dispose()},this.renderBufferImmediate=function(k,q,nt){Ie.initAttributes();var Lt=Zn.get(k);k.hasPositions&&!Lt.position&&(Lt.position=yt.createBuffer()),k.hasNormals&&!Lt.normal&&(Lt.normal=yt.createBuffer()),k.hasUvs&&!Lt.uv&&(Lt.uv=yt.createBuffer()),k.hasColors&&!Lt.color&&(Lt.color=yt.createBuffer());var Qt=q.getAttributes();if(k.hasPositions&&(yt.bindBuffer(yt.ARRAY_BUFFER,Lt.position),yt.bufferData(yt.ARRAY_BUFFER,k.positionArray,yt.DYNAMIC_DRAW),Ie.enableAttribute(Qt.position),yt.vertexAttribPointer(Qt.position,3,yt.FLOAT,!1,0,0)),k.hasNormals){if(yt.bindBuffer(yt.ARRAY_BUFFER,Lt.normal),!nt.isMeshPhongMaterial&&!nt.isMeshStandardMaterial&&!nt.isMeshNormalMaterial&&nt.flatShading===!0)for(var ve=0,De=3*k.count;ve<De;ve+=9){var Te=k.normalArray,He=(Te[ve+0]+Te[ve+3]+Te[ve+6])/3,me=(Te[ve+1]+Te[ve+4]+Te[ve+7])/3,Se=(Te[ve+2]+Te[ve+5]+Te[ve+8])/3;Te[ve+0]=He,Te[ve+1]=me,Te[ve+2]=Se,Te[ve+3]=He,Te[ve+4]=me,Te[ve+5]=Se,Te[ve+6]=He,Te[ve+7]=me,Te[ve+8]=Se}yt.bufferData(yt.ARRAY_BUFFER,k.normalArray,yt.DYNAMIC_DRAW),Ie.enableAttribute(Qt.normal),yt.vertexAttribPointer(Qt.normal,3,yt.FLOAT,!1,0,0)}k.hasUvs&&nt.map&&(yt.bindBuffer(yt.ARRAY_BUFFER,Lt.uv),yt.bufferData(yt.ARRAY_BUFFER,k.uvArray,yt.DYNAMIC_DRAW),Ie.enableAttribute(Qt.uv),yt.vertexAttribPointer(Qt.uv,2,yt.FLOAT,!1,0,0)),k.hasColors&&nt.vertexColors!==uc&&(yt.bindBuffer(yt.ARRAY_BUFFER,Lt.color),yt.bufferData(yt.ARRAY_BUFFER,k.colorArray,yt.DYNAMIC_DRAW),Ie.enableAttribute(Qt.color),yt.vertexAttribPointer(Qt.color,3,yt.FLOAT,!1,0,0)),Ie.disableUnusedAttributes(),yt.drawArrays(yt.TRIANGLES,0,k.count),k.count=0},this.renderBufferDirect=function(k,q,nt,Lt,Qt,ve){Ie.setMaterial(Lt);var De=F(k,q,Lt,Qt),Te=nt.id+"_"+De.id+"_"+(Lt.wireframe===!0),He=!1;Te!==yn&&(yn=Te,He=!0),Qt.morphTargetInfluences&&(nd.update(Qt,nt,Lt,De),He=!0);var me=nt.index,Se=nt.attributes.position,ae=1;Lt.wireframe===!0&&(me=qr.getWireframeAttribute(nt),ae=2);var kn,Ke=rd;me!==null&&(kn=Oc.get(me),Ke=ya,Ke.setIndex(kn)),He&&(v(Lt,De,nt),me!==null&&yt.bindBuffer(yt.ELEMENT_ARRAY_BUFFER,kn.buffer));var Nr=0;me!==null?Nr=me.count:Se!==void 0&&(Nr=Se.count);var Nn=nt.drawRange.start*ae,jn=nt.drawRange.count*ae,Xi=ve!==null?ve.start*ae:0,yu=ve!==null?ve.count*ae:1/0,Yr=Math.max(Nn,Xi),Gp=Math.min(Nr,Nn+jn,Xi+yu)-1,Sh=Math.max(0,Gp-Yr+1);if(Sh!==0){if(Qt.isMesh)if(Lt.wireframe===!0)Ie.setLineWidth(Lt.wireframeLinewidth*n()),Ke.setMode(yt.LINES);else switch(Qt.drawMode){case dh:Ke.setMode(yt.TRIANGLES);break;case Hf:Ke.setMode(yt.TRIANGLE_STRIP);break;case Gf:Ke.setMode(yt.TRIANGLE_FAN)}else if(Qt.isLine){var xu=Lt.linewidth;xu===void 0&&(xu=1),Ie.setLineWidth(xu*n()),Qt.isLineSegments?Ke.setMode(yt.LINES):Qt.isLineLoop?Ke.setMode(yt.LINE_LOOP):Ke.setMode(yt.LINE_STRIP)}else Qt.isPoints&&Ke.setMode(yt.POINTS);nt&&nt.isInstancedBufferGeometry?nt.maxInstancedCount>0&&Ke.renderInstances(nt,Yr,Sh):Ke.render(Yr,Sh)}},this.compile=function(k,q){Wt.length=0,ne.length=0,k.traverse(function(nt){nt.isLight&&(Wt.push(nt),nt.castShadow&&ne.push(nt))}),Un.setup(Wt,ne,q),k.traverse(function(nt){if(nt.material)if(Array.isArray(nt.material))for(var Lt=0;Lt<nt.material.length;Lt++)N(nt.material[Lt],k.fog,nt);else N(nt.material,k.fog,nt)})};var ad=!1,Th=null;this.animate=function(k){Th=k,y()},this.render=function(k,q,nt,Lt){if(!q||!q.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!Rn){yn="",Ze=-1,En=null,k.autoUpdate===!0&&k.updateMatrixWorld(),q.parent===null&&q.updateMatrixWorld(),Wi.enabled&&(q=Wi.getCamera(q)),on.multiplyMatrices(q.projectionMatrix,q.matrixWorldInverse),ke.setFromMatrix(on),Wt.length=0,ne.length=0,$t.length=0,Le.length=0,qe=this.localClippingEnabled,Ve=te.init(this.clippingPlanes,qe,q),kt=Dc.get(k,q),kt.init(),w(k,q,be.sortObjects),be.sortObjects===!0&&kt.sort(),Ve&&te.beginShadows(),id.render(ne,k,q),Un.setup(Wt,ne,q),Ve&&te.endShadows(),Ln.frame++,Ln.calls=0,Ln.vertices=0,Ln.faces=0,Ln.points=0,nt===void 0&&(nt=null),this.setRenderTarget(nt),to.render(kt,k,q,Lt);var Qt=kt.opaque,ve=kt.transparent;if(k.overrideMaterial){var De=k.overrideMaterial;Qt.length&&T(Qt,k,q,De),ve.length&&T(ve,k,q,De)}else Qt.length&&T(Qt,k,q),ve.length&&T(ve,k,q);Eh.render($t,k,q),Fc.render(Le,k,q,Yn),nt&&ui.updateRenderTargetMipmap(nt),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1),Wi.enabled&&Wi.submitFrame()}},this.setFaceCulling=function(k,q){Ie.setCullFace(k),Ie.setFlipSided(q===Vl)},this.allocTextureUnit=ft,this.setTexture2D=function(){var k=!1;return function(q,nt){q&&q.isWebGLRenderTarget&&(k||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),k=!0),q=q.texture),ui.setTexture2D(q,nt)}}(),this.setTexture=function(){var k=!1;return function(q,nt){k||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),k=!0),ui.setTexture2D(q,nt)}}(),this.setTextureCube=function(){var k=!1;return function(q,nt){q&&q.isWebGLRenderTargetCube&&(k||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),k=!0),q=q.texture),q&&q.isCubeTexture||Array.isArray(q.image)&&q.image.length===6?ui.setTextureCube(q,nt):ui.setTextureCubeDynamic(q,nt)}}(),this.getRenderTarget=function(){return Vn},this.setRenderTarget=function(k){Vn=k,k&&Zn.get(k).__webglFramebuffer===void 0&&ui.setupRenderTarget(k);var q=null,nt=!1;if(k){var Lt=Zn.get(k).__webglFramebuffer;k.isWebGLRenderTargetCube?(q=Lt[k.activeCubeFace],nt=!0):q=Lt,Yn.copy(k.viewport),or.copy(k.scissor),Pn=k.scissorTest}else Yn.copy(st).multiplyScalar(Ne),or.copy(ce).multiplyScalar(Ne),Pn=we;if(Ot!==q&&(yt.bindFramebuffer(yt.FRAMEBUFFER,q),Ot=q),Ie.viewport(Yn),Ie.scissor(or),Ie.setScissorTest(Pn),nt){var Qt=Zn.get(k.texture);yt.framebufferTexture2D(yt.FRAMEBUFFER,yt.COLOR_ATTACHMENT0,yt.TEXTURE_CUBE_MAP_POSITIVE_X+k.activeCubeFace,Qt.__webglTexture,k.activeMipMapLevel)}},this.readRenderTargetPixels=function(k,q,nt,Lt,Qt,ve){if(!k||!k.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var De=Zn.get(k).__webglFramebuffer;if(De){var Te=!1;De!==Ot&&(yt.bindFramebuffer(yt.FRAMEBUFFER,De),Te=!0);try{var He=k.texture,me=He.format,Se=He.type;if(me!==ai&&Pr.convert(me)!==yt.getParameter(yt.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(Se===Ec||Pr.convert(Se)===yt.getParameter(yt.IMPLEMENTATION_COLOR_READ_TYPE)||Se===ki&&(mn.get("OES_texture_float")||mn.get("WEBGL_color_buffer_float"))||Se===Ka&&mn.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");yt.checkFramebufferStatus(yt.FRAMEBUFFER)===yt.FRAMEBUFFER_COMPLETE?q>=0&&q<=k.width-Lt&&nt>=0&&nt<=k.height-Qt&&yt.readPixels(q,nt,Lt,Qt,Pr.convert(me),Pr.convert(Se),ve):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{Te&&yt.bindFramebuffer(yt.FRAMEBUFFER,Ot)}}}}function Ca(t,n){this.name="",this.color=new ee(t),this.density=n!==void 0?n:25e-5}function po(t,n,i){this.name="",this.color=new ee(t),this.near=n!==void 0?n:1,this.far=i!==void 0?i:1e3}function Ou(){Yt.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function ws(t,n,i,o,u){Yt.call(this),this.lensFlares=[],this.positionScreen=new G,this.customUpdateCallback=void 0,t!==void 0&&this.add(t,n,i,o,u)}function mi(t){_e.call(this),this.type="SpriteMaterial",this.color=new ee(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t)}function ti(t){Yt.call(this),this.type="Sprite",this.material=t!==void 0?t:new mi}function wr(){Yt.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Ms(t,n){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),n===void 0)this.calculateInverses();else if(this.bones.length===n.length)this.boneInverses=n.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var i=0,o=this.bones.length;i<o;i++)this.boneInverses.push(new Ut)}}function Uu(){Yt.call(this),this.type="Bone"}function Du(t,n){wn.call(this,t,n),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ut,this.bindMatrixInverse=new Ut;var i=this.initBones(),o=new Ms(i);this.bind(o,this.matrixWorld),this.normalizeSkinWeights()}function rn(t){_e.call(this),this.type="LineBasicMaterial",this.color=new ee(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function mr(t,n,i){if(i===1)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new pn(t,n);Yt.call(this),this.type="Line",this.geometry=t!==void 0?t:new Zt,this.material=n!==void 0?n:new rn({color:16777215*Math.random()})}function pn(t,n){mr.call(this,t,n),this.type="LineSegments"}function Fu(t,n){mr.call(this,t,n),this.type="LineLoop"}function ei(t){_e.call(this),this.type="PointsMaterial",this.color=new ee(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function mo(t,n){Yt.call(this),this.type="Points",this.geometry=t!==void 0?t:new Zt,this.material=n!==void 0?n:new ei({color:16777215*Math.random()})}function Es(){Yt.call(this),this.type="Group"}function zu(t,n,i,o,u,l,f,d,g){function v(){requestAnimationFrame(v),t.readyState>=t.HAVE_CURRENT_DATA&&(y.needsUpdate=!0)}Dt.call(this,t,n,i,o,u,l,f,d,g),this.generateMipmaps=!1;var y=this;v()}function go(t,n,i,o,u,l,f,d,g,v,y,b){Dt.call(this,null,l,f,d,g,v,o,u,y,b),this.image={width:n,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Ts(t,n,i,o,u,l,f,d,g,v){if((v=v!==void 0?v:Xr)!==Xr&&v!==ga)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&v===Xr&&(i=hu),i===void 0&&v===ga&&(i=fu),Dt.call(this,null,o,u,l,f,d,v,i,g),this.image={width:t,height:n},this.magFilter=f!==void 0?f:Lr,this.minFilter=d!==void 0?d:Lr,this.flipY=!1,this.generateMipmaps=!1}function vo(t){Zt.call(this),this.type="WireframeGeometry";var n,i,o,u,l,f,d,g,v,y,b=[],w=[0,0],T={},L=["a","b","c"];if(t&&t.isGeometry){var N=t.faces;for(n=0,o=N.length;n<o;n++){var F=N[n];for(i=0;i<3;i++)d=F[L[i]],g=F[L[(i+1)%3]],w[0]=Math.min(d,g),w[1]=Math.max(d,g),v=w[0]+","+w[1],T[v]===void 0&&(T[v]={index1:w[0],index2:w[1]})}for(v in T)f=T[v],y=t.vertices[f.index1],b.push(y.x,y.y,y.z),y=t.vertices[f.index2],b.push(y.x,y.y,y.z)}else if(t&&t.isBufferGeometry){var D,U,z,B,Q,$,K,lt;if(y=new G,t.index!==null){for(D=t.attributes.position,U=t.index,z=t.groups,z.length===0&&(z=[{start:0,count:U.count,materialIndex:0}]),u=0,l=z.length;u<l;++u)for(B=z[u],Q=B.start,$=B.count,n=Q,o=Q+$;n<o;n+=3)for(i=0;i<3;i++)d=U.getX(n+i),g=U.getX(n+(i+1)%3),w[0]=Math.min(d,g),w[1]=Math.max(d,g),v=w[0]+","+w[1],T[v]===void 0&&(T[v]={index1:w[0],index2:w[1]});for(v in T)f=T[v],y.fromBufferAttribute(D,f.index1),b.push(y.x,y.y,y.z),y.fromBufferAttribute(D,f.index2),b.push(y.x,y.y,y.z)}else for(D=t.attributes.position,n=0,o=D.count/3;n<o;n++)for(i=0;i<3;i++)K=3*n+i,y.fromBufferAttribute(D,K),b.push(y.x,y.y,y.z),lt=3*n+(i+1)%3,y.fromBufferAttribute(D,lt),b.push(y.x,y.y,y.z)}this.addAttribute("position",new jt(b,3))}function Ss(t,n,i){Ee.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:n,stacks:i},this.fromBufferGeometry(new yo(t,n,i)),this.mergeVertices()}function yo(t,n,i){Zt.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:n,stacks:i};var o,u,l=[],f=[],d=[],g=[],v=new G,y=new G,b=new G,w=new G,T=new G,L=n+1;for(o=0;o<=i;o++){var N=o/i;for(u=0;u<=n;u++){var F=u/n;y=t(F,N,y),f.push(y.x,y.y,y.z),F-1e-5>=0?(b=t(F-1e-5,N,b),w.subVectors(y,b)):(b=t(F+1e-5,N,b),w.subVectors(b,y)),N-1e-5>=0?(b=t(F,N-1e-5,b),T.subVectors(y,b)):(b=t(F,N+1e-5,b),T.subVectors(b,y)),v.crossVectors(w,T).normalize(),d.push(v.x,v.y,v.z),g.push(F,N)}}for(o=0;o<i;o++)for(u=0;u<n;u++){var D=o*L+u,U=o*L+u+1,z=(o+1)*L+u+1,B=(o+1)*L+u;l.push(D,U,B),l.push(U,z,B)}this.setIndex(l),this.addAttribute("position",new jt(f,3)),this.addAttribute("normal",new jt(d,3)),this.addAttribute("uv",new jt(g,2))}function As(t,n,i,o){Ee.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:n,radius:i,detail:o},this.fromBufferGeometry(new gr(t,n,i,o)),this.mergeVertices()}function gr(t,n,i,o){function u(L,N,F,D){var U,z,B=Math.pow(2,D),Q=[];for(U=0;U<=B;U++){Q[U]=[];var $=L.clone().lerp(F,U/B),K=N.clone().lerp(F,U/B),lt=B-U;for(z=0;z<=lt;z++)Q[U][z]=z===0&&U===B?$:$.clone().lerp(K,z/lt)}for(U=0;U<B;U++)for(z=0;z<2*(B-U)-1;z++){var Y=Math.floor(z/2);z%2==0?(f(Q[U][Y+1]),f(Q[U+1][Y]),f(Q[U][Y])):(f(Q[U][Y+1]),f(Q[U+1][Y+1]),f(Q[U+1][Y]))}}function l(){for(var L=0;L<T.length;L+=6){var N=T[L+0],F=T[L+2],D=T[L+4],U=Math.max(N,F,D),z=Math.min(N,F,D);U>.9&&z<.1&&(N<.2&&(T[L+0]+=1),F<.2&&(T[L+2]+=1),D<.2&&(T[L+4]+=1))}}function f(L){w.push(L.x,L.y,L.z)}function d(L,N){var F=3*L;N.x=t[F+0],N.y=t[F+1],N.z=t[F+2]}function g(){for(var L=new G,N=new G,F=new G,D=new G,U=new gt,z=new gt,B=new gt,Q=0,$=0;Q<w.length;Q+=9,$+=6){L.set(w[Q+0],w[Q+1],w[Q+2]),N.set(w[Q+3],w[Q+4],w[Q+5]),F.set(w[Q+6],w[Q+7],w[Q+8]),U.set(T[$+0],T[$+1]),z.set(T[$+2],T[$+3]),B.set(T[$+4],T[$+5]),D.copy(L).add(N).add(F).divideScalar(3);var K=y(D);v(U,$+0,L,K),v(z,$+2,N,K),v(B,$+4,F,K)}}function v(L,N,F,D){D<0&&L.x===1&&(T[N]=L.x-1),F.x===0&&F.z===0&&(T[N]=D/2/Math.PI+.5)}function y(L){return Math.atan2(L.z,-L.x)}function b(L){return Math.atan2(-L.y,Math.sqrt(L.x*L.x+L.z*L.z))}Zt.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:n,radius:i,detail:o},i=i||1,o=o||0;var w=[],T=[];(function(L){for(var N=new G,F=new G,D=new G,U=0;U<n.length;U+=3)d(n[U+0],N),d(n[U+1],F),d(n[U+2],D),u(N,F,D,L)})(o),function(L){for(var N=new G,F=0;F<w.length;F+=3)N.x=w[F+0],N.y=w[F+1],N.z=w[F+2],N.normalize().multiplyScalar(L),w[F+0]=N.x,w[F+1]=N.y,w[F+2]=N.z}(i),function(){for(var L=new G,N=0;N<w.length;N+=3){L.x=w[N+0],L.y=w[N+1],L.z=w[N+2];var F=y(L)/2/Math.PI+.5,D=b(L)/Math.PI+.5;T.push(F,1-D)}g(),l()}(),this.addAttribute("position",new jt(w,3)),this.addAttribute("normal",new jt(w.slice(),3)),this.addAttribute("uv",new jt(T,2)),o===0?this.computeVertexNormals():this.normalizeNormals()}function Rs(t,n){Ee.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:n},this.fromBufferGeometry(new xo(t,n)),this.mergeVertices()}function xo(t,n){var i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],o=[2,1,0,0,3,2,1,3,0,2,3,1];gr.call(this,i,o,t,n),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:n}}function Ls(t,n){Ee.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:n},this.fromBufferGeometry(new Pa(t,n)),this.mergeVertices()}function Pa(t,n){var i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],o=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];gr.call(this,i,o,t,n),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:n}}function Cs(t,n){Ee.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:n},this.fromBufferGeometry(new _o(t,n)),this.mergeVertices()}function _o(t,n){var i=(1+Math.sqrt(5))/2,o=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],u=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];gr.call(this,o,u,t,n),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:n}}function Ps(t,n){Ee.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:n},this.fromBufferGeometry(new bo(t,n)),this.mergeVertices()}function bo(t,n){var i=(1+Math.sqrt(5))/2,o=1/i,u=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-i,0,-o,i,0,o,-i,0,o,i,-o,-i,0,-o,i,0,o,-i,0,o,i,0,-i,0,-o,i,0,-o,-i,0,o,i,0,o],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];gr.call(this,u,l,t,n),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:n}}function Ns(t,n,i,o,u,l){Ee.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:n,radius:i,radialSegments:o,closed:u},l!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var f=new lr(t,n,i,o,u);this.tangents=f.tangents,this.normals=f.normals,this.binormals=f.binormals,this.fromBufferGeometry(f),this.mergeVertices()}function lr(t,n,i,o,u){function l(U){var z=t.getPointAt(U/n),B=g.normals[U],Q=g.binormals[U];for(y=0;y<=o;y++){var $=y/o*Math.PI*2,K=Math.sin($),lt=-Math.cos($);w.x=lt*B.x+K*Q.x,w.y=lt*B.y+K*Q.y,w.z=lt*B.z+K*Q.z,w.normalize(),N.push(w.x,w.y,w.z),b.x=z.x+i*w.x,b.y=z.y+i*w.y,b.z=z.z+i*w.z,L.push(b.x,b.y,b.z)}}function f(){for(y=1;y<=n;y++)for(v=1;v<=o;v++){var U=(o+1)*(y-1)+(v-1),z=(o+1)*y+(v-1),B=(o+1)*y+v,Q=(o+1)*(y-1)+v;D.push(U,z,Q),D.push(z,B,Q)}}function d(){for(v=0;v<=n;v++)for(y=0;y<=o;y++)T.x=v/n,T.y=y/o,F.push(T.x,T.y)}Zt.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:n,radius:i,radialSegments:o,closed:u},n=n||64,i=i||1,o=o||8,u=u||!1;var g=t.computeFrenetFrames(n,u);this.tangents=g.tangents,this.normals=g.normals,this.binormals=g.binormals;var v,y,b=new G,w=new G,T=new gt,L=[],N=[],F=[],D=[];(function(){for(v=0;v<n;v++)l(v);l(u===!1?n:0),d(),f()})(),this.setIndex(D),this.addAttribute("position",new jt(L,3)),this.addAttribute("normal",new jt(N,3)),this.addAttribute("uv",new jt(F,2))}function wo(t,n,i,o,u,l,f){Ee.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:n,tubularSegments:i,radialSegments:o,p:u,q:l},f!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Na(t,n,i,o,u,l)),this.mergeVertices()}function Na(t,n,i,o,u,l){function f(Tt,Z,X,ft,at){var wt=Math.cos(Tt),vt=Math.sin(Tt),Et=X/Z*Tt,St=Math.cos(Et);at.x=ft*(2+St)*.5*wt,at.y=ft*(2+St)*vt*.5,at.z=ft*Math.sin(Et)*.5}Zt.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:n,tubularSegments:i,radialSegments:o,p:u,q:l},t=t||100,n=n||40,i=Math.floor(i)||64,o=Math.floor(o)||8,u=u||2,l=l||3;var d,g,v=[],y=[],b=[],w=[],T=new G,L=new G,N=new G,F=new G,D=new G,U=new G,z=new G;for(d=0;d<=i;++d){var B=d/i*u*Math.PI*2;for(f(B,u,l,t,N),f(B+.01,u,l,t,F),U.subVectors(F,N),z.addVectors(F,N),D.crossVectors(U,z),z.crossVectors(D,U),D.normalize(),z.normalize(),g=0;g<=o;++g){var Q=g/o*Math.PI*2,$=-n*Math.cos(Q),K=n*Math.sin(Q);T.x=N.x+($*z.x+K*D.x),T.y=N.y+($*z.y+K*D.y),T.z=N.z+($*z.z+K*D.z),y.push(T.x,T.y,T.z),L.subVectors(T,N).normalize(),b.push(L.x,L.y,L.z),w.push(d/i),w.push(g/o)}}for(g=1;g<=i;g++)for(d=1;d<=o;d++){var lt=(o+1)*(g-1)+(d-1),Y=(o+1)*g+(d-1),et=(o+1)*g+d,ht=(o+1)*(g-1)+d;v.push(lt,Y,ht),v.push(Y,et,ht)}this.setIndex(v),this.addAttribute("position",new jt(y,3)),this.addAttribute("normal",new jt(b,3)),this.addAttribute("uv",new jt(w,2))}function Is(t,n,i,o,u){Ee.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:n,radialSegments:i,tubularSegments:o,arc:u},this.fromBufferGeometry(new Mo(t,n,i,o,u)),this.mergeVertices()}function Mo(t,n,i,o,u){Zt.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:n,radialSegments:i,tubularSegments:o,arc:u},t=t||100,n=n||40,i=Math.floor(i)||8,o=Math.floor(o)||6,u=u||2*Math.PI;var l,f,d=[],g=[],v=[],y=[],b=new G,w=new G,T=new G;for(l=0;l<=i;l++)for(f=0;f<=o;f++){var L=f/o*u,N=l/i*Math.PI*2;w.x=(t+n*Math.cos(N))*Math.cos(L),w.y=(t+n*Math.cos(N))*Math.sin(L),w.z=n*Math.sin(N),g.push(w.x,w.y,w.z),b.x=t*Math.cos(L),b.y=t*Math.sin(L),T.subVectors(w,b).normalize(),v.push(T.x,T.y,T.z),y.push(f/o),y.push(l/i)}for(l=1;l<=i;l++)for(f=1;f<=o;f++){var F=(o+1)*l+f-1,D=(o+1)*(l-1)+f-1,U=(o+1)*(l-1)+f,z=(o+1)*l+f;d.push(F,D,z),d.push(D,U,z)}this.setIndex(d),this.addAttribute("position",new jt(g,3)),this.addAttribute("normal",new jt(v,3)),this.addAttribute("uv",new jt(y,2))}function ra(t,n){Ee.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:n},this.fromBufferGeometry(new Vr(t,n)),this.mergeVertices()}function Vr(t,n){t!==void 0&&(Zt.call(this),this.type="ExtrudeBufferGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,n),this.computeVertexNormals())}function Os(t,n){Ee.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:n},this.fromBufferGeometry(new Eo(t,n)),this.mergeVertices()}function Eo(t,n){n=n||{};var i=n.font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Ee;var o=i.generateShapes(t,n.size,n.curveSegments);n.amount=n.height!==void 0?n.height:50,n.bevelThickness===void 0&&(n.bevelThickness=10),n.bevelSize===void 0&&(n.bevelSize=8),n.bevelEnabled===void 0&&(n.bevelEnabled=!1),Vr.call(this,o,n),this.type="TextBufferGeometry"}function Ia(t,n,i,o,u,l,f){Ee.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:n,heightSegments:i,phiStart:o,phiLength:u,thetaStart:l,thetaLength:f},this.fromBufferGeometry(new Oa(t,n,i,o,u,l,f)),this.mergeVertices()}function Oa(t,n,i,o,u,l,f){Zt.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:n,heightSegments:i,phiStart:o,phiLength:u,thetaStart:l,thetaLength:f},t=t||50,n=Math.max(3,Math.floor(n)||8),i=Math.max(2,Math.floor(i)||6),o=o!==void 0?o:0,u=u!==void 0?u:2*Math.PI,l=l!==void 0?l:0,f=f!==void 0?f:Math.PI;var d,g,v=l+f,y=0,b=[],w=new G,T=new G,L=[],N=[],F=[],D=[];for(g=0;g<=i;g++){var U=[],z=g/i;for(d=0;d<=n;d++){var B=d/n;w.x=-t*Math.cos(o+B*u)*Math.sin(l+z*f),w.y=t*Math.cos(l+z*f),w.z=t*Math.sin(o+B*u)*Math.sin(l+z*f),N.push(w.x,w.y,w.z),T.set(w.x,w.y,w.z).normalize(),F.push(T.x,T.y,T.z),D.push(B,1-z),U.push(y++)}b.push(U)}for(g=0;g<i;g++)for(d=0;d<n;d++){var Q=b[g][d+1],$=b[g][d],K=b[g+1][d],lt=b[g+1][d+1];(g!==0||l>0)&&L.push(Q,$,lt),(g!==i-1||v<Math.PI)&&L.push($,K,lt)}this.setIndex(L),this.addAttribute("position",new jt(N,3)),this.addAttribute("normal",new jt(F,3)),this.addAttribute("uv",new jt(D,2))}function Us(t,n,i,o,u,l){Ee.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:n,thetaSegments:i,phiSegments:o,thetaStart:u,thetaLength:l},this.fromBufferGeometry(new Ua(t,n,i,o,u,l)),this.mergeVertices()}function Ua(t,n,i,o,u,l){Zt.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:n,thetaSegments:i,phiSegments:o,thetaStart:u,thetaLength:l},t=t||20,n=n||50,u=u!==void 0?u:0,l=l!==void 0?l:2*Math.PI,i=i!==void 0?Math.max(3,i):8,o=o!==void 0?Math.max(1,o):1;var f,d,g,v=[],y=[],b=[],w=[],T=t,L=(n-t)/o,N=new G,F=new gt;for(d=0;d<=o;d++){for(g=0;g<=i;g++)f=u+g/i*l,N.x=T*Math.cos(f),N.y=T*Math.sin(f),y.push(N.x,N.y,N.z),b.push(0,0,1),F.x=(N.x/n+1)/2,F.y=(N.y/n+1)/2,w.push(F.x,F.y);T+=L}for(d=0;d<o;d++){var D=d*(i+1);for(g=0;g<i;g++){f=g+D;var U=f,z=f+i+1,B=f+i+2,Q=f+1;v.push(U,z,Q),v.push(z,B,Q)}}this.setIndex(v),this.addAttribute("position",new jt(y,3)),this.addAttribute("normal",new jt(b,3)),this.addAttribute("uv",new jt(w,2))}function Ds(t,n,i,o){Ee.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:n,phiStart:i,phiLength:o},this.fromBufferGeometry(new To(t,n,i,o)),this.mergeVertices()}function To(t,n,i,o){Zt.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:n,phiStart:i,phiLength:o},n=Math.floor(n)||12,i=i||0,o=o||2*Math.PI,o=Ce.clamp(o,0,2*Math.PI);var u,l,f,d=[],g=[],v=[],y=1/n,b=new G,w=new gt;for(l=0;l<=n;l++){var T=i+l*y*o,L=Math.sin(T),N=Math.cos(T);for(f=0;f<=t.length-1;f++)b.x=t[f].x*L,b.y=t[f].y,b.z=t[f].x*N,g.push(b.x,b.y,b.z),w.x=l/n,w.y=f/(t.length-1),v.push(w.x,w.y)}for(l=0;l<n;l++)for(f=0;f<t.length-1;f++){u=f+l*t.length;var F=u,D=u+t.length,U=u+t.length+1,z=u+1;d.push(F,D,z),d.push(D,U,z)}if(this.setIndex(d),this.addAttribute("position",new jt(g,3)),this.addAttribute("uv",new jt(v,2)),this.computeVertexNormals(),o===2*Math.PI){var B=this.attributes.normal.array,Q=new G,$=new G,K=new G;for(u=n*t.length*3,l=0,f=0;l<t.length;l++,f+=3)Q.x=B[f+0],Q.y=B[f+1],Q.z=B[f+2],$.x=B[u+f+0],$.y=B[u+f+1],$.z=B[u+f+2],K.addVectors(Q,$).normalize(),B[f+0]=B[u+f+0]=K.x,B[f+1]=B[u+f+1]=K.y,B[f+2]=B[u+f+2]=K.z}}function Da(t,n){Ee.call(this),this.type="ShapeGeometry",typeof n=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),n=n.curveSegments),this.parameters={shapes:t,curveSegments:n},this.fromBufferGeometry(new So(t,n)),this.mergeVertices()}function So(t,n){function i(y){var b,w,T,L=u.length/3,N=y.extractPoints(n),F=N.shape,D=N.holes;if(oi.isClockWise(F)===!1)for(F=F.reverse(),b=0,w=D.length;b<w;b++)T=D[b],oi.isClockWise(T)===!0&&(D[b]=T.reverse());var U=oi.triangulateShape(F,D);for(b=0,w=D.length;b<w;b++)T=D[b],F=F.concat(T);for(b=0,w=F.length;b<w;b++){var z=F[b];u.push(z.x,z.y,0),l.push(0,0,1),f.push(z.x,z.y)}for(b=0,w=U.length;b<w;b++){var B=U[b],Q=B[0]+L,$=B[1]+L,K=B[2]+L;o.push(Q,$,K),g+=3}}Zt.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:n},n=n||12;var o=[],u=[],l=[],f=[],d=0,g=0;if(Array.isArray(t)===!1)i(t);else for(var v=0;v<t.length;v++)i(t[v]),this.addGroup(d,g,v),d+=g,g=0;this.setIndex(o),this.addAttribute("position",new jt(u,3)),this.addAttribute("normal",new jt(l,3)),this.addAttribute("uv",new jt(f,2))}function Ao(t,n){Zt.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:n},n=n!==void 0?n:1;var i,o,u,l,f=[],d=Math.cos(Ce.DEG2RAD*n),g=[0,0],v={},y=["a","b","c"];t.isBufferGeometry?(l=new Ee,l.fromBufferGeometry(t)):l=t.clone(),l.mergeVertices(),l.computeFaceNormals();for(var b=l.vertices,w=l.faces,T=0,L=w.length;T<L;T++)for(var N=w[T],F=0;F<3;F++)i=N[y[F]],o=N[y[(F+1)%3]],g[0]=Math.min(i,o),g[1]=Math.max(i,o),u=g[0]+","+g[1],v[u]===void 0?v[u]={index1:g[0],index2:g[1],face1:T,face2:void 0}:v[u].face2=T;for(u in v){var D=v[u];if(D.face2===void 0||w[D.face1].normal.dot(w[D.face2].normal)<=d){var U=b[D.index1];f.push(U.x,U.y,U.z),U=b[D.index2],f.push(U.x,U.y,U.z)}}this.addAttribute("position",new jt(f,3))}function ia(t,n,i,o,u,l,f,d){Ee.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:n,height:i,radialSegments:o,heightSegments:u,openEnded:l,thetaStart:f,thetaLength:d},this.fromBufferGeometry(new Ii(t,n,i,o,u,l,f,d)),this.mergeVertices()}function Ii(t,n,i,o,u,l,f,d){function g(U){var z,B,Q,$=new gt,K=new G,lt=0,Y=U===!0?t:n,et=U===!0?1:-1;for(B=L,z=1;z<=o;z++)b.push(0,F*et,0),w.push(0,et,0),T.push(.5,.5),L++;for(Q=L,z=0;z<=o;z++){var ht=z/o,Tt=ht*d+f,Z=Math.cos(Tt),X=Math.sin(Tt);K.x=Y*X,K.y=F*et,K.z=Y*Z,b.push(K.x,K.y,K.z),w.push(0,et,0),$.x=.5*Z+.5,$.y=.5*X*et+.5,T.push($.x,$.y),L++}for(z=0;z<o;z++){var ft=B+z,at=Q+z;U===!0?y.push(at,at+1,ft):y.push(at+1,at,ft),lt+=3}v.addGroup(D,lt,U===!0?1:2),D+=lt}Zt.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:n,height:i,radialSegments:o,heightSegments:u,openEnded:l,thetaStart:f,thetaLength:d};var v=this;t=t!==void 0?t:20,n=n!==void 0?n:20,i=i!==void 0?i:100,o=Math.floor(o)||8,u=Math.floor(u)||1,l=l!==void 0&&l,f=f!==void 0?f:0,d=d!==void 0?d:2*Math.PI;var y=[],b=[],w=[],T=[],L=0,N=[],F=i/2,D=0;(function(){var U,z,B=new G,Q=new G,$=0,K=(n-t)/i;for(z=0;z<=u;z++){var lt=[],Y=z/u,et=Y*(n-t)+t;for(U=0;U<=o;U++){var ht=U/o,Tt=ht*d+f,Z=Math.sin(Tt),X=Math.cos(Tt);Q.x=et*Z,Q.y=-Y*i+F,Q.z=et*X,b.push(Q.x,Q.y,Q.z),B.set(Z,K,X).normalize(),w.push(B.x,B.y,B.z),T.push(ht,1-Y),lt.push(L++)}N.push(lt)}for(U=0;U<o;U++)for(z=0;z<u;z++){var ft=N[z][U],at=N[z+1][U],wt=N[z+1][U+1],vt=N[z][U+1];y.push(ft,at,vt),y.push(at,wt,vt),$+=6}v.addGroup(D,$,0),D+=$})(),l===!1&&(t>0&&g(!0),n>0&&g(!1)),this.setIndex(y),this.addAttribute("position",new jt(b,3)),this.addAttribute("normal",new jt(w,3)),this.addAttribute("uv",new jt(T,2))}function Oi(t,n,i,o,u,l,f){ia.call(this,0,t,n,i,o,u,l,f),this.type="ConeGeometry",this.parameters={radius:t,height:n,radialSegments:i,heightSegments:o,openEnded:u,thetaStart:l,thetaLength:f}}function Fs(t,n,i,o,u,l,f){Ii.call(this,0,t,n,i,o,u,l,f),this.type="ConeBufferGeometry",this.parameters={radius:t,height:n,radialSegments:i,heightSegments:o,openEnded:u,thetaStart:l,thetaLength:f}}function zs(t,n,i,o){Ee.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:n,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new Fa(t,n,i,o)),this.mergeVertices()}function Fa(t,n,i,o){Zt.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:n,thetaStart:i,thetaLength:o},t=t||50,n=n!==void 0?Math.max(3,n):8,i=i!==void 0?i:0,o=o!==void 0?o:2*Math.PI;var u,l,f=[],d=[],g=[],v=[],y=new G,b=new gt;for(d.push(0,0,0),g.push(0,0,1),v.push(.5,.5),l=0,u=3;l<=n;l++,u+=3){var w=i+l/n*o;y.x=t*Math.cos(w),y.y=t*Math.sin(w),d.push(y.x,y.y,y.z),g.push(0,0,1),b.x=(d[u]/t+1)/2,b.y=(d[u+1]/t+1)/2,v.push(b.x,b.y)}for(u=1;u<=n;u++)f.push(u,u+1,0);this.setIndex(f),this.addAttribute("position",new jt(d,3)),this.addAttribute("normal",new jt(g,3)),this.addAttribute("uv",new jt(v,2))}function gi(t){_e.call(this),this.type="ShadowMaterial",this.color=new ee(0),this.opacity=1,this.lights=!0,this.transparent=!0,this.setValues(t)}function Ro(t){qn.call(this,t),this.type="RawShaderMaterial"}function vi(t){_e.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ee(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ee(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ui(t){vi.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function Mr(t){_e.call(this),this.type="MeshPhongMaterial",this.color=new ee(16777215),this.specular=new ee(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ee(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=su,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function za(t){Mr.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function Ba(t){_e.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function ka(t){_e.call(this),this.type="MeshLambertMaterial",this.color=new ee(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ee(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=su,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Di(t){rn.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function _l(t,n,i){var o=this,u=!1,l=0,f=0;this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=i,this.itemStart=function(d){f++,u===!1&&o.onStart!==void 0&&o.onStart(d,l,f),u=!0},this.itemEnd=function(d){l++,o.onProgress!==void 0&&o.onProgress(d,l,f),l===f&&(u=!1,o.onLoad!==void 0&&o.onLoad())},this.itemError=function(d){o.onError!==void 0&&o.onError(d)}}function Er(t){this.manager=t!==void 0?t:Cr}function Fi(t){this.manager=t!==void 0?t:Cr,this._parser=null}function bl(t){this.manager=t!==void 0?t:Cr,this._parser=null}function Bs(t){this.manager=t!==void 0?t:Cr}function wl(t){this.manager=t!==void 0?t:Cr}function Bu(t){this.manager=t!==void 0?t:Cr}function An(t,n){Yt.call(this),this.type="Light",this.color=new ee(t),this.intensity=n!==void 0?n:1,this.receiveShadow=void 0}function Ha(t,n,i){An.call(this,t,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Yt.DefaultUp),this.updateMatrix(),this.groundColor=new ee(n)}function er(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new gt(512,512),this.map=null,this.matrix=new Ut}function ku(){er.call(this,new zn(50,1,.5,500))}function Hu(t,n,i,o,u,l){An.call(this,t,n),this.type="SpotLight",this.position.copy(Yt.DefaultUp),this.updateMatrix(),this.target=new Yt,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(f){this.intensity=f/Math.PI}}),this.distance=i!==void 0?i:0,this.angle=o!==void 0?o:Math.PI/3,this.penumbra=u!==void 0?u:0,this.decay=l!==void 0?l:1,this.shadow=new ku}function ks(t,n,i,o){An.call(this,t,n),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(u){this.intensity=u/(4*Math.PI)}}),this.distance=i!==void 0?i:0,this.decay=o!==void 0?o:1,this.shadow=new er(new zn(90,1,.5,500))}function Hs(){er.call(this,new co(-5,5,5,-5,.5,500))}function Ga(t,n){An.call(this,t,n),this.type="DirectionalLight",this.position.copy(Yt.DefaultUp),this.updateMatrix(),this.target=new Yt,this.shadow=new Hs}function Gs(t,n){An.call(this,t,n),this.type="AmbientLight",this.castShadow=void 0}function Vs(t,n,i,o){An.call(this,t,n),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=i!==void 0?i:10,this.height=o!==void 0?o:10}function Tr(t,n,i,o){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=o!==void 0?o:new n.constructor(i),this.sampleValues=n,this.valueSize=i}function Gu(t,n,i,o){Tr.call(this,t,n,i,o),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Lo(t,n,i,o){Tr.call(this,t,n,i,o)}function Vu(t,n,i,o){Tr.call(this,t,n,i,o)}function Va(t,n,i,o){if(t===void 0)throw new Error("track name is undefined");if(n===void 0||n.length===0)throw new Error("no keyframes in track named "+t);this.name=t,this.times=ir.convertArray(n,this.TimeBufferType),this.values=ir.convertArray(i,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation),this.validate(),this.optimize()}function Co(t,n,i,o){Va.call(this,t,n,i,o)}function ju(t,n,i,o){Tr.call(this,t,n,i,o)}function aa(t,n,i,o){Va.call(this,t,n,i,o)}function oa(t,n,i,o){Va.call(this,t,n,i,o)}function js(t,n,i,o){Va.call(this,t,n,i,o)}function Wu(t,n,i){Va.call(this,t,n,i)}function Xu(t,n,i,o){Va.call(this,t,n,i,o)}function ja(t,n,i,o){Va.apply(this,arguments)}function Sr(t,n,i){this.name=t,this.tracks=i,this.duration=n!==void 0?n:-1,this.uuid=Ce.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function qu(t){this.manager=t!==void 0?t:Cr,this.textures={}}function Ml(t){this.manager=t!==void 0?t:Cr}function yi(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function Ws(t){typeof t=="boolean"&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=t!==void 0?t:Cr,this.withCredentials=!1}function El(t){this.manager=t!==void 0?t:Cr,this.texturePath=""}function Xs(t,n,i,o,u){var l=.5*(o-n),f=.5*(u-i),d=t*t;return(2*i-2*o+l+f)*(t*d)+(-3*i+3*o-2*l-f)*d+l*t+i}function pf(t,n){var i=1-t;return i*i*n}function mf(t,n){return 2*(1-t)*t*n}function Ar(t,n){return t*t*n}function Po(t,n,i,o){return pf(t,n)+mf(t,i)+Ar(t,o)}function Mn(t,n){var i=1-t;return i*i*i*n}function Yu(t,n){var i=1-t;return 3*i*i*t*n}function Tl(t,n){return 3*(1-t)*t*t*n}function gf(t,n){return t*t*t*n}function qs(t,n,i,o,u){return Mn(t,n)+Yu(t,i)+Tl(t,o)+gf(t,u)}function vn(){this.arcLengthDivisions=200}function xi(t,n){vn.call(this),this.v1=t,this.v2=n}function No(){vn.call(this),this.curves=[],this.autoClose=!1}function jr(t,n,i,o,u,l,f,d){vn.call(this),this.aX=t,this.aY=n,this.xRadius=i,this.yRadius=o,this.aStartAngle=u,this.aEndAngle=l,this.aClockwise=f,this.aRotation=d||0}function Rr(t){vn.call(this),this.points=t===void 0?[]:t}function zi(t,n,i,o){vn.call(this),this.v0=t,this.v1=n,this.v2=i,this.v3=o}function ni(t,n,i){vn.call(this),this.v0=t,this.v1=n,this.v2=i}function Wa(t){No.call(this),this.currentPoint=new gt,t&&this.fromPoints(t)}function _i(){Wa.apply(this,arguments),this.holes=[]}function Io(){this.subPaths=[],this.currentPath=null}function Ys(t){this.data=t}function Sl(t){this.manager=t!==void 0?t:Cr}function Zu(t){this.manager=t!==void 0?t:Cr}function Al(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new zn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new zn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Oo(t,n,i){Yt.call(this),this.type="CubeCamera";var o=new zn(90,1,t,n);o.up.set(0,-1,0),o.lookAt(new G(1,0,0)),this.add(o);var u=new zn(90,1,t,n);u.up.set(0,-1,0),u.lookAt(new G(-1,0,0)),this.add(u);var l=new zn(90,1,t,n);l.up.set(0,0,1),l.lookAt(new G(0,1,0)),this.add(l);var f=new zn(90,1,t,n);f.up.set(0,0,-1),f.lookAt(new G(0,-1,0)),this.add(f);var d=new zn(90,1,t,n);d.up.set(0,-1,0),d.lookAt(new G(0,0,1)),this.add(d);var g=new zn(90,1,t,n);g.up.set(0,-1,0),g.lookAt(new G(0,0,-1)),this.add(g);var v={format:es,magFilter:rr,minFilter:rr};this.renderTarget=new fe(i,i,v),this.renderTarget.texture.name="CubeCamera",this.update=function(y,b){this.parent===null&&this.updateMatrixWorld();var w=this.renderTarget,T=w.texture.generateMipmaps;w.texture.generateMipmaps=!1,w.activeCubeFace=0,y.render(b,o,w),w.activeCubeFace=1,y.render(b,u,w),w.activeCubeFace=2,y.render(b,l,w),w.activeCubeFace=3,y.render(b,f,w),w.activeCubeFace=4,y.render(b,d,w),w.texture.generateMipmaps=T,w.activeCubeFace=5,y.render(b,g,w),y.setRenderTarget(null)},this.clear=function(y,b,w,T){for(var L=this.renderTarget,N=0;N<6;N++)L.activeCubeFace=N,y.setRenderTarget(L),y.clear(b,w,T);y.setRenderTarget(null)}}function Rl(){Yt.call(this),this.type="AudioListener",this.context=bh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Uo(t){Yt.call(this),this.type="Audio",this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function hr(t){Uo.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Ll(t,n){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n!==void 0?n:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Ku(t,n,i){this.binding=t,this.valueSize=i;var o,u=Float64Array;switch(n){case"quaternion":o=this._slerp;break;case"string":case"bool":u=Array,o=this._select;break;default:o=this._lerp}this.buffer=new u(4*i),this._mixBufferRegion=o,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Qu(t,n,i){var o=i||On.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,o)}function On(t,n,i){this.path=n,this.parsedPath=i||On.parseTrackName(n),this.node=On.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Cl(t){this.uuid=Ce.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var n={};this._indicesByUUID=n;for(var i=0,o=arguments.length;i!==o;++i)n[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var u=this;this.stats={objects:{get total(){return u._objects.length},get inUse(){return this.total-u.nCachedObjects_}},get bindingsPerObject(){return u._bindings.length}}}function vf(t,n,i){this._mixer=t,this._clip=n,this._localRoot=i||null;for(var o=n.tracks,u=o.length,l=new Array(u),f={endingStart:Qa,endingEnd:Qa},d=0;d!==u;++d){var g=o[d].createInterpolant(null);l[d]=g,g.settings=f}this._interpolantSettings=f,this._interpolants=l,this._propertyBindings=new Array(u),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=fh,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function yf(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Zs(t){typeof t=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function Pl(){Zt.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Nl(t,n,i,o){this.uuid=Ce.generateUUID(),this.data=t,this.itemSize=n,this.offset=i,this.normalized=o===!0}function Do(t,n){this.uuid=Ce.generateUUID(),this.array=t,this.stride=n,this.count=t!==void 0?t.length/n:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function $u(t,n,i){Do.call(this,t,n),this.meshPerAttribute=i||1}function Ks(t,n,i){Re.call(this,t,n),this.meshPerAttribute=i||1}function Ju(t,n,i,o){this.ray=new ea(t,n),this.near=i||0,this.far=o||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Il(t,n){return t.distance-n.distance}function tc(t,n,i,o){if(t.visible!==!1&&(t.raycast(n,i),o===!0))for(var u=t.children,l=0,f=u.length;l<f;l++)tc(u[l],n,i,!0)}function Ol(t){this.autoStart=t===void 0||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Ul(t,n,i){return this.radius=t!==void 0?t:1,this.phi=n!==void 0?n:0,this.theta=i!==void 0?i:0,this}function Dl(t,n,i){return this.radius=t!==void 0?t:1,this.theta=n!==void 0?n:0,this.y=i!==void 0?i:0,this}function sa(t){Yt.call(this),this.material=t,this.render=function(n){}}function Fo(t,n,i,o){this.object=t,this.size=n!==void 0?n:1;var u=i!==void 0?i:16711680,l=o!==void 0?o:1,f=0,d=this.object.geometry;d&&d.isGeometry?f=3*d.faces.length:d&&d.isBufferGeometry&&(f=d.attributes.normal.count);var g=new Zt,v=new jt(2*f*3,3);g.addAttribute("position",v),pn.call(this,g,new rn({color:u,linewidth:l})),this.matrixAutoUpdate=!1,this.update()}function ua(t,n){Yt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;for(var i=new Zt,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],u=0,l=1;u<32;u++,l++){var f=u/32*Math.PI*2,d=l/32*Math.PI*2;o.push(Math.cos(f),Math.sin(f),1,Math.cos(d),Math.sin(d),1)}i.addAttribute("position",new jt(o,3));var g=new rn({fog:!1});this.cone=new pn(i,g),this.add(this.cone),this.update()}function xf(t){var n=[];t&&t.isBone&&n.push(t);for(var i=0;i<t.children.length;i++)n.push.apply(n,xf(t.children[i]));return n}function zo(t){for(var n=xf(t),i=new Zt,o=[],u=[],l=new ee(0,0,1),f=new ee(0,1,0),d=0;d<n.length;d++){var g=n[d];g.parent&&g.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),u.push(l.r,l.g,l.b),u.push(f.r,f.g,f.b))}i.addAttribute("position",new jt(o,3)),i.addAttribute("color",new jt(u,3));var v=new rn({vertexColors:qa,depthTest:!1,depthWrite:!1,transparent:!0});pn.call(this,i,v),this.root=t,this.bones=n,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.onBeforeRender()}function Bo(t,n,i){this.light=t,this.light.updateMatrixWorld(),this.color=i;var o=new Oa(n,4,2),u=new nn({wireframe:!0,fog:!1});wn.call(this,o,u),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function ko(t,n){Yt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new rn({fog:!1}),o=new Zt;o.addAttribute("position",new Re(new Float32Array(15),3)),this.line=new mr(o,i),this.add(this.line),this.update()}function Bi(t,n,i){Yt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;var o=new Pa(n);o.rotateY(.5*Math.PI),this.material=new nn({wireframe:!0,fog:!1}),this.color===void 0&&(this.material.vertexColors=qa);var u=o.getAttribute("position"),l=new Float32Array(3*u.count);o.addAttribute("color",new Re(l,3)),this.add(new wn(o,this.material)),this.update()}function Ho(t,n,i,o){t=t||10,n=n||10,i=new ee(i!==void 0?i:4473924),o=new ee(o!==void 0?o:8947848);for(var u=n/2,l=t/n,f=t/2,d=[],g=[],v=0,y=0,b=-f;v<=n;v++,b+=l){d.push(-f,0,b,f,0,b),d.push(b,0,-f,b,0,f);var w=v===u?i:o;w.toArray(g,y),y+=3,w.toArray(g,y),y+=3,w.toArray(g,y),y+=3,w.toArray(g,y),y+=3}var T=new Zt;T.addAttribute("position",new jt(d,3)),T.addAttribute("color",new jt(g,3));var L=new rn({vertexColors:qa});pn.call(this,T,L)}function Qs(t,n,i,o,u,l){t=t||10,n=n||16,i=i||8,o=o||64,u=new ee(u!==void 0?u:4473924),l=new ee(l!==void 0?l:8947848);var f,d,g,v,y,b,w,T=[],L=[];for(v=0;v<=n;v++)g=v/n*(2*Math.PI),f=Math.sin(g)*t,d=Math.cos(g)*t,T.push(0,0,0),T.push(f,0,d),w=1&v?u:l,L.push(w.r,w.g,w.b),L.push(w.r,w.g,w.b);for(v=0;v<=i;v++)for(w=1&v?u:l,b=t-t/i*v,y=0;y<o;y++)g=y/o*(2*Math.PI),f=Math.sin(g)*b,d=Math.cos(g)*b,T.push(f,0,d),L.push(w.r,w.g,w.b),g=(y+1)/o*(2*Math.PI),f=Math.sin(g)*b,d=Math.cos(g)*b,T.push(f,0,d),L.push(w.r,w.g,w.b);var N=new Zt;N.addAttribute("position",new jt(T,3)),N.addAttribute("color",new jt(L,3));var F=new rn({vertexColors:qa});pn.call(this,N,F)}function Go(t,n,i,o){this.object=t,this.size=n!==void 0?n:1;var u=i!==void 0?i:16776960,l=o!==void 0?o:1,f=0,d=this.object.geometry;d&&d.isGeometry?f=d.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var g=new Zt,v=new jt(2*f*3,3);g.addAttribute("position",v),pn.call(this,g,new rn({color:u,linewidth:l})),this.matrixAutoUpdate=!1,this.update()}function Vo(t,n,i){Yt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,n===void 0&&(n=1);var o=new Zt;o.addAttribute("position",new jt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));var u=new rn({fog:!1});this.lightPlane=new mr(o,u),this.add(this.lightPlane),o=new Zt,o.addAttribute("position",new jt([0,0,0,0,0,1],3)),this.targetLine=new mr(o,u),this.add(this.targetLine),this.update()}function jo(t){function n(T,L,N){i(T,N),i(L,N)}function i(T,L){l.push(0,0,0),f.push(L.r,L.g,L.b),d[T]===void 0&&(d[T]=[]),d[T].push(l.length/3-1)}var o=new Zt,u=new rn({color:16777215,vertexColors:Xl}),l=[],f=[],d={},g=new ee(16755200),v=new ee(16711680),y=new ee(43775),b=new ee(16777215),w=new ee(3355443);n("n1","n2",g),n("n2","n4",g),n("n4","n3",g),n("n3","n1",g),n("f1","f2",g),n("f2","f4",g),n("f4","f3",g),n("f3","f1",g),n("n1","f1",g),n("n2","f2",g),n("n3","f3",g),n("n4","f4",g),n("p","n1",v),n("p","n2",v),n("p","n3",v),n("p","n4",v),n("u1","u2",y),n("u2","u3",y),n("u3","u1",y),n("c","t",b),n("p","c",w),n("cn1","cn2",w),n("cn3","cn4",w),n("cf1","cf2",w),n("cf3","cf4",w),o.addAttribute("position",new jt(l,3)),o.addAttribute("color",new jt(f,3)),pn.call(this,o,u),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=d,this.update()}function ca(t,n){this.object=t,n===void 0&&(n=16776960);var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(24),u=new Zt;u.setIndex(new Re(i,1)),u.addAttribute("position",new Re(o,3)),pn.call(this,u,new rn({color:n})),this.matrixAutoUpdate=!1,this.update()}function Wo(t,n){this.type="Box3Helper",this.box=t;var i=n!==void 0?n:16776960,o=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),u=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],l=new Zt;l.setIndex(new Re(o,1)),l.addAttribute("position",new jt(u,3)),pn.call(this,l,new rn({color:i})),this.geometry.computeBoundingSphere(),this.onBeforeRender()}function Xo(t,n,i){this.type="PlaneHelper",this.plane=t,this.size=n===void 0?1:n;var o=i!==void 0?i:16776960,u=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],l=new Zt;l.addAttribute("position",new jt(u,3)),l.computeBoundingSphere(),mr.call(this,l,new rn({color:o}));var f=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],d=new Zt;d.addAttribute("position",new jt(f,3)),d.computeBoundingSphere(),this.add(new wn(d,new nn({color:o,opacity:.2,transparent:!0,depthWrite:!1}))),this.onBeforeRender()}function Xa(t,n,i,o,u,l){Yt.call(this),o===void 0&&(o=16776960),i===void 0&&(i=1),u===void 0&&(u=.2*i),l===void 0&&(l=.2*u),ns===void 0&&(ns=new Zt,ns.addAttribute("position",new jt([0,0,0,0,1,0],3)),rs=new Ii(0,.5,1,5,1),rs.translate(0,-.5,0)),this.position.copy(n),this.line=new mr(ns,new rn({color:o})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new wn(rs,new nn({color:o})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,u,l)}function ec(t){t=t||1;var n=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],o=new Zt;o.addAttribute("position",new jt(n,3)),o.addAttribute("color",new jt(i,3));var u=new rn({vertexColors:qa});pn.call(this,o,u)}function Fl(){function t(l,f,d,g){n=l,i=d,o=-3*l+3*f-2*d-g,u=2*l-2*f+d+g}var n=0,i=0,o=0,u=0;return{initCatmullRom:function(l,f,d,g,v){t(f,d,v*(d-l),v*(g-f))},initNonuniformCatmullRom:function(l,f,d,g,v,y,b){var w=(f-l)/v-(d-l)/(v+y)+(d-f)/y,T=(d-f)/y-(g-f)/(y+b)+(g-d)/b;w*=y,T*=y,t(f,d,w,T)},calc:function(l){var f=l*l;return n+i*l+o*f+u*(f*l)}}}function Wr(t){vn.call(this),t.length<2&&console.warn("THREE.CatmullRomCurve3: Points array needs at least two entries."),this.points=t||[],this.closed=!1}function $s(t,n,i,o){vn.call(this),this.v0=t,this.v1=n,this.v2=i,this.v3=o}function Js(t,n,i){vn.call(this),this.v0=t,this.v1=n,this.v2=i}function ri(t,n){vn.call(this),this.v1=t,this.v2=n}function tu(t,n,i,o,u,l){jr.call(this,t,n,i,i,o,u,l)}function mp(t,n,i,o,u,l,f){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Ci(t,n,i,u,l,f)}function gp(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function _f(t){return t===void 0&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function vp(t,n){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new mo(t,n)}function yp(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new ti(t)}function xp(t,n){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new mo(t,n)}function bf(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ei(t)}function wf(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ei(t)}function _p(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ei(t)}function Mf(t,n,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new G(t,n,i)}function Ef(t,n){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new Re(t,n).setDynamic(!0)}function Tf(t,n){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Bn(t,n)}function bp(t,n){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Qr(t,n)}function wp(t,n){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Ta(t,n)}function Mp(t,n){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Ji(t,n)}function Ep(t,n){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Pi(t,n)}function Tp(t,n){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new gs(t,n)}function nc(t,n){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Sa(t,n)}function zl(t,n){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new jt(t,n)}function rc(t,n){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new vs(t,n)}function ic(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Wr.call(this,t),this.type="catmullrom",this.closed=!0}function Sf(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Wr.call(this,t),this.type="catmullrom"}function Bl(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Wr.call(this,t),this.type="catmullrom"}function la(t,n){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new ca(t,n)}function kl(t,n){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new pn(new Ao(t.geometry),new rn({color:n!==void 0?n:16777215}))}function Hl(t,n){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new pn(new vo(t.geometry),new rn({color:n!==void 0?n:16777215}))}function Sp(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Er(t)}function Af(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new bl(t)}function Ap(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,n){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(n)},this.unprojectVector=function(t,n){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(n)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Rf(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}Object.defineProperty(P,"__esModule",{value:!0}),C.d(P,"WebGLRenderTargetCube",function(){return fe}),C.d(P,"WebGLRenderTarget",function(){return de}),C.d(P,"WebGLRenderer",function(){return Iu}),C.d(P,"ShaderLib",function(){return Ja}),C.d(P,"UniformsLib",function(){return se}),C.d(P,"UniformsUtils",function(){return vr}),C.d(P,"ShaderChunk",function(){return Je}),C.d(P,"FogExp2",function(){return Ca}),C.d(P,"Fog",function(){return po}),C.d(P,"Scene",function(){return Ou}),C.d(P,"LensFlare",function(){return ws}),C.d(P,"Sprite",function(){return ti}),C.d(P,"LOD",function(){return wr}),C.d(P,"SkinnedMesh",function(){return Du}),C.d(P,"Skeleton",function(){return Ms}),C.d(P,"Bone",function(){return Uu}),C.d(P,"Mesh",function(){return wn}),C.d(P,"LineSegments",function(){return pn}),C.d(P,"LineLoop",function(){return Fu}),C.d(P,"Line",function(){return mr}),C.d(P,"Points",function(){return mo}),C.d(P,"Group",function(){return Es}),C.d(P,"VideoTexture",function(){return zu}),C.d(P,"DataTexture",function(){return le}),C.d(P,"CompressedTexture",function(){return go}),C.d(P,"CubeTexture",function(){return pe}),C.d(P,"CanvasTexture",function(){return kr}),C.d(P,"DepthTexture",function(){return Ts}),C.d(P,"Texture",function(){return Dt}),C.d(P,"CompressedTextureLoader",function(){return Fi}),C.d(P,"DataTextureLoader",function(){return bl}),C.d(P,"CubeTextureLoader",function(){return wl}),C.d(P,"TextureLoader",function(){return Bu}),C.d(P,"ObjectLoader",function(){return El}),C.d(P,"MaterialLoader",function(){return qu}),C.d(P,"BufferGeometryLoader",function(){return Ml}),C.d(P,"DefaultLoadingManager",function(){return Cr}),C.d(P,"LoadingManager",function(){return _l}),C.d(P,"JSONLoader",function(){return Ws}),C.d(P,"ImageLoader",function(){return Bs}),C.d(P,"FontLoader",function(){return Sl}),C.d(P,"FileLoader",function(){return Er}),C.d(P,"Loader",function(){return yi}),C.d(P,"Cache",function(){return gu}),C.d(P,"AudioLoader",function(){return Zu}),C.d(P,"SpotLightShadow",function(){return ku}),C.d(P,"SpotLight",function(){return Hu}),C.d(P,"PointLight",function(){return ks}),C.d(P,"RectAreaLight",function(){return Vs}),C.d(P,"HemisphereLight",function(){return Ha}),C.d(P,"DirectionalLightShadow",function(){return Hs}),C.d(P,"DirectionalLight",function(){return Ga}),C.d(P,"AmbientLight",function(){return Gs}),C.d(P,"LightShadow",function(){return er}),C.d(P,"Light",function(){return An}),C.d(P,"StereoCamera",function(){return Al}),C.d(P,"PerspectiveCamera",function(){return zn}),C.d(P,"OrthographicCamera",function(){return co}),C.d(P,"CubeCamera",function(){return Oo}),C.d(P,"ArrayCamera",function(){return xs}),C.d(P,"Camera",function(){return di}),C.d(P,"AudioListener",function(){return Rl}),C.d(P,"PositionalAudio",function(){return hr}),C.d(P,"AudioContext",function(){return bh}),C.d(P,"AudioAnalyser",function(){return Ll}),C.d(P,"Audio",function(){return Uo}),C.d(P,"VectorKeyframeTrack",function(){return Co}),C.d(P,"StringKeyframeTrack",function(){return js}),C.d(P,"QuaternionKeyframeTrack",function(){return aa}),C.d(P,"NumberKeyframeTrack",function(){return oa}),C.d(P,"ColorKeyframeTrack",function(){return Xu}),C.d(P,"BooleanKeyframeTrack",function(){return Wu}),C.d(P,"PropertyMixer",function(){return Ku}),C.d(P,"PropertyBinding",function(){return On}),C.d(P,"KeyframeTrack",function(){return ja}),C.d(P,"AnimationUtils",function(){return ir}),C.d(P,"AnimationObjectGroup",function(){return Cl}),C.d(P,"AnimationMixer",function(){return yf}),C.d(P,"AnimationClip",function(){return Sr}),C.d(P,"Uniform",function(){return Zs}),C.d(P,"InstancedBufferGeometry",function(){return Pl}),C.d(P,"BufferGeometry",function(){return Zt}),C.d(P,"GeometryIdCount",function(){return Cu}),C.d(P,"Geometry",function(){return Ee}),C.d(P,"InterleavedBufferAttribute",function(){return Nl}),C.d(P,"InstancedInterleavedBuffer",function(){return $u}),C.d(P,"InterleavedBuffer",function(){return Do}),C.d(P,"InstancedBufferAttribute",function(){return Ks}),C.d(P,"Face3",function(){return Ci}),C.d(P,"Object3D",function(){return Yt}),C.d(P,"Raycaster",function(){return Ju}),C.d(P,"Layers",function(){return sl}),C.d(P,"EventDispatcher",function(){return A}),C.d(P,"Clock",function(){return Ol}),C.d(P,"QuaternionLinearInterpolant",function(){return ju}),C.d(P,"LinearInterpolant",function(){return Lo}),C.d(P,"DiscreteInterpolant",function(){return Vu}),C.d(P,"CubicInterpolant",function(){return Gu}),C.d(P,"Interpolant",function(){return Tr}),C.d(P,"Triangle",function(){return Gr}),C.d(P,"Math",function(){return Ce}),C.d(P,"Spherical",function(){return Ul}),C.d(P,"Cylindrical",function(){return Dl}),C.d(P,"Plane",function(){return bn}),C.d(P,"Frustum",function(){return Ri}),C.d(P,"Sphere",function(){return Xe}),C.d(P,"Ray",function(){return ea}),C.d(P,"Matrix4",function(){return Ut}),C.d(P,"Matrix3",function(){return dn}),C.d(P,"Box3",function(){return _t}),C.d(P,"Box2",function(){return Xn}),C.d(P,"Line3",function(){return ho}),C.d(P,"Euler",function(){return $i}),C.d(P,"Vector4",function(){return Bt}),C.d(P,"Vector3",function(){return G}),C.d(P,"Vector2",function(){return gt}),C.d(P,"Quaternion",function(){return Ct}),C.d(P,"Color",function(){return ee}),C.d(P,"ImmediateRenderObject",function(){return sa}),C.d(P,"VertexNormalsHelper",function(){return Fo}),C.d(P,"SpotLightHelper",function(){return ua}),C.d(P,"SkeletonHelper",function(){return zo}),C.d(P,"PointLightHelper",function(){return Bo}),C.d(P,"RectAreaLightHelper",function(){return ko}),C.d(P,"HemisphereLightHelper",function(){return Bi}),C.d(P,"GridHelper",function(){return Ho}),C.d(P,"PolarGridHelper",function(){return Qs}),C.d(P,"FaceNormalsHelper",function(){return Go}),C.d(P,"DirectionalLightHelper",function(){return Vo}),C.d(P,"CameraHelper",function(){return jo}),C.d(P,"BoxHelper",function(){return ca}),C.d(P,"Box3Helper",function(){return Wo}),C.d(P,"PlaneHelper",function(){return Xo}),C.d(P,"ArrowHelper",function(){return Xa}),C.d(P,"AxisHelper",function(){return ec}),C.d(P,"CatmullRomCurve3",function(){return Wr}),C.d(P,"CubicBezierCurve3",function(){return $s}),C.d(P,"QuadraticBezierCurve3",function(){return Js}),C.d(P,"LineCurve3",function(){return ri}),C.d(P,"ArcCurve",function(){return tu}),C.d(P,"EllipseCurve",function(){return jr}),C.d(P,"SplineCurve",function(){return Rr}),C.d(P,"CubicBezierCurve",function(){return zi}),C.d(P,"QuadraticBezierCurve",function(){return ni}),C.d(P,"LineCurve",function(){return xi}),C.d(P,"Shape",function(){return _i}),C.d(P,"Path",function(){return Wa}),C.d(P,"ShapePath",function(){return Io}),C.d(P,"Font",function(){return Ys}),C.d(P,"CurvePath",function(){return No}),C.d(P,"Curve",function(){return vn}),C.d(P,"ShapeUtils",function(){return oi}),C.d(P,"SceneUtils",function(){return Fp}),C.d(P,"WebGLUtils",function(){return bs}),C.d(P,"WireframeGeometry",function(){return vo}),C.d(P,"ParametricGeometry",function(){return Ss}),C.d(P,"ParametricBufferGeometry",function(){return yo}),C.d(P,"TetrahedronGeometry",function(){return Rs}),C.d(P,"TetrahedronBufferGeometry",function(){return xo}),C.d(P,"OctahedronGeometry",function(){return Ls}),C.d(P,"OctahedronBufferGeometry",function(){return Pa}),C.d(P,"IcosahedronGeometry",function(){return Cs}),C.d(P,"IcosahedronBufferGeometry",function(){return _o}),C.d(P,"DodecahedronGeometry",function(){return Ps}),C.d(P,"DodecahedronBufferGeometry",function(){return bo}),C.d(P,"PolyhedronGeometry",function(){return As}),C.d(P,"PolyhedronBufferGeometry",function(){return gr}),C.d(P,"TubeGeometry",function(){return Ns}),C.d(P,"TubeBufferGeometry",function(){return lr}),C.d(P,"TorusKnotGeometry",function(){return wo}),C.d(P,"TorusKnotBufferGeometry",function(){return Na}),C.d(P,"TorusGeometry",function(){return Is}),C.d(P,"TorusBufferGeometry",function(){return Mo}),C.d(P,"TextGeometry",function(){return Os}),C.d(P,"TextBufferGeometry",function(){return Eo}),C.d(P,"SphereGeometry",function(){return Ia}),C.d(P,"SphereBufferGeometry",function(){return Oa}),C.d(P,"RingGeometry",function(){return Us}),C.d(P,"RingBufferGeometry",function(){return Ua}),C.d(P,"PlaneGeometry",function(){return Ra}),C.d(P,"PlaneBufferGeometry",function(){return $r}),C.d(P,"LatheGeometry",function(){return Ds}),C.d(P,"LatheBufferGeometry",function(){return To}),C.d(P,"ShapeGeometry",function(){return Da}),C.d(P,"ShapeBufferGeometry",function(){return So}),C.d(P,"ExtrudeGeometry",function(){return ra}),C.d(P,"ExtrudeBufferGeometry",function(){return Vr}),C.d(P,"EdgesGeometry",function(){return Ao}),C.d(P,"ConeGeometry",function(){return Oi}),C.d(P,"ConeBufferGeometry",function(){return Fs}),C.d(P,"CylinderGeometry",function(){return ia}),C.d(P,"CylinderBufferGeometry",function(){return Ii}),C.d(P,"CircleGeometry",function(){return zs}),C.d(P,"CircleBufferGeometry",function(){return Fa}),C.d(P,"BoxGeometry",function(){return Aa}),C.d(P,"BoxBufferGeometry",function(){return ta}),C.d(P,"ShadowMaterial",function(){return gi}),C.d(P,"SpriteMaterial",function(){return mi}),C.d(P,"RawShaderMaterial",function(){return Ro}),C.d(P,"ShaderMaterial",function(){return qn}),C.d(P,"PointsMaterial",function(){return ei}),C.d(P,"MeshPhysicalMaterial",function(){return Ui}),C.d(P,"MeshStandardMaterial",function(){return vi}),C.d(P,"MeshPhongMaterial",function(){return Mr}),C.d(P,"MeshToonMaterial",function(){return za}),C.d(P,"MeshNormalMaterial",function(){return Ba}),C.d(P,"MeshLambertMaterial",function(){return ka}),C.d(P,"MeshDepthMaterial",function(){return Hr}),C.d(P,"MeshDistanceMaterial",function(){return tr}),C.d(P,"MeshBasicMaterial",function(){return nn}),C.d(P,"LineDashedMaterial",function(){return Di}),C.d(P,"LineBasicMaterial",function(){return rn}),C.d(P,"Material",function(){return _e}),C.d(P,"Float64BufferAttribute",function(){return vs}),C.d(P,"Float32BufferAttribute",function(){return jt}),C.d(P,"Uint32BufferAttribute",function(){return Sa}),C.d(P,"Int32BufferAttribute",function(){return gs}),C.d(P,"Uint16BufferAttribute",function(){return Pi}),C.d(P,"Int16BufferAttribute",function(){return Ji}),C.d(P,"Uint8ClampedBufferAttribute",function(){return Ta}),C.d(P,"Uint8BufferAttribute",function(){return Qr}),C.d(P,"Int8BufferAttribute",function(){return Bn}),C.d(P,"BufferAttribute",function(){return Re}),C.d(P,"REVISION",function(){return qo}),C.d(P,"MOUSE",function(){return eu}),C.d(P,"CullFaceNone",function(){return Gl}),C.d(P,"CullFaceBack",function(){return ha}),C.d(P,"CullFaceFront",function(){return ac}),C.d(P,"CullFaceFrontBack",function(){return nu}),C.d(P,"FrontFaceDirectionCW",function(){return Vl}),C.d(P,"FrontFaceDirectionCCW",function(){return jl}),C.d(P,"BasicShadowMap",function(){return oc}),C.d(P,"PCFShadowMap",function(){return ru}),C.d(P,"PCFSoftShadowMap",function(){return sc}),C.d(P,"FrontSide",function(){return fa}),C.d(P,"BackSide",function(){return da}),C.d(P,"DoubleSide",function(){return Yo}),C.d(P,"FlatShading",function(){return Wl}),C.d(P,"SmoothShading",function(){return Rp}),C.d(P,"NoColors",function(){return uc}),C.d(P,"FaceColors",function(){return Xl}),C.d(P,"VertexColors",function(){return qa}),C.d(P,"NoBlending",function(){return cc}),C.d(P,"NormalBlending",function(){return Zo}),C.d(P,"AdditiveBlending",function(){return iu}),C.d(P,"SubtractiveBlending",function(){return ql}),C.d(P,"MultiplyBlending",function(){return Yl}),C.d(P,"CustomBlending",function(){return Zl}),C.d(P,"AddEquation",function(){return lc}),C.d(P,"SubtractEquation",function(){return Ya}),C.d(P,"ReverseSubtractEquation",function(){return Lf}),C.d(P,"MinEquation",function(){return Kl}),C.d(P,"MaxEquation",function(){return Ko}),C.d(P,"ZeroFactor",function(){return Ql}),C.d(P,"OneFactor",function(){return hc}),C.d(P,"SrcColorFactor",function(){return Cf}),C.d(P,"OneMinusSrcColorFactor",function(){return Pf}),C.d(P,"SrcAlphaFactor",function(){return Za}),C.d(P,"OneMinusSrcAlphaFactor",function(){return fc}),C.d(P,"DstAlphaFactor",function(){return $l}),C.d(P,"OneMinusDstAlphaFactor",function(){return Jl}),C.d(P,"DstColorFactor",function(){return th}),C.d(P,"OneMinusDstColorFactor",function(){return au}),C.d(P,"SrcAlphaSaturateFactor",function(){return eh}),C.d(P,"NeverDepth",function(){return Nf}),C.d(P,"AlwaysDepth",function(){return ou}),C.d(P,"LessDepth",function(){return pa}),C.d(P,"LessEqualDepth",function(){return dc}),C.d(P,"EqualDepth",function(){return nh}),C.d(P,"GreaterEqualDepth",function(){return pc}),C.d(P,"GreaterDepth",function(){return rh}),C.d(P,"NotEqualDepth",function(){return If}),C.d(P,"MultiplyOperation",function(){return su}),C.d(P,"MixOperation",function(){return Of}),C.d(P,"AddOperation",function(){return mc}),C.d(P,"NoToneMapping",function(){return Qo}),C.d(P,"LinearToneMapping",function(){return ih}),C.d(P,"ReinhardToneMapping",function(){return Uf}),C.d(P,"Uncharted2ToneMapping",function(){return Df}),C.d(P,"CineonToneMapping",function(){return uu}),C.d(P,"UVMapping",function(){return gc}),C.d(P,"CubeReflectionMapping",function(){return cu}),C.d(P,"CubeRefractionMapping",function(){return vc}),C.d(P,"EquirectangularReflectionMapping",function(){return yc}),C.d(P,"EquirectangularRefractionMapping",function(){return $o}),C.d(P,"SphericalReflectionMapping",function(){return xc}),C.d(P,"CubeUVReflectionMapping",function(){return _c}),C.d(P,"CubeUVRefractionMapping",function(){return bc}),C.d(P,"RepeatWrapping",function(){return ii}),C.d(P,"ClampToEdgeWrapping",function(){return nr}),C.d(P,"MirroredRepeatWrapping",function(){return ma}),C.d(P,"NearestFilter",function(){return Lr}),C.d(P,"NearestMipMapNearestFilter",function(){return wc}),C.d(P,"NearestMipMapLinearFilter",function(){return Mc}),C.d(P,"LinearFilter",function(){return rr}),C.d(P,"LinearMipMapNearestFilter",function(){return lu}),C.d(P,"LinearMipMapLinearFilter",function(){return Jo}),C.d(P,"UnsignedByteType",function(){return Ec}),C.d(P,"ByteType",function(){return Tc}),C.d(P,"ShortType",function(){return Ff}),C.d(P,"UnsignedShortType",function(){return hu}),C.d(P,"IntType",function(){return zf}),C.d(P,"UnsignedIntType",function(){return ah}),C.d(P,"FloatType",function(){return ki}),C.d(P,"HalfFloatType",function(){return Ka}),C.d(P,"UnsignedShort4444Type",function(){return ts}),C.d(P,"UnsignedShort5551Type",function(){return oh}),C.d(P,"UnsignedShort565Type",function(){return sh}),C.d(P,"UnsignedInt248Type",function(){return fu}),C.d(P,"AlphaFormat",function(){return Bf}),C.d(P,"RGBFormat",function(){return es}),C.d(P,"RGBAFormat",function(){return ai}),C.d(P,"LuminanceFormat",function(){return uh}),C.d(P,"LuminanceAlphaFormat",function(){return ch}),C.d(P,"RGBEFormat",function(){return kf}),C.d(P,"DepthFormat",function(){return Xr}),C.d(P,"DepthStencilFormat",function(){return ga}),C.d(P,"RGB_S3TC_DXT1_Format",function(){return lh}),C.d(P,"RGBA_S3TC_DXT1_Format",function(){return Sc}),C.d(P,"RGBA_S3TC_DXT3_Format",function(){return Ac}),C.d(P,"RGBA_S3TC_DXT5_Format",function(){return Rc}),C.d(P,"RGB_PVRTC_4BPPV1_Format",function(){return Cn}),C.d(P,"RGB_PVRTC_2BPPV1_Format",function(){return Hi}),C.d(P,"RGBA_PVRTC_4BPPV1_Format",function(){return Gi}),C.d(P,"RGBA_PVRTC_2BPPV1_Format",function(){return hh}),C.d(P,"RGB_ETC1_Format",function(){return Lc}),C.d(P,"LoopOnce",function(){return Cc}),C.d(P,"LoopRepeat",function(){return fh}),C.d(P,"LoopPingPong",function(){return ln}),C.d(P,"InterpolateDiscrete",function(){return du}),C.d(P,"InterpolateLinear",function(){return Vi}),C.d(P,"InterpolateSmooth",function(){return va}),C.d(P,"ZeroCurvatureEnding",function(){return Qa}),C.d(P,"ZeroSlopeEnding",function(){return $a}),C.d(P,"WrapAroundEnding",function(){return pu}),C.d(P,"TrianglesDrawMode",function(){return dh}),C.d(P,"TriangleStripDrawMode",function(){return Hf}),C.d(P,"TriangleFanDrawMode",function(){return Gf}),C.d(P,"LinearEncoding",function(){return mu}),C.d(P,"sRGBEncoding",function(){return ph}),C.d(P,"GammaEncoding",function(){return mh}),C.d(P,"RGBEEncoding",function(){return gh}),C.d(P,"LogLuvEncoding",function(){return Lp}),C.d(P,"RGBM7Encoding",function(){return Vf}),C.d(P,"RGBM16Encoding",function(){return jf}),C.d(P,"RGBDEncoding",function(){return Wf}),C.d(P,"BasicDepthPacking",function(){return vh}),C.d(P,"RGBADepthPacking",function(){return Xf}),C.d(P,"CubeGeometry",function(){return Aa}),C.d(P,"Face4",function(){return mp}),C.d(P,"LineStrip",function(){return zp}),C.d(P,"LinePieces",function(){return Bp}),C.d(P,"MeshFaceMaterial",function(){return gp}),C.d(P,"MultiMaterial",function(){return _f}),C.d(P,"PointCloud",function(){return vp}),C.d(P,"Particle",function(){return yp}),C.d(P,"ParticleSystem",function(){return xp}),C.d(P,"PointCloudMaterial",function(){return bf}),C.d(P,"ParticleBasicMaterial",function(){return wf}),C.d(P,"ParticleSystemMaterial",function(){return _p}),C.d(P,"Vertex",function(){return Mf}),C.d(P,"DynamicBufferAttribute",function(){return Ef}),C.d(P,"Int8Attribute",function(){return Tf}),C.d(P,"Uint8Attribute",function(){return bp}),C.d(P,"Uint8ClampedAttribute",function(){return wp}),C.d(P,"Int16Attribute",function(){return Mp}),C.d(P,"Uint16Attribute",function(){return Ep}),C.d(P,"Int32Attribute",function(){return Tp}),C.d(P,"Uint32Attribute",function(){return nc}),C.d(P,"Float32Attribute",function(){return zl}),C.d(P,"Float64Attribute",function(){return rc}),C.d(P,"ClosedSplineCurve3",function(){return ic}),C.d(P,"SplineCurve3",function(){return Sf}),C.d(P,"Spline",function(){return Bl}),C.d(P,"BoundingBoxHelper",function(){return la}),C.d(P,"EdgesHelper",function(){return kl}),C.d(P,"WireframeHelper",function(){return Hl}),C.d(P,"XHRLoader",function(){return Sp}),C.d(P,"BinaryTextureLoader",function(){return Af}),C.d(P,"GeometryUtils",function(){return kp}),C.d(P,"ImageUtils",function(){return Hp}),C.d(P,"Projector",function(){return Ap}),C.d(P,"CanvasRenderer",function(){return Rf}),Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52)),Number.isInteger===void 0&&(Number.isInteger=function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}),Math.sign===void 0&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),Function.prototype.name===void 0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),Object.assign===void 0&&function(){Object.assign=function(t){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(n[u]=o[u])}return n}}(),Object.assign(A.prototype,{addEventListener:function(t,n){this._listeners===void 0&&(this._listeners={});var i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(n)===-1&&i[t].push(n)},hasEventListener:function(t,n){if(this._listeners===void 0)return!1;var i=this._listeners;return i[t]!==void 0&&i[t].indexOf(n)!==-1},removeEventListener:function(t,n){if(this._listeners!==void 0){var i=this._listeners,o=i[t];if(o!==void 0){var u=o.indexOf(n);u!==-1&&o.splice(u,1)}}},dispatchEvent:function(t){if(this._listeners!==void 0){var n=this._listeners,i=n[t.type];if(i!==void 0){t.target=this;for(var o=i.slice(0),u=0,l=o.length;u<l;u++)o[u].call(this,t)}}}});var qo="87",eu={LEFT:0,MIDDLE:1,RIGHT:2},Gl=0,ha=1,ac=2,nu=3,Vl=0,jl=1,oc=0,ru=1,sc=2,fa=0,da=1,Yo=2,Wl=1,Rp=2,uc=0,Xl=1,qa=2,cc=0,Zo=1,iu=2,ql=3,Yl=4,Zl=5,lc=100,Ya=101,Lf=102,Kl=103,Ko=104,Ql=200,hc=201,Cf=202,Pf=203,Za=204,fc=205,$l=206,Jl=207,th=208,au=209,eh=210,Nf=0,ou=1,pa=2,dc=3,nh=4,pc=5,rh=6,If=7,su=0,Of=1,mc=2,Qo=0,ih=1,Uf=2,Df=3,uu=4,gc=300,cu=301,vc=302,yc=303,$o=304,xc=305,_c=306,bc=307,ii=1e3,nr=1001,ma=1002,Lr=1003,wc=1004,Mc=1005,rr=1006,lu=1007,Jo=1008,Ec=1009,Tc=1010,Ff=1011,hu=1012,zf=1013,ah=1014,ki=1015,Ka=1016,ts=1017,oh=1018,sh=1019,fu=1020,Bf=1021,es=1022,ai=1023,uh=1024,ch=1025,kf=ai,Xr=1026,ga=1027,lh=2001,Sc=2002,Ac=2003,Rc=2004,Cn=2100,Hi=2101,Gi=2102,hh=2103,Lc=2151,Cc=2200,fh=2201,ln=2202,du=2300,Vi=2301,va=2302,Qa=2400,$a=2401,pu=2402,dh=0,Hf=1,Gf=2,mu=3e3,ph=3001,mh=3007,gh=3002,Lp=3003,Vf=3004,jf=3005,Wf=3006,vh=3200,Xf=3201,Ce={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),o=0;return function(){for(var u=0;u<36;u++)u===8||u===13||u===18||u===23?i[u]="-":u===14?i[u]="4":(o<=2&&(o=33554432+16777216*Math.random()|0),t=15&o,o>>=4,i[u]=n[u===19?3&t|8:t]);return i.join("")}}(),clamp:function(t,n,i){return Math.max(n,Math.min(i,t))},euclideanModulo:function(t,n){return(t%n+n)%n},mapLinear:function(t,n,i,o,u){return o+(t-n)*(u-o)/(i-n)},lerp:function(t,n,i){return(1-i)*t+i*n},smoothstep:function(t,n,i){return t<=n?0:t>=i?1:(t=(t-n)/(i-n))*t*(3-2*t)},smootherstep:function(t,n,i){return t<=n?0:t>=i?1:(t=(t-n)/(i-n))*t*t*(t*(6*t-15)+10)},randInt:function(t,n){return t+Math.floor(Math.random()*(n-t+1))},randFloat:function(t,n){return t+Math.random()*(n-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Ce.DEG2RAD},radToDeg:function(t){return t*Ce.RAD2DEG},isPowerOfTwo:function(t){return(t&t-1)==0&&t!==0},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}};Object.defineProperties(gt.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(gt.prototype,{isVector2:!0,set:function(t,n){return this.x=t,this.y=n,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,n){return n!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this},addScaledVector:function(t,n){return this.x+=t.x*n,this.y+=t.y*n,this},sub:function(t,n){return n!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this},clampScalar:function(){var t=new gt,n=new gt;return function(i,o){return t.set(i,i),n.set(o,o),this.clamp(t,n)}}(),clampLength:function(t,n){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var n=this.x-t.x,i=this.y-t.y;return n*n+i*i},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this},lerpVectors:function(t,n,i){return this.subVectors(n,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,n){return n===void 0&&(n=0),this.x=t[n],this.y=t[n+1],this},toArray:function(t,n){return t===void 0&&(t=[]),n===void 0&&(n=0),t[n]=this.x,t[n+1]=this.y,t},fromBufferAttribute:function(t,n,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this},rotateAround:function(t,n){var i=Math.cos(n),o=Math.sin(n),u=this.x-t.x,l=this.y-t.y;return this.x=u*i-l*o+t.x,this.y=u*o+l*i+t.y,this}});var Cp=0;Dt.DEFAULT_IMAGE=void 0,Dt.DEFAULT_MAPPING=gc,Object.defineProperty(Dt.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Object.assign(Dt.prototype,A.prototype,{constructor:Dt,isTexture:!0,clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){if(t.textures[this.uuid]!==void 0)return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(this.image!==void 0){var i=this.image;i.uuid===void 0&&(i.uuid=Ce.generateUUID()),t.images[i.uuid]===void 0&&(t.images[i.uuid]={uuid:i.uuid,url:function(o){var u;if(o instanceof HTMLCanvasElement)u=o;else{u=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),u.width=o.width,u.height=o.height;var l=u.getContext("2d");o instanceof ImageData?l.putImageData(o,0,0):l.drawImage(o,0,0,o.width,o.height)}return u.width>2048||u.height>2048?u.toDataURL("image/jpeg",.6):u.toDataURL("image/png")}(i)}),n.image=i.uuid}return t.textures[this.uuid]=n,n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping===gc){if(t.multiply(this.repeat),t.add(this.offset),t.x<0||t.x>1)switch(this.wrapS){case ii:t.x=t.x-Math.floor(t.x);break;case nr:t.x=t.x<0?0:1;break;case ma:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case ii:t.y=t.y-Math.floor(t.y);break;case nr:t.y=t.y<0?0:1;break;case ma:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}}),Object.assign(Bt.prototype,{isVector4:!0,set:function(t,n,i,o){return this.x=t,this.y=n,this.z=i,this.w=o,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this},add:function(t,n){return n!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this.w=t.w+n.w,this},addScaledVector:function(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this.w+=t.w*n,this},sub:function(t,n){return n!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this.w=t.w-n.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var n=this.x,i=this.y,o=this.z,u=this.w,l=t.elements;return this.x=l[0]*n+l[4]*i+l[8]*o+l[12]*u,this.y=l[1]*n+l[5]*i+l[9]*o+l[13]*u,this.z=l[2]*n+l[6]*i+l[10]*o+l[14]*u,this.w=l[3]*n+l[7]*i+l[11]*o+l[15]*u,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var n=Math.sqrt(1-t.w*t.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/n,this.y=t.y/n,this.z=t.z/n),this},setAxisAngleFromRotationMatrix:function(t){var n,i,o,u,l=t.elements,f=l[0],d=l[4],g=l[8],v=l[1],y=l[5],b=l[9],w=l[2],T=l[6],L=l[10];if(Math.abs(d-v)<.01&&Math.abs(g-w)<.01&&Math.abs(b-T)<.01){if(Math.abs(d+v)<.1&&Math.abs(g+w)<.1&&Math.abs(b+T)<.1&&Math.abs(f+y+L-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;var N=(f+1)/2,F=(y+1)/2,D=(L+1)/2,U=(d+v)/4,z=(g+w)/4,B=(b+T)/4;return N>F&&N>D?N<.01?(i=0,o=.707106781,u=.707106781):(i=Math.sqrt(N),o=U/i,u=z/i):F>D?F<.01?(i=.707106781,o=0,u=.707106781):(o=Math.sqrt(F),i=U/o,u=B/o):D<.01?(i=.707106781,o=.707106781,u=0):(u=Math.sqrt(D),i=z/u,o=B/u),this.set(i,o,u,n),this}var Q=Math.sqrt((T-b)*(T-b)+(g-w)*(g-w)+(v-d)*(v-d));return Math.abs(Q)<.001&&(Q=1),this.x=(T-b)/Q,this.y=(g-w)/Q,this.z=(v-d)/Q,this.w=Math.acos((f+y+L-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this.w=Math.max(t.w,Math.min(n.w,this.w)),this},clampScalar:function(){var t,n;return function(i,o){return t===void 0&&(t=new Bt,n=new Bt),t.set(i,i,i,i),n.set(o,o,o,o),this.clamp(t,n)}}(),clampLength:function(t,n){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this.w+=(t.w-this.w)*n,this},lerpVectors:function(t,n,i){return this.subVectors(n,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,n){return n===void 0&&(n=0),this.x=t[n],this.y=t[n+1],this.z=t[n+2],this.w=t[n+3],this},toArray:function(t,n){return t===void 0&&(t=[]),n===void 0&&(n=0),t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t[n+3]=this.w,t},fromBufferAttribute:function(t,n,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this.w=t.getW(n),this}}),Object.assign(de.prototype,A.prototype,{isWebGLRenderTarget:!0,setSize:function(t,n){this.width===t&&this.height===n||(this.width=t,this.height=n,this.dispose()),this.viewport.set(0,0,t,n),this.scissor.set(0,0,t,n)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),fe.prototype=Object.create(de.prototype),fe.prototype.constructor=fe,fe.prototype.isWebGLRenderTargetCube=!0,Object.assign(Ct,{slerp:function(t,n,i,o){return i.copy(t).slerp(n,o)},slerpFlat:function(t,n,i,o,u,l,f){var d=i[o+0],g=i[o+1],v=i[o+2],y=i[o+3],b=u[l+0],w=u[l+1],T=u[l+2],L=u[l+3];if(y!==L||d!==b||g!==w||v!==T){var N=1-f,F=d*b+g*w+v*T+y*L,D=F>=0?1:-1,U=1-F*F;if(U>Number.EPSILON){var z=Math.sqrt(U),B=Math.atan2(z,F*D);N=Math.sin(N*B)/z,f=Math.sin(f*B)/z}var Q=f*D;if(d=d*N+b*Q,g=g*N+w*Q,v=v*N+T*Q,y=y*N+L*Q,N===1-f){var $=1/Math.sqrt(d*d+g*g+v*v+y*y);d*=$,g*=$,v*=$,y*=$}}t[n]=d,t[n+1]=g,t[n+2]=v,t[n+3]=y}}),Object.defineProperties(Ct.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(Ct.prototype,{set:function(t,n,i,o){return this._x=t,this._y=n,this._z=i,this._w=o,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,n){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t._x,o=t._y,u=t._z,l=t.order,f=Math.cos,d=Math.sin,g=f(i/2),v=f(o/2),y=f(u/2),b=d(i/2),w=d(o/2),T=d(u/2);return l==="XYZ"?(this._x=b*v*y+g*w*T,this._y=g*w*y-b*v*T,this._z=g*v*T+b*w*y,this._w=g*v*y-b*w*T):l==="YXZ"?(this._x=b*v*y+g*w*T,this._y=g*w*y-b*v*T,this._z=g*v*T-b*w*y,this._w=g*v*y+b*w*T):l==="ZXY"?(this._x=b*v*y-g*w*T,this._y=g*w*y+b*v*T,this._z=g*v*T+b*w*y,this._w=g*v*y-b*w*T):l==="ZYX"?(this._x=b*v*y-g*w*T,this._y=g*w*y+b*v*T,this._z=g*v*T-b*w*y,this._w=g*v*y+b*w*T):l==="YZX"?(this._x=b*v*y+g*w*T,this._y=g*w*y+b*v*T,this._z=g*v*T-b*w*y,this._w=g*v*y-b*w*T):l==="XZY"&&(this._x=b*v*y-g*w*T,this._y=g*w*y-b*v*T,this._z=g*v*T+b*w*y,this._w=g*v*y+b*w*T),n!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(t,n){var i=n/2,o=Math.sin(i);return this._x=t.x*o,this._y=t.y*o,this._z=t.z*o,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var n,i=t.elements,o=i[0],u=i[4],l=i[8],f=i[1],d=i[5],g=i[9],v=i[2],y=i[6],b=i[10],w=o+d+b;return w>0?(n=.5/Math.sqrt(w+1),this._w=.25/n,this._x=(y-g)*n,this._y=(l-v)*n,this._z=(f-u)*n):o>d&&o>b?(n=2*Math.sqrt(1+o-d-b),this._w=(y-g)/n,this._x=.25*n,this._y=(u+f)/n,this._z=(l+v)/n):d>b?(n=2*Math.sqrt(1+d-o-b),this._w=(l-v)/n,this._x=(u+f)/n,this._y=.25*n,this._z=(g+y)/n):(n=2*Math.sqrt(1+b-o-d),this._w=(f-u)/n,this._x=(l+v)/n,this._y=(g+y)/n,this._z=.25*n),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,n=new G;return function(i,o){return n===void 0&&(n=new G),t=i.dot(o)+1,t<1e-6?(t=0,Math.abs(i.x)>Math.abs(i.z)?n.set(-i.y,i.x,0):n.set(0,-i.z,i.y)):n.crossVectors(i,o),this._x=n.x,this._y=n.y,this._z=n.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,n){return n!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,n)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,n){var i=t._x,o=t._y,u=t._z,l=t._w,f=n._x,d=n._y,g=n._z,v=n._w;return this._x=i*v+l*f+o*g-u*d,this._y=o*v+l*d+u*f-i*g,this._z=u*v+l*g+i*d-o*f,this._w=l*v-i*f-o*d-u*g,this.onChangeCallback(),this},slerp:function(t,n){if(n===0)return this;if(n===1)return this.copy(t);var i=this._x,o=this._y,u=this._z,l=this._w,f=l*t._w+i*t._x+o*t._y+u*t._z;if(f<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,f=-f):this.copy(t),f>=1)return this._w=l,this._x=i,this._y=o,this._z=u,this;var d=Math.sqrt(1-f*f);if(Math.abs(d)<.001)return this._w=.5*(l+this._w),this._x=.5*(i+this._x),this._y=.5*(o+this._y),this._z=.5*(u+this._z),this;var g=Math.atan2(d,f),v=Math.sin((1-n)*g)/d,y=Math.sin(n*g)/d;return this._w=l*v+this._w*y,this._x=i*v+this._x*y,this._y=o*v+this._y*y,this._z=u*v+this._z*y,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,n){return n===void 0&&(n=0),this._x=t[n],this._y=t[n+1],this._z=t[n+2],this._w=t[n+3],this.onChangeCallback(),this},toArray:function(t,n){return t===void 0&&(t=[]),n===void 0&&(n=0),t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(G.prototype,{isVector3:!0,set:function(t,n,i){return this.x=t,this.y=n,this.z=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,n){return n!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this},addScaledVector:function(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this},sub:function(t,n){return n!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this},multiply:function(t,n){return n!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,n)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this},applyEuler:function(){var t=new Ct;return function(n){return n&&n.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(t.setFromEuler(n))}}(),applyAxisAngle:function(){var t=new Ct;return function(n,i){return this.applyQuaternion(t.setFromAxisAngle(n,i))}}(),applyMatrix3:function(t){var n=this.x,i=this.y,o=this.z,u=t.elements;return this.x=u[0]*n+u[3]*i+u[6]*o,this.y=u[1]*n+u[4]*i+u[7]*o,this.z=u[2]*n+u[5]*i+u[8]*o,this},applyMatrix4:function(t){var n=this.x,i=this.y,o=this.z,u=t.elements,l=1/(u[3]*n+u[7]*i+u[11]*o+u[15]);return this.x=(u[0]*n+u[4]*i+u[8]*o+u[12])*l,this.y=(u[1]*n+u[5]*i+u[9]*o+u[13])*l,this.z=(u[2]*n+u[6]*i+u[10]*o+u[14])*l,this},applyQuaternion:function(t){var n=this.x,i=this.y,o=this.z,u=t.x,l=t.y,f=t.z,d=t.w,g=d*n+l*o-f*i,v=d*i+f*n-u*o,y=d*o+u*i-l*n,b=-u*n-l*i-f*o;return this.x=g*d+b*-u+v*-f-y*-l,this.y=v*d+b*-l+y*-u-g*-f,this.z=y*d+b*-f+g*-l-v*-u,this},project:function(){var t=new Ut;return function(n){return t.multiplyMatrices(n.projectionMatrix,t.getInverse(n.matrixWorld)),this.applyMatrix4(t)}}(),unproject:function(){var t=new Ut;return function(n){return t.multiplyMatrices(n.matrixWorld,t.getInverse(n.projectionMatrix)),this.applyMatrix4(t)}}(),transformDirection:function(t){var n=this.x,i=this.y,o=this.z,u=t.elements;return this.x=u[0]*n+u[4]*i+u[8]*o,this.y=u[1]*n+u[5]*i+u[9]*o,this.z=u[2]*n+u[6]*i+u[10]*o,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this},clampScalar:function(){var t=new G,n=new G;return function(i,o){return t.set(i,i,i),n.set(o,o,o),this.clamp(t,n)}}(),clampLength:function(t,n){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this},lerpVectors:function(t,n,i){return this.subVectors(n,t).multiplyScalar(i).add(t)},cross:function(t,n){if(n!==void 0)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,n);var i=this.x,o=this.y,u=this.z;return this.x=o*t.z-u*t.y,this.y=u*t.x-i*t.z,this.z=i*t.y-o*t.x,this},crossVectors:function(t,n){var i=t.x,o=t.y,u=t.z,l=n.x,f=n.y,d=n.z;return this.x=o*d-u*f,this.y=u*l-i*d,this.z=i*f-o*l,this},projectOnVector:function(t){var n=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(n)},projectOnPlane:function(){var t=new G;return function(n){return t.copy(this).projectOnVector(n),this.sub(t)}}(),reflect:function(){var t=new G;return function(n){return this.sub(t.copy(n).multiplyScalar(2*this.dot(n)))}}(),angleTo:function(t){var n=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(Ce.clamp(n,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var n=this.x-t.x,i=this.y-t.y,o=this.z-t.z;return n*n+i*i+o*o},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var n=Math.sin(t.phi)*t.radius;return this.x=n*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=n*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){var n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this},setFromMatrixScale:function(t){var n=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),o=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=i,this.z=o,this},setFromMatrixColumn:function(t,n){return this.fromArray(t.elements,4*n)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,n){return n===void 0&&(n=0),this.x=t[n],this.y=t[n+1],this.z=t[n+2],this},toArray:function(t,n){return t===void 0&&(t=[]),n===void 0&&(n=0),t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t},fromBufferAttribute:function(t,n,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this}}),Object.assign(Ut.prototype,{isMatrix4:!0,set:function(t,n,i,o,u,l,f,d,g,v,y,b,w,T,L,N){var F=this.elements;return F[0]=t,F[4]=n,F[8]=i,F[12]=o,F[1]=u,F[5]=l,F[9]=f,F[13]=d,F[2]=g,F[6]=v,F[10]=y,F[14]=b,F[3]=w,F[7]=T,F[11]=L,F[15]=N,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Ut().fromArray(this.elements)},copy:function(t){var n=this.elements,i=t.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this},copyPosition:function(t){var n=this.elements,i=t.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this},extractBasis:function(t,n,i){return t.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,n,i){return this.set(t.x,n.x,i.x,0,t.y,n.y,i.y,0,t.z,n.z,i.z,0,0,0,0,1),this},extractRotation:function(){var t=new G;return function(n){var i=this.elements,o=n.elements,u=1/t.setFromMatrixColumn(n,0).length(),l=1/t.setFromMatrixColumn(n,1).length(),f=1/t.setFromMatrixColumn(n,2).length();return i[0]=o[0]*u,i[1]=o[1]*u,i[2]=o[2]*u,i[4]=o[4]*l,i[5]=o[5]*l,i[6]=o[6]*l,i[8]=o[8]*f,i[9]=o[9]*f,i[10]=o[10]*f,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=this.elements,i=t.x,o=t.y,u=t.z,l=Math.cos(i),f=Math.sin(i),d=Math.cos(o),g=Math.sin(o),v=Math.cos(u),y=Math.sin(u);if(t.order==="XYZ"){var b=l*v,w=l*y,T=f*v,L=f*y;n[0]=d*v,n[4]=-d*y,n[8]=g,n[1]=w+T*g,n[5]=b-L*g,n[9]=-f*d,n[2]=L-b*g,n[6]=T+w*g,n[10]=l*d}else if(t.order==="YXZ"){var N=d*v,F=d*y,D=g*v,U=g*y;n[0]=N+U*f,n[4]=D*f-F,n[8]=l*g,n[1]=l*y,n[5]=l*v,n[9]=-f,n[2]=F*f-D,n[6]=U+N*f,n[10]=l*d}else if(t.order==="ZXY"){var N=d*v,F=d*y,D=g*v,U=g*y;n[0]=N-U*f,n[4]=-l*y,n[8]=D+F*f,n[1]=F+D*f,n[5]=l*v,n[9]=U-N*f,n[2]=-l*g,n[6]=f,n[10]=l*d}else if(t.order==="ZYX"){var b=l*v,w=l*y,T=f*v,L=f*y;n[0]=d*v,n[4]=T*g-w,n[8]=b*g+L,n[1]=d*y,n[5]=L*g+b,n[9]=w*g-T,n[2]=-g,n[6]=f*d,n[10]=l*d}else if(t.order==="YZX"){var z=l*d,B=l*g,Q=f*d,$=f*g;n[0]=d*v,n[4]=$-z*y,n[8]=Q*y+B,n[1]=y,n[5]=l*v,n[9]=-f*v,n[2]=-g*v,n[6]=B*y+Q,n[10]=z-$*y}else if(t.order==="XZY"){var z=l*d,B=l*g,Q=f*d,$=f*g;n[0]=d*v,n[4]=-y,n[8]=g*v,n[1]=z*y+$,n[5]=l*v,n[9]=B*y-Q,n[2]=Q*y-B,n[6]=f*v,n[10]=$*y+z}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this},makeRotationFromQuaternion:function(t){var n=this.elements,i=t._x,o=t._y,u=t._z,l=t._w,f=i+i,d=o+o,g=u+u,v=i*f,y=i*d,b=i*g,w=o*d,T=o*g,L=u*g,N=l*f,F=l*d,D=l*g;return n[0]=1-(w+L),n[4]=y-D,n[8]=b+F,n[1]=y+D,n[5]=1-(v+L),n[9]=T-N,n[2]=b-F,n[6]=T+N,n[10]=1-(v+w),n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this},lookAt:function(){var t=new G,n=new G,i=new G;return function(o,u,l){var f=this.elements;return i.subVectors(o,u),i.lengthSq()===0&&(i.z=1),i.normalize(),t.crossVectors(l,i),t.lengthSq()===0&&(Math.abs(l.z)===1?i.x+=1e-4:i.z+=1e-4,i.normalize(),t.crossVectors(l,i)),t.normalize(),n.crossVectors(i,t),f[0]=t.x,f[4]=n.x,f[8]=i.x,f[1]=t.y,f[5]=n.y,f[9]=i.y,f[2]=t.z,f[6]=n.z,f[10]=i.z,this}}(),multiply:function(t,n){return n!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,n)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,n){var i=t.elements,o=n.elements,u=this.elements,l=i[0],f=i[4],d=i[8],g=i[12],v=i[1],y=i[5],b=i[9],w=i[13],T=i[2],L=i[6],N=i[10],F=i[14],D=i[3],U=i[7],z=i[11],B=i[15],Q=o[0],$=o[4],K=o[8],lt=o[12],Y=o[1],et=o[5],ht=o[9],Tt=o[13],Z=o[2],X=o[6],ft=o[10],at=o[14],wt=o[3],vt=o[7],Et=o[11],St=o[15];return u[0]=l*Q+f*Y+d*Z+g*wt,u[4]=l*$+f*et+d*X+g*vt,u[8]=l*K+f*ht+d*ft+g*Et,u[12]=l*lt+f*Tt+d*at+g*St,u[1]=v*Q+y*Y+b*Z+w*wt,u[5]=v*$+y*et+b*X+w*vt,u[9]=v*K+y*ht+b*ft+w*Et,u[13]=v*lt+y*Tt+b*at+w*St,u[2]=T*Q+L*Y+N*Z+F*wt,u[6]=T*$+L*et+N*X+F*vt,u[10]=T*K+L*ht+N*ft+F*Et,u[14]=T*lt+L*Tt+N*at+F*St,u[3]=D*Q+U*Y+z*Z+B*wt,u[7]=D*$+U*et+z*X+B*vt,u[11]=D*K+U*ht+z*ft+B*Et,u[15]=D*lt+U*Tt+z*at+B*St,this},multiplyScalar:function(t){var n=this.elements;return n[0]*=t,n[4]*=t,n[8]*=t,n[12]*=t,n[1]*=t,n[5]*=t,n[9]*=t,n[13]*=t,n[2]*=t,n[6]*=t,n[10]*=t,n[14]*=t,n[3]*=t,n[7]*=t,n[11]*=t,n[15]*=t,this},applyToBufferAttribute:function(){var t=new G;return function(n){for(var i=0,o=n.count;i<o;i++)t.x=n.getX(i),t.y=n.getY(i),t.z=n.getZ(i),t.applyMatrix4(this),n.setXYZ(i,t.x,t.y,t.z);return n}}(),determinant:function(){var t=this.elements,n=t[0],i=t[4],o=t[8],u=t[12],l=t[1],f=t[5],d=t[9],g=t[13],v=t[2],y=t[6],b=t[10],w=t[14];return t[3]*(+u*d*y-o*g*y-u*f*b+i*g*b+o*f*w-i*d*w)+t[7]*(+n*d*w-n*g*b+u*l*b-o*l*w+o*g*v-u*d*v)+t[11]*(+n*g*y-n*f*w-u*l*y+i*l*w+u*f*v-i*g*v)+t[15]*(-o*f*v-n*d*y+n*f*b+o*l*y-i*l*b+i*d*v)},transpose:function(){var t,n=this.elements;return t=n[1],n[1]=n[4],n[4]=t,t=n[2],n[2]=n[8],n[8]=t,t=n[6],n[6]=n[9],n[9]=t,t=n[3],n[3]=n[12],n[12]=t,t=n[7],n[7]=n[13],n[13]=t,t=n[11],n[11]=n[14],n[14]=t,this},setPosition:function(t){var n=this.elements;return n[12]=t.x,n[13]=t.y,n[14]=t.z,this},getInverse:function(t,n){var i=this.elements,o=t.elements,u=o[0],l=o[1],f=o[2],d=o[3],g=o[4],v=o[5],y=o[6],b=o[7],w=o[8],T=o[9],L=o[10],N=o[11],F=o[12],D=o[13],U=o[14],z=o[15],B=T*U*b-D*L*b+D*y*N-v*U*N-T*y*z+v*L*z,Q=F*L*b-w*U*b-F*y*N+g*U*N+w*y*z-g*L*z,$=w*D*b-F*T*b+F*v*N-g*D*N-w*v*z+g*T*z,K=F*T*y-w*D*y-F*v*L+g*D*L+w*v*U-g*T*U,lt=u*B+l*Q+f*$+d*K;if(lt===0){var Y="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(n===!0)throw new Error(Y);return console.warn(Y),this.identity()}var et=1/lt;return i[0]=B*et,i[1]=(D*L*d-T*U*d-D*f*N+l*U*N+T*f*z-l*L*z)*et,i[2]=(v*U*d-D*y*d+D*f*b-l*U*b-v*f*z+l*y*z)*et,i[3]=(T*y*d-v*L*d-T*f*b+l*L*b+v*f*N-l*y*N)*et,i[4]=Q*et,i[5]=(w*U*d-F*L*d+F*f*N-u*U*N-w*f*z+u*L*z)*et,i[6]=(F*y*d-g*U*d-F*f*b+u*U*b+g*f*z-u*y*z)*et,i[7]=(g*L*d-w*y*d+w*f*b-u*L*b-g*f*N+u*y*N)*et,i[8]=$*et,i[9]=(F*T*d-w*D*d-F*l*N+u*D*N+w*l*z-u*T*z)*et,i[10]=(g*D*d-F*v*d+F*l*b-u*D*b-g*l*z+u*v*z)*et,i[11]=(w*v*d-g*T*d-w*l*b+u*T*b+g*l*N-u*v*N)*et,i[12]=K*et,i[13]=(w*D*f-F*T*f+F*l*L-u*D*L-w*l*U+u*T*U)*et,i[14]=(F*v*f-g*D*f-F*l*y+u*D*y+g*l*U-u*v*U)*et,i[15]=(g*T*f-w*v*f+w*l*y-u*T*y-g*l*L+u*v*L)*et,this},scale:function(t){var n=this.elements,i=t.x,o=t.y,u=t.z;return n[0]*=i,n[4]*=o,n[8]*=u,n[1]*=i,n[5]*=o,n[9]*=u,n[2]*=i,n[6]*=o,n[10]*=u,n[3]*=i,n[7]*=o,n[11]*=u,this},getMaxScaleOnAxis:function(){var t=this.elements,n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],o=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(n,i,o))},makeTranslation:function(t,n,i){return this.set(1,0,0,t,0,1,0,n,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var n=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this},makeRotationY:function(t){var n=Math.cos(t),i=Math.sin(t);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this},makeRotationZ:function(t){var n=Math.cos(t),i=Math.sin(t);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,n){var i=Math.cos(n),o=Math.sin(n),u=1-i,l=t.x,f=t.y,d=t.z,g=u*l,v=u*f;return this.set(g*l+i,g*f-o*d,g*d+o*f,0,g*f+o*d,v*f+i,v*d-o*l,0,g*d-o*f,v*d+o*l,u*d*d+i,0,0,0,0,1),this},makeScale:function(t,n,i){return this.set(t,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,n,i){return this.set(1,n,i,0,t,1,i,0,t,n,1,0,0,0,0,1),this},compose:function(t,n,i){return this.makeRotationFromQuaternion(n),this.scale(i),this.setPosition(t),this},decompose:function(){var t=new G,n=new Ut;return function(i,o,u){var l=this.elements,f=t.set(l[0],l[1],l[2]).length(),d=t.set(l[4],l[5],l[6]).length(),g=t.set(l[8],l[9],l[10]).length();this.determinant()<0&&(f=-f),i.x=l[12],i.y=l[13],i.z=l[14],n.copy(this);var v=1/f,y=1/d,b=1/g;return n.elements[0]*=v,n.elements[1]*=v,n.elements[2]*=v,n.elements[4]*=y,n.elements[5]*=y,n.elements[6]*=y,n.elements[8]*=b,n.elements[9]*=b,n.elements[10]*=b,o.setFromRotationMatrix(n),u.x=f,u.y=d,u.z=g,this}}(),makePerspective:function(t,n,i,o,u,l){l===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var f=this.elements,d=2*u/(n-t),g=2*u/(i-o),v=(n+t)/(n-t),y=(i+o)/(i-o),b=-(l+u)/(l-u),w=-2*l*u/(l-u);return f[0]=d,f[4]=0,f[8]=v,f[12]=0,f[1]=0,f[5]=g,f[9]=y,f[13]=0,f[2]=0,f[6]=0,f[10]=b,f[14]=w,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this},makeOrthographic:function(t,n,i,o,u,l){var f=this.elements,d=1/(n-t),g=1/(i-o),v=1/(l-u),y=(n+t)*d,b=(i+o)*g,w=(l+u)*v;return f[0]=2*d,f[4]=0,f[8]=0,f[12]=-y,f[1]=0,f[5]=2*g,f[9]=0,f[13]=-b,f[2]=0,f[6]=0,f[10]=-2*v,f[14]=-w,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this},equals:function(t){for(var n=this.elements,i=t.elements,o=0;o<16;o++)if(n[o]!==i[o])return!1;return!0},fromArray:function(t,n){n===void 0&&(n=0);for(var i=0;i<16;i++)this.elements[i]=t[i+n];return this},toArray:function(t,n){t===void 0&&(t=[]),n===void 0&&(n=0);var i=this.elements;return t[n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=i[3],t[n+4]=i[4],t[n+5]=i[5],t[n+6]=i[6],t[n+7]=i[7],t[n+8]=i[8],t[n+9]=i[9],t[n+10]=i[10],t[n+11]=i[11],t[n+12]=i[12],t[n+13]=i[13],t[n+14]=i[14],t[n+15]=i[15],t}}),le.prototype=Object.create(Dt.prototype),le.prototype.constructor=le,le.prototype.isDataTexture=!0,pe.prototype=Object.create(Dt.prototype),pe.prototype.constructor=pe,pe.prototype.isCubeTexture=!0,Object.defineProperty(pe.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var qf=new Dt,Yf=new pe,Zf=[],Kf=[],Qf=new Float32Array(16),$f=new Float32Array(9);Ea.prototype.setValue=function(t,n){for(var i=this.seq,o=0,u=i.length;o!==u;++o){var l=i[o];l.setValue(t,n[l.id])}};var yh=/([\w\d_]+)(\])?(\[|\.)?/g;pr.prototype.setValue=function(t,n,i){var o=this.map[n];o!==void 0&&o.setValue(t,i,this.renderer)},pr.prototype.setOptional=function(t,n,i){var o=n[i];o!==void 0&&this.setValue(t,i,o)},pr.upload=function(t,n,i,o){for(var u=0,l=n.length;u!==l;++u){var f=n[u],d=i[f.id];d.needsUpdate!==!1&&f.setValue(t,d.value,o)}},pr.seqWithValue=function(t,n){for(var i=[],o=0,u=t.length;o!==u;++o){var l=t[o];l.id in n&&i.push(l)}return i};var Pp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(ee.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,n,i){return this.r=t,this.g=n,this.b=i,this},setHSL:function(){function t(n,i,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?n+6*(i-n)*o:o<.5?i:o<2/3?n+6*(i-n)*(2/3-o):n}return function(n,i,o){if(n=Ce.euclideanModulo(n,1),i=Ce.clamp(i,0,1),o=Ce.clamp(o,0,1),i===0)this.r=this.g=this.b=o;else{var u=o<=.5?o*(1+i):o+i-o*i,l=2*o-u;this.r=t(l,u,n+1/3),this.g=t(l,u,n),this.b=t(l,u,n-1/3)}return this}}(),setStyle:function(t){function n(b){b!==void 0&&parseFloat(b)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var o,u=i[1],l=i[2];switch(u){case"rgb":case"rgba":if(o=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,n(o[5]),this;if(o=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,n(o[5]),this;break;case"hsl":case"hsla":if(o=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l)){var f=parseFloat(o[1])/360,d=parseInt(o[2],10)/100,g=parseInt(o[3],10)/100;return n(o[5]),this.setHSL(f,d,g)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){var v=i[1],y=v.length;if(y===3)return this.r=parseInt(v.charAt(0)+v.charAt(0),16)/255,this.g=parseInt(v.charAt(1)+v.charAt(1),16)/255,this.b=parseInt(v.charAt(2)+v.charAt(2),16)/255,this;if(y===6)return this.r=parseInt(v.charAt(0)+v.charAt(1),16)/255,this.g=parseInt(v.charAt(2)+v.charAt(3),16)/255,this.b=parseInt(v.charAt(4)+v.charAt(5),16)/255,this}if(t&&t.length>0){var v=Pp[t];v!==void 0?this.setHex(v):console.warn("THREE.Color: Unknown color "+t)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,n){return n===void 0&&(n=2),this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},copyLinearToGamma:function(t,n){n===void 0&&(n=2);var i=n>0?1/n:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},convertGammaToLinear:function(){var t=this.r,n=this.g,i=this.b;return this.r=t*t,this.g=n*n,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var n,i,o=t||{h:0,s:0,l:0},u=this.r,l=this.g,f=this.b,d=Math.max(u,l,f),g=Math.min(u,l,f),v=(g+d)/2;if(g===d)n=0,i=0;else{var y=d-g;switch(i=v<=.5?y/(d+g):y/(2-d-g),d){case u:n=(l-f)/y+(l<f?6:0);break;case l:n=(f-u)/y+2;break;case f:n=(u-l)/y+4}n/=6}return o.h=n,o.s=i,o.l=v,o},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,n,i){var o=this.getHSL();return o.h+=t,o.s+=n,o.l+=i,this.setHSL(o.h,o.s,o.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,n){return this.r=t.r+n.r,this.g=t.g+n.g,this.b=t.b+n.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,n){return this.r+=(t.r-this.r)*n,this.g+=(t.g-this.g)*n,this.b+=(t.b-this.b)*n,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,n){return n===void 0&&(n=0),this.r=t[n],this.g=t[n+1],this.b=t[n+2],this},toArray:function(t,n){return t===void 0&&(t=[]),n===void 0&&(n=0),t[n]=this.r,t[n+1]=this.g,t[n+2]=this.b,t},toJSON:function(){return this.getHex()}});var se={common:{diffuse:{value:new ee(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new Bt(0,0,1,1)},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new gt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ee(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new ee(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new Bt(0,0,1,1)}}},vr={merge:function(t){for(var n={},i=0;i<t.length;i++){var o=this.clone(t[i]);for(var u in o)n[u]=o[u]}return n},clone:function(t){var n={};for(var i in t){n[i]={};for(var o in t[i]){var u=t[i][o];u&&(u.isColor||u.isMatrix3||u.isMatrix4||u.isVector2||u.isVector3||u.isVector4||u.isTexture)?n[i][o]=u.clone():Array.isArray(u)?n[i][o]=u.slice():n[i][o]=u}}return n}},Je={alphamap_fragment:`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif
`,alphamap_pars_fragment:`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif
`,alphatest_fragment:`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif
`,aomap_fragment:`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( PHYSICAL )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif
`,aomap_pars_fragment:`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex:`
vec3 transformed = vec3( position );
`,beginnormal_vertex:`
vec3 objectNormal = vec3( normal );
`,bsdfs:`float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	if( decayExponent > 0.0 ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		float maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		return distanceFalloff * maxDistanceCutoffFactor;
#else
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
#endif
	}
	return 1.0;
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float theta = acos( dot( N, V ) );
	vec2 uv = vec2(
		sqrt( saturate( roughness ) ),
		saturate( theta / ( 0.5 * PI ) ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.86267 + (0.49788 + 0.01436 * y ) * y;
	float b = 3.45068 + (4.18814 + y) * y;
	float v = a / b;
	float theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	vec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );
	return result;
}
vec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;
	return specularColor * AB.x + AB.y;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
`,bumpmap_pars_fragment:`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif
`,clipping_planes_fragment:`#if NUM_CLIPPING_PLANES > 0
	for ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {
		vec4 plane = clippingPlanes[ i ];
		if ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;
	}
		
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {
			vec4 plane = clippingPlanes[ i ];
			clipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;
		}
		if ( clipped ) discard;
	
	#endif
#endif
`,clipping_planes_pars_fragment:`#if NUM_CLIPPING_PLANES > 0
	#if ! defined( PHYSICAL ) && ! defined( PHONG )
		varying vec3 vViewPosition;
	#endif
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif
`,clipping_planes_pars_vertex:`#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )
	varying vec3 vViewPosition;
#endif
`,clipping_planes_vertex:`#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )
	vViewPosition = - mvPosition.xyz;
#endif
`,color_fragment:`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment:`#ifdef USE_COLOR
	varying vec3 vColor;
#endif
`,color_pars_vertex:`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex:`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common:`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#define saturate(a) clamp( a, 0.0, 1.0 )
#define whiteCompliment(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transpose( const in mat3 v ) {
	mat3 tmp;
	tmp[0] = vec3(v[0].x, v[1].x, v[2].x);
	tmp[1] = vec3(v[0].y, v[1].y, v[2].y);
	tmp[2] = vec3(v[0].z, v[1].z, v[2].z);
	return tmp;
}
`,cube_uv_reflection_fragment:`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_textureSize (1024.0)
int getFaceFromDirection(vec3 direction) {
	vec3 absDirection = abs(direction);
	int face = -1;
	if( absDirection.x > absDirection.z ) {
		if(absDirection.x > absDirection.y )
			face = direction.x > 0.0 ? 0 : 3;
		else
			face = direction.y > 0.0 ? 1 : 4;
	}
	else {
		if(absDirection.z > absDirection.y )
			face = direction.z > 0.0 ? 2 : 5;
		else
			face = direction.y > 0.0 ? 1 : 4;
	}
	return face;
}
#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)
#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))
vec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {
	float scale = exp2(cubeUV_maxLods1 - roughnessLevel);
	float dxRoughness = dFdx(roughness);
	float dyRoughness = dFdy(roughness);
	vec3 dx = dFdx( vec * scale * dxRoughness );
	vec3 dy = dFdy( vec * scale * dyRoughness );
	float d = max( dot( dx, dx ), dot( dy, dy ) );
	d = clamp(d, 1.0, cubeUV_rangeClamp);
	float mipLevel = 0.5 * log2(d);
	return vec2(floor(mipLevel), fract(mipLevel));
}
#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)
#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)
vec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {
	mipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;
	float a = 16.0 * cubeUV_rcpTextureSize;
	vec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );
	vec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;
	float powScale = exp2_packed.x * exp2_packed.y;
	float scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;
	float mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;
	bool bRes = mipLevel == 0.0;
	scale =  bRes && (scale < a) ? a : scale;
	vec3 r;
	vec2 offset;
	int face = getFaceFromDirection(direction);
	float rcpPowScale = 1.0 / powScale;
	if( face == 0) {
		r = vec3(direction.x, -direction.z, direction.y);
		offset = vec2(0.0+mipOffset,0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 1) {
		r = vec3(direction.y, direction.x, direction.z);
		offset = vec2(scale+mipOffset, 0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 2) {
		r = vec3(direction.z, direction.x, direction.y);
		offset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 3) {
		r = vec3(direction.x, direction.z, direction.y);
		offset = vec2(0.0+mipOffset,0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	else if( face == 4) {
		r = vec3(direction.y, direction.x, -direction.z);
		offset = vec2(scale+mipOffset, 0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	else {
		r = vec3(direction.z, -direction.x, direction.y);
		offset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	r = normalize(r);
	float texelOffset = 0.5 * cubeUV_rcpTextureSize;
	vec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;
	vec2 base = offset + vec2( texelOffset );
	return base + s * ( scale - 2.0 * texelOffset );
}
#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)
vec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {
	float roughnessVal = roughness* cubeUV_maxLods3;
	float r1 = floor(roughnessVal);
	float r2 = r1 + 1.0;
	float t = fract(roughnessVal);
	vec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);
	float s = mipInfo.y;
	float level0 = mipInfo.x;
	float level1 = level0 + 1.0;
	level1 = level1 > 5.0 ? 5.0 : level1;
	level0 += min( floor( s + 0.5 ), 5.0 );
	vec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);
	vec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));
	vec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);
	vec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));
	vec4 result = mix(color10, color20, t);
	return vec4(result.rgb, 1.0);
}
#endif
`,defaultnormal_vertex:`vec3 transformedNormal = normalMatrix * objectNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
`,displacementmap_pars_vertex:`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif
`,displacementmap_vertex:`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );
#endif
`,emissivemap_fragment:`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif
`,emissivemap_pars_fragment:`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif
`,encodings_fragment:`  gl_FragColor = linearToOutputTexel( gl_FragColor );
`,encodings_pars_fragment:`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.xyz * value.w * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.x, max( value.g, value.b ) );
	float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M            = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.x, max( value.g, value.b ) );
	float D      = max( maxRange / maxRGB, 1.0 );
	D            = min( floor( D ) / 255.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;
	Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract(Le);
	vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;
	return vec4( max(vRGB, 0.0), 1.0 );
}
`,envmap_fragment:`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToVertex, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		vec2 sampleUV;
		reflectVec = normalize( reflectVec );
		sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
		sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	envColor = envMapTexelToLinear( envColor );
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif
`,envmap_pars_fragment:`#if defined( USE_ENVMAP ) || defined( PHYSICAL )
	uniform float reflectivity;
	uniform float envMapIntensity;
#endif
#ifdef USE_ENVMAP
	#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )
		varying vec3 vWorldPosition;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	uniform float flipEnvMap;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif
`,envmap_pars_vertex:`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif
`,envmap_vertex:`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif
`,fog_vertex:`
#ifdef USE_FOG
fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex:`#ifdef USE_FOG
  varying float fogDepth;
#endif
`,fog_fragment:`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif
`,fog_pars_fragment:`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif
`,gradientmap_pars_fragment:`#ifdef TOON
	uniform sampler2D gradientMap;
	vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
		float dotNL = dot( normal, lightDirection );
		vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
		#ifdef USE_GRADIENTMAP
			return texture2D( gradientMap, coord ).rgb;
		#else
			return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
		#endif
	}
#endif
`,lightmap_fragment:`#ifdef USE_LIGHTMAP
	reflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
#endif
`,lightmap_pars_fragment:`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex:`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
#if NUM_POINT_LIGHTS > 0
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_DIR_LIGHTS > 0
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_HEMI_LIGHTS > 0
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
#endif
`,lights_pars:`uniform vec3 ambientLightColor;
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
		float shadowCameraNear;
		float shadowCameraFar;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltcMat;	uniform sampler2D ltcMag;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif
#if defined( USE_ENVMAP ) && defined( PHYSICAL )
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			vec4 envMapColor = textureCubeUV( queryVec, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );
		#else
			vec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			vec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV;
			sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
			sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif
`,lights_phong_fragment:`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;
`,lights_phong_pars_fragment:`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	#ifdef TOON
		vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#else
		float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
		vec3 irradiance = dotNL * directLight.color;
	#endif
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)
`,lights_physical_fragment:`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );
#ifdef STANDARD
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
	material.clearCoat = saturate( clearCoat );	material.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );
#endif
`,lights_physical_pars_fragment:`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
	#ifndef STANDARD
		float clearCoat;
		float clearCoatRoughness;
	#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearCoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos - halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos + halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos + halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos - halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		float norm = texture2D( ltcMag, uv ).a;
		vec4 t = texture2D( ltcMat, uv );
		mat3 mInv = mat3(
			vec3(   1,   0, t.y ),
			vec3(   0, t.z,   0 ),
			vec3( t.w,   0, t.x )
		);
		reflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifndef STANDARD
		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );
	#else
		float clearCoatDHR = 0.0;
	#endif
	reflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );
	reflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	#ifndef STANDARD
		reflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );
	#endif
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	#ifndef STANDARD
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		float dotNL = dotNV;
		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );
	#else
		float clearCoatDHR = 0.0;
	#endif
	reflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );
	#ifndef STANDARD
		reflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );
	#endif
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )
#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}
`,lights_template:`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = normalize( vViewPosition );
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
#endif
#if defined( RE_IndirectDiffuse )
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#ifdef USE_LIGHTMAP
		vec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
	#endif
	#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )
		irradiance += getLightProbeIndirectIrradiance( geometry, 8 );
	#endif
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	vec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );
	#ifndef STANDARD
		vec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );
	#else
		vec3 clearCoatRadiance = vec3( 0.0 );
	#endif
	RE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );
#endif
`,logdepthbuf_fragment:`#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)
	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment:`#ifdef USE_LOGDEPTHBUF
	uniform float logDepthBufFC;
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
	#endif
#endif
`,logdepthbuf_pars_vertex:`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
	#endif
	uniform float logDepthBufFC;
#endif`,logdepthbuf_vertex:`#ifdef USE_LOGDEPTHBUF
	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
	#else
		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;
	#endif
#endif
`,map_fragment:`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif
`,map_pars_fragment:`#ifdef USE_MAP
	uniform sampler2D map;
#endif
`,map_particle_fragment:`#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
`,map_particle_pars_fragment:`#ifdef USE_MAP
	uniform vec4 offsetRepeat;
	uniform sampler2D map;
#endif
`,metalnessmap_fragment:`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif
`,metalnessmap_pars_fragment:`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex:`#ifdef USE_MORPHNORMALS
	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];
	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];
	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];
	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];
#endif
`,morphtarget_pars_vertex:`#ifdef USE_MORPHTARGETS
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex:`#ifdef USE_MORPHTARGETS
	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];
	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];
	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];
	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];
	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];
	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];
	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];
	#endif
#endif
`,normal_fragment:`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
#endif
#ifdef USE_NORMALMAP
	normal = perturbNormal2Arb( -vViewPosition, normal );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif
`,normalmap_pars_fragment:`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 S = normalize( q0 * st1.t - q1 * st0.t );
		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );
		vec3 N = normalize( surf_norm );
		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
		mapN.xy = normalScale * mapN.xy;
		mat3 tsn = mat3( S, T, N );
		return normalize( tsn * mapN );
	}
#endif
`,packing:`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 1.0 - 2.0 * rgb.xyz;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}
`,premultiplied_alpha_fragment:`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif
`,project_vertex:`vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );
gl_Position = projectionMatrix * mvPosition;
`,dithering_fragment:`#if defined( DITHERING )
  gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif
`,dithering_pars_fragment:`#if defined( DITHERING )
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif
`,roughnessmap_fragment:`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif
`,roughnessmap_pars_fragment:`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];
	#endif
	#if NUM_SPOT_LIGHTS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];
	#endif
	#if NUM_POINT_LIGHTS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	float texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {
		const vec2 offset = vec2( 0.0, 1.0 );
		vec2 texelSize = vec2( 1.0 ) / size;
		vec2 centroidUV = floor( uv * size + 0.5 ) / size;
		float lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );
		float lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );
		float rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );
		float rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );
		vec2 f = fract( uv * size + 0.5 );
		float a = mix( lb, lt, f.y );
		float b = mix( rb, rt, f.y );
		float c = mix( a, b, f.x );
		return c;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			shadow = (
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 9.0 );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif
`,shadowmap_pars_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];
	#endif
	#if NUM_SPOT_LIGHTS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];
	#endif
	#if NUM_POINT_LIGHTS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];
	#endif
#endif
`,shadowmap_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#endif
	#if NUM_SPOT_LIGHTS > 0
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#endif
	#if NUM_POINT_LIGHTS > 0
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#endif
#endif
`,shadowmask_pars_fragment:`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
	DirectionalLight directionalLight;
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		shadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#if NUM_SPOT_LIGHTS > 0
	SpotLight spotLight;
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		shadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#if NUM_POINT_LIGHTS > 0
	PointLight pointLight;
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		shadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#endif
	#endif
	return shadow;
}
`,skinbase_vertex:`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex:`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif
`,skinning_vertex:`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif
`,skinnormal_vertex:`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
#endif
`,specularmap_fragment:`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment:`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment:`#if defined( TONE_MAPPING )
  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif
`,tonemapping_pars_fragment:`#define saturate(a) clamp( a, 0.0, 1.0 )
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
`,uv_pars_fragment:`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	varying vec2 vUv;
#endif`,uv_pars_vertex:`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	varying vec2 vUv;
	uniform vec4 offsetRepeat;
#endif
`,uv_vertex:`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;
#endif`,uv2_pars_fragment:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
#endif`,uv2_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = uv2;
#endif`,worldpos_vertex:`#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
#endif
`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldPosition;
void main() {
	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );
	gl_FragColor.a *= opacity;
}
`,cube_vert:`varying vec3 vWorldPosition;
#include <common>
void main() {
	vWorldPosition = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}
`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( gl_FragCoord.z );
	#endif
}
`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
}
`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}
`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}
`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldPosition;
#include <common>
void main() {
	vec3 direction = normalize( vWorldPosition );
	vec2 sampleUV;
	sampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;
	gl_FragColor = texture2D( tEquirect, sampleUV );
}
`,equirect_vert:`varying vec3 vWorldPosition;
#include <common>
void main() {
	vWorldPosition = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}
`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	vLineDistance = scale * lineDistance;
	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}
`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		reflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}
`,meshlambert_frag:`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_pars_fragment>
#include <bsdfs>
#include <lights_pars>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}
`,meshlambert_vert:`#define LAMBERT
varying vec3 vLightFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_template>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}
`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,meshphysical_frag:`#define PHYSICAL
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifndef STANDARD
	uniform float clearCoat;
	uniform float clearCoatRoughness;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <lights_pars>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_template>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}
`,meshphysical_vert:`#define PHYSICAL
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,normal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	#include <normal_fragment>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}
`,normal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}
`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <packing>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <project_vertex>
	#ifdef USE_SIZEATTENUATION
		gl_PointSize = size * ( scale / - mvPosition.z );
	#else
		gl_PointSize = size;
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <bsdfs>
#include <lights_pars>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
}
`,shadow_vert:`#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
}
`},Ja={basic:{uniforms:vr.merge([se.common,se.specularmap,se.envmap,se.aomap,se.lightmap,se.fog]),vertexShader:Je.meshbasic_vert,fragmentShader:Je.meshbasic_frag},lambert:{uniforms:vr.merge([se.common,se.specularmap,se.envmap,se.aomap,se.lightmap,se.emissivemap,se.fog,se.lights,{emissive:{value:new ee(0)}}]),vertexShader:Je.meshlambert_vert,fragmentShader:Je.meshlambert_frag},phong:{uniforms:vr.merge([se.common,se.specularmap,se.envmap,se.aomap,se.lightmap,se.emissivemap,se.bumpmap,se.normalmap,se.displacementmap,se.gradientmap,se.fog,se.lights,{emissive:{value:new ee(0)},specular:{value:new ee(1118481)},shininess:{value:30}}]),vertexShader:Je.meshphong_vert,fragmentShader:Je.meshphong_frag},standard:{uniforms:vr.merge([se.common,se.envmap,se.aomap,se.lightmap,se.emissivemap,se.bumpmap,se.normalmap,se.displacementmap,se.roughnessmap,se.metalnessmap,se.fog,se.lights,{emissive:{value:new ee(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Je.meshphysical_vert,fragmentShader:Je.meshphysical_frag},points:{uniforms:vr.merge([se.points,se.fog]),vertexShader:Je.points_vert,fragmentShader:Je.points_frag},dashed:{uniforms:vr.merge([se.common,se.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Je.linedashed_vert,fragmentShader:Je.linedashed_frag},depth:{uniforms:vr.merge([se.common,se.displacementmap]),vertexShader:Je.depth_vert,fragmentShader:Je.depth_frag},normal:{uniforms:vr.merge([se.common,se.bumpmap,se.normalmap,se.displacementmap,{opacity:{value:1}}]),vertexShader:Je.normal_vert,fragmentShader:Je.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Je.cube_vert,fragmentShader:Je.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Je.equirect_vert,fragmentShader:Je.equirect_frag},distanceRGBA:{uniforms:vr.merge([se.common,se.displacementmap,{referencePosition:{value:new G},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Je.distanceRGBA_vert,fragmentShader:Je.distanceRGBA_frag},shadow:{uniforms:vr.merge([se.lights,{color:{value:new ee(0)},opacity:{value:1}}]),vertexShader:Je.shadow_vert,fragmentShader:Je.shadow_frag}};Ja.physical={uniforms:vr.merge([Ja.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Je.meshphysical_vert,fragmentShader:Je.meshphysical_frag},Object.assign(Xn.prototype,{set:function(t,n){return this.min.copy(t),this.max.copy(n),this},setFromPoints:function(t){this.makeEmpty();for(var n=0,i=t.length;n<i;n++)this.expandByPoint(t[n]);return this},setFromCenterAndSize:function(){var t=new gt;return function(n,i){var o=t.copy(i).multiplyScalar(.5);return this.min.copy(n).sub(o),this.max.copy(n).add(o),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){var n=t||new gt;return this.isEmpty()?n.set(0,0):n.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var n=t||new gt;return this.isEmpty()?n.set(0,0):n.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,n){return(n||new gt).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,n){return(n||new gt).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new gt;return function(n){return t.copy(n).clamp(this.min,this.max).sub(n).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),kr.prototype=Object.create(Dt.prototype),kr.prototype.constructor=kr;var Np=0;Object.assign(_e.prototype,A.prototype,{isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(t!==void 0)for(var n in t){var i=t[n];if(i!==void 0)if(n!=="shading"){var o=this[n];o!==void 0?o&&o.isColor?o.set(i):o&&o.isVector3&&i&&i.isVector3?o.copy(i):this[n]=n==="overdraw"?Number(i):i:console.warn("THREE."+this.type+": '"+n+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===Wl;else console.warn("THREE.Material: '"+n+"' parameter is undefined.")}},toJSON:function(t){function n(f){var d=[];for(var g in f){var v=f[g];delete v.metadata,d.push(v)}return d}var i=t===void 0;i&&(t={textures:{},images:{}});var o={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.color&&this.color.isColor&&(o.color=this.color.getHex()),this.roughness!==void 0&&(o.roughness=this.roughness),this.metalness!==void 0&&(o.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(o.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(o.specular=this.specular.getHex()),this.shininess!==void 0&&(o.shininess=this.shininess),this.clearCoat!==void 0&&(o.clearCoat=this.clearCoat),this.clearCoatRoughness!==void 0&&(o.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(o.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(o.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(o.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(o.bumpMap=this.bumpMap.toJSON(t).uuid,o.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(o.normalMap=this.normalMap.toJSON(t).uuid,o.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(o.displacementMap=this.displacementMap.toJSON(t).uuid,o.displacementScale=this.displacementScale,o.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(o.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(o.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(o.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(o.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(o.envMap=this.envMap.toJSON(t).uuid,o.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(o.gradientMap=this.gradientMap.toJSON(t).uuid),this.size!==void 0&&(o.size=this.size),this.sizeAttenuation!==void 0&&(o.sizeAttenuation=this.sizeAttenuation),this.blending!==Zo&&(o.blending=this.blending),this.flatShading===!0&&(o.flatShading=this.flatShading),this.side!==fa&&(o.side=this.side),this.vertexColors!==uc&&(o.vertexColors=this.vertexColors),this.opacity<1&&(o.opacity=this.opacity),this.transparent===!0&&(o.transparent=this.transparent),o.depthFunc=this.depthFunc,o.depthTest=this.depthTest,o.depthWrite=this.depthWrite,this.dithering===!0&&(o.dithering=!0),this.alphaTest>0&&(o.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(o.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(o.wireframe=this.wireframe),this.wireframeLinewidth>1&&(o.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(o.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(o.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(o.morphTargets=!0),this.skinning===!0&&(o.skinning=!0),this.visible===!1&&(o.visible=!1),JSON.stringify(this.userData)!=="{}"&&(o.userData=this.userData),i){var u=n(t.textures),l=n(t.images);u.length>0&&(o.textures=u),l.length>0&&(o.images=l)}return o},clone:function(){return new this.constructor().copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var n=t.clippingPlanes,i=null;if(n!==null){var o=n.length;i=new Array(o);for(var u=0;u!==o;++u)i[u]=n[u].clone()}return this.clippingPlanes=i,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),qn.prototype=Object.create(_e.prototype),qn.prototype.constructor=qn,qn.prototype.isShaderMaterial=!0,qn.prototype.copy=function(t){return _e.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=vr.clone(t.uniforms),this.defines=t.defines,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},qn.prototype.toJSON=function(t){var n=_e.prototype.toJSON.call(this,t);return n.uniforms=this.uniforms,n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n},Hr.prototype=Object.create(_e.prototype),Hr.prototype.constructor=Hr,Hr.prototype.isMeshDepthMaterial=!0,Hr.prototype.copy=function(t){return _e.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},tr.prototype=Object.create(_e.prototype),tr.prototype.constructor=tr,tr.prototype.isMeshDistanceMaterial=!0,tr.prototype.copy=function(t){return _e.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},Object.assign(_t.prototype,{isBox3:!0,set:function(t,n){return this.min.copy(t),this.max.copy(n),this},setFromArray:function(t){for(var n=1/0,i=1/0,o=1/0,u=-1/0,l=-1/0,f=-1/0,d=0,g=t.length;d<g;d+=3){var v=t[d],y=t[d+1],b=t[d+2];v<n&&(n=v),y<i&&(i=y),b<o&&(o=b),v>u&&(u=v),y>l&&(l=y),b>f&&(f=b)}return this.min.set(n,i,o),this.max.set(u,l,f),this},setFromBufferAttribute:function(t){for(var n=1/0,i=1/0,o=1/0,u=-1/0,l=-1/0,f=-1/0,d=0,g=t.count;d<g;d++){var v=t.getX(d),y=t.getY(d),b=t.getZ(d);v<n&&(n=v),y<i&&(i=y),b<o&&(o=b),v>u&&(u=v),y>l&&(l=y),b>f&&(f=b)}return this.min.set(n,i,o),this.max.set(u,l,f),this},setFromPoints:function(t){this.makeEmpty();for(var n=0,i=t.length;n<i;n++)this.expandByPoint(t[n]);return this},setFromCenterAndSize:function(){var t=new G;return function(n,i){var o=t.copy(i).multiplyScalar(.5);return this.min.copy(n).sub(o),this.max.copy(n).add(o),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){var n=t||new G;return this.isEmpty()?n.set(0,0,0):n.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var n=t||new G;return this.isEmpty()?n.set(0,0,0):n.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t=new G;return function(n){var i=this;return n.updateMatrixWorld(!0),n.traverse(function(o){var u,l,f=o.geometry;if(f!==void 0){if(f.isGeometry){var d=f.vertices;for(u=0,l=d.length;u<l;u++)t.copy(d[u]),t.applyMatrix4(o.matrixWorld),i.expandByPoint(t)}else if(f.isBufferGeometry){var g=f.attributes.position;if(g!==void 0)for(u=0,l=g.count;u<l;u++)t.fromBufferAttribute(g,u).applyMatrix4(o.matrixWorld),i.expandByPoint(t)}}}),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,n){return(n||new G).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t=new G;return function(n){return this.clampPoint(n.center,t),t.distanceToSquared(n.center)<=n.radius*n.radius}}(),intersectsPlane:function(t){var n,i;return t.normal.x>0?(n=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(n=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(n+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(n+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(n+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(n+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),n<=t.constant&&i>=t.constant},clampPoint:function(t,n){return(n||new G).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new G;return function(n){return t.copy(n).clamp(this.min,this.max).sub(n).length()}}(),getBoundingSphere:function(){var t=new G;return function(n){var i=n||new Xe;return this.getCenter(i.center),i.radius=.5*this.getSize(t).length(),i}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new G,new G,new G,new G,new G,new G,new G,new G];return function(n){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(n),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(n),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(n),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(n),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(n),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(n),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(n),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(n),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(Xe.prototype,{set:function(t,n){return this.center.copy(t),this.radius=n,this},setFromPoints:function(){var t=new _t;return function(n,i){var o=this.center;i!==void 0?o.copy(i):t.setFromPoints(n).getCenter(o);for(var u=0,l=0,f=n.length;l<f;l++)u=Math.max(u,o.distanceToSquared(n[l]));return this.radius=Math.sqrt(u),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var n=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=n*n},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,n){var i=this.center.distanceToSquared(t),o=n||new G;return o.copy(t),i>this.radius*this.radius&&(o.sub(this.center).normalize(),o.multiplyScalar(this.radius).add(this.center)),o},getBoundingBox:function(t){var n=t||new _t;return n.set(this.center,this.center),n.expandByScalar(this.radius),n},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(dn.prototype,{isMatrix3:!0,set:function(t,n,i,o,u,l,f,d,g){var v=this.elements;return v[0]=t,v[1]=o,v[2]=f,v[3]=n,v[4]=u,v[5]=d,v[6]=i,v[7]=l,v[8]=g,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(t){var n=this.elements,i=t.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this},setFromMatrix4:function(t){var n=t.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this},applyToBufferAttribute:function(){var t=new G;return function(n){for(var i=0,o=n.count;i<o;i++)t.x=n.getX(i),t.y=n.getY(i),t.z=n.getZ(i),t.applyMatrix3(this),n.setXYZ(i,t.x,t.y,t.z);return n}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,n){var i=t.elements,o=n.elements,u=this.elements,l=i[0],f=i[3],d=i[6],g=i[1],v=i[4],y=i[7],b=i[2],w=i[5],T=i[8],L=o[0],N=o[3],F=o[6],D=o[1],U=o[4],z=o[7],B=o[2],Q=o[5],$=o[8];return u[0]=l*L+f*D+d*B,u[3]=l*N+f*U+d*Q,u[6]=l*F+f*z+d*$,u[1]=g*L+v*D+y*B,u[4]=g*N+v*U+y*Q,u[7]=g*F+v*z+y*$,u[2]=b*L+w*D+T*B,u[5]=b*N+w*U+T*Q,u[8]=b*F+w*z+T*$,this},multiplyScalar:function(t){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=t,n[4]*=t,n[7]*=t,n[2]*=t,n[5]*=t,n[8]*=t,this},determinant:function(){var t=this.elements,n=t[0],i=t[1],o=t[2],u=t[3],l=t[4],f=t[5],d=t[6],g=t[7],v=t[8];return n*l*v-n*f*g-i*u*v+i*f*d+o*u*g-o*l*d},getInverse:function(t,n){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var i=t.elements,o=this.elements,u=i[0],l=i[1],f=i[2],d=i[3],g=i[4],v=i[5],y=i[6],b=i[7],w=i[8],T=w*g-v*b,L=v*y-w*d,N=b*d-g*y,F=u*T+l*L+f*N;if(F===0){var D="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(n===!0)throw new Error(D);return console.warn(D),this.identity()}var U=1/F;return o[0]=T*U,o[1]=(f*b-w*l)*U,o[2]=(v*l-f*g)*U,o[3]=L*U,o[4]=(w*u-f*y)*U,o[5]=(f*d-v*u)*U,o[6]=N*U,o[7]=(l*y-b*u)*U,o[8]=(g*u-l*d)*U,this},transpose:function(){var t,n=this.elements;return t=n[1],n[1]=n[3],n[3]=t,t=n[2],n[2]=n[6],n[6]=t,t=n[5],n[5]=n[7],n[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var n=this.elements;return t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8],this},equals:function(t){for(var n=this.elements,i=t.elements,o=0;o<9;o++)if(n[o]!==i[o])return!1;return!0},fromArray:function(t,n){n===void 0&&(n=0);for(var i=0;i<9;i++)this.elements[i]=t[i+n];return this},toArray:function(t,n){t===void 0&&(t=[]),n===void 0&&(n=0);var i=this.elements;return t[n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=i[3],t[n+4]=i[4],t[n+5]=i[5],t[n+6]=i[6],t[n+7]=i[7],t[n+8]=i[8],t}}),Object.assign(bn.prototype,{set:function(t,n){return this.normal.copy(t),this.constant=n,this},setComponents:function(t,n,i,o){return this.normal.set(t,n,i),this.constant=o,this},setFromNormalAndCoplanarPoint:function(t,n){return this.normal.copy(t),this.constant=-n.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new G,n=new G;return function(i,o,u){var l=t.subVectors(u,o).cross(n.subVectors(i,o)).normalize();return this.setFromNormalAndCoplanarPoint(l,i),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,n){return(n||new G).copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new G;return function(n,i){var o=i||new G,u=n.delta(t),l=this.normal.dot(u);if(l!==0){var f=-(n.start.dot(this.normal)+this.constant)/l;if(!(f<0||f>1))return o.copy(u).multiplyScalar(f).add(n.start)}else if(this.distanceToPoint(n.start)===0)return o.copy(n.start)}}(),intersectsLine:function(t){var n=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return n<0&&i>0||i<0&&n>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return(t||new G).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new G,n=new dn;return function(i,o){var u=o||n.getNormalMatrix(i),l=this.coplanarPoint(t).applyMatrix4(i),f=this.normal.applyMatrix3(u).normalize();return this.constant=-l.dot(f),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(Ri.prototype,{set:function(t,n,i,o,u,l){var f=this.planes;return f[0].copy(t),f[1].copy(n),f[2].copy(i),f[3].copy(o),f[4].copy(u),f[5].copy(l),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){for(var n=this.planes,i=0;i<6;i++)n[i].copy(t.planes[i]);return this},setFromMatrix:function(t){var n=this.planes,i=t.elements,o=i[0],u=i[1],l=i[2],f=i[3],d=i[4],g=i[5],v=i[6],y=i[7],b=i[8],w=i[9],T=i[10],L=i[11],N=i[12],F=i[13],D=i[14],U=i[15];return n[0].setComponents(f-o,y-d,L-b,U-N).normalize(),n[1].setComponents(f+o,y+d,L+b,U+N).normalize(),n[2].setComponents(f+u,y+g,L+w,U+F).normalize(),n[3].setComponents(f-u,y-g,L-w,U-F).normalize(),n[4].setComponents(f-l,y-v,L-T,U-D).normalize(),n[5].setComponents(f+l,y+v,L+T,U+D).normalize(),this},intersectsObject:function(){var t=new Xe;return function(n){var i=n.geometry;return i.boundingSphere===null&&i.computeBoundingSphere(),t.copy(i.boundingSphere).applyMatrix4(n.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new Xe;return function(n){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(n.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var n=this.planes,i=t.center,o=-t.radius,u=0;u<6;u++)if(n[u].distanceToPoint(i)<o)return!1;return!0},intersectsBox:function(){var t=new G,n=new G;return function(i){for(var o=this.planes,u=0;u<6;u++){var l=o[u];t.x=l.normal.x>0?i.min.x:i.max.x,n.x=l.normal.x>0?i.max.x:i.min.x,t.y=l.normal.y>0?i.min.y:i.max.y,n.y=l.normal.y>0?i.max.y:i.min.y,t.z=l.normal.z>0?i.min.z:i.max.z,n.z=l.normal.z>0?i.max.z:i.min.z;var f=l.distanceToPoint(t),d=l.distanceToPoint(n);if(f<0&&d<0)return!1}return!0}}(),containsPoint:function(t){for(var n=this.planes,i=0;i<6;i++)if(n[i].distanceToPoint(t)<0)return!1;return!0}}),$i.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],$i.DefaultOrder="XYZ",Object.defineProperties($i.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign($i.prototype,{isEuler:!0,set:function(t,n,i,o){return this._x=t,this._y=n,this._z=i,this._order=o||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,n,i){var o=Ce.clamp,u=t.elements,l=u[0],f=u[4],d=u[8],g=u[1],v=u[5],y=u[9],b=u[2],w=u[6],T=u[10];return n=n||this._order,n==="XYZ"?(this._y=Math.asin(o(d,-1,1)),Math.abs(d)<.99999?(this._x=Math.atan2(-y,T),this._z=Math.atan2(-f,l)):(this._x=Math.atan2(w,v),this._z=0)):n==="YXZ"?(this._x=Math.asin(-o(y,-1,1)),Math.abs(y)<.99999?(this._y=Math.atan2(d,T),this._z=Math.atan2(g,v)):(this._y=Math.atan2(-b,l),this._z=0)):n==="ZXY"?(this._x=Math.asin(o(w,-1,1)),Math.abs(w)<.99999?(this._y=Math.atan2(-b,T),this._z=Math.atan2(-f,v)):(this._y=0,this._z=Math.atan2(g,l))):n==="ZYX"?(this._y=Math.asin(-o(b,-1,1)),Math.abs(b)<.99999?(this._x=Math.atan2(w,T),this._z=Math.atan2(g,l)):(this._x=0,this._z=Math.atan2(-f,v))):n==="YZX"?(this._z=Math.asin(o(g,-1,1)),Math.abs(g)<.99999?(this._x=Math.atan2(-y,v),this._y=Math.atan2(-b,l)):(this._x=0,this._y=Math.atan2(d,T))):n==="XZY"?(this._z=Math.asin(-o(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(w,v),this._y=Math.atan2(d,l)):(this._x=Math.atan2(-y,T),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+n),this._order=n,i!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new Ut;return function(n,i,o){return t.makeRotationFromQuaternion(n),this.setFromRotationMatrix(t,i,o)}}(),setFromVector3:function(t,n){return this.set(t.x,t.y,t.z,n||this._order)},reorder:function(){var t=new Ct;return function(n){return t.setFromEuler(this),this.setFromQuaternion(t,n)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,n){return t===void 0&&(t=[]),n===void 0&&(n=0),t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new G(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(sl.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return(this.mask&t.mask)!=0}});var Ip=0;Yt.DefaultUp=new G(0,1,0),Yt.DefaultMatrixAutoUpdate=!0,Object.assign(Yt.prototype,A.prototype,{isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,n){this.quaternion.setFromAxisAngle(t,n)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new Ct;return function(n,i){return t.setFromAxisAngle(n,i),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new G(1,0,0);return function(n){return this.rotateOnAxis(t,n)}}(),rotateY:function(){var t=new G(0,1,0);return function(n){return this.rotateOnAxis(t,n)}}(),rotateZ:function(){var t=new G(0,0,1);return function(n){return this.rotateOnAxis(t,n)}}(),translateOnAxis:function(){var t=new G;return function(n,i){return t.copy(n).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(i)),this}}(),translateX:function(){var t=new G(1,0,0);return function(n){return this.translateOnAxis(t,n)}}(),translateY:function(){var t=new G(0,1,0);return function(n){return this.translateOnAxis(t,n)}}(),translateZ:function(){var t=new G(0,0,1);return function(n){return this.translateOnAxis(t,n)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new Ut;return function(n){return n.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new Ut;return function(n){this.isCamera?t.lookAt(this.position,n,this.up):t.lookAt(n,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}var i=this.children.indexOf(t);return i!==-1&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(i,1)),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,n){if(this[t]===n)return this;for(var i=0,o=this.children.length;i<o;i++){var u=this.children[i],l=u.getObjectByProperty(t,n);if(l!==void 0)return l}},getWorldPosition:function(t){var n=t||new G;return this.updateMatrixWorld(!0),n.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new G,n=new G;return function(i){var o=i||new Ct;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,o,n),o}}(),getWorldRotation:function(){var t=new Ct;return function(n){var i=n||new $i;return this.getWorldQuaternion(t),i.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new G,n=new Ct;return function(i){var o=i||new G;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,o),o}}(),getWorldDirection:function(){var t=new Ct;return function(n){var i=n||new G;return this.getWorldQuaternion(t),i.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var n=this.children,i=0,o=n.length;i<o;i++)n[i].traverse(t)},traverseVisible:function(t){if(this.visible!==!1){t(this);for(var n=this.children,i=0,o=n.length;i<o;i++)n[i].traverseVisible(t)}},traverseAncestors:function(t){var n=this.parent;n!==null&&(t(n),n.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var n=this.children,i=0,o=n.length;i<o;i++)n[i].updateMatrixWorld(t)},toJSON:function(t){function n(T,L){return T[L.uuid]===void 0&&(T[L.uuid]=L.toJSON(t)),L.uuid}function i(T){var L=[];for(var N in T){var F=T[N];delete F.metadata,L.push(F)}return L}var o=t===void 0||t==="",u={};o&&(t={geometries:{},materials:{},textures:{},images:{}},u.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var l={};if(l.uuid=this.uuid,l.type=this.type,this.name!==""&&(l.name=this.name),this.castShadow===!0&&(l.castShadow=!0),this.receiveShadow===!0&&(l.receiveShadow=!0),this.visible===!1&&(l.visible=!1),JSON.stringify(this.userData)!=="{}"&&(l.userData=this.userData),l.matrix=this.matrix.toArray(),this.geometry!==void 0&&(l.geometry=n(t.geometries,this.geometry)),this.material!==void 0)if(Array.isArray(this.material)){for(var f=[],d=0,g=this.material.length;d<g;d++)f.push(n(t.materials,this.material[d]));l.material=f}else l.material=n(t.materials,this.material);if(this.children.length>0){l.children=[];for(var d=0;d<this.children.length;d++)l.children.push(this.children[d].toJSON(t).object)}if(o){var v=i(t.geometries),y=i(t.materials),b=i(t.textures),w=i(t.images);v.length>0&&(u.geometries=v),y.length>0&&(u.materials=y),b.length>0&&(u.textures=b),w.length>0&&(u.images=w)}return u.object=l,u},clone:function(t){return new this.constructor().copy(this,t)},copy:function(t,n){if(n===void 0&&(n=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),n===!0)for(var i=0;i<t.children.length;i++){var o=t.children[i];this.add(o.clone())}return this}}),di.prototype=Object.assign(Object.create(Yt.prototype),{constructor:di,isCamera:!0,copy:function(t,n){return Yt.prototype.copy.call(this,t,n),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},getWorldDirection:function(){var t=new Ct;return function(n){var i=n||new G;return this.getWorldQuaternion(t),i.set(0,0,-1).applyQuaternion(t)}}(),updateMatrixWorld:function(t){Yt.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}}),co.prototype=Object.assign(Object.create(di.prototype),{constructor:co,isOrthographicCamera:!0,copy:function(t,n){return di.prototype.copy.call(this,t,n),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this},setViewOffset:function(t,n,i,o,u,l){this.view={fullWidth:t,fullHeight:n,offsetX:i,offsetY:o,width:u,height:l},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,o=(this.top+this.bottom)/2,u=i-t,l=i+t,f=o+n,d=o-n;if(this.view!==null){var g=this.zoom/(this.view.width/this.view.fullWidth),v=this.zoom/(this.view.height/this.view.fullHeight),y=(this.right-this.left)/this.view.width,b=(this.top-this.bottom)/this.view.height;u+=y*(this.view.offsetX/g),l=u+y*(this.view.width/g),f-=b*(this.view.offsetY/v),d=f-b*(this.view.height/v)}this.projectionMatrix.makeOrthographic(u,l,f,d,this.near,this.far)},toJSON:function(t){var n=Yt.prototype.toJSON.call(this,t);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}),zn.prototype=Object.assign(Object.create(di.prototype),{constructor:zn,isPerspectiveCamera:!0,copy:function(t,n){return di.prototype.copy.call(this,t,n),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var n=.5*this.getFilmHeight()/t;this.fov=2*Ce.RAD2DEG*Math.atan(n),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*Ce.DEG2RAD*this.fov);return .5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Ce.RAD2DEG*Math.atan(Math.tan(.5*Ce.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,n,i,o,u,l){this.aspect=t/n,this.view={fullWidth:t,fullHeight:n,offsetX:i,offsetY:o,width:u,height:l},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,n=t*Math.tan(.5*Ce.DEG2RAD*this.fov)/this.zoom,i=2*n,o=this.aspect*i,u=-.5*o,l=this.view;if(l!==null){var f=l.fullWidth,d=l.fullHeight;u+=l.offsetX*o/f,n-=l.offsetY*i/d,o*=l.width/f,i*=l.height/d}var g=this.filmOffset;g!==0&&(u+=t*g/this.getFilmWidth()),this.projectionMatrix.makePerspective(u,u+o,n,n-i,t,this.far)},toJSON:function(t){var n=Yt.prototype.toJSON.call(this,t);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}),Object.assign(Ci.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var n=0,i=t.vertexNormals.length;n<i;n++)this.vertexNormals[n]=t.vertexNormals[n].clone();for(var n=0,i=t.vertexColors.length;n<i;n++)this.vertexColors[n]=t.vertexColors[n].clone();return this}});var Op=0;Object.assign(Ee.prototype,A.prototype,{isGeometry:!0,applyMatrix:function(t){for(var n=new dn().getNormalMatrix(t),i=0,o=this.vertices.length;i<o;i++)this.vertices[i].applyMatrix4(t);for(var i=0,o=this.faces.length;i<o;i++){var u=this.faces[i];u.normal.applyMatrix3(n).normalize();for(var l=0,f=u.vertexNormals.length;l<f;l++)u.vertexNormals[l].applyMatrix3(n).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new Ut;return function(n){return t.makeRotationX(n),this.applyMatrix(t),this}}(),rotateY:function(){var t=new Ut;return function(n){return t.makeRotationY(n),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new Ut;return function(n){return t.makeRotationZ(n),this.applyMatrix(t),this}}(),translate:function(){var t=new Ut;return function(n,i,o){return t.makeTranslation(n,i,o),this.applyMatrix(t),this}}(),scale:function(){var t=new Ut;return function(n,i,o){return t.makeScale(n,i,o),this.applyMatrix(t),this}}(),lookAt:function(){var t=new Yt;return function(n){t.lookAt(n),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function n(B,Q,$,K){var lt=f!==void 0?[y[B].clone(),y[Q].clone(),y[$].clone()]:[],Y=d!==void 0?[i.colors[B].clone(),i.colors[Q].clone(),i.colors[$].clone()]:[],et=new Ci(B,Q,$,lt,Y,K);i.faces.push(et),g!==void 0&&i.faceVertexUvs[0].push([b[B].clone(),b[Q].clone(),b[$].clone()]),v!==void 0&&i.faceVertexUvs[1].push([w[B].clone(),w[Q].clone(),w[$].clone()])}var i=this,o=t.index!==null?t.index.array:void 0,u=t.attributes,l=u.position.array,f=u.normal!==void 0?u.normal.array:void 0,d=u.color!==void 0?u.color.array:void 0,g=u.uv!==void 0?u.uv.array:void 0,v=u.uv2!==void 0?u.uv2.array:void 0;v!==void 0&&(this.faceVertexUvs[1]=[]);for(var y=[],b=[],w=[],T=0,L=0;T<l.length;T+=3,L+=2)i.vertices.push(new G(l[T],l[T+1],l[T+2])),f!==void 0&&y.push(new G(f[T],f[T+1],f[T+2])),d!==void 0&&i.colors.push(new ee(d[T],d[T+1],d[T+2])),g!==void 0&&b.push(new gt(g[L],g[L+1])),v!==void 0&&w.push(new gt(v[L],v[L+1]));var N=t.groups;if(N.length>0)for(var T=0;T<N.length;T++)for(var F=N[T],D=F.start,U=F.count,L=D,z=D+U;L<z;L+=3)o!==void 0?n(o[L],o[L+1],o[L+2],F.materialIndex):n(L,L+1,L+2,F.materialIndex);else if(o!==void 0)for(var T=0;T<o.length;T+=3)n(o[T],o[T+1],o[T+2]);else for(var T=0;T<l.length/3;T+=3)n(T,T+1,T+2);return this.computeFaceNormals(),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,n=this.boundingSphere.radius,i=n===0?1:1/n,o=new Ut;return o.set(i,0,0,-i*t.x,0,i,0,-i*t.y,0,0,i,-i*t.z,0,0,0,1),this.applyMatrix(o),this},computeFaceNormals:function(){for(var t=new G,n=new G,i=0,o=this.faces.length;i<o;i++){var u=this.faces[i],l=this.vertices[u.a],f=this.vertices[u.b],d=this.vertices[u.c];t.subVectors(d,f),n.subVectors(l,f),t.cross(n),t.normalize(),u.normal.copy(t)}},computeVertexNormals:function(t){t===void 0&&(t=!0);var n,i,o,u,l,f;for(f=new Array(this.vertices.length),n=0,i=this.vertices.length;n<i;n++)f[n]=new G;if(t){var d,g,v,y=new G,b=new G;for(o=0,u=this.faces.length;o<u;o++)l=this.faces[o],d=this.vertices[l.a],g=this.vertices[l.b],v=this.vertices[l.c],y.subVectors(v,g),b.subVectors(d,g),y.cross(b),f[l.a].add(y),f[l.b].add(y),f[l.c].add(y)}else for(this.computeFaceNormals(),o=0,u=this.faces.length;o<u;o++)l=this.faces[o],f[l.a].add(l.normal),f[l.b].add(l.normal),f[l.c].add(l.normal);for(n=0,i=this.vertices.length;n<i;n++)f[n].normalize();for(o=0,u=this.faces.length;o<u;o++){l=this.faces[o];var w=l.vertexNormals;w.length===3?(w[0].copy(f[l.a]),w[1].copy(f[l.b]),w[2].copy(f[l.c])):(w[0]=f[l.a].clone(),w[1]=f[l.b].clone(),w[2]=f[l.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,n,i;for(this.computeFaceNormals(),t=0,n=this.faces.length;t<n;t++){i=this.faces[t];var o=i.vertexNormals;o.length===3?(o[0].copy(i.normal),o[1].copy(i.normal),o[2].copy(i.normal)):(o[0]=i.normal.clone(),o[1]=i.normal.clone(),o[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,n,i,o,u;for(i=0,o=this.faces.length;i<o;i++)for(u=this.faces[i],u.__originalFaceNormal?u.__originalFaceNormal.copy(u.normal):u.__originalFaceNormal=u.normal.clone(),u.__originalVertexNormals||(u.__originalVertexNormals=[]),t=0,n=u.vertexNormals.length;t<n;t++)u.__originalVertexNormals[t]?u.__originalVertexNormals[t].copy(u.vertexNormals[t]):u.__originalVertexNormals[t]=u.vertexNormals[t].clone();var l=new Ee;for(l.faces=this.faces,t=0,n=this.morphTargets.length;t<n;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var v,y,f=this.morphNormals[t].faceNormals,d=this.morphNormals[t].vertexNormals;for(i=0,o=this.faces.length;i<o;i++)v=new G,y={a:new G,b:new G,c:new G},f.push(v),d.push(y)}var g=this.morphNormals[t];l.vertices=this.morphTargets[t].vertices,l.computeFaceNormals(),l.computeVertexNormals();var v,y;for(i=0,o=this.faces.length;i<o;i++)u=this.faces[i],v=g.faceNormals[i],y=g.vertexNormals[i],v.copy(u.normal),y.a.copy(u.vertexNormals[0]),y.b.copy(u.vertexNormals[1]),y.c.copy(u.vertexNormals[2])}for(i=0,o=this.faces.length;i<o;i++)u=this.faces[i],u.normal=u.__originalFaceNormal,u.vertexNormals=u.__originalVertexNormals},computeLineDistances:function(){for(var t=0,n=this.vertices,i=0,o=n.length;i<o;i++)i>0&&(t+=n[i].distanceTo(n[i-1])),this.lineDistances[i]=t},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new _t),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Xe),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,n,i){if(!t||!t.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);var o,u=this.vertices.length,l=this.vertices,f=t.vertices,d=this.faces,g=t.faces,v=this.faceVertexUvs[0],y=t.faceVertexUvs[0],b=this.colors,w=t.colors;i===void 0&&(i=0),n!==void 0&&(o=new dn().getNormalMatrix(n));for(var T=0,L=f.length;T<L;T++){var N=f[T],F=N.clone();n!==void 0&&F.applyMatrix4(n),l.push(F)}for(var T=0,L=w.length;T<L;T++)b.push(w[T].clone());for(T=0,L=g.length;T<L;T++){var D,U,z,B=g[T],Q=B.vertexNormals,$=B.vertexColors;D=new Ci(B.a+u,B.b+u,B.c+u),D.normal.copy(B.normal),o!==void 0&&D.normal.applyMatrix3(o).normalize();for(var K=0,lt=Q.length;K<lt;K++)U=Q[K].clone(),o!==void 0&&U.applyMatrix3(o).normalize(),D.vertexNormals.push(U);D.color.copy(B.color);for(var K=0,lt=$.length;K<lt;K++)z=$[K],D.vertexColors.push(z.clone());D.materialIndex=B.materialIndex+i,d.push(D)}for(T=0,L=y.length;T<L;T++){var Y=y[T],et=[];if(Y!==void 0){for(var K=0,lt=Y.length;K<lt;K++)et.push(Y[K].clone());v.push(et)}}},mergeMesh:function(t){if(!t||!t.isMesh)return void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t);t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)},mergeVertices:function(){var t,n,i,o,u,l,f,d,g={},v=[],y=[],b=Math.pow(10,4);for(i=0,o=this.vertices.length;i<o;i++)t=this.vertices[i],n=Math.round(t.x*b)+"_"+Math.round(t.y*b)+"_"+Math.round(t.z*b),g[n]===void 0?(g[n]=i,v.push(this.vertices[i]),y[i]=v.length-1):y[i]=y[g[n]];var w=[];for(i=0,o=this.faces.length;i<o;i++){u=this.faces[i],u.a=y[u.a],u.b=y[u.b],u.c=y[u.c],l=[u.a,u.b,u.c];for(var T=0;T<3;T++)if(l[T]===l[(T+1)%3]){w.push(i);break}}for(i=w.length-1;i>=0;i--){var L=w[i];for(this.faces.splice(L,1),f=0,d=this.faceVertexUvs.length;f<d;f++)this.faceVertexUvs[f].splice(L,1)}var N=this.vertices.length-v.length;return this.vertices=v,N},sortFacesByMaterialIndex:function(){function t(v,y){return v.materialIndex-y.materialIndex}for(var n=this.faces,i=n.length,o=0;o<i;o++)n[o]._id=o;n.sort(t);var u,l,f=this.faceVertexUvs[0],d=this.faceVertexUvs[1];f&&f.length===i&&(u=[]),d&&d.length===i&&(l=[]);for(var o=0;o<i;o++){var g=n[o]._id;u&&u.push(f[g]),l&&l.push(d[g])}u&&(this.faceVertexUvs[0]=u),l&&(this.faceVertexUvs[1]=l)},toJSON:function(){function t(ht,Tt,Z){return Z?ht|1<<Tt:ht&~(1<<Tt)}function n(ht){var Tt=ht.x.toString()+ht.y.toString()+ht.z.toString();return w[Tt]!==void 0||(w[Tt]=b.length/3,b.push(ht.x,ht.y,ht.z)),w[Tt]}function i(ht){var Tt=ht.r.toString()+ht.g.toString()+ht.b.toString();return L[Tt]!==void 0||(L[Tt]=T.length,T.push(ht.getHex())),L[Tt]}function o(ht){var Tt=ht.x.toString()+ht.y.toString();return F[Tt]!==void 0||(F[Tt]=N.length/2,N.push(ht.x,ht.y)),F[Tt]}var u={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(u.uuid=this.uuid,u.type=this.type,this.name!==""&&(u.name=this.name),this.parameters!==void 0){var l=this.parameters;for(var f in l)l[f]!==void 0&&(u[f]=l[f]);return u}for(var d=[],g=0;g<this.vertices.length;g++){var v=this.vertices[g];d.push(v.x,v.y,v.z)}for(var y=[],b=[],w={},T=[],L={},N=[],F={},g=0;g<this.faces.length;g++){var D=this.faces[g],U=this.faceVertexUvs[0][g]!==void 0,z=D.normal.length()>0,B=D.vertexNormals.length>0,Q=D.color.r!==1||D.color.g!==1||D.color.b!==1,$=D.vertexColors.length>0,K=0;if(K=t(K,0,0),K=t(K,1,!0),K=t(K,2,!1),K=t(K,3,U),K=t(K,4,z),K=t(K,5,B),K=t(K,6,Q),K=t(K,7,$),y.push(K),y.push(D.a,D.b,D.c),y.push(D.materialIndex),U){var lt=this.faceVertexUvs[0][g];y.push(o(lt[0]),o(lt[1]),o(lt[2]))}if(z&&y.push(n(D.normal)),B){var Y=D.vertexNormals;y.push(n(Y[0]),n(Y[1]),n(Y[2]))}if(Q&&y.push(i(D.color)),$){var et=D.vertexColors;y.push(i(et[0]),i(et[1]),i(et[2]))}}return u.data={},u.data.vertices=d,u.data.normals=b,T.length>0&&(u.data.colors=T),N.length>0&&(u.data.uvs=[N]),u.data.faces=y,u},clone:function(){return new Ee().copy(this)},copy:function(t){var n,i,o,u,l,f;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var d=t.vertices;for(n=0,i=d.length;n<i;n++)this.vertices.push(d[n].clone());var g=t.colors;for(n=0,i=g.length;n<i;n++)this.colors.push(g[n].clone());var v=t.faces;for(n=0,i=v.length;n<i;n++)this.faces.push(v[n].clone());for(n=0,i=t.faceVertexUvs.length;n<i;n++){var y=t.faceVertexUvs[n];for(this.faceVertexUvs[n]===void 0&&(this.faceVertexUvs[n]=[]),o=0,u=y.length;o<u;o++){var b=y[o],w=[];for(l=0,f=b.length;l<f;l++){var T=b[l];w.push(T.clone())}this.faceVertexUvs[n].push(w)}}var L=t.morphTargets;for(n=0,i=L.length;n<i;n++){var N={};if(N.name=L[n].name,L[n].vertices!==void 0)for(N.vertices=[],o=0,u=L[n].vertices.length;o<u;o++)N.vertices.push(L[n].vertices[o].clone());if(L[n].normals!==void 0)for(N.normals=[],o=0,u=L[n].normals.length;o<u;o++)N.normals.push(L[n].normals[o].clone());this.morphTargets.push(N)}var F=t.morphNormals;for(n=0,i=F.length;n<i;n++){var D={};if(F[n].vertexNormals!==void 0)for(D.vertexNormals=[],o=0,u=F[n].vertexNormals.length;o<u;o++){var U=F[n].vertexNormals[o],z={};z.a=U.a.clone(),z.b=U.b.clone(),z.c=U.c.clone(),D.vertexNormals.push(z)}if(F[n].faceNormals!==void 0)for(D.faceNormals=[],o=0,u=F[n].faceNormals.length;o<u;o++)D.faceNormals.push(F[n].faceNormals[o].clone());this.morphNormals.push(D)}var B=t.skinWeights;for(n=0,i=B.length;n<i;n++)this.skinWeights.push(B[n].clone());var Q=t.skinIndices;for(n=0,i=Q.length;n<i;n++)this.skinIndices.push(Q[n].clone());var $=t.lineDistances;for(n=0,i=$.length;n<i;n++)this.lineDistances.push($[n]);var K=t.boundingBox;K!==null&&(this.boundingBox=K.clone());var lt=t.boundingSphere;return lt!==null&&(this.boundingSphere=lt.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Re.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Object.assign(Re.prototype,{isBufferAttribute:!0,setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=t!==void 0?t.length/this.itemSize:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,n,i){t*=this.itemSize,i*=n.itemSize;for(var o=0,u=this.itemSize;o<u;o++)this.array[t+o]=n.array[i+o];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var n=this.array,i=0,o=0,u=t.length;o<u;o++){var l=t[o];l===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",o),l=new ee),n[i++]=l.r,n[i++]=l.g,n[i++]=l.b}return this},copyIndicesArray:function(t){for(var n=this.array,i=0,o=0,u=t.length;o<u;o++){var l=t[o];n[i++]=l.a,n[i++]=l.b,n[i++]=l.c}return this},copyVector2sArray:function(t){for(var n=this.array,i=0,o=0,u=t.length;o<u;o++){var l=t[o];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",o),l=new gt),n[i++]=l.x,n[i++]=l.y}return this},copyVector3sArray:function(t){for(var n=this.array,i=0,o=0,u=t.length;o<u;o++){var l=t[o];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",o),l=new G),n[i++]=l.x,n[i++]=l.y,n[i++]=l.z}return this},copyVector4sArray:function(t){for(var n=this.array,i=0,o=0,u=t.length;o<u;o++){var l=t[o];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",o),l=new Bt),n[i++]=l.x,n[i++]=l.y,n[i++]=l.z,n[i++]=l.w}return this},set:function(t,n){return n===void 0&&(n=0),this.array.set(t,n),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,n){return this.array[t*this.itemSize]=n,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,n){return this.array[t*this.itemSize+1]=n,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,n){return this.array[t*this.itemSize+2]=n,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,n){return this.array[t*this.itemSize+3]=n,this},setXY:function(t,n,i){return t*=this.itemSize,this.array[t+0]=n,this.array[t+1]=i,this},setXYZ:function(t,n,i,o){return t*=this.itemSize,this.array[t+0]=n,this.array[t+1]=i,this.array[t+2]=o,this},setXYZW:function(t,n,i,o,u){return t*=this.itemSize,this.array[t+0]=n,this.array[t+1]=i,this.array[t+2]=o,this.array[t+3]=u,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),Bn.prototype=Object.create(Re.prototype),Bn.prototype.constructor=Bn,Qr.prototype=Object.create(Re.prototype),Qr.prototype.constructor=Qr,Ta.prototype=Object.create(Re.prototype),Ta.prototype.constructor=Ta,Ji.prototype=Object.create(Re.prototype),Ji.prototype.constructor=Ji,Pi.prototype=Object.create(Re.prototype),Pi.prototype.constructor=Pi,gs.prototype=Object.create(Re.prototype),gs.prototype.constructor=gs,Sa.prototype=Object.create(Re.prototype),Sa.prototype.constructor=Sa,jt.prototype=Object.create(Re.prototype),jt.prototype.constructor=jt,vs.prototype=Object.create(Re.prototype),vs.prototype.constructor=vs,Object.assign(lo.prototype,{computeGroups:function(t){for(var n,i=[],o=void 0,u=t.faces,l=0;l<u.length;l++){var f=u[l];f.materialIndex!==o&&(o=f.materialIndex,n!==void 0&&(n.count=3*l-n.start,i.push(n)),n={start:3*l,materialIndex:o})}n!==void 0&&(n.count=3*l-n.start,i.push(n)),this.groups=i},fromGeometry:function(t){var n,i=t.faces,o=t.vertices,u=t.faceVertexUvs,l=u[0]&&u[0].length>0,f=u[1]&&u[1].length>0,d=t.morphTargets,g=d.length;if(g>0){n=[];for(var v=0;v<g;v++)n[v]=[];this.morphTargets.position=n}var y,b=t.morphNormals,w=b.length;if(w>0){y=[];for(var v=0;v<w;v++)y[v]=[];this.morphTargets.normal=y}for(var T=t.skinIndices,L=t.skinWeights,N=T.length===o.length,F=L.length===o.length,v=0;v<i.length;v++){var D=i[v];this.vertices.push(o[D.a],o[D.b],o[D.c]);var U=D.vertexNormals;if(U.length===3)this.normals.push(U[0],U[1],U[2]);else{var z=D.normal;this.normals.push(z,z,z)}var B=D.vertexColors;if(B.length===3)this.colors.push(B[0],B[1],B[2]);else{var Q=D.color;this.colors.push(Q,Q,Q)}if(l===!0){var $=u[0][v];$!==void 0?this.uvs.push($[0],$[1],$[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",v),this.uvs.push(new gt,new gt,new gt))}if(f===!0){var $=u[1][v];$!==void 0?this.uvs2.push($[0],$[1],$[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",v),this.uvs2.push(new gt,new gt,new gt))}for(var K=0;K<g;K++){var lt=d[K].vertices;n[K].push(lt[D.a],lt[D.b],lt[D.c])}for(var K=0;K<w;K++){var Y=b[K].vertexNormals[v];y[K].push(Y.a,Y.b,Y.c)}N&&this.skinIndices.push(T[D.a],T[D.b],T[D.c]),F&&this.skinWeights.push(L[D.a],L[D.b],L[D.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}}),Zt.MaxIndex=65535,Object.assign(Zt.prototype,A.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(pi(t)>65535?Sa:Pi)(t,1):this.index=t},addAttribute:function(t,n){return n&&n.isBufferAttribute||n&&n.isInterleavedBufferAttribute?t==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(n)):(this.attributes[t]=n,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(t,new Re(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,n,i){this.groups.push({start:t,count:n,materialIndex:i!==void 0?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,n){this.drawRange.start=t,this.drawRange.count=n},applyMatrix:function(t){var n=this.attributes.position;n!==void 0&&(t.applyToBufferAttribute(n),n.needsUpdate=!0);var i=this.attributes.normal;return i!==void 0&&(new dn().getNormalMatrix(t).applyToBufferAttribute(i),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(){var t=new Ut;return function(n){return t.makeRotationX(n),this.applyMatrix(t),this}}(),rotateY:function(){var t=new Ut;return function(n){return t.makeRotationY(n),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new Ut;return function(n){return t.makeRotationZ(n),this.applyMatrix(t),this}}(),translate:function(){var t=new Ut;return function(n,i,o){return t.makeTranslation(n,i,o),this.applyMatrix(t),this}}(),scale:function(){var t=new Ut;return function(n,i,o){return t.makeScale(n,i,o),this.applyMatrix(t),this}}(),lookAt:function(){var t=new Yt;return function(n){t.lookAt(n),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},setFromObject:function(t){var n=t.geometry;if(t.isPoints||t.isLine){var i=new jt(3*n.vertices.length,3),o=new jt(3*n.colors.length,3);if(this.addAttribute("position",i.copyVector3sArray(n.vertices)),this.addAttribute("color",o.copyColorsArray(n.colors)),n.lineDistances&&n.lineDistances.length===n.vertices.length){var u=new jt(n.lineDistances.length,1);this.addAttribute("lineDistance",u.copyArray(n.lineDistances))}n.boundingSphere!==null&&(this.boundingSphere=n.boundingSphere.clone()),n.boundingBox!==null&&(this.boundingBox=n.boundingBox.clone())}else t.isMesh&&n&&n.isGeometry&&this.fromGeometry(n);return this},updateFromObject:function(t){var n=t.geometry;if(t.isMesh){var i=n.__directGeometry;if(n.elementsNeedUpdate===!0&&(i=void 0,n.elementsNeedUpdate=!1),i===void 0)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}var o;return n.verticesNeedUpdate===!0&&(o=this.attributes.position,o!==void 0&&(o.copyVector3sArray(n.vertices),o.needsUpdate=!0),n.verticesNeedUpdate=!1),n.normalsNeedUpdate===!0&&(o=this.attributes.normal,o!==void 0&&(o.copyVector3sArray(n.normals),o.needsUpdate=!0),n.normalsNeedUpdate=!1),n.colorsNeedUpdate===!0&&(o=this.attributes.color,o!==void 0&&(o.copyColorsArray(n.colors),o.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(o=this.attributes.uv,o!==void 0&&(o.copyVector2sArray(n.uvs),o.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(o=this.attributes.lineDistance,o!==void 0&&(o.copyArray(n.lineDistances),o.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=new lo().fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var n=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new Re(n,3).copyVector3sArray(t.vertices)),t.normals.length>0){var i=new Float32Array(3*t.normals.length);this.addAttribute("normal",new Re(i,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var o=new Float32Array(3*t.colors.length);this.addAttribute("color",new Re(o,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var u=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new Re(u,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var l=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new Re(l,2).copyVector2sArray(t.uvs2))}if(t.indices.length>0){var f=pi(t.indices)>65535?Uint32Array:Uint16Array,d=new f(3*t.indices.length);this.setIndex(new Re(d,1).copyIndicesArray(t.indices))}this.groups=t.groups;for(var g in t.morphTargets){for(var v=[],y=t.morphTargets[g],b=0,w=y.length;b<w;b++){var T=y[b],L=new jt(3*T.length,3);v.push(L.copyVector3sArray(T))}this.morphAttributes[g]=v}if(t.skinIndices.length>0){var N=new jt(4*t.skinIndices.length,4);this.addAttribute("skinIndex",N.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var F=new jt(4*t.skinWeights.length,4);this.addAttribute("skinWeight",F.copyVector4sArray(t.skinWeights))}return t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new _t);var t=this.attributes.position;t!==void 0?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new _t,n=new G;return function(){this.boundingSphere===null&&(this.boundingSphere=new Xe);var i=this.attributes.position;if(i){var o=this.boundingSphere.center;t.setFromBufferAttribute(i),t.getCenter(o);for(var u=0,l=0,f=i.count;l<f;l++)n.x=i.getX(l),n.y=i.getY(l),n.z=i.getZ(l),u=Math.max(u,o.distanceToSquared(n));this.boundingSphere.radius=Math.sqrt(u),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,n=this.attributes,i=this.groups;if(n.position){var o=n.position.array;if(n.normal===void 0)this.addAttribute("normal",new Re(new Float32Array(o.length),3));else for(var u=n.normal.array,l=0,f=u.length;l<f;l++)u[l]=0;var d,g,v,y=n.normal.array,b=new G,w=new G,T=new G,L=new G,N=new G;if(t){var F=t.array;i.length===0&&this.addGroup(0,F.length);for(var D=0,U=i.length;D<U;++D)for(var z=i[D],B=z.start,Q=z.count,l=B,f=B+Q;l<f;l+=3)d=3*F[l+0],g=3*F[l+1],v=3*F[l+2],b.fromArray(o,d),w.fromArray(o,g),T.fromArray(o,v),L.subVectors(T,w),N.subVectors(b,w),L.cross(N),y[d]+=L.x,y[d+1]+=L.y,y[d+2]+=L.z,y[g]+=L.x,y[g+1]+=L.y,y[g+2]+=L.z,y[v]+=L.x,y[v+1]+=L.y,y[v+2]+=L.z}else for(var l=0,f=o.length;l<f;l+=9)b.fromArray(o,l),w.fromArray(o,l+3),T.fromArray(o,l+6),L.subVectors(T,w),N.subVectors(b,w),L.cross(N),y[l]=L.x,y[l+1]=L.y,y[l+2]=L.z,y[l+3]=L.x,y[l+4]=L.y,y[l+5]=L.z,y[l+6]=L.x,y[l+7]=L.y,y[l+8]=L.z;this.normalizeNormals(),n.normal.needsUpdate=!0}},merge:function(t,n){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);n===void 0&&(n=0);var i=this.attributes;for(var o in i)if(t.attributes[o]!==void 0)for(var u=i[o],l=u.array,f=t.attributes[o],d=f.array,g=f.itemSize,v=0,y=g*n;v<d.length;v++,y++)l[y]=d[v];return this},normalizeNormals:function(){var t=new G;return function(){for(var n=this.attributes.normal,i=0,o=n.count;i<o;i++)t.x=n.getX(i),t.y=n.getY(i),t.z=n.getZ(i),t.normalize(),n.setXYZ(i,t.x,t.y,t.z)}}(),toNonIndexed:function(){if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new Zt,n=this.index.array,i=this.attributes;for(var o in i){for(var u=i[o],l=u.array,f=u.itemSize,d=new l.constructor(n.length*f),g=0,v=0,y=0,b=n.length;y<b;y++){g=n[y]*f;for(var w=0;w<f;w++)d[v++]=l[g++]}t.addAttribute(o,new Re(d,f))}return t},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.parameters!==void 0){var n=this.parameters;for(var i in n)n[i]!==void 0&&(t[i]=n[i]);return t}t.data={attributes:{}};var o=this.index;if(o!==null){var u=Array.prototype.slice.call(o.array);t.data.index={type:o.array.constructor.name,array:u}}var l=this.attributes;for(var i in l){var f=l[i],u=Array.prototype.slice.call(f.array);t.data.attributes[i]={itemSize:f.itemSize,type:f.array.constructor.name,array:u,normalized:f.normalized}}var d=this.groups;d.length>0&&(t.data.groups=JSON.parse(JSON.stringify(d)));var g=this.boundingSphere;return g!==null&&(t.data.boundingSphere={center:g.center.toArray(),radius:g.radius}),t},clone:function(){return new Zt().copy(this)},copy:function(t){var n,i,o;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var u=t.index;u!==null&&this.setIndex(u.clone());var l=t.attributes;for(n in l){var f=l[n];this.addAttribute(n,f.clone())}var d=t.morphAttributes;for(n in d){var g=[],v=d[n];for(i=0,o=v.length;i<o;i++)g.push(v[i].clone());this.morphAttributes[n]=g}var y=t.groups;for(i=0,o=y.length;i<o;i++){var b=y[i];this.addGroup(b.start,b.count,b.materialIndex)}var w=t.boundingBox;w!==null&&(this.boundingBox=w.clone());var T=t.boundingSphere;return T!==null&&(this.boundingSphere=T.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Aa.prototype=Object.create(Ee.prototype),Aa.prototype.constructor=Aa,ta.prototype=Object.create(Zt.prototype),ta.prototype.constructor=ta,Ra.prototype=Object.create(Ee.prototype),Ra.prototype.constructor=Ra,$r.prototype=Object.create(Zt.prototype),$r.prototype.constructor=$r,nn.prototype=Object.create(_e.prototype),nn.prototype.constructor=nn,nn.prototype.isMeshBasicMaterial=!0,nn.prototype.copy=function(t){return _e.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Object.assign(ea.prototype,{set:function(t,n){return this.origin.copy(t),this.direction.copy(n),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,n){return(n||new G).copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new G;return function(n){return this.origin.copy(this.at(n,t)),this}}(),closestPointToPoint:function(t,n){var i=n||new G;i.subVectors(t,this.origin);var o=i.dot(this.direction);return o<0?i.copy(this.origin):i.copy(this.direction).multiplyScalar(o).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new G;return function(n){var i=t.subVectors(n,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(n):(t.copy(this.direction).multiplyScalar(i).add(this.origin),t.distanceToSquared(n))}}(),distanceSqToSegment:function(){var t=new G,n=new G,i=new G;return function(o,u,l,f){t.copy(o).add(u).multiplyScalar(.5),n.copy(u).sub(o).normalize(),i.copy(this.origin).sub(t);var d,g,v,y,b=.5*o.distanceTo(u),w=-this.direction.dot(n),T=i.dot(this.direction),L=-i.dot(n),N=i.lengthSq(),F=Math.abs(1-w*w);if(F>0)if(d=w*L-T,g=w*T-L,y=b*F,d>=0)if(g>=-y)if(g<=y){var D=1/F;d*=D,g*=D,v=d*(d+w*g+2*T)+g*(w*d+g+2*L)+N}else g=b,d=Math.max(0,-(w*g+T)),v=-d*d+g*(g+2*L)+N;else g=-b,d=Math.max(0,-(w*g+T)),v=-d*d+g*(g+2*L)+N;else g<=-y?(d=Math.max(0,-(-w*b+T)),g=d>0?-b:Math.min(Math.max(-b,-L),b),v=-d*d+g*(g+2*L)+N):g<=y?(d=0,g=Math.min(Math.max(-b,-L),b),v=g*(g+2*L)+N):(d=Math.max(0,-(w*b+T)),g=d>0?b:Math.min(Math.max(-b,-L),b),v=-d*d+g*(g+2*L)+N);else g=w>0?-b:b,d=Math.max(0,-(w*g+T)),v=-d*d+g*(g+2*L)+N;return l&&l.copy(this.direction).multiplyScalar(d).add(this.origin),f&&f.copy(n).multiplyScalar(g).add(t),v}}(),intersectSphere:function(){var t=new G;return function(n,i){t.subVectors(n.center,this.origin);var o=t.dot(this.direction),u=t.dot(t)-o*o,l=n.radius*n.radius;if(u>l)return null;var f=Math.sqrt(l-u),d=o-f,g=o+f;return d<0&&g<0?null:d<0?this.at(g,i):this.at(d,i)}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var n=t.normal.dot(this.direction);if(n===0)return t.distanceToPoint(this.origin)===0?0:null;var i=-(this.origin.dot(t.normal)+t.constant)/n;return i>=0?i:null},intersectPlane:function(t,n){var i=this.distanceToPlane(t);return i===null?null:this.at(i,n)},intersectsPlane:function(t){var n=t.distanceToPoint(this.origin);return n===0||t.normal.dot(this.direction)*n<0},intersectBox:function(t,n){var i,o,u,l,f,d,g=1/this.direction.x,v=1/this.direction.y,y=1/this.direction.z,b=this.origin;return g>=0?(i=(t.min.x-b.x)*g,o=(t.max.x-b.x)*g):(i=(t.max.x-b.x)*g,o=(t.min.x-b.x)*g),v>=0?(u=(t.min.y-b.y)*v,l=(t.max.y-b.y)*v):(u=(t.max.y-b.y)*v,l=(t.min.y-b.y)*v),i>l||u>o?null:((u>i||i!==i)&&(i=u),(l<o||o!==o)&&(o=l),y>=0?(f=(t.min.z-b.z)*y,d=(t.max.z-b.z)*y):(f=(t.max.z-b.z)*y,d=(t.min.z-b.z)*y),i>d||f>o?null:((f>i||i!==i)&&(i=f),(d<o||o!==o)&&(o=d),o<0?null:this.at(i>=0?i:o,n)))},intersectsBox:function(){var t=new G;return function(n){return this.intersectBox(n,t)!==null}}(),intersectTriangle:function(){var t=new G,n=new G,i=new G,o=new G;return function(u,l,f,d,g){n.subVectors(l,u),i.subVectors(f,u),o.crossVectors(n,i);var v,y=this.direction.dot(o);if(y>0){if(d)return null;v=1}else{if(!(y<0))return null;v=-1,y=-y}t.subVectors(this.origin,u);var b=v*this.direction.dot(i.crossVectors(t,i));if(b<0)return null;var w=v*this.direction.dot(n.cross(t));if(w<0||b+w>y)return null;var T=-v*t.dot(o);return T<0?null:this.at(T/y,g)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(ho.prototype,{set:function(t,n){return this.start.copy(t),this.end.copy(n),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return(t||new G).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return(t||new G).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,n){var i=n||new G;return this.delta(i).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new G,n=new G;return function(i,o){t.subVectors(i,this.start),n.subVectors(this.end,this.start);var u=n.dot(n),l=n.dot(t),f=l/u;return o&&(f=Ce.clamp(f,0,1)),f}}(),closestPointToPoint:function(t,n,i){var o=this.closestPointToPointParameter(t,n),u=i||new G;return this.delta(u).multiplyScalar(o).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Object.assign(Gr,{normal:function(){var t=new G;return function(n,i,o,u){var l=u||new G;l.subVectors(o,i),t.subVectors(n,i),l.cross(t);var f=l.lengthSq();return f>0?l.multiplyScalar(1/Math.sqrt(f)):l.set(0,0,0)}}(),barycoordFromPoint:function(){var t=new G,n=new G,i=new G;return function(o,u,l,f,d){t.subVectors(f,u),n.subVectors(l,u),i.subVectors(o,u);var g=t.dot(t),v=t.dot(n),y=t.dot(i),b=n.dot(n),w=n.dot(i),T=g*b-v*v,L=d||new G;if(T===0)return L.set(-2,-1,-1);var N=1/T,F=(b*y-v*w)*N,D=(g*w-v*y)*N;return L.set(1-F-D,D,F)}}(),containsPoint:function(){var t=new G;return function(n,i,o,u){var l=Gr.barycoordFromPoint(n,i,o,u,t);return l.x>=0&&l.y>=0&&l.x+l.y<=1}}()}),Object.assign(Gr.prototype,{set:function(t,n,i){return this.a.copy(t),this.b.copy(n),this.c.copy(i),this},setFromPointsAndIndices:function(t,n,i,o){return this.a.copy(t[n]),this.b.copy(t[i]),this.c.copy(t[o]),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new G,n=new G;return function(){return t.subVectors(this.c,this.b),n.subVectors(this.a,this.b),.5*t.cross(n).length()}}(),midpoint:function(t){return(t||new G).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return Gr.normal(this.a,this.b,this.c,t)},plane:function(t){return(t||new bn).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,n){return Gr.barycoordFromPoint(t,this.a,this.b,this.c,n)},containsPoint:function(t){return Gr.containsPoint(t,this.a,this.b,this.c)},closestPointToPoint:function(){var t=new bn,n=[new ho,new ho,new ho],i=new G,o=new G;return function(u,l){var f=l||new G,d=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(u,i),this.containsPoint(i)===!0)f.copy(i);else{n[0].set(this.a,this.b),n[1].set(this.b,this.c),n[2].set(this.c,this.a);for(var g=0;g<n.length;g++){n[g].closestPointToPoint(i,!0,o);var v=i.distanceToSquared(o);v<d&&(d=v,f.copy(o))}}return f}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),wn.prototype=Object.assign(Object.create(Yt.prototype),{constructor:wn,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return Yt.prototype.copy.call(this,t),this.drawMode=t.drawMode,this},updateMorphTargets:function(){var t,n,i,o=this.geometry;if(o.isBufferGeometry){var u=o.morphAttributes,l=Object.keys(u);if(l.length>0){var f=u[l[0]];if(f!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,n=f.length;t<n;t++)i=f[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}else{var d=o.morphTargets;if(d!==void 0&&d.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,n=d.length;t<n;t++)i=d[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}},raycast:function(){function t(U,z,B,Q,$,K,lt){return Gr.barycoordFromPoint(U,z,B,Q,N),$.multiplyScalar(N.x),K.multiplyScalar(N.y),lt.multiplyScalar(N.z),$.add(K).add(lt),$.clone()}function n(U,z,B,Q,$,K,lt,Y){if((z.side===da?Q.intersectTriangle(lt,K,$,!0,Y):Q.intersectTriangle($,K,lt,z.side!==Yo,Y))===null)return null;D.copy(Y),D.applyMatrix4(U.matrixWorld);var et=B.ray.origin.distanceTo(D);return et<B.near||et>B.far?null:{distance:et,point:D.clone(),object:U}}function i(U,z,B,Q,$,K,lt,Y){f.fromBufferAttribute(Q,K),d.fromBufferAttribute(Q,lt),g.fromBufferAttribute(Q,Y);var et=n(U,U.material,z,B,f,d,g,F);return et&&($&&(w.fromBufferAttribute($,K),T.fromBufferAttribute($,lt),L.fromBufferAttribute($,Y),et.uv=t(F,f,d,g,w,T,L)),et.face=new Ci(K,lt,Y,Gr.normal(f,d,g)),et.faceIndex=K),et}var o=new Ut,u=new ea,l=new Xe,f=new G,d=new G,g=new G,v=new G,y=new G,b=new G,w=new gt,T=new gt,L=new gt,N=new G,F=new G,D=new G;return function(U,z){var B=this.geometry,Q=this.material,$=this.matrixWorld;if(Q!==void 0&&(B.boundingSphere===null&&B.computeBoundingSphere(),l.copy(B.boundingSphere),l.applyMatrix4($),U.ray.intersectsSphere(l)!==!1&&(o.getInverse($),u.copy(U.ray).applyMatrix4(o),B.boundingBox===null||u.intersectsBox(B.boundingBox)!==!1))){var K;if(B.isBufferGeometry){var lt,Y,et,ht,Tt,Z=B.index,X=B.attributes.position,ft=B.attributes.uv;if(Z!==null)for(ht=0,Tt=Z.count;ht<Tt;ht+=3)lt=Z.getX(ht),Y=Z.getX(ht+1),et=Z.getX(ht+2),(K=i(this,U,u,X,ft,lt,Y,et))&&(K.faceIndex=Math.floor(ht/3),z.push(K));else for(ht=0,Tt=X.count;ht<Tt;ht+=3)lt=ht,Y=ht+1,et=ht+2,(K=i(this,U,u,X,ft,lt,Y,et))&&(K.index=lt,z.push(K))}else if(B.isGeometry){var at,wt,vt,Et,St=Array.isArray(Q),qt=B.vertices,It=B.faces,Ft=B.faceVertexUvs[0];Ft.length>0&&(Et=Ft);for(var Wt=0,ne=It.length;Wt<ne;Wt++){var kt=It[Wt],$t=St?Q[kt.materialIndex]:Q;if($t!==void 0){if(at=qt[kt.a],wt=qt[kt.b],vt=qt[kt.c],$t.morphTargets===!0){var Le=B.morphTargets,be=this.morphTargetInfluences;f.set(0,0,0),d.set(0,0,0),g.set(0,0,0);for(var Rn=0,Vn=Le.length;Rn<Vn;Rn++){var Ot=be[Rn];if(Ot!==0){var Ze=Le[Rn].vertices;f.addScaledVector(v.subVectors(Ze[kt.a],at),Ot),d.addScaledVector(y.subVectors(Ze[kt.b],wt),Ot),g.addScaledVector(b.subVectors(Ze[kt.c],vt),Ot)}}f.add(at),d.add(wt),g.add(vt),at=f,wt=d,vt=g}if(K=n(this,$t,U,u,at,wt,vt,F)){if(Et&&Et[Wt]){var yn=Et[Wt];w.copy(yn[0]),T.copy(yn[1]),L.copy(yn[2]),K.uv=t(F,at,wt,vt,w,T,L)}K.face=kt,K.faceIndex=Wt,z.push(K)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Up=0;xs.prototype=Object.assign(Object.create(zn.prototype),{constructor:xs,isArrayCamera:!0}),Ca.prototype.isFogExp2=!0,Ca.prototype.clone=function(){return new Ca(this.color.getHex(),this.density)},Ca.prototype.toJSON=function(t){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},po.prototype.isFog=!0,po.prototype.clone=function(){return new po(this.color.getHex(),this.near,this.far)},po.prototype.toJSON=function(t){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Ou.prototype=Object.assign(Object.create(Yt.prototype),{constructor:Ou,copy:function(t,n){return Yt.prototype.copy.call(this,t,n),t.background!==null&&(this.background=t.background.clone()),t.fog!==null&&(this.fog=t.fog.clone()),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var n=Yt.prototype.toJSON.call(this,t);return this.background!==null&&(n.object.background=this.background.toJSON(t)),this.fog!==null&&(n.object.fog=this.fog.toJSON()),n}}),ws.prototype=Object.assign(Object.create(Yt.prototype),{constructor:ws,isLensFlare:!0,copy:function(t){Yt.prototype.copy.call(this,t),this.positionScreen.copy(t.positionScreen),this.customUpdateCallback=t.customUpdateCallback;for(var n=0,i=t.lensFlares.length;n<i;n++)this.lensFlares.push(t.lensFlares[n]);return this},add:function(t,n,i,o,u,l){n===void 0&&(n=-1),i===void 0&&(i=0),l===void 0&&(l=1),u===void 0&&(u=new ee(16777215)),o===void 0&&(o=Zo),i=Math.min(i,Math.max(0,i)),this.lensFlares.push({texture:t,size:n,distance:i,x:0,y:0,z:0,scale:1,rotation:0,opacity:l,color:u,blending:o})},updateLensFlares:function(){var t,n,i=this.lensFlares.length,o=2*-this.positionScreen.x,u=2*-this.positionScreen.y;for(t=0;t<i;t++)n=this.lensFlares[t],n.x=this.positionScreen.x+o*n.distance,n.y=this.positionScreen.y+u*n.distance,n.wantedRotation=n.x*Math.PI*.25,n.rotation+=.25*(n.wantedRotation-n.rotation)}}),mi.prototype=Object.create(_e.prototype),mi.prototype.constructor=mi,mi.prototype.isSpriteMaterial=!0,mi.prototype.copy=function(t){return _e.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},ti.prototype=Object.assign(Object.create(Yt.prototype),{constructor:ti,isSprite:!0,raycast:function(){var t=new G,n=new G,i=new G;return function(o,u){n.setFromMatrixPosition(this.matrixWorld),o.ray.closestPointToPoint(n,t),i.setFromMatrixScale(this.matrixWorld);var l=i.x*i.y/4;if(!(n.distanceToSquared(t)>l)){var f=o.ray.origin.distanceTo(t);f<o.near||f>o.far||u.push({distance:f,point:t.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),wr.prototype=Object.assign(Object.create(Yt.prototype),{constructor:wr,copy:function(t){Yt.prototype.copy.call(this,t,!1);for(var n=t.levels,i=0,o=n.length;i<o;i++){var u=n[i];this.addLevel(u.object.clone(),u.distance)}return this},addLevel:function(t,n){n===void 0&&(n=0),n=Math.abs(n);for(var i=this.levels,o=0;o<i.length&&!(n<i[o].distance);o++);i.splice(o,0,{distance:n,object:t}),this.add(t)},getObjectForDistance:function(t){for(var n=this.levels,i=1,o=n.length;i<o&&!(t<n[i].distance);i++);return n[i-1].object},raycast:function(){var t=new G;return function(n,i){t.setFromMatrixPosition(this.matrixWorld);var o=n.ray.origin.distanceTo(t);this.getObjectForDistance(o).raycast(n,i)}}(),update:function(){var t=new G,n=new G;return function(i){var o=this.levels;if(o.length>1){t.setFromMatrixPosition(i.matrixWorld),n.setFromMatrixPosition(this.matrixWorld);var u=t.distanceTo(n);o[0].object.visible=!0;for(var l=1,f=o.length;l<f&&u>=o[l].distance;l++)o[l-1].object.visible=!1,o[l].object.visible=!0;for(;l<f;l++)o[l].object.visible=!1}}}(),toJSON:function(t){var n=Yt.prototype.toJSON.call(this,t);n.object.levels=[];for(var i=this.levels,o=0,u=i.length;o<u;o++){var l=i[o];n.object.levels.push({object:l.object.uuid,distance:l.distance})}return n}}),Object.assign(Ms.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,n=this.bones.length;t<n;t++){var i=new Ut;this.bones[t]&&i.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(i)}},pose:function(){var t,n,i;for(n=0,i=this.bones.length;n<i;n++)(t=this.bones[n])&&t.matrixWorld.getInverse(this.boneInverses[n]);for(n=0,i=this.bones.length;n<i;n++)(t=this.bones[n])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new Ut,n=new Ut;return function(){for(var i=this.bones,o=this.boneInverses,u=this.boneMatrices,l=this.boneTexture,f=0,d=i.length;f<d;f++){var g=i[f]?i[f].matrixWorld:n;t.multiplyMatrices(g,o[f]),t.toArray(u,16*f)}l!==void 0&&(l.needsUpdate=!0)}}(),clone:function(){return new Ms(this.bones,this.boneInverses)}}),Uu.prototype=Object.assign(Object.create(Yt.prototype),{constructor:Uu,isBone:!0}),Du.prototype=Object.assign(Object.create(wn.prototype),{constructor:Du,isSkinnedMesh:!0,initBones:function(){var t,n,i,o,u=[];if(this.geometry&&this.geometry.bones!==void 0){for(i=0,o=this.geometry.bones.length;i<o;i++)n=this.geometry.bones[i],t=new Uu,u.push(t),t.name=n.name,t.position.fromArray(n.pos),t.quaternion.fromArray(n.rotq),n.scl!==void 0&&t.scale.fromArray(n.scl);for(i=0,o=this.geometry.bones.length;i<o;i++)n=this.geometry.bones[i],n.parent!==-1&&n.parent!==null&&u[n.parent]!==void 0?u[n.parent].add(u[i]):this.add(u[i])}return this.updateMatrixWorld(!0),u},bind:function(t,n){this.skeleton=t,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.getInverse(n)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var t,n;if(this.geometry&&this.geometry.isGeometry)for(n=0;n<this.geometry.skinWeights.length;n++){var i=this.geometry.skinWeights[n];t=1/i.lengthManhattan(),t!==1/0?i.multiplyScalar(t):i.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var o=new Bt,u=this.geometry.attributes.skinWeight;for(n=0;n<u.count;n++)o.x=u.getX(n),o.y=u.getY(n),o.z=u.getZ(n),o.w=u.getW(n),t=1/o.lengthManhattan(),t!==1/0?o.multiplyScalar(t):o.set(1,0,0,0),u.setXYZW(n,o.x,o.y,o.z,o.w)}},updateMatrixWorld:function(t){wn.prototype.updateMatrixWorld.call(this,t),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),rn.prototype=Object.create(_e.prototype),rn.prototype.constructor=rn,rn.prototype.isLineBasicMaterial=!0,rn.prototype.copy=function(t){return _e.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},mr.prototype=Object.assign(Object.create(Yt.prototype),{constructor:mr,isLine:!0,raycast:function(){var t=new Ut,n=new ea,i=new Xe;return function(o,u){var l=o.linePrecision,f=l*l,d=this.geometry,g=this.matrixWorld;if(d.boundingSphere===null&&d.computeBoundingSphere(),i.copy(d.boundingSphere),i.applyMatrix4(g),o.ray.intersectsSphere(i)!==!1){t.getInverse(g),n.copy(o.ray).applyMatrix4(t);var v=new G,y=new G,b=new G,w=new G,T=this&&this.isLineSegments?2:1;if(d.isBufferGeometry){var L=d.index,N=d.attributes,F=N.position.array;if(L!==null)for(var D=L.array,U=0,z=D.length-1;U<z;U+=T){var B=D[U],Q=D[U+1];v.fromArray(F,3*B),y.fromArray(F,3*Q);var $=n.distanceSqToSegment(v,y,w,b);if(!($>f)){w.applyMatrix4(this.matrixWorld);var K=o.ray.origin.distanceTo(w);K<o.near||K>o.far||u.push({distance:K,point:b.clone().applyMatrix4(this.matrixWorld),index:U,face:null,faceIndex:null,object:this})}}else for(var U=0,z=F.length/3-1;U<z;U+=T){v.fromArray(F,3*U),y.fromArray(F,3*U+3);var $=n.distanceSqToSegment(v,y,w,b);if(!($>f)){w.applyMatrix4(this.matrixWorld);var K=o.ray.origin.distanceTo(w);K<o.near||K>o.far||u.push({distance:K,point:b.clone().applyMatrix4(this.matrixWorld),index:U,face:null,faceIndex:null,object:this})}}}else if(d.isGeometry)for(var lt=d.vertices,Y=lt.length,U=0;U<Y-1;U+=T){var $=n.distanceSqToSegment(lt[U],lt[U+1],w,b);if(!($>f)){w.applyMatrix4(this.matrixWorld);var K=o.ray.origin.distanceTo(w);K<o.near||K>o.far||u.push({distance:K,point:b.clone().applyMatrix4(this.matrixWorld),index:U,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),pn.prototype=Object.assign(Object.create(mr.prototype),{constructor:pn,isLineSegments:!0}),Fu.prototype=Object.assign(Object.create(mr.prototype),{constructor:Fu,isLineLoop:!0}),ei.prototype=Object.create(_e.prototype),ei.prototype.constructor=ei,ei.prototype.isPointsMaterial=!0,ei.prototype.copy=function(t){return _e.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},mo.prototype=Object.assign(Object.create(Yt.prototype),{constructor:mo,isPoints:!0,raycast:function(){var t=new Ut,n=new ea,i=new Xe;return function(o,u){function l($,K){var lt=n.distanceSqToPoint($);if(lt<b){var Y=n.closestPointToPoint($);Y.applyMatrix4(g);var et=o.ray.origin.distanceTo(Y);if(et<o.near||et>o.far)return;u.push({distance:et,distanceToRay:Math.sqrt(lt),point:Y.clone(),index:K,face:null,object:f})}}var f=this,d=this.geometry,g=this.matrixWorld,v=o.params.Points.threshold;if(d.boundingSphere===null&&d.computeBoundingSphere(),i.copy(d.boundingSphere),i.applyMatrix4(g),i.radius+=v,o.ray.intersectsSphere(i)!==!1){t.getInverse(g),n.copy(o.ray).applyMatrix4(t);var y=v/((this.scale.x+this.scale.y+this.scale.z)/3),b=y*y,w=new G;if(d.isBufferGeometry){var T=d.index,L=d.attributes,N=L.position.array;if(T!==null)for(var F=T.array,D=0,U=F.length;D<U;D++){var z=F[D];w.fromArray(N,3*z),l(w,z)}else for(var D=0,B=N.length/3;D<B;D++)w.fromArray(N,3*D),l(w,D)}else for(var Q=d.vertices,D=0,B=Q.length;D<B;D++)l(Q[D],D)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Es.prototype=Object.assign(Object.create(Yt.prototype),{constructor:Es}),zu.prototype=Object.create(Dt.prototype),zu.prototype.constructor=zu,go.prototype=Object.create(Dt.prototype),go.prototype.constructor=go,go.prototype.isCompressedTexture=!0,Ts.prototype=Object.create(Dt.prototype),Ts.prototype.constructor=Ts,Ts.prototype.isDepthTexture=!0,vo.prototype=Object.create(Zt.prototype),vo.prototype.constructor=vo,Ss.prototype=Object.create(Ee.prototype),Ss.prototype.constructor=Ss,yo.prototype=Object.create(Zt.prototype),yo.prototype.constructor=yo,As.prototype=Object.create(Ee.prototype),As.prototype.constructor=As,gr.prototype=Object.create(Zt.prototype),gr.prototype.constructor=gr,Rs.prototype=Object.create(Ee.prototype),Rs.prototype.constructor=Rs,xo.prototype=Object.create(gr.prototype),xo.prototype.constructor=xo,Ls.prototype=Object.create(Ee.prototype),Ls.prototype.constructor=Ls,Pa.prototype=Object.create(gr.prototype),Pa.prototype.constructor=Pa,Cs.prototype=Object.create(Ee.prototype),Cs.prototype.constructor=Cs,_o.prototype=Object.create(gr.prototype),_o.prototype.constructor=_o,Ps.prototype=Object.create(Ee.prototype),Ps.prototype.constructor=Ps,bo.prototype=Object.create(gr.prototype),bo.prototype.constructor=bo,Ns.prototype=Object.create(Ee.prototype),Ns.prototype.constructor=Ns,lr.prototype=Object.create(Zt.prototype),lr.prototype.constructor=lr,wo.prototype=Object.create(Ee.prototype),wo.prototype.constructor=wo,Na.prototype=Object.create(Zt.prototype),Na.prototype.constructor=Na,Is.prototype=Object.create(Ee.prototype),Is.prototype.constructor=Is,Mo.prototype=Object.create(Zt.prototype),Mo.prototype.constructor=Mo;var oi={area:function(t){for(var n=t.length,i=0,o=n-1,u=0;u<n;o=u++)i+=t[o].x*t[u].y-t[u].x*t[o].y;return .5*i},triangulate:function(){function t(n,i,o,u,l,f){var d,g,v,y,b,w,T,L,N;if(g=n[f[i]].x,v=n[f[i]].y,y=n[f[o]].x,b=n[f[o]].y,w=n[f[u]].x,T=n[f[u]].y,(y-g)*(T-v)-(b-v)*(w-g)<=0)return!1;var F,D,U,z,B,Q,$,K,lt,Y,et,ht,Tt,Z,X;for(F=w-y,D=T-b,U=g-w,z=v-T,B=y-g,Q=b-v,d=0;d<l;d++)if(L=n[f[d]].x,N=n[f[d]].y,!(L===g&&N===v||L===y&&N===b||L===w&&N===T)&&($=L-g,K=N-v,lt=L-y,Y=N-b,et=L-w,ht=N-T,X=F*Y-D*lt,Tt=B*K-Q*$,Z=U*ht-z*et,X>=-Number.EPSILON&&Z>=-Number.EPSILON&&Tt>=-Number.EPSILON))return!1;return!0}return function(n,i){var o=n.length;if(o<3)return null;var u,l,f,d=[],g=[],v=[];if(oi.area(n)>0)for(l=0;l<o;l++)g[l]=l;else for(l=0;l<o;l++)g[l]=o-1-l;var y=o,b=2*y;for(l=y-1;y>2;){if(b--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),i?v:d;if(u=l,y<=u&&(u=0),l=u+1,y<=l&&(l=0),f=l+1,y<=f&&(f=0),t(n,u,l,f,y,g)){var w,T,L,N,F;for(w=g[u],T=g[l],L=g[f],d.push([n[w],n[T],n[L]]),v.push([g[u],g[l],g[f]]),N=l,F=l+1;F<y;N++,F++)g[N]=g[F];y--,b=2*y}}return i?v:d}}(),triangulateShape:function(t,n){function i(U){var z=U.length;z>2&&U[z-1].equals(U[0])&&U.pop()}function o(U,z,B){return U.x!==z.x?U.x<z.x?U.x<=B.x&&B.x<=z.x:z.x<=B.x&&B.x<=U.x:U.y<z.y?U.y<=B.y&&B.y<=z.y:z.y<=B.y&&B.y<=U.y}function u(U,z,B,Q,$){var K=z.x-U.x,lt=z.y-U.y,Y=Q.x-B.x,et=Q.y-B.y,ht=U.x-B.x,Tt=U.y-B.y,Z=lt*Y-K*et,X=lt*ht-K*Tt;if(Math.abs(Z)>Number.EPSILON){var ft;if(Z>0){if(X<0||X>Z)return[];if((ft=et*ht-Y*Tt)<0||ft>Z)return[]}else{if(X>0||X<Z)return[];if((ft=et*ht-Y*Tt)>0||ft<Z)return[]}if(ft===0)return!$||X!==0&&X!==Z?[U]:[];if(ft===Z)return!$||X!==0&&X!==Z?[z]:[];if(X===0)return[B];if(X===Z)return[Q];var at=ft/Z;return[{x:U.x+at*K,y:U.y+at*lt}]}if(X!==0||et*ht!=Y*Tt)return[];var wt=K===0&&lt===0,vt=Y===0&&et===0;if(wt&&vt)return U.x!==B.x||U.y!==B.y?[]:[U];if(wt)return o(B,Q,U)?[U]:[];if(vt)return o(U,z,B)?[B]:[];var Et,St,qt,It,Ft,Wt,ne,kt;return K!==0?(U.x<z.x?(Et=U,qt=U.x,St=z,It=z.x):(Et=z,qt=z.x,St=U,It=U.x),B.x<Q.x?(Ft=B,ne=B.x,Wt=Q,kt=Q.x):(Ft=Q,ne=Q.x,Wt=B,kt=B.x)):(U.y<z.y?(Et=U,qt=U.y,St=z,It=z.y):(Et=z,qt=z.y,St=U,It=U.y),B.y<Q.y?(Ft=B,ne=B.y,Wt=Q,kt=Q.y):(Ft=Q,ne=Q.y,Wt=B,kt=B.y)),qt<=ne?It<ne?[]:It===ne?$?[]:[Ft]:It<=kt?[Ft,St]:[Ft,Wt]:qt>kt?[]:qt===kt?$?[]:[Et]:It<=kt?[Et,St]:[Et,Wt]}function l(U,z,B,Q){var $=z.x-U.x,K=z.y-U.y,lt=B.x-U.x,Y=B.y-U.y,et=Q.x-U.x,ht=Q.y-U.y,Tt=$*Y-K*lt,Z=$*ht-K*et;if(Math.abs(Tt)>Number.EPSILON){var X=et*Y-ht*lt;return Tt>0?Z>=0&&X>=0:Z>=0||X>=0}return Z>0}i(t),n.forEach(i);for(var f,d,g,v,y,b,w={},T=t.concat(),L=0,N=n.length;L<N;L++)Array.prototype.push.apply(T,n[L]);for(f=0,d=T.length;f<d;f++)y=T[f].x+":"+T[f].y,w[y]!==void 0&&console.warn("THREE.ShapeUtils: Duplicate point",y,f),w[y]=f;var F=function(U,z){for(var B,Q,$,K,lt,Y,et,ht,Tt,Z,X,ft=U.concat(),at=[],wt=[],vt=0,Et=z.length;vt<Et;vt++)at.push(vt);for(var St=0,qt=2*at.length;at.length>0;){if(--qt<0){console.log('THREE.ShapeUtils: Infinite Loop! Holes left:" + indepHoles.length + ", Probably Hole outside Shape!');break}for($=St;$<ft.length;$++){K=ft[$],Q=-1;for(var vt=0;vt<at.length;vt++)if(Y=at[vt],et=K.x+":"+K.y+":"+Y,wt[et]===void 0){B=z[Y];for(var It=0;It<B.length;It++)if(lt=B[It],function(Wt,ne){var kt=ft.length-1,$t=Wt-1;$t<0&&($t=kt);var Le=Wt+1;Le>kt&&(Le=0);var be=l(ft[Wt],ft[$t],ft[Le],B[ne]);if(!be)return!1;var Rn=B.length-1,Vn=ne-1;Vn<0&&(Vn=Rn);var Ot=ne+1;return Ot>Rn&&(Ot=0),!!(be=l(B[ne],B[Vn],B[Ot],ft[Wt]))}($,It)&&!function(Wt,ne){var kt,$t,Le;for(kt=0;kt<ft.length;kt++)if($t=kt+1,$t%=ft.length,Le=u(Wt,ne,ft[kt],ft[$t],!0),Le.length>0)return!0;return!1}(K,lt)&&!function(Wt,ne){var kt,$t,Le,be,Rn;for(kt=0;kt<at.length;kt++)for($t=z[at[kt]],Le=0;Le<$t.length;Le++)if(be=Le+1,be%=$t.length,Rn=u(Wt,ne,$t[Le],$t[be],!0),Rn.length>0)return!0;return!1}(K,lt)){Q=It,at.splice(vt,1),ht=ft.slice(0,$+1),Tt=ft.slice($),Z=B.slice(Q),X=B.slice(0,Q+1),ft=ht.concat(Z).concat(X).concat(Tt),St=$;break}if(Q>=0)break;wt[et]=!0}if(Q>=0)break}}return ft}(t,n),D=oi.triangulate(F,!1);for(f=0,d=D.length;f<d;f++)for(v=D[f],g=0;g<3;g++)y=v[g].x+":"+v[g].y,(b=w[y])!==void 0&&(v[g]=b);return D.concat()},isClockWise:function(t){return oi.area(t)<0}};ra.prototype=Object.create(Ee.prototype),ra.prototype.constructor=ra,Vr.prototype=Object.create(Zt.prototype),Vr.prototype.constructor=Vr,Vr.prototype.getArrays=function(){var t=this.getAttribute("position"),n=t?Array.prototype.slice.call(t.array):[],i=this.getAttribute("uv"),o=i?Array.prototype.slice.call(i.array):[],u=this.index;return{position:n,uv:o,index:u?Array.prototype.slice.call(u.array):[]}},Vr.prototype.addShapeList=function(t,n){var i=t.length;n.arrays=this.getArrays();for(var o=0;o<i;o++){var u=t[o];this.addShape(u,n)}this.setIndex(n.arrays.index),this.addAttribute("position",new jt(n.arrays.position,3)),this.addAttribute("uv",new jt(n.arrays.uv,2))},Vr.prototype.addShape=function(t,n){function i(ze,Pe,Ue){return Pe||console.error("THREE.ExtrudeGeometry: vec does not exist"),Pe.clone().multiplyScalar(Ue).add(ze)}function o(ze,Pe,Ue){var Ne,st,ce,we=ze.x-Pe.x,ke=ze.y-Pe.y,te=Ue.x-ze.x,Ve=Ue.y-ze.y,qe=we*we+ke*ke,on=we*Ve-ke*te;if(Math.abs(on)>Number.EPSILON){var fr=Math.sqrt(qe),hn=Math.sqrt(te*te+Ve*Ve),Ln=Pe.x-ke/fr,yt=Pe.y+we/fr,Ic=Ue.x-Ve/hn,mn=Ue.y+te/hn,yr=((Ic-Ln)*Ve-(mn-yt)*te)/(we*Ve-ke*te);Ne=Ln+we*yr-ze.x,st=yt+ke*yr-ze.y;var Ie=Ne*Ne+st*st;if(Ie<=2)return new gt(Ne,st);ce=Math.sqrt(Ie/2)}else{var Zn=!1;we>Number.EPSILON?te>Number.EPSILON&&(Zn=!0):we<-Number.EPSILON?te<-Number.EPSILON&&(Zn=!0):Math.sign(ke)===Math.sign(Ve)&&(Zn=!0),Zn?(Ne=-ke,st=we,ce=Math.sqrt(qe)):(Ne=we,st=ke,ce=Math.sqrt(qe/2))}return new gt(Ne/ce,st/ce)}function u(ze,Pe){var Ue,Ne;for(Ot=ze.length;--Ot>=0;){Ue=Ot,Ne=Ot-1,Ne<0&&(Ne=ze.length-1);var st=0,ce=et+2*K;for(st=0;st<ce;st++){var we=be*st,ke=be*(st+1);d(Pe+Ue+we,Pe+Ne+we,Pe+Ne+ke,Pe+Ue+ke)}}}function l(ze,Pe,Ue){z.push(ze),z.push(Pe),z.push(Ue)}function f(ze,Pe,Ue){g(ze),g(Pe),g(Ue);var Ne=F.length/3,st=Z.generateTopUV(wt,F,Ne-3,Ne-2,Ne-1);v(st[0]),v(st[1]),v(st[2])}function d(ze,Pe,Ue,Ne,st,ce,we,ke,te){g(ze),g(Pe),g(Ne),g(Pe),g(Ue),g(Ne);var Ve=F.length/3,qe=Z.generateSideWallUV(wt,F,Ve-6,Ve-3,Ve-2,Ve-1);v(qe[0]),v(qe[1]),v(qe[3]),v(qe[1]),v(qe[2]),v(qe[3])}function g(ze){D.push(F.length/3),F.push(z[3*ze+0]),F.push(z[3*ze+1]),F.push(z[3*ze+2])}function v(ze){U.push(ze.x),U.push(ze.y)}var y,b,w,T,L,N=n.arrays?n.arrays:this.getArrays(),F=N.position,D=N.index,U=N.uv,z=[],B=n.amount!==void 0?n.amount:100,Q=n.bevelThickness!==void 0?n.bevelThickness:6,$=n.bevelSize!==void 0?n.bevelSize:Q-2,K=n.bevelSegments!==void 0?n.bevelSegments:3,lt=n.bevelEnabled===void 0||n.bevelEnabled,Y=n.curveSegments!==void 0?n.curveSegments:12,et=n.steps!==void 0?n.steps:1,ht=n.extrudePath,Tt=!1,Z=n.UVGenerator!==void 0?n.UVGenerator:ra.WorldUVGenerator;ht&&(y=ht.getSpacedPoints(et),Tt=!0,lt=!1,b=n.frames!==void 0?n.frames:ht.computeFrenetFrames(et,!1),w=new G,T=new G,L=new G),lt||(K=0,Q=0,$=0);var X,ft,at,wt=this,vt=t.extractPoints(Y),Et=vt.shape,St=vt.holes;if(!oi.isClockWise(Et))for(Et=Et.reverse(),ft=0,at=St.length;ft<at;ft++)X=St[ft],oi.isClockWise(X)&&(St[ft]=X.reverse());var qt=oi.triangulateShape(Et,St),It=Et;for(ft=0,at=St.length;ft<at;ft++)X=St[ft],Et=Et.concat(X);for(var Ft,Wt,ne,kt,$t,Le,be=Et.length,Rn=qt.length,Vn=[],Ot=0,Ze=It.length,yn=Ze-1,En=Ot+1;Ot<Ze;Ot++,yn++,En++)yn===Ze&&(yn=0),En===Ze&&(En=0),Vn[Ot]=o(It[Ot],It[yn],It[En]);var ar,Yn=[],or=Vn.concat();for(ft=0,at=St.length;ft<at;ft++){for(X=St[ft],ar=[],Ot=0,Ze=X.length,yn=Ze-1,En=Ot+1;Ot<Ze;Ot++,yn++,En++)yn===Ze&&(yn=0),En===Ze&&(En=0),ar[Ot]=o(X[Ot],X[yn],X[En]);Yn.push(ar),or=or.concat(ar)}for(Ft=0;Ft<K;Ft++){for(ne=Ft/K,kt=Q*Math.cos(ne*Math.PI/2),Wt=$*Math.sin(ne*Math.PI/2),Ot=0,Ze=It.length;Ot<Ze;Ot++)$t=i(It[Ot],Vn[Ot],Wt),l($t.x,$t.y,-kt);for(ft=0,at=St.length;ft<at;ft++)for(X=St[ft],ar=Yn[ft],Ot=0,Ze=X.length;Ot<Ze;Ot++)$t=i(X[Ot],ar[Ot],Wt),l($t.x,$t.y,-kt)}for(Wt=$,Ot=0;Ot<be;Ot++)$t=lt?i(Et[Ot],or[Ot],Wt):Et[Ot],Tt?(T.copy(b.normals[0]).multiplyScalar($t.x),w.copy(b.binormals[0]).multiplyScalar($t.y),L.copy(y[0]).add(T).add(w),l(L.x,L.y,L.z)):l($t.x,$t.y,0);var Pn;for(Pn=1;Pn<=et;Pn++)for(Ot=0;Ot<be;Ot++)$t=lt?i(Et[Ot],or[Ot],Wt):Et[Ot],Tt?(T.copy(b.normals[Pn]).multiplyScalar($t.x),w.copy(b.binormals[Pn]).multiplyScalar($t.y),L.copy(y[Pn]).add(T).add(w),l(L.x,L.y,L.z)):l($t.x,$t.y,B/et*Pn);for(Ft=K-1;Ft>=0;Ft--){for(ne=Ft/K,kt=Q*Math.cos(ne*Math.PI/2),Wt=$*Math.sin(ne*Math.PI/2),Ot=0,Ze=It.length;Ot<Ze;Ot++)$t=i(It[Ot],Vn[Ot],Wt),l($t.x,$t.y,B+kt);for(ft=0,at=St.length;ft<at;ft++)for(X=St[ft],ar=Yn[ft],Ot=0,Ze=X.length;Ot<Ze;Ot++)$t=i(X[Ot],ar[Ot],Wt),Tt?l($t.x,$t.y+y[et-1].y,y[et-1].x+kt):l($t.x,$t.y,B+kt)}(function(){var ze=F.length/3;if(lt){var Pe=0,Ue=be*Pe;for(Ot=0;Ot<Rn;Ot++)Le=qt[Ot],f(Le[2]+Ue,Le[1]+Ue,Le[0]+Ue);for(Pe=et+2*K,Ue=be*Pe,Ot=0;Ot<Rn;Ot++)Le=qt[Ot],f(Le[0]+Ue,Le[1]+Ue,Le[2]+Ue)}else{for(Ot=0;Ot<Rn;Ot++)Le=qt[Ot],f(Le[2],Le[1],Le[0]);for(Ot=0;Ot<Rn;Ot++)Le=qt[Ot],f(Le[0]+be*et,Le[1]+be*et,Le[2]+be*et)}wt.addGroup(ze,F.length/3-ze,n.material!==void 0?n.material:0)})(),function(){var ze=F.length/3,Pe=0;for(u(It,Pe),Pe+=It.length,ft=0,at=St.length;ft<at;ft++)X=St[ft],u(X,Pe),Pe+=X.length;wt.addGroup(ze,F.length/3-ze,n.extrudeMaterial!==void 0?n.extrudeMaterial:1)}(),n.arrays||(this.setIndex(D),this.addAttribute("position",new jt(F,3)),this.addAttribute("uv",new jt(n.arrays.uv,2)))},ra.WorldUVGenerator={generateTopUV:function(t,n,i,o,u){var l=n[3*i],f=n[3*i+1],d=n[3*o],g=n[3*o+1],v=n[3*u],y=n[3*u+1];return[new gt(l,f),new gt(d,g),new gt(v,y)]},generateSideWallUV:function(t,n,i,o,u,l){var f=n[3*i],d=n[3*i+1],g=n[3*i+2],v=n[3*o],y=n[3*o+1],b=n[3*o+2],w=n[3*u],T=n[3*u+1],L=n[3*u+2],N=n[3*l],F=n[3*l+1],D=n[3*l+2];return Math.abs(d-y)<.01?[new gt(f,1-g),new gt(v,1-b),new gt(w,1-L),new gt(N,1-D)]:[new gt(d,1-g),new gt(y,1-b),new gt(T,1-L),new gt(F,1-D)]}},Os.prototype=Object.create(Ee.prototype),Os.prototype.constructor=Os,Eo.prototype=Object.create(Vr.prototype),Eo.prototype.constructor=Eo,Ia.prototype=Object.create(Ee.prototype),Ia.prototype.constructor=Ia,Oa.prototype=Object.create(Zt.prototype),Oa.prototype.constructor=Oa,Us.prototype=Object.create(Ee.prototype),Us.prototype.constructor=Us,Ua.prototype=Object.create(Zt.prototype),Ua.prototype.constructor=Ua,Ds.prototype=Object.create(Ee.prototype),Ds.prototype.constructor=Ds,To.prototype=Object.create(Zt.prototype),To.prototype.constructor=To,Da.prototype=Object.create(Ee.prototype),Da.prototype.constructor=Da,So.prototype=Object.create(Zt.prototype),So.prototype.constructor=So,Ao.prototype=Object.create(Zt.prototype),Ao.prototype.constructor=Ao,ia.prototype=Object.create(Ee.prototype),ia.prototype.constructor=ia,Ii.prototype=Object.create(Zt.prototype),Ii.prototype.constructor=Ii,Oi.prototype=Object.create(ia.prototype),Oi.prototype.constructor=Oi,Fs.prototype=Object.create(Ii.prototype),Fs.prototype.constructor=Fs,zs.prototype=Object.create(Ee.prototype),zs.prototype.constructor=zs,Fa.prototype=Object.create(Zt.prototype),Fa.prototype.constructor=Fa;var si=Object.freeze({WireframeGeometry:vo,ParametricGeometry:Ss,ParametricBufferGeometry:yo,TetrahedronGeometry:Rs,TetrahedronBufferGeometry:xo,OctahedronGeometry:Ls,OctahedronBufferGeometry:Pa,IcosahedronGeometry:Cs,IcosahedronBufferGeometry:_o,DodecahedronGeometry:Ps,DodecahedronBufferGeometry:bo,PolyhedronGeometry:As,PolyhedronBufferGeometry:gr,TubeGeometry:Ns,TubeBufferGeometry:lr,TorusKnotGeometry:wo,TorusKnotBufferGeometry:Na,TorusGeometry:Is,TorusBufferGeometry:Mo,TextGeometry:Os,TextBufferGeometry:Eo,SphereGeometry:Ia,SphereBufferGeometry:Oa,RingGeometry:Us,RingBufferGeometry:Ua,PlaneGeometry:Ra,PlaneBufferGeometry:$r,LatheGeometry:Ds,LatheBufferGeometry:To,ShapeGeometry:Da,ShapeBufferGeometry:So,ExtrudeGeometry:ra,ExtrudeBufferGeometry:Vr,EdgesGeometry:Ao,ConeGeometry:Oi,ConeBufferGeometry:Fs,CylinderGeometry:ia,CylinderBufferGeometry:Ii,CircleGeometry:zs,CircleBufferGeometry:Fa,BoxGeometry:Aa,BoxBufferGeometry:ta});gi.prototype=Object.create(_e.prototype),gi.prototype.constructor=gi,gi.prototype.isShadowMaterial=!0,Ro.prototype=Object.create(qn.prototype),Ro.prototype.constructor=Ro,Ro.prototype.isRawShaderMaterial=!0,vi.prototype=Object.create(_e.prototype),vi.prototype.constructor=vi,vi.prototype.isMeshStandardMaterial=!0,vi.prototype.copy=function(t){return _e.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ui.prototype=Object.create(vi.prototype),Ui.prototype.constructor=Ui,Ui.prototype.isMeshPhysicalMaterial=!0,Ui.prototype.copy=function(t){return vi.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},Mr.prototype=Object.create(_e.prototype),Mr.prototype.constructor=Mr,Mr.prototype.isMeshPhongMaterial=!0,Mr.prototype.copy=function(t){return _e.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},za.prototype=Object.create(Mr.prototype),za.prototype.constructor=za,za.prototype.isMeshToonMaterial=!0,za.prototype.copy=function(t){return Mr.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},Ba.prototype=Object.create(_e.prototype),Ba.prototype.constructor=Ba,Ba.prototype.isMeshNormalMaterial=!0,Ba.prototype.copy=function(t){return _e.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},ka.prototype=Object.create(_e.prototype),ka.prototype.constructor=ka,ka.prototype.isMeshLambertMaterial=!0,ka.prototype.copy=function(t){return _e.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Di.prototype=Object.create(rn.prototype),Di.prototype.constructor=Di,Di.prototype.isLineDashedMaterial=!0,Di.prototype.copy=function(t){return rn.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Dp=Object.freeze({ShadowMaterial:gi,SpriteMaterial:mi,RawShaderMaterial:Ro,ShaderMaterial:qn,PointsMaterial:ei,MeshPhysicalMaterial:Ui,MeshStandardMaterial:vi,MeshPhongMaterial:Mr,MeshToonMaterial:za,MeshNormalMaterial:Ba,MeshLambertMaterial:ka,MeshDepthMaterial:Hr,MeshDistanceMaterial:tr,MeshBasicMaterial:nn,LineDashedMaterial:Di,LineBasicMaterial:rn,Material:_e}),gu={enabled:!1,files:{},add:function(t,n){this.enabled!==!1&&(this.files[t]=n)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},Cr=new _l;Object.assign(Er.prototype,{load:function(t,n,i,o){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t);var u=this,l=gu.get(t);if(l!==void 0)return u.manager.itemStart(t),setTimeout(function(){n&&n(l),u.manager.itemEnd(t)},0),l;var f=/^data:(.*?)(;base64)?,(.*)$/,d=t.match(f);if(d){var g=d[1],v=!!d[2],y=d[3];y=window.decodeURIComponent(y),v&&(y=window.atob(y));try{var b,w=(this.responseType||"").toLowerCase();switch(w){case"arraybuffer":case"blob":b=new ArrayBuffer(y.length);for(var T=new Uint8Array(b),L=0;L<y.length;L++)T[L]=y.charCodeAt(L);w==="blob"&&(b=new Blob([b],{type:g}));break;case"document":var N=new DOMParser;b=N.parseFromString(y,g);break;case"json":b=JSON.parse(y);break;default:b=y}window.setTimeout(function(){n&&n(b),u.manager.itemEnd(t)},0)}catch(U){window.setTimeout(function(){o&&o(U),u.manager.itemEnd(t),u.manager.itemError(t)},0)}}else{var F=new XMLHttpRequest;F.open("GET",t,!0),F.addEventListener("load",function(U){var z=U.target.response;gu.add(t,z),this.status===200?(n&&n(z),u.manager.itemEnd(t)):this.status===0?(console.warn("THREE.FileLoader: HTTP Status 0 received."),n&&n(z),u.manager.itemEnd(t)):(o&&o(U),u.manager.itemEnd(t),u.manager.itemError(t))},!1),i!==void 0&&F.addEventListener("progress",function(U){i(U)},!1),F.addEventListener("error",function(U){o&&o(U),u.manager.itemEnd(t),u.manager.itemError(t)},!1),this.responseType!==void 0&&(F.responseType=this.responseType),this.withCredentials!==void 0&&(F.withCredentials=this.withCredentials),F.overrideMimeType&&F.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var D in this.requestHeader)F.setRequestHeader(D,this.requestHeader[D]);F.send(null)}return u.manager.itemStart(t),F},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(Fi.prototype,{load:function(t,n,i,o){var u=this,l=[],f=new go;f.image=l;var d=new Er(this.manager);if(d.setPath(this.path),d.setResponseType("arraybuffer"),Array.isArray(t))for(var g=0,v=0,y=t.length;v<y;++v)(function(b){d.load(t[b],function(w){var T=u._parser(w,!0);l[b]={width:T.width,height:T.height,format:T.format,mipmaps:T.mipmaps},(g+=1)===6&&(T.mipmapCount===1&&(f.minFilter=rr),f.format=T.format,f.needsUpdate=!0,n&&n(f))},i,o)})(v);else d.load(t,function(b){var w=u._parser(b,!0);if(w.isCubemap)for(var T=w.mipmaps.length/w.mipmapCount,L=0;L<T;L++){l[L]={mipmaps:[]};for(var N=0;N<w.mipmapCount;N++)l[L].mipmaps.push(w.mipmaps[L*w.mipmapCount+N]),l[L].format=w.format,l[L].width=w.width,l[L].height=w.height}else f.image.width=w.width,f.image.height=w.height,f.mipmaps=w.mipmaps;w.mipmapCount===1&&(f.minFilter=rr),f.format=w.format,f.needsUpdate=!0,n&&n(f)},i,o);return f},setPath:function(t){return this.path=t,this}}),Object.assign(bl.prototype,{load:function(t,n,i,o){var u=this,l=new le,f=new Er(this.manager);return f.setResponseType("arraybuffer"),f.load(t,function(d){var g=u._parser(d);g&&(g.image!==void 0?l.image=g.image:g.data!==void 0&&(l.image.width=g.width,l.image.height=g.height,l.image.data=g.data),l.wrapS=g.wrapS!==void 0?g.wrapS:nr,l.wrapT=g.wrapT!==void 0?g.wrapT:nr,l.magFilter=g.magFilter!==void 0?g.magFilter:rr,l.minFilter=g.minFilter!==void 0?g.minFilter:Jo,l.anisotropy=g.anisotropy!==void 0?g.anisotropy:1,g.format!==void 0&&(l.format=g.format),g.type!==void 0&&(l.type=g.type),g.mipmaps!==void 0&&(l.mipmaps=g.mipmaps),g.mipmapCount===1&&(l.minFilter=rr),l.needsUpdate=!0,n&&n(l,g))},i,o),l}}),Object.assign(Bs.prototype,{crossOrigin:"Anonymous",load:function(t,n,i,o){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t);var u=this,l=gu.get(t);if(l!==void 0)return u.manager.itemStart(t),setTimeout(function(){n&&n(l),u.manager.itemEnd(t)},0),l;var f=document.createElementNS("http://www.w3.org/1999/xhtml","img");return f.addEventListener("load",function(){gu.add(t,this),n&&n(this),u.manager.itemEnd(t)},!1),f.addEventListener("error",function(d){o&&o(d),u.manager.itemEnd(t),u.manager.itemError(t)},!1),t.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(f.crossOrigin=this.crossOrigin),u.manager.itemStart(t),f.src=t,f},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(wl.prototype,{crossOrigin:"Anonymous",load:function(t,n,i,o){var u=new pe,l=new Bs(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);for(var f=0,d=0;d<t.length;++d)(function(g){l.load(t[g],function(v){u.images[g]=v,++f==6&&(u.needsUpdate=!0,n&&n(u))},void 0,o)})(d);return u},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Bu.prototype,{crossOrigin:"Anonymous",load:function(t,n,i,o){var u=new Bs(this.manager);u.setCrossOrigin(this.crossOrigin),u.setPath(this.path);var l=new Dt;return l.image=u.load(t,function(){var f=t.search(/\.(jpg|jpeg)$/)>0||t.search(/^data\:image\/jpeg/)===0;l.format=f?es:ai,l.needsUpdate=!0,n!==void 0&&n(l)},i,o),l},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),An.prototype=Object.assign(Object.create(Yt.prototype),{constructor:An,isLight:!0,copy:function(t){return Yt.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var n=Yt.prototype.toJSON.call(this,t);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}),Ha.prototype=Object.assign(Object.create(An.prototype),{constructor:Ha,isHemisphereLight:!0,copy:function(t){return An.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(er.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var t={};return this.bias!==0&&(t.bias=this.bias),this.radius!==1&&(t.radius=this.radius),this.mapSize.x===512&&this.mapSize.y===512||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),ku.prototype=Object.assign(Object.create(er.prototype),{constructor:ku,isSpotLightShadow:!0,update:function(t){var n=this.camera,i=2*Ce.RAD2DEG*t.angle,o=this.mapSize.width/this.mapSize.height,u=t.distance||n.far;i===n.fov&&o===n.aspect&&u===n.far||(n.fov=i,n.aspect=o,n.far=u,n.updateProjectionMatrix())}}),Hu.prototype=Object.assign(Object.create(An.prototype),{constructor:Hu,isSpotLight:!0,copy:function(t){return An.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),ks.prototype=Object.assign(Object.create(An.prototype),{constructor:ks,isPointLight:!0,copy:function(t){return An.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Hs.prototype=Object.assign(Object.create(er.prototype),{constructor:Hs}),Ga.prototype=Object.assign(Object.create(An.prototype),{constructor:Ga,isDirectionalLight:!0,copy:function(t){return An.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Gs.prototype=Object.assign(Object.create(An.prototype),{constructor:Gs,isAmbientLight:!0}),Vs.prototype=Object.assign(Object.create(An.prototype),{constructor:Vs,isRectAreaLight:!0,copy:function(t){return An.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var n=An.prototype.toJSON.call(this,t);return n.object.width=this.width,n.object.height=this.height,n}});var ir={arraySlice:function(t,n,i){return ir.isTypedArray(t)?new t.constructor(t.subarray(n,i!==void 0?i:t.length)):t.slice(n,i)},convertArray:function(t,n,i){return!t||!i&&t.constructor===n?t:typeof n.BYTES_PER_ELEMENT=="number"?new n(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function n(l,f){return t[l]-t[f]}for(var i=t.length,o=new Array(i),u=0;u!==i;++u)o[u]=u;return o.sort(n),o},sortedArray:function(t,n,i){for(var o=t.length,u=new t.constructor(o),l=0,f=0;f!==o;++l)for(var d=i[l]*n,g=0;g!==n;++g)u[f++]=t[d+g];return u},flattenJSON:function(t,n,i,o){for(var u=1,l=t[0];l!==void 0&&l[o]===void 0;)l=t[u++];if(l!==void 0){var f=l[o];if(f!==void 0)if(Array.isArray(f))do f=l[o],f!==void 0&&(n.push(l.time),i.push.apply(i,f)),l=t[u++];while(l!==void 0);else if(f.toArray!==void 0)do f=l[o],f!==void 0&&(n.push(l.time),f.toArray(i,i.length)),l=t[u++];while(l!==void 0);else do f=l[o],f!==void 0&&(n.push(l.time),i.push(f)),l=t[u++];while(l!==void 0)}}};Object.assign(Tr.prototype,{evaluate:function(t){var n=this.parameterPositions,i=this._cachedIndex,o=n[i],u=n[i-1];t:{e:{var l;n:{r:if(!(t<o)){for(var f=i+2;;){if(o===void 0){if(t<u)break r;return i=n.length,this._cachedIndex=i,this.afterEnd_(i-1,t,u)}if(i===f)break;if(u=o,o=n[++i],t<o)break e}l=n.length;break n}{if(t>=u)break t;var d=n[1];t<d&&(i=2,u=d);for(var f=i-2;;){if(u===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,o);if(i===f)break;if(o=u,u=n[--i-1],t>=u)break e}l=i,i=0}}for(;i<l;){var g=i+l>>>1;t<n[g]?l=g:i=g+1}if(o=n[i],(u=n[i-1])===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,o);if(o===void 0)return i=n.length,this._cachedIndex=i,this.afterEnd_(i-1,u,t)}this._cachedIndex=i,this.intervalChanged_(i,u,o)}return this.interpolate_(i,u,t,o)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var n=this.resultBuffer,i=this.sampleValues,o=this.valueSize,u=t*o,l=0;l!==o;++l)n[l]=i[u+l];return n},interpolate_:function(t,n,i,o){throw new Error("call to abstract method")},intervalChanged_:function(t,n,i){}}),Object.assign(Tr.prototype,{beforeStart_:Tr.prototype.copySampleValue_,afterEnd_:Tr.prototype.copySampleValue_}),Gu.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Gu,DefaultSettings_:{endingStart:Qa,endingEnd:Qa},intervalChanged_:function(t,n,i){var o=this.parameterPositions,u=t-2,l=t+1,f=o[u],d=o[l];if(f===void 0)switch(this.getSettings_().endingStart){case $a:u=t,f=2*n-i;break;case pu:u=o.length-2,f=n+o[u]-o[u+1];break;default:u=t,f=i}if(d===void 0)switch(this.getSettings_().endingEnd){case $a:l=t,d=2*i-n;break;case pu:l=1,d=i+o[1]-o[0];break;default:l=t-1,d=n}var g=.5*(i-n),v=this.valueSize;this._weightPrev=g/(n-f),this._weightNext=g/(d-i),this._offsetPrev=u*v,this._offsetNext=l*v},interpolate_:function(t,n,i,o){for(var u=this.resultBuffer,l=this.sampleValues,f=this.valueSize,d=t*f,g=d-f,v=this._offsetPrev,y=this._offsetNext,b=this._weightPrev,w=this._weightNext,T=(i-n)/(o-n),L=T*T,N=L*T,F=-b*N+2*b*L-b*T,D=(1+b)*N+(-1.5-2*b)*L+(-.5+b)*T+1,U=(-1-w)*N+(1.5+w)*L+.5*T,z=w*N-w*L,B=0;B!==f;++B)u[B]=F*l[v+B]+D*l[g+B]+U*l[d+B]+z*l[y+B];return u}}),Lo.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Lo,interpolate_:function(t,n,i,o){for(var u=this.resultBuffer,l=this.sampleValues,f=this.valueSize,d=t*f,g=d-f,v=(i-n)/(o-n),y=1-v,b=0;b!==f;++b)u[b]=l[g+b]*y+l[d+b]*v;return u}}),Vu.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Vu,interpolate_:function(t,n,i,o){return this.copySampleValue_(t-1)}});var ji;ji={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Vi,InterpolantFactoryMethodDiscrete:function(t){return new Vu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Lo(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Gu(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var n;switch(t){case du:n=this.InterpolantFactoryMethodDiscrete;break;case Vi:n=this.InterpolantFactoryMethodLinear;break;case va:n=this.InterpolantFactoryMethodSmooth}if(n===void 0){var i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0){if(t===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return void console.warn("THREE.KeyframeTrackPrototype:",i)}this.createInterpolant=n},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return du;case this.InterpolantFactoryMethodLinear:return Vi;case this.InterpolantFactoryMethodSmooth:return va}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(t!==0)for(var n=this.times,i=0,o=n.length;i!==o;++i)n[i]+=t;return this},scale:function(t){if(t!==1)for(var n=this.times,i=0,o=n.length;i!==o;++i)n[i]*=t;return this},trim:function(t,n){for(var i=this.times,o=i.length,u=0,l=o-1;u!==o&&i[u]<t;)++u;for(;l!==-1&&i[l]>n;)--l;if(++l,u!==0||l!==o){u>=l&&(l=Math.max(l,1),u=l-1);var f=this.getValueSize();this.times=ir.arraySlice(i,u,l),this.values=ir.arraySlice(this.values,u*f,l*f)}return this},validate:function(){var t=!0,n=this.getValueSize();n-Math.floor(n)!=0&&(console.error("THREE.KeyframeTrackPrototype: Invalid value size in track.",this),t=!1);var i=this.times,o=this.values,u=i.length;u===0&&(console.error("THREE.KeyframeTrackPrototype: Track is empty.",this),t=!1);for(var l=null,f=0;f!==u;f++){var d=i[f];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrackPrototype: Time is not a valid number.",this,f,d),t=!1;break}if(l!==null&&l>d){console.error("THREE.KeyframeTrackPrototype: Out of order keys.",this,f,d,l),t=!1;break}l=d}if(o!==void 0&&ir.isTypedArray(o))for(var f=0,g=o.length;f!==g;++f){var v=o[f];if(isNaN(v)){console.error("THREE.KeyframeTrackPrototype: Value is not a valid number.",this,f,v),t=!1;break}}return t},optimize:function(){for(var t=this.times,n=this.values,i=this.getValueSize(),o=this.getInterpolation()===va,u=1,l=t.length-1,f=1;f<l;++f){var d=!1,g=t[f];if(g!==t[f+1]&&(f!==1||g!==g[0]))if(o)d=!0;else for(var v=f*i,y=v-i,b=v+i,w=0;w!==i;++w){var T=n[v+w];if(T!==n[y+w]||T!==n[b+w]){d=!0;break}}if(d){if(f!==u){t[u]=t[f];for(var L=f*i,N=u*i,w=0;w!==i;++w)n[N+w]=n[L+w]}++u}}if(l>0){t[u]=t[l];for(var L=l*i,N=u*i,w=0;w!==i;++w)n[N+w]=n[L+w];++u}return u!==t.length&&(this.times=ir.arraySlice(t,0,u),this.values=ir.arraySlice(n,0,u*i)),this}},Co.prototype=Object.assign(Object.create(ji),{constructor:Co,ValueTypeName:"vector"}),ju.prototype=Object.assign(Object.create(Tr.prototype),{constructor:ju,interpolate_:function(t,n,i,o){for(var u=this.resultBuffer,l=this.sampleValues,f=this.valueSize,d=t*f,g=(i-n)/(o-n),v=d+f;d!==v;d+=4)Ct.slerpFlat(u,0,l,d-f,l,d,g);return u}}),aa.prototype=Object.assign(Object.create(ji),{constructor:aa,ValueTypeName:"quaternion",DefaultInterpolation:Vi,InterpolantFactoryMethodLinear:function(t){return new ju(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),oa.prototype=Object.assign(Object.create(ji),{constructor:oa,ValueTypeName:"number"}),js.prototype=Object.assign(Object.create(ji),{constructor:js,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:du,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Wu.prototype=Object.assign(Object.create(ji),{constructor:Wu,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:du,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Xu.prototype=Object.assign(Object.create(ji),{constructor:Xu,ValueTypeName:"color"}),ja.prototype=ji,ji.constructor=ja,Object.assign(ja,{parse:function(t){if(t.type===void 0)throw new Error("track type undefined, can not parse");var n=ja._getTrackTypeForValueTypeName(t.type);if(t.times===void 0){var i=[],o=[];ir.flattenJSON(t.keys,i,o,"value"),t.times=i,t.values=o}return n.parse!==void 0?n.parse(t):new n(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var n,i=t.constructor;if(i.toJSON!==void 0)n=i.toJSON(t);else{n={name:t.name,times:ir.convertArray(t.times,Array),values:ir.convertArray(t.values,Array)};var o=t.getInterpolation();o!==t.DefaultInterpolation&&(n.interpolation=o)}return n.type=t.ValueTypeName,n},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return oa;case"vector":case"vector2":case"vector3":case"vector4":return Co;case"color":return Xu;case"quaternion":return aa;case"bool":case"boolean":return Wu;case"string":return js}throw new Error("Unsupported typeName: "+t)}}),Object.assign(Sr,{parse:function(t){for(var n=[],i=t.tracks,o=1/(t.fps||1),u=0,l=i.length;u!==l;++u)n.push(ja.parse(i[u]).scale(o));return new Sr(t.name,t.duration,n)},toJSON:function(t){for(var n=[],i=t.tracks,o={name:t.name,duration:t.duration,tracks:n},u=0,l=i.length;u!==l;++u)n.push(ja.toJSON(i[u]));return o},CreateFromMorphTargetSequence:function(t,n,i,o){for(var u=n.length,l=[],f=0;f<u;f++){var d=[],g=[];d.push((f+u-1)%u,f,(f+1)%u),g.push(0,1,0);var v=ir.getKeyframeOrder(d);d=ir.sortedArray(d,1,v),g=ir.sortedArray(g,1,v),o||d[0]!==0||(d.push(u),g.push(g[0])),l.push(new oa(".morphTargetInfluences["+n[f].name+"]",d,g).scale(1/i))}return new Sr(t,-1,l)},findByName:function(t,n){var i=t;if(!Array.isArray(t)){var o=t;i=o.geometry&&o.geometry.animations||o.animations}for(var u=0;u<i.length;u++)if(i[u].name===n)return i[u];return null},CreateClipsFromMorphTargetSequences:function(t,n,i){for(var o={},u=/^([\w-]*?)([\d]+)$/,l=0,f=t.length;l<f;l++){var d=t[l],g=d.name.match(u);if(g&&g.length>1){var v=g[1],y=o[v];y||(o[v]=y=[]),y.push(d)}}var b=[];for(var v in o)b.push(Sr.CreateFromMorphTargetSequence(v,o[v],n,i));return b},parseAnimation:function(t,n){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var i=function(U,z,B,Q,$){if(B.length!==0){var K=[],lt=[];ir.flattenJSON(B,K,lt,Q),K.length!==0&&$.push(new U(z,K,lt))}},o=[],u=t.name||"default",l=t.length||-1,f=t.fps||30,d=t.hierarchy||[],g=0;g<d.length;g++){var v=d[g].keys;if(v&&v.length!==0)if(v[0].morphTargets){for(var y={},b=0;b<v.length;b++)if(v[b].morphTargets)for(var w=0;w<v[b].morphTargets.length;w++)y[v[b].morphTargets[w]]=-1;for(var T in y){for(var L=[],N=[],w=0;w!==v[b].morphTargets.length;++w){var F=v[b];L.push(F.time),N.push(F.morphTarget===T?1:0)}o.push(new oa(".morphTargetInfluence["+T+"]",L,N))}l=y.length*(f||1)}else{var D=".bones["+n[g].name+"]";i(Co,D+".position",v,"pos",o),i(aa,D+".quaternion",v,"rot",o),i(Co,D+".scale",v,"scl",o)}}return o.length===0?null:new Sr(u,l,o)}}),Object.assign(Sr.prototype,{resetDuration:function(){for(var t=this.tracks,n=0,i=0,o=t.length;i!==o;++i){var u=this.tracks[i];n=Math.max(n,u.times[u.times.length-1])}this.duration=n},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}}),Object.assign(qu.prototype,{load:function(t,n,i,o){var u=this;new Er(u.manager).load(t,function(l){n(u.parse(JSON.parse(l)))},i,o)},setTextures:function(t){this.textures=t},parse:function(t){function n(l){return i[l]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",l),i[l]}var i=this.textures,o=new Dp[t.type];if(t.uuid!==void 0&&(o.uuid=t.uuid),t.name!==void 0&&(o.name=t.name),t.color!==void 0&&o.color.setHex(t.color),t.roughness!==void 0&&(o.roughness=t.roughness),t.metalness!==void 0&&(o.metalness=t.metalness),t.emissive!==void 0&&o.emissive.setHex(t.emissive),t.specular!==void 0&&o.specular.setHex(t.specular),t.shininess!==void 0&&(o.shininess=t.shininess),t.clearCoat!==void 0&&(o.clearCoat=t.clearCoat),t.clearCoatRoughness!==void 0&&(o.clearCoatRoughness=t.clearCoatRoughness),t.uniforms!==void 0&&(o.uniforms=t.uniforms),t.vertexShader!==void 0&&(o.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(o.fragmentShader=t.fragmentShader),t.vertexColors!==void 0&&(o.vertexColors=t.vertexColors),t.fog!==void 0&&(o.fog=t.fog),t.flatShading!==void 0&&(o.flatShading=t.flatShading),t.blending!==void 0&&(o.blending=t.blending),t.side!==void 0&&(o.side=t.side),t.opacity!==void 0&&(o.opacity=t.opacity),t.transparent!==void 0&&(o.transparent=t.transparent),t.alphaTest!==void 0&&(o.alphaTest=t.alphaTest),t.depthTest!==void 0&&(o.depthTest=t.depthTest),t.depthWrite!==void 0&&(o.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(o.colorWrite=t.colorWrite),t.wireframe!==void 0&&(o.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(o.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(o.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(o.wireframeLinejoin=t.wireframeLinejoin),t.skinning!==void 0&&(o.skinning=t.skinning),t.morphTargets!==void 0&&(o.morphTargets=t.morphTargets),t.dithering!==void 0&&(o.dithering=t.dithering),t.visible!==void 0&&(o.visible=t.visible),t.userData!==void 0&&(o.userData=t.userData),t.shading!==void 0&&(o.flatShading=t.shading===1),t.size!==void 0&&(o.size=t.size),t.sizeAttenuation!==void 0&&(o.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(o.map=n(t.map)),t.alphaMap!==void 0&&(o.alphaMap=n(t.alphaMap),o.transparent=!0),t.bumpMap!==void 0&&(o.bumpMap=n(t.bumpMap)),t.bumpScale!==void 0&&(o.bumpScale=t.bumpScale),t.normalMap!==void 0&&(o.normalMap=n(t.normalMap)),t.normalScale!==void 0){var u=t.normalScale;Array.isArray(u)===!1&&(u=[u,u]),o.normalScale=new gt().fromArray(u)}return t.displacementMap!==void 0&&(o.displacementMap=n(t.displacementMap)),t.displacementScale!==void 0&&(o.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(o.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(o.roughnessMap=n(t.roughnessMap)),t.metalnessMap!==void 0&&(o.metalnessMap=n(t.metalnessMap)),t.emissiveMap!==void 0&&(o.emissiveMap=n(t.emissiveMap)),t.emissiveIntensity!==void 0&&(o.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(o.specularMap=n(t.specularMap)),t.envMap!==void 0&&(o.envMap=n(t.envMap)),t.reflectivity!==void 0&&(o.reflectivity=t.reflectivity),t.lightMap!==void 0&&(o.lightMap=n(t.lightMap)),t.lightMapIntensity!==void 0&&(o.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(o.aoMap=n(t.aoMap)),t.aoMapIntensity!==void 0&&(o.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(o.gradientMap=n(t.gradientMap)),o}}),Object.assign(Ml.prototype,{load:function(t,n,i,o){var u=this;new Er(u.manager).load(t,function(l){n(u.parse(JSON.parse(l)))},i,o)},parse:function(t){var n=new Zt,i=t.data.index;if(i!==void 0){var o=new Jf[i.type](i.array);n.setIndex(new Re(o,1))}var u=t.data.attributes;for(var l in u){var f=u[l],o=new Jf[f.type](f.array);n.addAttribute(l,new Re(o,f.itemSize,f.normalized))}var d=t.data.groups||t.data.drawcalls||t.data.offsets;if(d!==void 0)for(var g=0,v=d.length;g!==v;++g){var y=d[g];n.addGroup(y.start,y.count,y.materialIndex)}var b=t.data.boundingSphere;if(b!==void 0){var w=new G;b.center!==void 0&&w.fromArray(b.center),n.boundingSphere=new Xe(w,b.radius)}return n}});var Jf={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};yi.Handlers={handlers:[],add:function(t,n){this.handlers.push(t,n)},get:function(t){for(var n=this.handlers,i=0,o=n.length;i<o;i+=2){var u=n[i],l=n[i+1];if(u.test(t))return l}return null}},Object.assign(yi.prototype,{crossOrigin:void 0,extractUrlBase:function(t){var n=t.split("/");return n.length===1?"./":(n.pop(),n.join("/")+"/")},initMaterials:function(t,n,i){for(var o=[],u=0;u<t.length;++u)o[u]=this.createMaterial(t[u],n,i);return o},createMaterial:function(){var t={NoBlending:cc,NormalBlending:Zo,AdditiveBlending:iu,SubtractiveBlending:ql,MultiplyBlending:Yl,CustomBlending:Zl},n=new ee,i=new Bu,o=new qu;return function(u,l,f){function d(w,T,L,N,F){var D,U=l+w,z=yi.Handlers.get(U);z!==null?D=z.load(U):(i.setCrossOrigin(f),D=i.load(U)),T!==void 0&&(D.repeat.fromArray(T),T[0]!==1&&(D.wrapS=ii),T[1]!==1&&(D.wrapT=ii)),L!==void 0&&D.offset.fromArray(L),N!==void 0&&(N[0]==="repeat"&&(D.wrapS=ii),N[0]==="mirror"&&(D.wrapS=ma),N[1]==="repeat"&&(D.wrapT=ii),N[1]==="mirror"&&(D.wrapT=ma)),F!==void 0&&(D.anisotropy=F);var B=Ce.generateUUID();return g[B]=D,B}var g={},v={uuid:Ce.generateUUID(),type:"MeshLambertMaterial"};for(var y in u){var b=u[y];switch(y){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":v.name=b;break;case"blending":v.blending=t[b];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",y,"is no longer supported.");break;case"colorDiffuse":v.color=n.fromArray(b).getHex();break;case"colorSpecular":v.specular=n.fromArray(b).getHex();break;case"colorEmissive":v.emissive=n.fromArray(b).getHex();break;case"specularCoef":v.shininess=b;break;case"shading":b.toLowerCase()==="basic"&&(v.type="MeshBasicMaterial"),b.toLowerCase()==="phong"&&(v.type="MeshPhongMaterial"),b.toLowerCase()==="standard"&&(v.type="MeshStandardMaterial");break;case"mapDiffuse":v.map=d(b,u.mapDiffuseRepeat,u.mapDiffuseOffset,u.mapDiffuseWrap,u.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":v.emissiveMap=d(b,u.mapEmissiveRepeat,u.mapEmissiveOffset,u.mapEmissiveWrap,u.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":v.lightMap=d(b,u.mapLightRepeat,u.mapLightOffset,u.mapLightWrap,u.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":v.aoMap=d(b,u.mapAORepeat,u.mapAOOffset,u.mapAOWrap,u.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":v.bumpMap=d(b,u.mapBumpRepeat,u.mapBumpOffset,u.mapBumpWrap,u.mapBumpAnisotropy);break;case"mapBumpScale":v.bumpScale=b;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":v.normalMap=d(b,u.mapNormalRepeat,u.mapNormalOffset,u.mapNormalWrap,u.mapNormalAnisotropy);break;case"mapNormalFactor":v.normalScale=[b,b];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":v.specularMap=d(b,u.mapSpecularRepeat,u.mapSpecularOffset,u.mapSpecularWrap,u.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":v.metalnessMap=d(b,u.mapMetalnessRepeat,u.mapMetalnessOffset,u.mapMetalnessWrap,u.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":v.roughnessMap=d(b,u.mapRoughnessRepeat,u.mapRoughnessOffset,u.mapRoughnessWrap,u.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":v.alphaMap=d(b,u.mapAlphaRepeat,u.mapAlphaOffset,u.mapAlphaWrap,u.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":v.side=da;break;case"doubleSided":v.side=Yo;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),v.opacity=b;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":v[y]=b;break;case"vertexColors":b===!0&&(v.vertexColors=qa),b==="face"&&(v.vertexColors=Xl);break;default:console.error("THREE.Loader.createMaterial: Unsupported",y,b)}}return v.type==="MeshBasicMaterial"&&delete v.emissive,v.type!=="MeshPhongMaterial"&&delete v.specular,v.opacity<1&&(v.transparent=!0),o.setTextures(g),o.parse(v)}}()}),Object.assign(Ws.prototype,{load:function(t,n,i,o){var u=this,l=this.texturePath&&typeof this.texturePath=="string"?this.texturePath:yi.prototype.extractUrlBase(t),f=new Er(this.manager);f.setWithCredentials(this.withCredentials),f.load(t,function(d){var g=JSON.parse(d),v=g.metadata;if(v!==void 0){var y=v.type;if(y!==void 0){if(y.toLowerCase()==="object")return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");if(y.toLowerCase()==="scene")return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.SceneLoader instead.")}}var b=u.parse(g,l);n(b.geometry,b.materials)},i,o)},setTexturePath:function(t){this.texturePath=t},parse:function(){function t(u,l){function f(Wt,ne){return Wt&1<<ne}var d,g,v,y,b,w,T,L,N,F,D,U,z,B,Q,$,K,lt,Y,et,ht,Tt,Z,X,ft,at,wt,vt=u.faces,Et=u.vertices,St=u.normals,qt=u.colors,It=u.scale,Ft=0;if(u.uvs!==void 0){for(d=0;d<u.uvs.length;d++)u.uvs[d].length&&Ft++;for(d=0;d<Ft;d++)l.faceVertexUvs[d]=[]}for(y=0,b=Et.length;y<b;)lt=new G,lt.x=Et[y++]*It,lt.y=Et[y++]*It,lt.z=Et[y++]*It,l.vertices.push(lt);for(y=0,b=vt.length;y<b;)if(F=vt[y++],D=f(F,0),U=f(F,1),z=f(F,3),B=f(F,4),Q=f(F,5),$=f(F,6),K=f(F,7),D){if(et=new Ci,et.a=vt[y],et.b=vt[y+1],et.c=vt[y+3],ht=new Ci,ht.a=vt[y+1],ht.b=vt[y+2],ht.c=vt[y+3],y+=4,U&&(N=vt[y++],et.materialIndex=N,ht.materialIndex=N),v=l.faces.length,z)for(d=0;d<Ft;d++)for(X=u.uvs[d],l.faceVertexUvs[d][v]=[],l.faceVertexUvs[d][v+1]=[],g=0;g<4;g++)L=vt[y++],at=X[2*L],wt=X[2*L+1],ft=new gt(at,wt),g!==2&&l.faceVertexUvs[d][v].push(ft),g!==0&&l.faceVertexUvs[d][v+1].push(ft);if(B&&(T=3*vt[y++],et.normal.set(St[T++],St[T++],St[T]),ht.normal.copy(et.normal)),Q)for(d=0;d<4;d++)T=3*vt[y++],Z=new G(St[T++],St[T++],St[T]),d!==2&&et.vertexNormals.push(Z),d!==0&&ht.vertexNormals.push(Z);if($&&(w=vt[y++],Tt=qt[w],et.color.setHex(Tt),ht.color.setHex(Tt)),K)for(d=0;d<4;d++)w=vt[y++],Tt=qt[w],d!==2&&et.vertexColors.push(new ee(Tt)),d!==0&&ht.vertexColors.push(new ee(Tt));l.faces.push(et),l.faces.push(ht)}else{if(Y=new Ci,Y.a=vt[y++],Y.b=vt[y++],Y.c=vt[y++],U&&(N=vt[y++],Y.materialIndex=N),v=l.faces.length,z)for(d=0;d<Ft;d++)for(X=u.uvs[d],l.faceVertexUvs[d][v]=[],g=0;g<3;g++)L=vt[y++],at=X[2*L],wt=X[2*L+1],ft=new gt(at,wt),l.faceVertexUvs[d][v].push(ft);if(B&&(T=3*vt[y++],Y.normal.set(St[T++],St[T++],St[T])),Q)for(d=0;d<3;d++)T=3*vt[y++],Z=new G(St[T++],St[T++],St[T]),Y.vertexNormals.push(Z);if($&&(w=vt[y++],Y.color.setHex(qt[w])),K)for(d=0;d<3;d++)w=vt[y++],Y.vertexColors.push(new ee(qt[w]));l.faces.push(Y)}}function n(u,l){var f=u.influencesPerVertex!==void 0?u.influencesPerVertex:2;if(u.skinWeights)for(var d=0,g=u.skinWeights.length;d<g;d+=f){var v=u.skinWeights[d],y=f>1?u.skinWeights[d+1]:0,b=f>2?u.skinWeights[d+2]:0,w=f>3?u.skinWeights[d+3]:0;l.skinWeights.push(new Bt(v,y,b,w))}if(u.skinIndices)for(var d=0,g=u.skinIndices.length;d<g;d+=f){var T=u.skinIndices[d],L=f>1?u.skinIndices[d+1]:0,N=f>2?u.skinIndices[d+2]:0,F=f>3?u.skinIndices[d+3]:0;l.skinIndices.push(new Bt(T,L,N,F))}l.bones=u.bones,l.bones&&l.bones.length>0&&(l.skinWeights.length!==l.skinIndices.length||l.skinIndices.length!==l.vertices.length)&&console.warn("When skinning, number of vertices ("+l.vertices.length+"), skinIndices ("+l.skinIndices.length+"), and skinWeights ("+l.skinWeights.length+") should match.")}function i(u,l){var f=u.scale;if(u.morphTargets!==void 0)for(var d=0,g=u.morphTargets.length;d<g;d++){l.morphTargets[d]={},l.morphTargets[d].name=u.morphTargets[d].name,l.morphTargets[d].vertices=[];for(var v=l.morphTargets[d].vertices,y=u.morphTargets[d].vertices,b=0,w=y.length;b<w;b+=3){var T=new G;T.x=y[b]*f,T.y=y[b+1]*f,T.z=y[b+2]*f,v.push(T)}}if(u.morphColors!==void 0&&u.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var L=l.faces,N=u.morphColors[0].colors,d=0,g=L.length;d<g;d++)L[d].color.fromArray(N,3*d)}}function o(u,l){var f=[],d=[];u.animation!==void 0&&d.push(u.animation),u.animations!==void 0&&(u.animations.length?d=d.concat(u.animations):d.push(u.animations));for(var g=0;g<d.length;g++){var v=Sr.parseAnimation(d[g],l.bones);v&&f.push(v)}if(l.morphTargets){var y=Sr.CreateClipsFromMorphTargetSequences(l.morphTargets,10);f=f.concat(y)}f.length>0&&(l.animations=f)}return function(u,l){u.data!==void 0&&(u=u.data),u.scale!==void 0?u.scale=1/u.scale:u.scale=1;var f=new Ee;return t(u,f),n(u,f),i(u,f),o(u,f),f.computeFaceNormals(),f.computeBoundingSphere(),u.materials===void 0||u.materials.length===0?{geometry:f}:{geometry:f,materials:yi.prototype.initMaterials(u.materials,l,this.crossOrigin)}}}()}),Object.assign(El.prototype,{load:function(t,n,i,o){this.texturePath===""&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var u=this;new Er(u.manager).load(t,function(l){var f=null;try{f=JSON.parse(l)}catch(g){return o!==void 0&&o(g),void console.error("THREE:ObjectLoader: Can't parse "+t+".",g.message)}var d=f.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")return void console.error("THREE.ObjectLoader: Can't load "+t+". Use THREE.JSONLoader instead.");u.parse(f,n)},i,o)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,n){var i=this.parseGeometries(t.geometries),o=this.parseImages(t.images,function(){n!==void 0&&n(f)}),u=this.parseTextures(t.textures,o),l=this.parseMaterials(t.materials,u),f=this.parseObject(t.object,i,l);return t.animations&&(f.animations=this.parseAnimations(t.animations)),t.images!==void 0&&t.images.length!==0||n!==void 0&&n(f),f},parseGeometries:function(t){var n={};if(t!==void 0)for(var i=new Ws,o=new Ml,u=0,l=t.length;u<l;u++){var f,d=t[u];switch(d.type){case"PlaneGeometry":case"PlaneBufferGeometry":f=new si[d.type](d.width,d.height,d.widthSegments,d.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":f=new si[d.type](d.width,d.height,d.depth,d.widthSegments,d.heightSegments,d.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":f=new si[d.type](d.radius,d.segments,d.thetaStart,d.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":f=new si[d.type](d.radiusTop,d.radiusBottom,d.height,d.radialSegments,d.heightSegments,d.openEnded,d.thetaStart,d.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":f=new si[d.type](d.radius,d.height,d.radialSegments,d.heightSegments,d.openEnded,d.thetaStart,d.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":f=new si[d.type](d.radius,d.widthSegments,d.heightSegments,d.phiStart,d.phiLength,d.thetaStart,d.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":f=new si[d.type](d.radius,d.detail);break;case"RingGeometry":case"RingBufferGeometry":f=new si[d.type](d.innerRadius,d.outerRadius,d.thetaSegments,d.phiSegments,d.thetaStart,d.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":f=new si[d.type](d.radius,d.tube,d.radialSegments,d.tubularSegments,d.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":f=new si[d.type](d.radius,d.tube,d.tubularSegments,d.radialSegments,d.p,d.q);break;case"LatheGeometry":case"LatheBufferGeometry":f=new si[d.type](d.points,d.segments,d.phiStart,d.phiLength);break;case"BufferGeometry":f=o.parse(d);break;case"Geometry":f=i.parse(d,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+d.type+'"');continue}f.uuid=d.uuid,d.name!==void 0&&(f.name=d.name),n[d.uuid]=f}return n},parseMaterials:function(t,n){var i={};if(t!==void 0){var o=new qu;o.setTextures(n);for(var u=0,l=t.length;u<l;u++){var f=t[u];if(f.type==="MultiMaterial"){for(var d=[],g=0;g<f.materials.length;g++)d.push(o.parse(f.materials[g]));i[f.uuid]=d}else i[f.uuid]=o.parse(f)}}return i},parseAnimations:function(t){for(var n=[],i=0;i<t.length;i++){var o=Sr.parse(t[i]);n.push(o)}return n},parseImages:function(t,n){var i=this,o={};if(t!==void 0&&t.length>0){var u=new _l(n),l=new Bs(u);l.setCrossOrigin(this.crossOrigin);for(var f=0,d=t.length;f<d;f++){var g=t[f],v=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(g.url)?g.url:i.texturePath+g.url;o[g.uuid]=function(y){return i.manager.itemStart(y),l.load(y,function(){i.manager.itemEnd(y)},void 0,function(){i.manager.itemEnd(y),i.manager.itemError(y)})}(v)}}return o},parseTextures:function(t,n){function i(g,v){return typeof g=="number"?g:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",g),v[g])}var o={};if(t!==void 0)for(var u=0,l=t.length;u<l;u++){var f=t[u];f.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',f.uuid),n[f.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",f.image);var d=new Dt(n[f.image]);d.needsUpdate=!0,d.uuid=f.uuid,f.name!==void 0&&(d.name=f.name),f.mapping!==void 0&&(d.mapping=i(f.mapping,td)),f.offset!==void 0&&d.offset.fromArray(f.offset),f.repeat!==void 0&&d.repeat.fromArray(f.repeat),f.wrap!==void 0&&(d.wrapS=i(f.wrap[0],xh),d.wrapT=i(f.wrap[1],xh)),f.minFilter!==void 0&&(d.minFilter=i(f.minFilter,ed)),f.magFilter!==void 0&&(d.magFilter=i(f.magFilter,ed)),f.anisotropy!==void 0&&(d.anisotropy=f.anisotropy),f.flipY!==void 0&&(d.flipY=f.flipY),o[f.uuid]=d}return o},parseObject:function(){var t=new Ut;return function(n,i,o){function u(N){return i[N]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",N),i[N]}function l(N){if(N!==void 0){if(Array.isArray(N)){for(var F=[],D=0,U=N.length;D<U;D++){var z=N[D];o[z]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",z),F.push(o[z])}return F}return o[N]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",N),o[N]}}var f;switch(n.type){case"Scene":f=new Ou,n.background!==void 0&&Number.isInteger(n.background)&&(f.background=new ee(n.background)),n.fog!==void 0&&(n.fog.type==="Fog"?f.fog=new po(n.fog.color,n.fog.near,n.fog.far):n.fog.type==="FogExp2"&&(f.fog=new Ca(n.fog.color,n.fog.density)));break;case"PerspectiveCamera":f=new zn(n.fov,n.aspect,n.near,n.far),n.focus!==void 0&&(f.focus=n.focus),n.zoom!==void 0&&(f.zoom=n.zoom),n.filmGauge!==void 0&&(f.filmGauge=n.filmGauge),n.filmOffset!==void 0&&(f.filmOffset=n.filmOffset),n.view!==void 0&&(f.view=Object.assign({},n.view));break;case"OrthographicCamera":f=new co(n.left,n.right,n.top,n.bottom,n.near,n.far);break;case"AmbientLight":f=new Gs(n.color,n.intensity);break;case"DirectionalLight":f=new Ga(n.color,n.intensity);break;case"PointLight":f=new ks(n.color,n.intensity,n.distance,n.decay);break;case"RectAreaLight":f=new Vs(n.color,n.intensity,n.width,n.height);break;case"SpotLight":f=new Hu(n.color,n.intensity,n.distance,n.angle,n.penumbra,n.decay);break;case"HemisphereLight":f=new Ha(n.color,n.groundColor,n.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var d=u(n.geometry),g=l(n.material);f=d.bones&&d.bones.length>0?new Du(d,g):new wn(d,g);break;case"LOD":f=new wr;break;case"Line":f=new mr(u(n.geometry),l(n.material),n.mode);break;case"LineLoop":f=new Fu(u(n.geometry),l(n.material));break;case"LineSegments":f=new pn(u(n.geometry),l(n.material));break;case"PointCloud":case"Points":f=new mo(u(n.geometry),l(n.material));break;case"Sprite":f=new ti(l(n.material));break;case"Group":f=new Es;break;default:f=new Yt}if(f.uuid=n.uuid,n.name!==void 0&&(f.name=n.name),n.matrix!==void 0?(t.fromArray(n.matrix),t.decompose(f.position,f.quaternion,f.scale)):(n.position!==void 0&&f.position.fromArray(n.position),n.rotation!==void 0&&f.rotation.fromArray(n.rotation),n.quaternion!==void 0&&f.quaternion.fromArray(n.quaternion),n.scale!==void 0&&f.scale.fromArray(n.scale)),n.castShadow!==void 0&&(f.castShadow=n.castShadow),n.receiveShadow!==void 0&&(f.receiveShadow=n.receiveShadow),n.shadow&&(n.shadow.bias!==void 0&&(f.shadow.bias=n.shadow.bias),n.shadow.radius!==void 0&&(f.shadow.radius=n.shadow.radius),n.shadow.mapSize!==void 0&&f.shadow.mapSize.fromArray(n.shadow.mapSize),n.shadow.camera!==void 0&&(f.shadow.camera=this.parseObject(n.shadow.camera))),n.visible!==void 0&&(f.visible=n.visible),n.userData!==void 0&&(f.userData=n.userData),n.children!==void 0)for(var v=n.children,y=0;y<v.length;y++)f.add(this.parseObject(v[y],i,o));if(n.type==="LOD")for(var b=n.levels,w=0;w<b.length;w++){var T=b[w],L=f.getObjectByProperty("uuid",T.object);L!==void 0&&f.addLevel(L,T.distance)}return f}}()});var td={UVMapping:gc,CubeReflectionMapping:cu,CubeRefractionMapping:vc,EquirectangularReflectionMapping:yc,EquirectangularRefractionMapping:$o,SphericalReflectionMapping:xc,CubeUVReflectionMapping:_c,CubeUVRefractionMapping:bc},xh={RepeatWrapping:ii,ClampToEdgeWrapping:nr,MirroredRepeatWrapping:ma},ed={NearestFilter:Lr,NearestMipMapNearestFilter:wc,NearestMipMapLinearFilter:Mc,LinearFilter:rr,LinearMipMapNearestFilter:lu,LinearMipMapLinearFilter:Jo};Object.assign(vn.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t){var n=this.getUtoTmapping(t);return this.getPoint(n)},getPoints:function(t){t===void 0&&(t=5);for(var n=[],i=0;i<=t;i++)n.push(this.getPoint(i/t));return n},getSpacedPoints:function(t){t===void 0&&(t=5);for(var n=[],i=0;i<=t;i++)n.push(this.getPointAt(i/t));return n},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(t===void 0&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var n,i,o=[],u=this.getPoint(0),l=0;for(o.push(0),i=1;i<=t;i++)n=this.getPoint(i/t),l+=n.distanceTo(u),o.push(l),u=n;return this.cacheArcLengths=o,o},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,n){var i,o=this.getLengths(),u=0,l=o.length;i=n||t*o[l-1];for(var f,d=0,g=l-1;d<=g;)if(u=Math.floor(d+(g-d)/2),(f=o[u]-i)<0)d=u+1;else{if(!(f>0)){g=u;break}g=u-1}if(u=g,o[u]===i)return u/(l-1);var v=o[u];return(u+(i-v)/(o[u+1]-v))/(l-1)},getTangent:function(t){var n=t-1e-4,i=t+1e-4;n<0&&(n=0),i>1&&(i=1);var o=this.getPoint(n);return this.getPoint(i).clone().sub(o).normalize()},getTangentAt:function(t){var n=this.getUtoTmapping(t);return this.getTangent(n)},computeFrenetFrames:function(t,n){var i,o,u,l=new G,f=[],d=[],g=[],v=new G,y=new Ut;for(i=0;i<=t;i++)o=i/t,f[i]=this.getTangentAt(o),f[i].normalize();d[0]=new G,g[0]=new G;var b=Number.MAX_VALUE,w=Math.abs(f[0].x),T=Math.abs(f[0].y),L=Math.abs(f[0].z);for(w<=b&&(b=w,l.set(1,0,0)),T<=b&&(b=T,l.set(0,1,0)),L<=b&&l.set(0,0,1),v.crossVectors(f[0],l).normalize(),d[0].crossVectors(f[0],v),g[0].crossVectors(f[0],d[0]),i=1;i<=t;i++)d[i]=d[i-1].clone(),g[i]=g[i-1].clone(),v.crossVectors(f[i-1],f[i]),v.length()>Number.EPSILON&&(v.normalize(),u=Math.acos(Ce.clamp(f[i-1].dot(f[i]),-1,1)),d[i].applyMatrix4(y.makeRotationAxis(v,u))),g[i].crossVectors(f[i],d[i]);if(n===!0)for(u=Math.acos(Ce.clamp(d[0].dot(d[t]),-1,1)),u/=t,f[0].dot(v.crossVectors(d[0],d[t]))>0&&(u=-u),i=1;i<=t;i++)d[i].applyMatrix4(y.makeRotationAxis(f[i],u*i)),g[i].crossVectors(f[i],d[i]);return{tangents:f,normals:d,binormals:g}}}),xi.prototype=Object.create(vn.prototype),xi.prototype.constructor=xi,xi.prototype.isLineCurve=!0,xi.prototype.getPoint=function(t){if(t===1)return this.v2.clone();var n=this.v2.clone().sub(this.v1);return n.multiplyScalar(t).add(this.v1),n},xi.prototype.getPointAt=function(t){return this.getPoint(t)},xi.prototype.getTangent=function(t){return this.v2.clone().sub(this.v1).normalize()},No.prototype=Object.assign(Object.create(vn.prototype),{constructor:No,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);t.equals(n)||this.curves.push(new xi(n,t))},getPoint:function(t){for(var n=t*this.getLength(),i=this.getCurveLengths(),o=0;o<i.length;){if(i[o]>=n){var u=i[o]-n,l=this.curves[o],f=l.getLength(),d=f===0?0:1-u/f;return l.getPointAt(d)}o++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],n=0,i=0,o=this.curves.length;i<o;i++)n+=this.curves[i].getLength(),t.push(n);return this.cacheLengths=t,t},getSpacedPoints:function(t){t===void 0&&(t=40);for(var n=[],i=0;i<=t;i++)n.push(this.getPoint(i/t));return this.autoClose&&n.push(n[0]),n},getPoints:function(t){t=t||12;for(var n,i=[],o=0,u=this.curves;o<u.length;o++)for(var l=u[o],f=l&&l.isEllipseCurve?2*t:l&&l.isLineCurve?1:l&&l.isSplineCurve?t*l.points.length:t,d=l.getPoints(f),g=0;g<d.length;g++){var v=d[g];n&&n.equals(v)||(i.push(v),n=v)}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},createPointsGeometry:function(t){var n=this.getPoints(t);return this.createGeometry(n)},createSpacedPointsGeometry:function(t){var n=this.getSpacedPoints(t);return this.createGeometry(n)},createGeometry:function(t){for(var n=new Ee,i=0,o=t.length;i<o;i++){var u=t[i];n.vertices.push(new G(u.x,u.y,u.z||0))}return n}}),jr.prototype=Object.create(vn.prototype),jr.prototype.constructor=jr,jr.prototype.isEllipseCurve=!0,jr.prototype.getPoint=function(t){for(var n=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=n;for(;i>n;)i-=n;i<Number.EPSILON&&(i=o?0:n),this.aClockwise!==!0||o||(i===n?i=-n:i-=n);var u=this.aStartAngle+t*i,l=this.aX+this.xRadius*Math.cos(u),f=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){var d=Math.cos(this.aRotation),g=Math.sin(this.aRotation),v=l-this.aX,y=f-this.aY;l=v*d-y*g+this.aX,f=v*g+y*d+this.aY}return new gt(l,f)},Rr.prototype=Object.create(vn.prototype),Rr.prototype.constructor=Rr,Rr.prototype.isSplineCurve=!0,Rr.prototype.getPoint=function(t){var n=this.points,i=(n.length-1)*t,o=Math.floor(i),u=i-o,l=n[o===0?o:o-1],f=n[o],d=n[o>n.length-2?n.length-1:o+1],g=n[o>n.length-3?n.length-1:o+2];return new gt(Xs(u,l.x,f.x,d.x,g.x),Xs(u,l.y,f.y,d.y,g.y))},zi.prototype=Object.create(vn.prototype),zi.prototype.constructor=zi,zi.prototype.getPoint=function(t){var n=this.v0,i=this.v1,o=this.v2,u=this.v3;return new gt(qs(t,n.x,i.x,o.x,u.x),qs(t,n.y,i.y,o.y,u.y))},ni.prototype=Object.create(vn.prototype),ni.prototype.constructor=ni,ni.prototype.getPoint=function(t){var n=this.v0,i=this.v1,o=this.v2;return new gt(Po(t,n.x,i.x,o.x),Po(t,n.y,i.y,o.y))};var _h=Object.assign(Object.create(No.prototype),{fromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var n=1,i=t.length;n<i;n++)this.lineTo(t[n].x,t[n].y)},moveTo:function(t,n){this.currentPoint.set(t,n)},lineTo:function(t,n){var i=new xi(this.currentPoint.clone(),new gt(t,n));this.curves.push(i),this.currentPoint.set(t,n)},quadraticCurveTo:function(t,n,i,o){var u=new ni(this.currentPoint.clone(),new gt(t,n),new gt(i,o));this.curves.push(u),this.currentPoint.set(i,o)},bezierCurveTo:function(t,n,i,o,u,l){var f=new zi(this.currentPoint.clone(),new gt(t,n),new gt(i,o),new gt(u,l));this.curves.push(f),this.currentPoint.set(u,l)},splineThru:function(t){var n=[this.currentPoint.clone()].concat(t),i=new Rr(n);this.curves.push(i),this.currentPoint.copy(t[t.length-1])},arc:function(t,n,i,o,u,l){var f=this.currentPoint.x,d=this.currentPoint.y;this.absarc(t+f,n+d,i,o,u,l)},absarc:function(t,n,i,o,u,l){this.absellipse(t,n,i,i,o,u,l)},ellipse:function(t,n,i,o,u,l,f,d){var g=this.currentPoint.x,v=this.currentPoint.y;this.absellipse(t+g,n+v,i,o,u,l,f,d)},absellipse:function(t,n,i,o,u,l,f,d){var g=new jr(t,n,i,o,u,l,f,d);if(this.curves.length>0){var v=g.getPoint(0);v.equals(this.currentPoint)||this.lineTo(v.x,v.y)}this.curves.push(g);var y=g.getPoint(1);this.currentPoint.copy(y)}});Wa.prototype=_h,_h.constructor=Wa,_i.prototype=Object.assign(Object.create(_h),{constructor:_i,getPointsHoles:function(t){for(var n=[],i=0,o=this.holes.length;i<o;i++)n[i]=this.holes[i].getPoints(t);return n},extractAllPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},extractPoints:function(t){return this.extractAllPoints(t)}}),Object.assign(Io.prototype,{moveTo:function(t,n){this.currentPath=new Wa,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,n)},lineTo:function(t,n){this.currentPath.lineTo(t,n)},quadraticCurveTo:function(t,n,i,o){this.currentPath.quadraticCurveTo(t,n,i,o)},bezierCurveTo:function(t,n,i,o,u,l){this.currentPath.bezierCurveTo(t,n,i,o,u,l)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,n){function i(X){for(var ft=[],at=0,wt=X.length;at<wt;at++){var vt=X[at],Et=new _i;Et.curves=vt.curves,ft.push(Et)}return ft}var o=oi.isClockWise,u=this.subPaths;if(u.length===0)return[];if(n===!0)return i(u);var l,f,d,g=[];if(u.length===1)return f=u[0],d=new _i,d.curves=f.curves,g.push(d),g;var v=!o(u[0].getPoints());v=t?!v:v;var y,b=[],w=[],T=[],L=0;w[L]=void 0,T[L]=[];for(var N=0,F=u.length;N<F;N++)f=u[N],y=f.getPoints(),l=o(y),l=t?!l:l,l?(!v&&w[L]&&L++,w[L]={s:new _i,p:y},w[L].s.curves=f.curves,v&&L++,T[L]=[]):T[L].push({h:f,p:y[0]});if(!w[0])return i(u);if(w.length>1){for(var D=!1,U=[],z=0,B=w.length;z<B;z++)b[z]=[];for(var z=0,B=w.length;z<B;z++)for(var Q=T[z],$=0;$<Q.length;$++){for(var K=Q[$],lt=!0,Y=0;Y<w.length;Y++)(function(at,wt){for(var vt=wt.length,Et=!1,St=vt-1,qt=0;qt<vt;St=qt++){var It=wt[St],Ft=wt[qt],Wt=Ft.x-It.x,ne=Ft.y-It.y;if(Math.abs(ne)>Number.EPSILON){if(ne<0&&(It=wt[qt],Wt=-Wt,Ft=wt[St],ne=-ne),at.y<It.y||at.y>Ft.y)continue;if(at.y===It.y){if(at.x===It.x)return!0}else{var kt=ne*(at.x-It.x)-Wt*(at.y-It.y);if(kt===0)return!0;if(kt<0)continue;Et=!Et}}else{if(at.y!==It.y)continue;if(Ft.x<=at.x&&at.x<=It.x||It.x<=at.x&&at.x<=Ft.x)return!0}}return Et})(K.p,w[Y].p)&&(z!==Y&&U.push({froms:z,tos:Y,hole:$}),lt?(lt=!1,b[Y].push(K)):D=!0);lt&&b[z].push(K)}U.length>0&&(D||(T=b))}for(var et,N=0,ht=w.length;N<ht;N++){d=w[N].s,g.push(d),et=T[N];for(var Tt=0,Z=et.length;Tt<Z;Tt++)d.holes.push(et[Tt].h)}return g}}),Object.assign(Ys.prototype,{isFont:!0,generateShapes:function(t,n,i){function o(v,y,b,w){var T=u.glyphs[v]||u.glyphs["?"];if(T){var L,N,F,D,U,z,B,Q,$=new Io,K=[];if(T.o)for(var lt=T._cachedOutline||(T._cachedOutline=T.o.split(" ")),Y=0,et=lt.length;Y<et;){var ht=lt[Y++];switch(ht){case"m":L=lt[Y++]*y+b,N=lt[Y++]*y+w,$.moveTo(L,N);break;case"l":L=lt[Y++]*y+b,N=lt[Y++]*y+w,$.lineTo(L,N);break;case"q":F=lt[Y++]*y+b,D=lt[Y++]*y+w,U=lt[Y++]*y+b,z=lt[Y++]*y+w,$.quadraticCurveTo(U,z,F,D),K[K.length-1];break;case"b":F=lt[Y++]*y+b,D=lt[Y++]*y+w,U=lt[Y++]*y+b,z=lt[Y++]*y+w,B=lt[Y++]*y+b,Q=lt[Y++]*y+w,$.bezierCurveTo(U,z,B,Q,F,D),K[K.length-1]}}return{offsetX:T.ha*y,path:$}}}n===void 0&&(n=100);for(var u=this.data,l=function(v){for(var y=String(v).split(""),b=n/u.resolution,w=(u.boundingBox.yMax-u.boundingBox.yMin+u.underlineThickness)*b,T=0,L=0,N=[],F=0;F<y.length;F++){var D=y[F];if(D===`
`)T=0,L-=w;else{var U=o(D,b,T,L);T+=U.offsetX,N.push(U.path)}}return N}(t),f=[],d=0,g=l.length;d<g;d++)Array.prototype.push.apply(f,l[d].toShapes());return f}}),Object.assign(Sl.prototype,{load:function(t,n,i,o){var u=this;new Er(this.manager).load(t,function(l){var f;try{f=JSON.parse(l)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),f=JSON.parse(l.substring(65,l.length-2))}var d=u.parse(f);n&&n(d)},i,o)},parse:function(t){return new Ys(t)}});var Pc,bh={getContext:function(){return Pc===void 0&&(Pc=new(window.AudioContext||window.webkitAudioContext)),Pc},setContext:function(t){Pc=t}};Object.assign(Zu.prototype,{load:function(t,n,i,o){var u=new Er(this.manager);u.setResponseType("arraybuffer"),u.load(t,function(l){bh.getContext().decodeAudioData(l,function(f){n(f)})},i,o)}}),Object.assign(Al.prototype,{update:function(){var t,n,i,o,u,l,f,d,g=new Ut,v=new Ut;return function(y){if(t!==this||n!==y.focus||i!==y.fov||o!==y.aspect*this.aspect||u!==y.near||l!==y.far||f!==y.zoom||d!==this.eyeSep){t=this,n=y.focus,i=y.fov,o=y.aspect*this.aspect,u=y.near,l=y.far,f=y.zoom;var b=y.projectionMatrix.clone();d=this.eyeSep/2;var w,T,L=d*u/n,N=u*Math.tan(Ce.DEG2RAD*i*.5)/f;v.elements[12]=-d,g.elements[12]=d,w=-N*o+L,T=N*o+L,b.elements[0]=2*u/(T-w),b.elements[8]=(T+w)/(T-w),this.cameraL.projectionMatrix.copy(b),w=-N*o-L,T=N*o-L,b.elements[0]=2*u/(T-w),b.elements[8]=(T+w)/(T-w),this.cameraR.projectionMatrix.copy(b)}this.cameraL.matrixWorld.copy(y.matrixWorld).multiply(v),this.cameraR.matrixWorld.copy(y.matrixWorld).multiply(g)}}()}),Oo.prototype=Object.create(Yt.prototype),Oo.prototype.constructor=Oo,Rl.prototype=Object.assign(Object.create(Yt.prototype),{constructor:Rl,getInput:function(){return this.gain},removeFilter:function(){this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:function(){var t=new G,n=new Ct,i=new G,o=new G;return function(u){Yt.prototype.updateMatrixWorld.call(this,u);var l=this.context.listener,f=this.up;this.matrixWorld.decompose(t,n,i),o.set(0,0,-1).applyQuaternion(n),l.positionX?(l.positionX.setValueAtTime(t.x,this.context.currentTime),l.positionY.setValueAtTime(t.y,this.context.currentTime),l.positionZ.setValueAtTime(t.z,this.context.currentTime),l.forwardX.setValueAtTime(o.x,this.context.currentTime),l.forwardY.setValueAtTime(o.y,this.context.currentTime),l.forwardZ.setValueAtTime(o.z,this.context.currentTime),l.upX.setValueAtTime(f.x,this.context.currentTime),l.upY.setValueAtTime(f.y,this.context.currentTime),l.upZ.setValueAtTime(f.z,this.context.currentTime)):(l.setPosition(t.x,t.y,t.z),l.setOrientation(o.x,o.y,o.z,f.x,f.y,f.z))}}()}),Uo.prototype=Object.assign(Object.create(Yt.prototype),{constructor:Uo,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying===!0)return void console.warn("THREE.Audio: Audio is already playing.");if(this.hasPlaybackControl===!1)return void console.warn("THREE.Audio: this Audio has no playback control.");var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),t.start(0,this.startTime),this.isPlaying=!0,this.source=t,this.connect()},pause:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,n=this.filters.length;t<n;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,n=this.filters.length;t<n;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),this.isPlaying===!0?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.value=t,this}}),hr.prototype=Object.assign(Object.create(Uo.prototype),{constructor:hr,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new G;return function(n){Yt.prototype.updateMatrixWorld.call(this,n),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}()}),Object.assign(Ll.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,n=this.getFrequencyData(),i=0;i<n.length;i++)t+=n[i];return t/n.length}}),Object.assign(Ku.prototype,{accumulate:function(t,n){var i=this.buffer,o=this.valueSize,u=t*o+o,l=this.cumulativeWeight;if(l===0){for(var f=0;f!==o;++f)i[u+f]=i[f];l=n}else{l+=n;var d=n/l;this._mixBufferRegion(i,u,0,d,o)}this.cumulativeWeight=l},apply:function(t){var n=this.valueSize,i=this.buffer,o=t*n+n,u=this.cumulativeWeight,l=this.binding;if(this.cumulativeWeight=0,u<1){var f=3*n;this._mixBufferRegion(i,o,f,1-u,n)}for(var d=n,g=n+n;d!==g;++d)if(i[d]!==i[d+n]){l.setValue(i,o);break}},saveOriginalState:function(){var t=this.binding,n=this.buffer,i=this.valueSize,o=3*i;t.getValue(n,o);for(var u=i,l=o;u!==l;++u)n[u]=n[o+u%i];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,n,i,o,u){if(o>=.5)for(var l=0;l!==u;++l)t[n+l]=t[i+l]},_slerp:function(t,n,i,o){Ct.slerpFlat(t,n,t,n,t,i,o)},_lerp:function(t,n,i,o,u){for(var l=1-o,f=0;f!==u;++f){var d=n+f;t[d]=t[d]*l+t[i+f]*o}}}),Object.assign(Qu.prototype,{getValue:function(t,n){this.bind();var i=this._targetGroup.nCachedObjects_,o=this._bindings[i];o!==void 0&&o.getValue(t,n)},setValue:function(t,n){for(var i=this._bindings,o=this._targetGroup.nCachedObjects_,u=i.length;o!==u;++o)i[o].setValue(t,n)},bind:function(){for(var t=this._bindings,n=this._targetGroup.nCachedObjects_,i=t.length;n!==i;++n)t[n].bind()},unbind:function(){for(var t=this._bindings,n=this._targetGroup.nCachedObjects_,i=t.length;n!==i;++n)t[n].unbind()}}),Object.assign(On,{Composite:Qu,create:function(t,n,i){return t&&t.isAnimationObjectGroup?new On.Composite(t,n,i):new On(t,n,i)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(/[^\w-]/g,"")},parseTrackName:function(){var t=/((?:[\w-]+[\/:])*)/,n=/([\w-\.]+)?/,i=/(?:\.([\w-]+)(?:\[(.+)\])?)?/,o=/\.([\w-]+)(?:\[(.+)\])?/,u=new RegExp("^"+t.source+n.source+i.source+o.source+"$"),l=["material","materials","bones"];return function(f){var d=u.exec(f);if(!d)throw new Error("PropertyBinding: Cannot parse trackName: "+f);var g={nodeName:d[2],objectName:d[3],objectIndex:d[4],propertyName:d[5],propertyIndex:d[6]},v=g.nodeName&&g.nodeName.lastIndexOf(".");if(v!==void 0&&v!==-1){var y=g.nodeName.substring(v+1);l.indexOf(y)!==-1&&(g.nodeName=g.nodeName.substring(0,v),g.objectName=y)}if(g.propertyName===null||g.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+f);return g}}(),findNode:function(t,n){if(!n||n===""||n==="root"||n==="."||n===-1||n===t.name||n===t.uuid)return t;if(t.skeleton){var i=function(l){for(var f=0;f<l.bones.length;f++){var d=l.bones[f];if(d.name===n)return d}return null}(t.skeleton);if(i)return i}if(t.children){var o=function(l){for(var f=0;f<l.length;f++){var d=l[f];if(d.name===n||d.uuid===n)return d;var g=o(d.children);if(g)return g}return null},u=o(t.children);if(u)return u}return null}}),Object.assign(On.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,n){t[n]=this.node[this.propertyName]},function(t,n){for(var i=this.resolvedProperty,o=0,u=i.length;o!==u;++o)t[n++]=i[o]},function(t,n){t[n]=this.resolvedProperty[this.propertyIndex]},function(t,n){this.resolvedProperty.toArray(t,n)}],SetterByBindingTypeAndVersioning:[[function(t,n){this.node[this.propertyName]=t[n]},function(t,n){this.node[this.propertyName]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.node[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){for(var i=this.resolvedProperty,o=0,u=i.length;o!==u;++o)i[o]=t[n++]},function(t,n){for(var i=this.resolvedProperty,o=0,u=i.length;o!==u;++o)i[o]=t[n++];this.targetObject.needsUpdate=!0},function(t,n){for(var i=this.resolvedProperty,o=0,u=i.length;o!==u;++o)i[o]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty[this.propertyIndex]=t[n]},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty.fromArray(t,n)},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,n){this.bind(),this.getValue(t,n)},setValue:function(t,n){this.bind(),this.setValue(t,n)},bind:function(){var t=this.node,n=this.parsedPath,i=n.objectName,o=n.propertyName,u=n.propertyIndex;if(t||(t=On.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(i){var l=n.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var f=0;f<t.length;f++)if(t[f].name===l){l=f;break}break;default:if(t[i]===void 0)return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(l!==void 0){if(t[l]===void 0)return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[l]}}var d=t[o];if(d===void 0){var g=n.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+g+"."+o+" but it wasn't found.",t)}var v=this.Versioning.None;t.needsUpdate!==void 0?(v=this.Versioning.NeedsUpdate,this.targetObject=t):t.matrixWorldNeedsUpdate!==void 0&&(v=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t);var y=this.BindingType.Direct;if(u!==void 0){if(o==="morphTargetInfluences"){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(var f=0;f<this.node.geometry.morphAttributes.position.length;f++)if(t.geometry.morphAttributes.position[f].name===u){u=f;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(var f=0;f<this.node.geometry.morphTargets.length;f++)if(t.geometry.morphTargets[f].name===u){u=f;break}}}y=this.BindingType.ArrayElement,this.resolvedProperty=d,this.propertyIndex=u}else d.fromArray!==void 0&&d.toArray!==void 0?(y=this.BindingType.HasFromToArray,this.resolvedProperty=d):Array.isArray(d)?(y=this.BindingType.EntireArray,this.resolvedProperty=d):this.propertyName=o;this.getValue=this.GetterByBindingType[y],this.setValue=this.SetterByBindingTypeAndVersioning[y][v]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(On.prototype,{_getValue_unbound:On.prototype.getValue,_setValue_unbound:On.prototype.setValue}),Object.assign(Cl.prototype,{isAnimationObjectGroup:!0,add:function(t){for(var n=this._objects,i=n.length,o=this.nCachedObjects_,u=this._indicesByUUID,l=this._paths,f=this._parsedPaths,d=this._bindings,g=d.length,v=0,y=arguments.length;v!==y;++v){var b=arguments[v],w=b.uuid,T=u[w],L=void 0;if(T===void 0){T=i++,u[w]=T,n.push(b);for(var N=0,F=g;N!==F;++N)d[N].push(new On(b,l[N],f[N]))}else if(T<o){L=n[T];var D=--o,U=n[D];u[U.uuid]=T,n[T]=U,u[w]=D,n[D]=b;for(var N=0,F=g;N!==F;++N){var z=d[N],B=z[D],Q=z[T];z[T]=B,Q===void 0&&(Q=new On(b,l[N],f[N])),z[D]=Q}}else n[T]!==L&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=o},remove:function(t){for(var n=this._objects,i=this.nCachedObjects_,o=this._indicesByUUID,u=this._bindings,l=u.length,f=0,d=arguments.length;f!==d;++f){var g=arguments[f],v=g.uuid,y=o[v];if(y!==void 0&&y>=i){var b=i++,w=n[b];o[w.uuid]=y,n[y]=w,o[v]=b,n[b]=g;for(var T=0,L=l;T!==L;++T){var N=u[T],F=N[b],D=N[y];N[y]=F,N[b]=D}}}this.nCachedObjects_=i},uncache:function(t){for(var n=this._objects,i=n.length,o=this.nCachedObjects_,u=this._indicesByUUID,l=this._bindings,f=l.length,d=0,g=arguments.length;d!==g;++d){var v=arguments[d],y=v.uuid,b=u[y];if(b!==void 0)if(delete u[y],b<o){var w=--o,T=n[w],L=--i,N=n[L];u[T.uuid]=b,n[b]=T,u[N.uuid]=w,n[w]=N,n.pop();for(var F=0,D=f;F!==D;++F){var U=l[F],z=U[w],B=U[L];U[b]=z,U[w]=B,U.pop()}}else{var L=--i,N=n[L];u[N.uuid]=b,n[b]=N,n.pop();for(var F=0,D=f;F!==D;++F){var U=l[F];U[b]=U[L],U.pop()}}}this.nCachedObjects_=o},subscribe_:function(t,n){var i=this._bindingsIndicesByPath,o=i[t],u=this._bindings;if(o!==void 0)return u[o];var l=this._paths,f=this._parsedPaths,d=this._objects,g=d.length,v=this.nCachedObjects_,y=new Array(g);o=u.length,i[t]=o,l.push(t),f.push(n),u.push(y);for(var b=v,w=d.length;b!==w;++b){var T=d[b];y[b]=new On(T,t,n)}return y},unsubscribe_:function(t){var n=this._bindingsIndicesByPath,i=n[t];if(i!==void 0){var o=this._paths,u=this._parsedPaths,l=this._bindings,f=l.length-1,d=l[f];n[t[f]]=i,l[i]=d,l.pop(),u[i]=u[f],u.pop(),o[i]=o[f],o.pop()}}}),Object.assign(vf.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,n){return this.loop=t,this.repetitions=n,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,n,i){if(t.fadeOut(n),this.fadeIn(n),i){var o=this._clip.duration,u=t._clip.duration,l=u/o,f=o/u;t.warp(1,l,n),this.warp(f,1,n)}return this},crossFadeTo:function(t,n,i){return t.crossFadeFrom(this,n,i)},stopFading:function(){var t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,n,i){var o=this._mixer,u=o.time,l=this._timeScaleInterpolant,f=this.timeScale;l===null&&(l=o._lendControlInterpolant(),this._timeScaleInterpolant=l);var d=l.parameterPositions,g=l.sampleValues;return d[0]=u,d[1]=u+i,g[0]=t/f,g[1]=n/f,this},stopWarping:function(){var t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,n,i,o){if(!this.enabled)return void this._updateWeight(t);var u=this._startTime;if(u!==null){var l=(t-u)*i;if(l<0||i===0)return;this._startTime=null,n=i*l}n*=this._updateTimeScale(t);var f=this._updateTime(n),d=this._updateWeight(t);if(d>0)for(var g=this._interpolants,v=this._propertyBindings,y=0,b=g.length;y!==b;++y)g[y].evaluate(f),v[y].accumulate(o,d)},_updateWeight:function(t){var n=0;if(this.enabled){n=this.weight;var i=this._weightInterpolant;if(i!==null){var o=i.evaluate(t)[0];n*=o,t>i.parameterPositions[1]&&(this.stopFading(),o===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n},_updateTimeScale:function(t){var n=0;if(!this.paused){n=this.timeScale;var i=this._timeScaleInterpolant;i!==null&&(n*=i.evaluate(t)[0],t>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n))}return this._effectiveTimeScale=n,n},_updateTime:function(t){var n=this.time+t;if(t===0)return n;var i=this._clip.duration,o=this.loop,u=this._loopCount;if(o===Cc){u===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(n>=i)n=i;else{if(!(n<0))break t;n=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{var l=o===ln;if(u===-1&&(t>=0?(u=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),n>=i||n<0){var f=Math.floor(n/i);n-=i*f,u+=Math.abs(f);var d=this.repetitions-u;if(d<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n=t>0?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(d===0){var g=t<0;this._setEndings(g,!g,l)}else this._setEndings(!1,!1,l);this._loopCount=u,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:f})}}if(l&&(1&u)==1)return this.time=n,i-n}return this.time=n,n},_setEndings:function(t,n,i){var o=this._interpolantSettings;i?(o.endingStart=$a,o.endingEnd=$a):(o.endingStart=t?this.zeroSlopeAtStart?$a:Qa:pu,o.endingEnd=n?this.zeroSlopeAtEnd?$a:Qa:pu)},_scheduleFading:function(t,n,i){var o=this._mixer,u=o.time,l=this._weightInterpolant;l===null&&(l=o._lendControlInterpolant(),this._weightInterpolant=l);var f=l.parameterPositions,d=l.sampleValues;return f[0]=u,d[0]=n,f[1]=u+t,d[1]=i,this}}),Object.assign(yf.prototype,A.prototype,{_bindAction:function(t,n){var i=t._localRoot||this._root,o=t._clip.tracks,u=o.length,l=t._propertyBindings,f=t._interpolants,d=i.uuid,g=this._bindingsByRootAndName,v=g[d];v===void 0&&(v={},g[d]=v);for(var y=0;y!==u;++y){var b=o[y],w=b.name,T=v[w];if(T!==void 0)l[y]=T;else{if((T=l[y])!==void 0){T._cacheIndex===null&&(++T.referenceCount,this._addInactiveBinding(T,d,w));continue}var L=n&&n._propertyBindings[y].binding.parsedPath;T=new Ku(On.create(i,w,L),b.ValueTypeName,b.getValueSize()),++T.referenceCount,this._addInactiveBinding(T,d,w),l[y]=T}f[y].resultBuffer=T.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){var n=(t._localRoot||this._root).uuid,i=t._clip.uuid,o=this._actionsByClip[i];this._bindAction(t,o&&o.knownActions[0]),this._addInactiveAction(t,i,n)}for(var u=t._propertyBindings,l=0,f=u.length;l!==f;++l){var d=u[l];d.useCount++==0&&(this._lendBinding(d),d.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var n=t._propertyBindings,i=0,o=n.length;i!==o;++i){var u=n[i];--u.useCount==0&&(u.restoreOriginalState(),this._takeBackBinding(u))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var n=t._cacheIndex;return n!==null&&n<this._nActiveActions},_addInactiveAction:function(t,n,i){var o=this._actions,u=this._actionsByClip,l=u[n];if(l===void 0)l={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,u[n]=l;else{var f=l.knownActions;t._byClipCacheIndex=f.length,f.push(t)}t._cacheIndex=o.length,o.push(t),l.actionByRoot[i]=t},_removeInactiveAction:function(t){var n=this._actions,i=n[n.length-1],o=t._cacheIndex;i._cacheIndex=o,n[o]=i,n.pop(),t._cacheIndex=null;var u=t._clip.uuid,l=this._actionsByClip,f=l[u],d=f.knownActions,g=d[d.length-1],v=t._byClipCacheIndex;g._byClipCacheIndex=v,d[v]=g,d.pop(),t._byClipCacheIndex=null,delete f.actionByRoot[(t._localRoot||this._root).uuid],d.length===0&&delete l[u],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var n=t._propertyBindings,i=0,o=n.length;i!==o;++i){var u=n[i];--u.referenceCount==0&&this._removeInactiveBinding(u)}},_lendAction:function(t){var n=this._actions,i=t._cacheIndex,o=this._nActiveActions++,u=n[o];t._cacheIndex=o,n[o]=t,u._cacheIndex=i,n[i]=u},_takeBackAction:function(t){var n=this._actions,i=t._cacheIndex,o=--this._nActiveActions,u=n[o];t._cacheIndex=o,n[o]=t,u._cacheIndex=i,n[i]=u},_addInactiveBinding:function(t,n,i){var o=this._bindingsByRootAndName,u=o[n],l=this._bindings;u===void 0&&(u={},o[n]=u),u[i]=t,t._cacheIndex=l.length,l.push(t)},_removeInactiveBinding:function(t){var n=this._bindings,i=t.binding,o=i.rootNode.uuid,u=i.path,l=this._bindingsByRootAndName,f=l[o],d=n[n.length-1],g=t._cacheIndex;d._cacheIndex=g,n[g]=d,n.pop(),delete f[u];t:{for(var v in f)break t;delete l[o]}},_lendBinding:function(t){var n=this._bindings,i=t._cacheIndex,o=this._nActiveBindings++,u=n[o];t._cacheIndex=o,n[o]=t,u._cacheIndex=i,n[i]=u},_takeBackBinding:function(t){var n=this._bindings,i=t._cacheIndex,o=--this._nActiveBindings,u=n[o];t._cacheIndex=o,n[o]=t,u._cacheIndex=i,n[i]=u},_lendControlInterpolant:function(){var t=this._controlInterpolants,n=this._nActiveControlInterpolants++,i=t[n];return i===void 0&&(i=new Lo(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=n,t[n]=i),i},_takeBackControlInterpolant:function(t){var n=this._controlInterpolants,i=t.__cacheIndex,o=--this._nActiveControlInterpolants,u=n[o];t.__cacheIndex=o,n[o]=t,u.__cacheIndex=i,n[i]=u},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,n){var i=n||this._root,o=i.uuid,u=typeof t=="string"?Sr.findByName(i,t):t,l=u!==null?u.uuid:t,f=this._actionsByClip[l],d=null;if(f!==void 0){var g=f.actionByRoot[o];if(g!==void 0)return g;d=f.knownActions[0],u===null&&(u=d._clip)}if(u===null)return null;var v=new vf(this,u,n);return this._bindAction(v,d),this._addInactiveAction(v,l,o),v},existingAction:function(t,n){var i=n||this._root,o=i.uuid,u=typeof t=="string"?Sr.findByName(i,t):t,l=u?u.uuid:t,f=this._actionsByClip[l];return f!==void 0&&f.actionByRoot[o]||null},stopAllAction:function(){var t=this._actions,n=this._nActiveActions,i=this._bindings,o=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var u=0;u!==n;++u)t[u].reset();for(var u=0;u!==o;++u)i[u].useCount=0;return this},update:function(t){t*=this.timeScale;for(var n=this._actions,i=this._nActiveActions,o=this.time+=t,u=Math.sign(t),l=this._accuIndex^=1,f=0;f!==i;++f)n[f]._update(o,t,u,l);for(var d=this._bindings,g=this._nActiveBindings,f=0;f!==g;++f)d[f].apply(l);return this},getRoot:function(){return this._root},uncacheClip:function(t){var n=this._actions,i=t.uuid,o=this._actionsByClip,u=o[i];if(u!==void 0){for(var l=u.knownActions,f=0,d=l.length;f!==d;++f){var g=l[f];this._deactivateAction(g);var v=g._cacheIndex,y=n[n.length-1];g._cacheIndex=null,g._byClipCacheIndex=null,y._cacheIndex=v,n[v]=y,n.pop(),this._removeInactiveBindingsForAction(g)}delete o[i]}},uncacheRoot:function(t){var n=t.uuid,i=this._actionsByClip;for(var o in i){var u=i[o].actionByRoot,l=u[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}var f=this._bindingsByRootAndName,d=f[n];if(d!==void 0)for(var g in d){var v=d[g];v.restoreOriginalState(),this._removeInactiveBinding(v)}},uncacheAction:function(t,n){var i=this.existingAction(t,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}),Zs.prototype.clone=function(){return new Zs(this.value.clone===void 0?this.value:this.value.clone())},Pl.prototype=Object.assign(Object.create(Zt.prototype),{constructor:Pl,isInstancedBufferGeometry:!0,addGroup:function(t,n,i){this.groups.push({start:t,count:n,materialIndex:i})},copy:function(t){var n=t.index;n!==null&&this.setIndex(n.clone());var i=t.attributes;for(var o in i){var u=i[o];this.addAttribute(o,u.clone())}for(var l=t.groups,f=0,d=l.length;f<d;f++){var g=l[f];this.addGroup(g.start,g.count,g.materialIndex)}return this}}),Object.defineProperties(Nl.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Nl.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,n){return this.data.array[t*this.data.stride+this.offset]=n,this},setY:function(t,n){return this.data.array[t*this.data.stride+this.offset+1]=n,this},setZ:function(t,n){return this.data.array[t*this.data.stride+this.offset+2]=n,this},setW:function(t,n){return this.data.array[t*this.data.stride+this.offset+3]=n,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=n,this.data.array[t+1]=i,this},setXYZ:function(t,n,i,o){return t=t*this.data.stride+this.offset,this.data.array[t+0]=n,this.data.array[t+1]=i,this.data.array[t+2]=o,this},setXYZW:function(t,n,i,o,u){return t=t*this.data.stride+this.offset,this.data.array[t+0]=n,this.data.array[t+1]=i,this.data.array[t+2]=o,this.data.array[t+3]=u,this}}),Object.defineProperty(Do.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Object.assign(Do.prototype,{isInterleavedBuffer:!0,setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=t!==void 0?t.length/this.stride:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,n,i){t*=this.stride,i*=n.stride;for(var o=0,u=this.stride;o<u;o++)this.array[t+o]=n.array[i+o];return this},set:function(t,n){return n===void 0&&(n=0),this.array.set(t,n),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),$u.prototype=Object.assign(Object.create(Do.prototype),{constructor:$u,isInstancedInterleavedBuffer:!0,copy:function(t){return Do.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Ks.prototype=Object.assign(Object.create(Re.prototype),{constructor:Ks,isInstancedBufferAttribute:!0,copy:function(t){return Re.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(Ju.prototype,{linePrecision:1,set:function(t,n){this.ray.set(t,n)},setFromCamera:function(t,n){n&&n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(n).sub(this.ray.origin).normalize()):n&&n.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,n){var i=[];return tc(t,this,i,n),i.sort(Il),i},intersectObjects:function(t,n){var i=[];if(Array.isArray(t)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var o=0,u=t.length;o<u;o++)tc(t[o],this,i,n);return i.sort(Il),i}}),Object.assign(Ol.prototype,{start:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var n=(typeof performance=="undefined"?Date:performance).now();t=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=t}return t}}),Object.assign(Ul.prototype,{set:function(t,n,i){return this.radius=t,this.phi=n,this.theta=i,this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(Ce.clamp(t.y/this.radius,-1,1))),this}}),Object.assign(Dl.prototype,{set:function(t,n,i){return this.radius=t,this.theta=n,this.y=i,this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.radius=Math.sqrt(t.x*t.x+t.z*t.z),this.theta=Math.atan2(t.x,t.z),this.y=t.y,this}}),sa.prototype=Object.create(Yt.prototype),sa.prototype.constructor=sa,sa.prototype.isImmediateRenderObject=!0,Fo.prototype=Object.create(pn.prototype),Fo.prototype.constructor=Fo,Fo.prototype.update=function(){var t=new G,n=new G,i=new dn;return function(){var o=["a","b","c"];this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);var u=this.object.matrixWorld,l=this.geometry.attributes.position,f=this.object.geometry;if(f&&f.isGeometry)for(var d=f.vertices,g=f.faces,v=0,y=0,b=g.length;y<b;y++)for(var w=g[y],T=0,L=w.vertexNormals.length;T<L;T++){var N=d[w[o[T]]],F=w.vertexNormals[T];t.copy(N).applyMatrix4(u),n.copy(F).applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),l.setXYZ(v,t.x,t.y,t.z),v+=1,l.setXYZ(v,n.x,n.y,n.z),v+=1}else if(f&&f.isBufferGeometry)for(var D=f.attributes.position,U=f.attributes.normal,v=0,T=0,L=D.count;T<L;T++)t.set(D.getX(T),D.getY(T),D.getZ(T)).applyMatrix4(u),n.set(U.getX(T),U.getY(T),U.getZ(T)),n.applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),l.setXYZ(v,t.x,t.y,t.z),v+=1,l.setXYZ(v,n.x,n.y,n.z),v+=1;l.needsUpdate=!0}}(),ua.prototype=Object.create(Yt.prototype),ua.prototype.constructor=ua,ua.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},ua.prototype.update=function(){var t=new G,n=new G;return function(){this.light.updateMatrixWorld();var i=this.light.distance?this.light.distance:1e3,o=i*Math.tan(this.light.angle);this.cone.scale.set(o,o,i),t.setFromMatrixPosition(this.light.matrixWorld),n.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(n.sub(t)),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),zo.prototype=Object.create(pn.prototype),zo.prototype.constructor=zo,zo.prototype.onBeforeRender=function(){var t=new G,n=new Ut,i=new Ut;return function(){var o=this.bones,u=this.geometry,l=u.getAttribute("position");i.getInverse(this.root.matrixWorld);for(var f=0,d=0;f<o.length;f++){var g=o[f];g.parent&&g.parent.isBone&&(n.multiplyMatrices(i,g.matrixWorld),t.setFromMatrixPosition(n),l.setXYZ(d,t.x,t.y,t.z),n.multiplyMatrices(i,g.parent.matrixWorld),t.setFromMatrixPosition(n),l.setXYZ(d+1,t.x,t.y,t.z),d+=2)}u.getAttribute("position").needsUpdate=!0}}(),Bo.prototype=Object.create(wn.prototype),Bo.prototype.constructor=Bo,Bo.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Bo.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)},ko.prototype=Object.create(Yt.prototype),ko.prototype.constructor=ko,ko.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ko.prototype.update=function(){var t=.5*this.light.width,n=.5*this.light.height,i=this.line.geometry.attributes.position,o=i.array;o[0]=t,o[1]=-n,o[2]=0,o[3]=t,o[4]=n,o[5]=0,o[6]=-t,o[7]=n,o[8]=0,o[9]=-t,o[10]=-n,o[11]=0,o[12]=t,o[13]=-n,o[14]=0,i.needsUpdate=!0,this.color!==void 0?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},Bi.prototype=Object.create(Yt.prototype),Bi.prototype.constructor=Bi,Bi.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Bi.prototype.update=function(){var t=new G,n=new ee,i=new ee;return function(){var o=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var u=o.geometry.getAttribute("color");n.copy(this.light.color),i.copy(this.light.groundColor);for(var l=0,f=u.count;l<f;l++){var d=l<f/2?n:i;u.setXYZ(l,d.r,d.g,d.b)}u.needsUpdate=!0}o.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),Ho.prototype=Object.create(pn.prototype),Ho.prototype.constructor=Ho,Qs.prototype=Object.create(pn.prototype),Qs.prototype.constructor=Qs,Go.prototype=Object.create(pn.prototype),Go.prototype.constructor=Go,Go.prototype.update=function(){var t=new G,n=new G,i=new dn;return function(){this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);for(var o=this.object.matrixWorld,u=this.geometry.attributes.position,l=this.object.geometry,f=l.vertices,d=l.faces,g=0,v=0,y=d.length;v<y;v++){var b=d[v],w=b.normal;t.copy(f[b.a]).add(f[b.b]).add(f[b.c]).divideScalar(3).applyMatrix4(o),n.copy(w).applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),u.setXYZ(g,t.x,t.y,t.z),g+=1,u.setXYZ(g,n.x,n.y,n.z),g+=1}u.needsUpdate=!0}}(),Vo.prototype=Object.create(Yt.prototype),Vo.prototype.constructor=Vo,Vo.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Vo.prototype.update=function(){var t=new G,n=new G,i=new G;return function(){t.setFromMatrixPosition(this.light.matrixWorld),n.setFromMatrixPosition(this.light.target.matrixWorld),i.subVectors(n,t),this.lightPlane.lookAt(i),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(i),this.targetLine.scale.z=i.length()}}(),jo.prototype=Object.create(pn.prototype),jo.prototype.constructor=jo,jo.prototype.update=function(){function t(l,f,d,g){o.set(f,d,g).unproject(u);var v=i[l];if(v!==void 0)for(var y=n.getAttribute("position"),b=0,w=v.length;b<w;b++)y.setXYZ(v[b],o.x,o.y,o.z)}var n,i,o=new G,u=new di;return function(){n=this.geometry,i=this.pointMap,u.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-1,-1,-1),t("n2",1,-1,-1),t("n3",-1,1,-1),t("n4",1,1,-1),t("f1",-1,-1,1),t("f2",1,-1,1),t("f3",-1,1,1),t("f4",1,1,1),t("u1",.7,1.1,-1),t("u2",-.7,1.1,-1),t("u3",0,2,-1),t("cf1",-1,0,1),t("cf2",1,0,1),t("cf3",0,-1,1),t("cf4",0,1,1),t("cn1",-1,0,-1),t("cn2",1,0,-1),t("cn3",0,-1,-1),t("cn4",0,1,-1),n.getAttribute("position").needsUpdate=!0}}(),ca.prototype=Object.create(pn.prototype),ca.prototype.constructor=ca,ca.prototype.update=function(){var t=new _t;return function(n){if(n!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&t.setFromObject(this.object),!t.isEmpty()){var i=t.min,o=t.max,u=this.geometry.attributes.position,l=u.array;l[0]=o.x,l[1]=o.y,l[2]=o.z,l[3]=i.x,l[4]=o.y,l[5]=o.z,l[6]=i.x,l[7]=i.y,l[8]=o.z,l[9]=o.x,l[10]=i.y,l[11]=o.z,l[12]=o.x,l[13]=o.y,l[14]=i.z,l[15]=i.x,l[16]=o.y,l[17]=i.z,l[18]=i.x,l[19]=i.y,l[20]=i.z,l[21]=o.x,l[22]=i.y,l[23]=i.z,u.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),ca.prototype.setFromObject=function(t){return this.object=t,this.update(),this},Wo.prototype=Object.create(pn.prototype),Wo.prototype.constructor=Wo,Wo.prototype.onBeforeRender=function(){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5))},Xo.prototype=Object.create(mr.prototype),Xo.prototype.constructor=Xo,Xo.prototype.onBeforeRender=function(){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.lookAt(this.plane.normal),this.updateMatrixWorld()};var ns,rs;Xa.prototype=Object.create(Yt.prototype),Xa.prototype.constructor=Xa,Xa.prototype.setDirection=function(){var t,n=new G;return function(i){i.y>.99999?this.quaternion.set(0,0,0,1):i.y<-.99999?this.quaternion.set(1,0,0,0):(n.set(i.z,0,-i.x).normalize(),t=Math.acos(i.y),this.quaternion.setFromAxisAngle(n,t))}}(),Xa.prototype.setLength=function(t,n,i){n===void 0&&(n=.2*t),i===void 0&&(i=.2*n),this.line.scale.set(1,Math.max(0,t-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=t,this.cone.updateMatrix()},Xa.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},ec.prototype=Object.create(pn.prototype),ec.prototype.constructor=ec;var vu=new G,wh=new Fl,Nc=new Fl,Mh=new Fl;Wr.prototype=Object.create(vn.prototype),Wr.prototype.constructor=Wr,Wr.prototype.getPoint=function(t){var n=this.points,i=n.length,o=(i-(this.closed?0:1))*t,u=Math.floor(o),l=o-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/n.length)+1)*n.length:l===0&&u===i-1&&(u=i-2,l=1);var f,d,g,v;if(this.closed||u>0?f=n[(u-1)%i]:(vu.subVectors(n[0],n[1]).add(n[0]),f=vu),d=n[u%i],g=n[(u+1)%i],this.closed||u+2<i?v=n[(u+2)%i]:(vu.subVectors(n[i-1],n[i-2]).add(n[i-1]),v=vu),this.type===void 0||this.type==="centripetal"||this.type==="chordal"){var y=this.type==="chordal"?.5:.25,b=Math.pow(f.distanceToSquared(d),y),w=Math.pow(d.distanceToSquared(g),y),T=Math.pow(g.distanceToSquared(v),y);w<1e-4&&(w=1),b<1e-4&&(b=w),T<1e-4&&(T=w),wh.initNonuniformCatmullRom(f.x,d.x,g.x,v.x,b,w,T),Nc.initNonuniformCatmullRom(f.y,d.y,g.y,v.y,b,w,T),Mh.initNonuniformCatmullRom(f.z,d.z,g.z,v.z,b,w,T)}else if(this.type==="catmullrom"){var L=this.tension!==void 0?this.tension:.5;wh.initCatmullRom(f.x,d.x,g.x,v.x,L),Nc.initCatmullRom(f.y,d.y,g.y,v.y,L),Mh.initCatmullRom(f.z,d.z,g.z,v.z,L)}return new G(wh.calc(l),Nc.calc(l),Mh.calc(l))},$s.prototype=Object.create(vn.prototype),$s.prototype.constructor=$s,$s.prototype.getPoint=function(t){var n=this.v0,i=this.v1,o=this.v2,u=this.v3;return new G(qs(t,n.x,i.x,o.x,u.x),qs(t,n.y,i.y,o.y,u.y),qs(t,n.z,i.z,o.z,u.z))},Js.prototype=Object.create(vn.prototype),Js.prototype.constructor=Js,Js.prototype.getPoint=function(t){var n=this.v0,i=this.v1,o=this.v2;return new G(Po(t,n.x,i.x,o.x),Po(t,n.y,i.y,o.y),Po(t,n.z,i.z,o.z))},ri.prototype=Object.create(vn.prototype),ri.prototype.constructor=ri,ri.prototype.getPoint=function(t){if(t===1)return this.v2.clone();var n=new G;return n.subVectors(this.v2,this.v1),n.multiplyScalar(t),n.add(this.v1),n},tu.prototype=Object.create(jr.prototype),tu.prototype.constructor=tu;var Fp={createMultiMaterialObject:function(t,n){for(var i=new Es,o=0,u=n.length;o<u;o++)i.add(new wn(t,n[o]));return i},detach:function(t,n,i){t.applyMatrix(n.matrixWorld),n.remove(t),i.add(t)},attach:function(t,n,i){t.applyMatrix(new Ut().getInverse(i.matrixWorld)),n.remove(t),i.add(t)}},zp=0,Bp=1;vn.create=function(t,n){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(vn.prototype),t.prototype.constructor=t,t.prototype.getPoint=n,t},ic.prototype=Object.create(Wr.prototype),Sf.prototype=Object.create(Wr.prototype),Bl.prototype=Object.create(Wr.prototype),Object.assign(Bl.prototype,{initFromArray:function(t){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(t){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(t){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Ho.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},zo.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Xn.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(_t.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),ho.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Ce.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(dn.prototype,{flattenToArrayOffset:function(t,n){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,n)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t,n,i){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(t,n,i){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Ut.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,n){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,n)},getPosition:function(){var t;return function(){return t===void 0&&(t=new G),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t,n,i){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(t,n,i){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,n,i,o,u,l){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,n,o,i,u,l)}}),bn.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Ct.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(ea.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(_i.prototype,{extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ra(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Da(this,t)}}),Object.assign(gt.prototype,{fromAttribute:function(t,n,i){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,n,i)}}),Object.assign(G.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,n){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(n,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,n,i){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,n,i)}}),Object.assign(Bt.prototype,{fromAttribute:function(t,n,i){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,n,i)}}),Ee.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(Yt.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,n){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(n,t)}}),Object.defineProperties(Yt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(wr.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Ms.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(vn.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),zn.prototype.setLens=function(t,n){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),n!==void 0&&(this.filmGauge=n),this.setFocalLength(t)},Object.defineProperties(An.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Re.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(Zt.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,n,i){i!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,n)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Zt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Zs.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(_e.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ee}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===Wl}}}),Object.defineProperties(Mr.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(qn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Iu.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(Iu.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=t}}}),Object.defineProperties(Li.prototype,{cullFace:{get:function(){return this.renderReverseSided?ac:ha},set:function(t){var n=t!==ha;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+n+"."),this.renderReverseSided=n}}}),Object.defineProperties(de.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Uo.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var n=this;return new Zu().load(t,function(i){n.setBuffer(i)}),this},Ll.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Oo.prototype.updateCubeMap=function(t,n){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,n)};var kp={merge:function(t,n,i){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var o;n.isMesh&&(n.matrixAutoUpdate&&n.updateMatrix(),o=n.matrix,n=n.geometry),t.merge(n,o,i)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},Hp={crossOrigin:void 0,loadTexture:function(t,n,i,o){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var u=new Bu;u.setCrossOrigin(this.crossOrigin);var l=u.load(t,i,void 0,o);return n&&(l.mapping=n),l},loadTextureCube:function(t,n,i,o){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var u=new wl;u.setCrossOrigin(this.crossOrigin);var l=u.load(t,i,void 0,o);return n&&(l.mapping=n),l},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}}},function($n,P,C){(function(A,gt){gt(P)})(0,function(A){function gt(e){return function(r,a){return ya(e(r),a)}}function Dt(e,r){return[e,r]}function Bt(e,r,a){var s=(r-e)/Math.max(0,a),c=Math.floor(Math.log(s)/Math.LN10),h=s/Math.pow(10,c);return c>=0?(h>=Se?10:h>=ae?5:h>=kn?2:1)*Math.pow(10,c):-Math.pow(10,-c)/(h>=Se?10:h>=ae?5:h>=kn?2:1)}function de(e,r,a){var s=Math.abs(r-e)/Math.max(0,a),c=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),h=s/c;return h>=Se?c*=10:h>=ae?c*=5:h>=kn&&(c*=2),r<e?-c:c}function fe(e){return e.length}function Ct(e){return"translate("+(e+.5)+",0)"}function G(e){return"translate(0,"+(e+.5)+")"}function Ut(e){return function(r){return+e(r)}}function le(e){var r=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(r=Math.round(r)),function(a){return+e(a)+r}}function pe(){return!this.__axis}function xe(e,r){function a(M){var R=c==null?r.ticks?r.ticks.apply(r,s):r.domain():c,O=h==null?r.tickFormat?r.tickFormat.apply(r,s):Y0:h,I=Math.max(p,0)+x,H=r.range(),j=+H[0]+.5,W=+H[H.length-1]+.5,V=(r.bandwidth?le:Ut)(r.copy()),rt=M.selection?M.selection():M,ot=rt.selectAll(".domain").data([null]),it=rt.selectAll(".tick").data(R,r).order(),J=it.exit(),dt=it.enter().append("g").attr("class","tick"),pt=it.select("line"),At=it.select("text");ot=ot.merge(ot.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),it=it.merge(dt),pt=pt.merge(dt.append("line").attr("stroke","#000").attr(E+"2",_*p)),At=At.merge(dt.append("text").attr("fill","#000").attr(E,_*I).attr("dy",e===od?"0em":e===jp?"0.71em":"0.32em")),M!==rt&&(ot=ot.transition(M),it=it.transition(M),pt=pt.transition(M),At=At.transition(M),J=J.transition(M).attr("opacity",gg).attr("transform",function(bt){return isFinite(bt=V(bt))?S(bt):this.getAttribute("transform")}),dt.attr("opacity",gg).attr("transform",function(bt){var Mt=this.parentNode.__axis;return S(Mt&&isFinite(Mt=Mt(bt))?Mt:V(bt))})),J.remove(),ot.attr("d",e===Ah||e==sd?"M"+_*m+","+j+"H0.5V"+W+"H"+_*m:"M"+j+","+_*m+"V0.5H"+W+"V"+_*m),it.attr("opacity",1).attr("transform",function(bt){return S(V(bt))}),pt.attr(E+"2",_*p),At.attr(E,_*I).text(O),rt.filter(pe).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===sd?"start":e===Ah?"end":"middle"),rt.each(function(){this.__axis=V})}var s=[],c=null,h=null,p=6,m=6,x=3,_=e===od||e===Ah?-1:1,E=e===Ah||e===sd?"x":"y",S=e===od||e===jp?Ct:G;return a.scale=function(M){return arguments.length?(r=M,a):r},a.ticks=function(){return s=Vp.call(arguments),a},a.tickArguments=function(M){return arguments.length?(s=M==null?[]:Vp.call(M),a):s.slice()},a.tickValues=function(M){return arguments.length?(c=M==null?null:Vp.call(M),a):c&&c.slice()},a.tickFormat=function(M){return arguments.length?(h=M,a):h},a.tickSize=function(M){return arguments.length?(p=m=+M,a):p},a.tickSizeInner=function(M){return arguments.length?(p=+M,a):p},a.tickSizeOuter=function(M){return arguments.length?(m=+M,a):m},a.tickPadding=function(M){return arguments.length?(x=+M,a):x},a}function ie(e){return xe(od,e)}function un(e){return xe(sd,e)}function ge(e){return xe(jp,e)}function en(e){return xe(Ah,e)}function Ye(){for(var e,r=0,a=arguments.length,s={};r<a;++r){if(!(e=arguments[r]+"")||e in s)throw new Error("illegal type: "+e);s[e]=[]}return new Fe(s)}function Fe(e){this._=e}function In(e,r){return e.trim().split(/^|\s+/).map(function(a){var s="",c=a.indexOf(".");if(c>=0&&(s=a.slice(c+1),a=a.slice(0,c)),a&&!r.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:s}})}function dr(e,r){for(var a,s=0,c=e.length;s<c;++s)if((a=e[s]).name===r)return a.value}function Rt(e,r,a){for(var s=0,c=e.length;s<c;++s)if(e[s].name===r){e[s]=Z0,e=e.slice(0,s).concat(e.slice(s+1));break}return a!=null&&e.push({name:r,value:a}),e}function je(e){return function(){var r=this.ownerDocument,a=this.namespaceURI;return a===Wp&&r.documentElement.namespaceURI===Wp?r.createElement(e):r.createElementNS(a,e)}}function $e(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function xn(){return new ur}function ur(){this._="@"+(++K0).toString(36)}function Kr(e,r,a){return e=zt(e,r,a),function(s){var c=s.relatedTarget;c&&(c===this||8&c.compareDocumentPosition(this))||e.call(this,s)}}function zt(e,r,a){return function(s){var c=A.event;A.event=s;try{e.call(this,this.__data__,r,a)}finally{A.event=c}}}function ut(e){return e.trim().split(/^|\s+/).map(function(r){var a="",s=r.indexOf(".");return s>=0&&(a=r.slice(s+1),r=r.slice(0,s)),{type:r,name:a}})}function Nt(e){return function(){var r=this.__on;if(r){for(var a,s=0,c=-1,h=r.length;s<h;++s)a=r[s],e.type&&a.type!==e.type||a.name!==e.name?r[++c]=a:this.removeEventListener(a.type,a.listener,a.capture);++c?r.length=c:delete this.__on}}}function Ae(e,r,a){var s=yg.hasOwnProperty(e.type)?Kr:zt;return function(c,h,p){var m,x=this.__on,_=s(r,h,p);if(x){for(var E=0,S=x.length;E<S;++E)if((m=x[E]).type===e.type&&m.name===e.name)return this.removeEventListener(m.type,m.listener,m.capture),this.addEventListener(m.type,m.listener=_,m.capture=a),void(m.value=r)}this.addEventListener(e.type,_,a),m={type:e.type,name:e.name,value:r,listener:_,capture:a},x?x.push(m):this.__on=[m]}}function tt(e,r,a,s){var c=A.event;e.sourceEvent=A.event,A.event=e;try{return r.apply(a,s)}finally{A.event=c}}function _n(){}function Sn(){return[]}function cr(e,r){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=r}function We(e,r,a,s,c,h){for(var p,m=0,x=r.length,_=h.length;m<_;++m)(p=r[m])?(p.__data__=h[m],s[m]=p):a[m]=new cr(e,h[m]);for(;m<x;++m)(p=r[m])&&(c[m]=p)}function cn(e,r,a,s,c,h,p){var m,x,_,E={},S=r.length,M=h.length,R=new Array(S);for(m=0;m<S;++m)(x=r[m])&&(R[m]=_=_g+p.call(x,x.__data__,m,r),_ in E?c[m]=x:E[_]=x);for(m=0;m<M;++m)_=_g+p.call(e,h[m],m,h),(x=E[_])?(s[m]=x,x.__data__=h[m],E[_]=null):a[m]=new cr(e,h[m]);for(m=0;m<S;++m)(x=r[m])&&E[R[m]]===x&&(c[m]=x)}function Lu(e,r){return e<r?-1:e>r?1:e>=r?0:NaN}function Jn(e){return function(){this.removeAttribute(e)}}function Si(e){return function(){this.removeAttributeNS(e.space,e.local)}}function so(e,r){return function(){this.setAttribute(e,r)}}function uo(e,r){return function(){this.setAttributeNS(e.space,e.local,r)}}function Ea(e,r){return function(){var a=r.apply(this,arguments);a==null?this.removeAttribute(e):this.setAttribute(e,a)}}function Ai(e,r){return function(){var a=r.apply(this,arguments);a==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,a)}}function Zi(e){return function(){this.style.removeProperty(e)}}function pr(e,r,a){return function(){this.style.setProperty(e,r,a)}}function ee(e,r,a){return function(){var s=r.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,a)}}function Xn(e,r){return e.style.getPropertyValue(r)||$p(e).getComputedStyle(e,null).getPropertyValue(r)}function Ki(e){return function(){delete this[e]}}function kr(e,r){return function(){this[e]=r}}function Qi(e,r){return function(){var a=r.apply(this,arguments);a==null?delete this[e]:this[e]=a}}function _e(e){return e.trim().split(/^|\s+/)}function qn(e){return e.classList||new Hr(e)}function Hr(e){this._node=e,this._names=_e(e.getAttribute("class")||"")}function tr(e,r){for(var a=qn(e),s=-1,c=r.length;++s<c;)a.add(r[s])}function _t(e,r){for(var a=qn(e),s=-1,c=r.length;++s<c;)a.remove(r[s])}function Xe(e){return function(){tr(this,e)}}function dn(e){return function(){_t(this,e)}}function bn(e,r){return function(){(r.apply(this,arguments)?tr:_t)(this,e)}}function Ri(){this.textContent=""}function Li(e){return function(){this.textContent=e}}function op(e){return function(){var r=e.apply(this,arguments);this.textContent=r==null?"":r}}function $i(){this.innerHTML=""}function sl(e){return function(){this.innerHTML=e}}function Yt(e){return function(){var r=e.apply(this,arguments);this.innerHTML=r==null?"":r}}function di(){this.nextSibling&&this.parentNode.appendChild(this)}function co(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zn(){return null}function Ci(){var e=this.parentNode;e&&e.removeChild(this)}function Cu(e,r,a){var s=$p(e),c=s.CustomEvent;typeof c=="function"?c=new c(r,a):(c=s.document.createEvent("Event"),a?(c.initEvent(r,a.bubbles,a.cancelable),c.detail=a.detail):c.initEvent(r,!1,!1)),e.dispatchEvent(c)}function Ee(e,r){return function(){return Cu(this,e,r)}}function Re(e,r){return function(){return Cu(this,e,r.apply(this,arguments))}}function Bn(e,r){this._groups=e,this._parents=r}function Qr(){return new Bn([[document.documentElement]],Jp)}function Ta(){A.event.stopImmediatePropagation()}function Ji(e,r){var a=e.document.documentElement,s=ci(e).on("dragstart.drag",null);r&&(s.on("click.drag",zc,!0),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in a?s.on("selectstart.drag",null):(a.style.MozUserSelect=a.__noselect,delete a.__noselect)}function Pi(e,r,a,s,c,h,p,m,x,_){this.target=e,this.type=r,this.subject=a,this.identifier=s,this.active=c,this.x=h,this.y=p,this.dx=m,this.dy=x,this._=_}function gs(){return!A.event.button}function Sa(){return this.parentNode}function jt(e){return e==null?{x:A.event.x,y:A.event.y}:e}function vs(){return"ontouchstart"in this}function lo(e,r){var a=Object.create(e.prototype);for(var s in r)a[s]=r[s];return a}function pi(){}function Zt(e){var r;return e=(e+"").trim().toLowerCase(),(r=Py.exec(e))?(r=parseInt(r[1],16),new nn(r>>8&15|r>>4&240,r>>4&15|240&r,(15&r)<<4|15&r,1)):(r=Ny.exec(e))?Aa(parseInt(r[1],16)):(r=Iy.exec(e))?new nn(r[1],r[2],r[3],1):(r=Oy.exec(e))?new nn(255*r[1]/100,255*r[2]/100,255*r[3]/100,1):(r=Uy.exec(e))?ta(r[1],r[2],r[3],r[4]):(r=Dy.exec(e))?ta(255*r[1]/100,255*r[2]/100,255*r[3]/100,r[4]):(r=Fy.exec(e))?ea(r[1],r[2]/100,r[3]/100,1):(r=zy.exec(e))?ea(r[1],r[2]/100,r[3]/100,r[4]):bg.hasOwnProperty(e)?Aa(bg[e]):e==="transparent"?new nn(NaN,NaN,NaN,0):null}function Aa(e){return new nn(e>>16&255,e>>8&255,255&e,1)}function ta(e,r,a,s){return s<=0&&(e=r=a=NaN),new nn(e,r,a,s)}function Ra(e){return e instanceof pi||(e=Zt(e)),e?(e=e.rgb(),new nn(e.r,e.g,e.b,e.opacity)):new nn}function $r(e,r,a,s){return arguments.length===1?Ra(e):new nn(e,r,a,s==null?1:s)}function nn(e,r,a,s){this.r=+e,this.g=+r,this.b=+a,this.opacity=+s}function ea(e,r,a,s){return s<=0?e=r=a=NaN:a<=0||a>=1?e=r=NaN:r<=0&&(e=NaN),new wn(e,r,a,s)}function ho(e){if(e instanceof wn)return new wn(e.h,e.s,e.l,e.opacity);if(e instanceof pi||(e=Zt(e)),!e)return new wn;if(e instanceof wn)return e;e=e.rgb();var r=e.r/255,a=e.g/255,s=e.b/255,c=Math.min(r,a,s),h=Math.max(r,a,s),p=NaN,m=h-c,x=(h+c)/2;return m?(p=r===h?(a-s)/m+6*(a<s):a===h?(s-r)/m+2:(r-a)/m+4,m/=x<.5?h+c:2-h-c,p*=60):m=x>0&&x<1?0:p,new wn(p,m,x,e.opacity)}function Gr(e,r,a,s){return arguments.length===1?ho(e):new wn(e,r,a,s==null?1:s)}function wn(e,r,a,s){this.h=+e,this.s=+r,this.l=+a,this.opacity=+s}function ul(e,r,a){return 255*(e<60?r+(a-r)*e/60:e<180?a:e<240?r+(a-r)*(240-e)/60:r)}function cl(e){if(e instanceof Ni)return new Ni(e.l,e.a,e.b,e.opacity);if(e instanceof na){var r=e.h*wg;return new Ni(e.l,Math.cos(r)*e.c,Math.sin(r)*e.c,e.opacity)}e instanceof nn||(e=Ra(e));var a=dl(e.r),s=dl(e.g),c=dl(e.b),h=ll((.4124564*a+.3575761*s+.1804375*c)/Eg),p=ll((.2126729*a+.7151522*s+.072175*c)/Tg);return new Ni(116*p-16,500*(h-p),200*(p-ll((.0193339*a+.119192*s+.9503041*c)/Sg)),e.opacity)}function Pu(e,r,a,s){return arguments.length===1?cl(e):new Ni(e,r,a,s==null?1:s)}function Ni(e,r,a,s){this.l=+e,this.a=+r,this.b=+a,this.opacity=+s}function ll(e){return e>By?Math.pow(e,1/3):e/Rg+Ag}function hl(e){return e>Hc?e*e*e:Rg*(e-Ag)}function fl(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function dl(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function sp(e){if(e instanceof na)return new na(e.h,e.c,e.l,e.opacity);e instanceof Ni||(e=cl(e));var r=Math.atan2(e.b,e.a)*Mg;return new na(r<0?r+360:r,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Nu(e,r,a,s){return arguments.length===1?sp(e):new na(e,r,a,s==null?1:s)}function na(e,r,a,s){this.h=+e,this.c=+r,this.l=+a,this.opacity=+s}function up(e){if(e instanceof La)return new La(e.h,e.s,e.l,e.opacity);e instanceof nn||(e=Ra(e));var r=e.r/255,a=e.g/255,s=e.b/255,c=(Ng*s+Cg*r-Pg*a)/(Ng+Cg-Pg),h=s-c,p=(Ph*(a-c)-nm*h)/hd,m=Math.sqrt(p*p+h*h)/(Ph*c*(1-c)),x=m?Math.atan2(p,h)*Mg-120:NaN;return new La(x<0?x+360:x,m,c,e.opacity)}function Jr(e,r,a,s){return arguments.length===1?up(e):new La(e,r,a,s==null?1:s)}function La(e,r,a,s){this.h=+e,this.s=+r,this.l=+a,this.opacity=+s}function pl(e,r,a,s,c){var h=e*e,p=h*e;return((1-3*e+3*h-p)*r+(4-6*h+3*p)*a+(1+3*e+3*h-3*p)*s+p*c)/6}function ml(e,r){return function(a){return e+a*r}}function gl(e,r,a){return e=Math.pow(e,a),r=Math.pow(r,a)-e,a=1/a,function(s){return Math.pow(e+s*r,a)}}function vl(e,r){var a=r-e;return a?ml(e,a>180||a<-180?a-360*Math.round(a/360):a):pd(isNaN(e)?r:e)}function cp(e){return(e=+e)==1?Gn:function(r,a){return a-r?gl(r,a,e):pd(isNaN(r)?a:r)}}function Gn(e,r){var a=r-e;return a?ml(e,a):pd(isNaN(e)?r:e)}function cf(e){return function(r){var a,s,c=r.length,h=new Array(c),p=new Array(c),m=new Array(c);for(a=0;a<c;++a)s=$r(r[a]),h[a]=s.r||0,p[a]=s.g||0,m[a]=s.b||0;return h=e(h),p=e(p),m=e(m),s.opacity=1,function(x){return s.r=h(x),s.g=p(x),s.b=m(x),s+""}}}function lp(e){return function(){return e}}function ys(e){return function(r){return e(r)+""}}function lf(e){return e==="none"?sm:(Nh||(Nh=document.createElement("DIV"),rm=document.documentElement,Ig=document.defaultView),Nh.style.transform=e,e=Ig.getComputedStyle(rm.appendChild(Nh),null).getPropertyValue("transform"),rm.removeChild(Nh),e=e.slice(7,-1).split(","),Hg(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function yl(e){return e==null?sm:(fd||(fd=document.createElementNS("http://www.w3.org/2000/svg","g")),fd.setAttribute("transform",e),(e=fd.transform.baseVal.consolidate())?(e=e.matrix,Hg(e.a,e.b,e.c,e.d,e.e,e.f)):sm)}function xl(e,r,a,s){function c(_){return _.length?_.pop()+" ":""}function h(_,E,S,M,R,O){if(_!==S||E!==M){var I=R.push("translate(",null,r,null,a);O.push({i:I-4,x:li(_,S)},{i:I-2,x:li(E,M)})}else(S||M)&&R.push("translate("+S+r+M+a)}function p(_,E,S,M){_!==E?(_-E>180?E+=360:E-_>180&&(_+=360),M.push({i:S.push(c(S)+"rotate(",null,s)-2,x:li(_,E)})):E&&S.push(c(S)+"rotate("+E+s)}function m(_,E,S,M){_!==E?M.push({i:S.push(c(S)+"skewX(",null,s)-2,x:li(_,E)}):E&&S.push(c(S)+"skewX("+E+s)}function x(_,E,S,M,R,O){if(_!==S||E!==M){var I=R.push(c(R)+"scale(",null,",",null,")");O.push({i:I-4,x:li(_,S)},{i:I-2,x:li(E,M)})}else S===1&&M===1||R.push(c(R)+"scale("+S+","+M+")")}return function(_,E){var S=[],M=[];return _=e(_),E=e(E),h(_.translateX,_.translateY,E.translateX,E.translateY,S,M),p(_.rotate,E.rotate,S,M),m(_.skewX,E.skewX,S,M),x(_.scaleX,_.scaleY,E.scaleX,E.scaleY,S,M),_=E=null,function(R){for(var O,I=-1,H=M.length;++I<H;)S[(O=M[I]).i]=O.x(R);return S.join("")}}}function hf(e){return((e=Math.exp(e))+1/e)/2}function hp(e){return((e=Math.exp(e))-1/e)/2}function fp(e){return((e=Math.exp(2*e))-1)/(e+1)}function ff(e){return function(r,a){var s=e((r=Gr(r)).h,(a=Gr(a)).h),c=Gn(r.s,a.s),h=Gn(r.l,a.l),p=Gn(r.opacity,a.opacity);return function(m){return r.h=s(m),r.s=c(m),r.l=h(m),r.opacity=p(m),r+""}}}function dp(e,r){var a=Gn((e=Pu(e)).l,(r=Pu(r)).l),s=Gn(e.a,r.a),c=Gn(e.b,r.b),h=Gn(e.opacity,r.opacity);return function(p){return e.l=a(p),e.a=s(p),e.b=c(p),e.opacity=h(p),e+""}}function df(e){return function(r,a){var s=e((r=Nu(r)).h,(a=Nu(a)).h),c=Gn(r.c,a.c),h=Gn(r.l,a.l),p=Gn(r.opacity,a.opacity);return function(m){return r.h=s(m),r.c=c(m),r.l=h(m),r.opacity=p(m),r+""}}}function xs(e){return function r(a){function s(c,h){var p=e((c=Jr(c)).h,(h=Jr(h)).h),m=Gn(c.s,h.s),x=Gn(c.l,h.l),_=Gn(c.opacity,h.opacity);return function(E){return c.h=p(E),c.s=m(E),c.l=x(Math.pow(E,a)),c.opacity=_(E),c+""}}return a=+a,s.gamma=r,s}(1)}function fo(){return os||(Xg(pp),os=cm.now()+um)}function pp(){os=0}function _s(){this._call=this._time=this._next=null}function bs(e,r,a){var s=new _s;return s.restart(e,r,a),s}function Iu(){fo(),++Gc;for(var e,r=dd;r;)(e=os-r._time)>=0&&r._call.call(null,e),r=r._next;--Gc}function Ca(){os=(gd=cm.now())+um,Gc=Fh=0;try{Iu()}finally{Gc=0,Ou(),os=0}}function po(){var e=cm.now(),r=e-gd;r>Wg&&(um-=r,gd=e)}function Ou(){for(var e,r,a=dd,s=1/0;a;)a._call?(s>a._time&&(s=a._time),e=a,a=a._next):(r=a._next,a._next=null,a=e?e._next=r:dd=r);Ih=e,ws(s)}function ws(e){if(!Gc){Fh&&(Fh=clearTimeout(Fh));var r=e-os;r>24?(e<1/0&&(Fh=setTimeout(Ca,r)),zh&&(zh=clearInterval(zh))):(zh||(gd=os,zh=setInterval(po,Wg)),Gc=1,Xg(Ca))}}function mi(e,r){var a=e.__transition;if(!a||!(a=a[r])||a.state>qg)throw new Error("too late");return a}function ti(e,r){var a=e.__transition;if(!a||!(a=a[r])||a.state>vd)throw new Error("too late");return a}function wr(e,r){var a=e.__transition;if(!a||!(a=a[r]))throw new Error("too late");return a}function Ms(e,r,a){function s(_){a.state=hm,a.timer.restart(c,a.delay,a.time),a.delay<=_&&c(_-a.delay)}function c(_){var E,S,M,R;if(a.state!==hm)return p();for(E in x)if(R=x[E],R.name===a.name){if(R.state===fm)return lm(c);R.state===Yg?(R.state=yd,R.timer.stop(),R.on.call("interrupt",e,e.__data__,R.index,R.group),delete x[E]):+E<r&&(R.state=yd,R.timer.stop(),delete x[E])}if(lm(function(){a.state===fm&&(a.state=Yg,a.timer.restart(h,a.delay,a.time),h(_))}),a.state=vd,a.on.call("start",e,e.__data__,a.index,a.group),a.state===vd){for(a.state=fm,m=new Array(M=a.tween.length),E=0,S=-1;E<M;++E)(R=a.tween[E].value.call(e,e.__data__,a.index,a.group))&&(m[++S]=R);m.length=S+1}}function h(_){for(var E=_<a.duration?a.ease.call(null,_/a.duration):(a.timer.restart(p),a.state=dm,1),S=-1,M=m.length;++S<M;)m[S].call(null,E);a.state===dm&&(a.on.call("end",e,e.__data__,a.index,a.group),p())}function p(){a.state=yd,a.timer.stop(),delete x[r];for(var _ in x)return;delete e.__transition}var m,x=e.__transition;x[r]=a,a.timer=bs(s,0,a.time)}function Uu(e,r){var a,s;return function(){var c=ti(this,e),h=c.tween;if(h!==a){s=a=h;for(var p=0,m=s.length;p<m;++p)if(s[p].name===r){s=s.slice(),s.splice(p,1);break}}c.tween=s}}function Du(e,r,a){var s,c;if(typeof a!="function")throw new Error;return function(){var h=ti(this,e),p=h.tween;if(p!==s){c=(s=p).slice();for(var m={name:r,value:a},x=0,_=c.length;x<_;++x)if(c[x].name===r){c[x]=m;break}x===_&&c.push(m)}h.tween=c}}function rn(e,r,a){var s=e._id;return e.each(function(){var c=ti(this,s);(c.value||(c.value={}))[r]=a.apply(this,arguments)}),function(c){return wr(c,s).value[r]}}function mr(e){return function(){this.removeAttribute(e)}}function pn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Fu(e,r,a){var s,c;return function(){var h=this.getAttribute(e);return h===a?null:h===s?c:c=r(s=h,a)}}function ei(e,r,a){var s,c;return function(){var h=this.getAttributeNS(e.space,e.local);return h===a?null:h===s?c:c=r(s=h,a)}}function mo(e,r,a){var s,c,h;return function(){var p,m=a(this);return m==null?void this.removeAttribute(e):(p=this.getAttribute(e),p===m?null:p===s&&m===c?h:h=r(s=p,c=m))}}function Es(e,r,a){var s,c,h;return function(){var p,m=a(this);return m==null?void this.removeAttributeNS(e.space,e.local):(p=this.getAttributeNS(e.space,e.local),p===m?null:p===s&&m===c?h:h=r(s=p,c=m))}}function zu(e,r){function a(){var s=this,c=r.apply(s,arguments);return c&&function(h){s.setAttributeNS(e.space,e.local,c(h))}}return a._value=r,a}function go(e,r){function a(){var s=this,c=r.apply(s,arguments);return c&&function(h){s.setAttribute(e,c(h))}}return a._value=r,a}function Ts(e,r){return function(){mi(this,e).delay=+r.apply(this,arguments)}}function vo(e,r){return r=+r,function(){mi(this,e).delay=r}}function Ss(e,r){return function(){ti(this,e).duration=+r.apply(this,arguments)}}function yo(e,r){return r=+r,function(){ti(this,e).duration=r}}function As(e,r){if(typeof r!="function")throw new Error;return function(){ti(this,e).ease=r}}function gr(e){return(e+"").trim().split(/^|\s+/).every(function(r){var a=r.indexOf(".");return a>=0&&(r=r.slice(0,a)),!r||r==="start"})}function Rs(e,r,a){var s,c,h=gr(r)?mi:ti;return function(){var p=h(this,e),m=p.on;m!==s&&(c=(s=m).copy()).on(r,a),p.on=c}}function xo(e){return function(){var r=this.parentNode;for(var a in this.__transition)if(+a!==e)return;r&&r.removeChild(this)}}function Ls(e,r){var a,s,c;return function(){var h=Xn(this,e),p=(this.style.removeProperty(e),Xn(this,e));return h===p?null:h===a&&p===s?c:c=r(a=h,s=p)}}function Pa(e){return function(){this.style.removeProperty(e)}}function Cs(e,r,a){var s,c;return function(){var h=Xn(this,e);return h===a?null:h===s?c:c=r(s=h,a)}}function _o(e,r,a){var s,c,h;return function(){var p=Xn(this,e),m=a(this);return m==null&&(this.style.removeProperty(e),m=Xn(this,e)),p===m?null:p===s&&m===c?h:h=r(s=p,c=m)}}function Ps(e,r,a){function s(){var c=this,h=r.apply(c,arguments);return h&&function(p){c.style.setProperty(e,h(p),a)}}return s._value=r,s}function bo(e){return function(){this.textContent=e}}function Ns(e){return function(){var r=e(this);this.textContent=r==null?"":r}}function lr(e,r,a,s){this._groups=e,this._parents=r,this._name=a,this._id=s}function wo(e){return Qr().transition(e)}function Na(){return++g1}function Is(e){return+e}function Mo(e){return e*e}function ra(e){return e*(2-e)}function Vr(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function Os(e){return e*e*e}function Eo(e){return--e*e*e+1}function Ia(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}function Oa(e){return 1-Math.cos(e*$g)}function Us(e){return Math.sin(e*$g)}function Ua(e){return(1-Math.cos(Qg*e))/2}function Ds(e){return Math.pow(2,10*e-10)}function To(e){return 1-Math.pow(2,-10*e)}function Da(e){return((e*=2)<=1?Math.pow(2,10*e-10):2-Math.pow(2,10-10*e))/2}function So(e){return 1-Math.sqrt(1-e*e)}function Ao(e){return Math.sqrt(1- --e*e)}function ia(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}function Ii(e){return 1-Oi(1-e)}function Oi(e){return(e=+e)<pm?_d*e*e:e<_1?_d*(e-=x1)*e+b1:e<M1?_d*(e-=w1)*e+E1:_d*(e-=T1)*e+S1}function Fs(e){return((e*=2)<=1?1-Oi(1-e):Oi(e-1)+1)/2}function zs(e,r){for(var a;!(a=e.__transition)||!(a=a[r]);)if(!(e=e.parentNode))return mm.time=fo(),mm;return a}function Fa(){A.event.stopImmediatePropagation()}function gi(e){return{type:e}}function Ro(){return!A.event.button}function vi(){var e=this.ownerSVGElement||this;return[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Ui(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Mr(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function za(e){var r=e.__brush;return r?r.dim.output(r.selection):null}function Ba(){return Di(wd)}function ka(){return Di(Md)}function Di(e){function r(M){var R=M.property("__brush",p).selectAll(".overlay").data([gi("overlay")]);R.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",eo.overlay).merge(R).each(function(){var I=Ui(this).extent;ci(this).attr("x",I[0][0]).attr("y",I[0][1]).attr("width",I[1][0]-I[0][0]).attr("height",I[1][1]-I[0][1])}),M.selectAll(".selection").data([gi("selection")]).enter().append("rect").attr("class","selection").attr("cursor",eo.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var O=M.selectAll(".handle").data(e.handles,function(I){return I.type});O.exit().remove(),O.enter().append("rect").attr("class",function(I){return"handle handle--"+I.type}).attr("cursor",function(I){return eo[I.type]}),M.each(a).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",h)}function a(){var M=ci(this),R=Ui(this).selection;R?(M.selectAll(".selection").style("display",null).attr("x",R[0][0]).attr("y",R[0][1]).attr("width",R[1][0]-R[0][0]).attr("height",R[1][1]-R[0][1]),M.selectAll(".handle").style("display",null).attr("x",function(O){return O.type[O.type.length-1]==="e"?R[1][0]-S/2:R[0][0]-S/2}).attr("y",function(O){return O.type[0]==="s"?R[1][1]-S/2:R[0][1]-S/2}).attr("width",function(O){return O.type==="n"||O.type==="s"?R[1][0]-R[0][0]+S:S}).attr("height",function(O){return O.type==="e"||O.type==="w"?R[1][1]-R[0][1]+S:S})):M.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function s(M,R){return M.__brush.emitter||new c(M,R)}function c(M,R){this.that=M,this.args=R,this.state=M.__brush,this.active=0}function h(){function M(){var Fn=as(Pt);!Qn||Mt||Jt||(Math.abs(Fn[0]-oe[0])>Math.abs(Fn[1]-oe[1])?Jt=!0:Mt=!0),oe=Fn,bt=!0,bd(),R()}function R(){var Fn;switch(pt=oe[0]-Xt[0],At=oe[1]-Xt[1],ct){case gm:case nv:mt&&(pt=Math.max(fn-j,Math.min(Be-ot,pt)),W=j+pt,it=ot+pt),xt&&(At=Math.max(an-V,Math.min(tn-J,At)),rt=V+At,dt=J+At);break;case Wc:mt<0?(pt=Math.max(fn-j,Math.min(Be-j,pt)),W=j+pt,it=ot):mt>0&&(pt=Math.max(fn-ot,Math.min(Be-ot,pt)),W=j,it=ot+pt),xt<0?(At=Math.max(an-V,Math.min(tn-V,At)),rt=V+At,dt=J):xt>0&&(At=Math.max(an-J,Math.min(tn-J,At)),rt=V,dt=J+At);break;case Xc:mt&&(W=Math.max(fn,Math.min(Be,j-pt*mt)),it=Math.max(fn,Math.min(Be,ot+pt*mt))),xt&&(rt=Math.max(an,Math.min(tn,V-At*xt)),dt=Math.max(an,Math.min(tn,J+At*xt)))}it<W&&(mt*=-1,Fn=j,j=ot,ot=Fn,Fn=W,W=it,it=Fn,Ht in rv&&sr.attr("cursor",eo[Ht=rv[Ht]])),dt<rt&&(xt*=-1,Fn=V,V=J,J=Fn,Fn=rt,rt=dt,dt=Fn,Ht in iv&&sr.attr("cursor",eo[Ht=iv[Ht]])),Gt.selection&&(Me=Gt.selection),Mt&&(W=Me[0][0],it=Me[1][0]),Jt&&(rt=Me[0][1],dt=Me[1][1]),Me[0][0]===W&&Me[0][1]===rt&&Me[1][0]===it&&Me[1][1]===dt||(Gt.selection=[[W,rt],[it,dt]],a.call(Pt),Oe.brush())}function O(){if(Fa(),A.event.touches){if(A.event.touches.length)return;m&&clearTimeout(m),m=setTimeout(function(){m=null},500),Kt.on("touchmove.brush touchend.brush touchcancel.brush",null)}else Ji(A.event.view,bt),Ru.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Kt.attr("pointer-events","all"),sr.attr("cursor",eo.overlay),Gt.selection&&(Me=Gt.selection),Mr(Me)&&(Gt.selection=null,a.call(Pt)),Oe.end()}function I(){switch(A.event.keyCode){case 16:Qn=mt&&xt;break;case 18:ct===Wc&&(mt&&(ot=it-pt*mt,j=W+pt*mt),xt&&(J=dt-At*xt,V=rt+At*xt),ct=Xc,R());break;case 32:ct!==Wc&&ct!==Xc||(mt<0?ot=it-pt:mt>0&&(j=W-pt),xt<0?J=dt-At:xt>0&&(V=rt-At),ct=gm,sr.attr("cursor",eo.selection),R());break;default:return}bd()}function H(){switch(A.event.keyCode){case 16:Qn&&(Mt=Jt=Qn=!1,R());break;case 18:ct===Xc&&(mt<0?ot=it:mt>0&&(j=W),xt<0?J=dt:xt>0&&(V=rt),ct=Wc,R());break;case 32:ct===gm&&(A.event.altKey?(mt&&(ot=it-pt*mt,j=W+pt*mt),xt&&(J=dt-At*xt,V=rt+At*xt),ct=Xc):(mt<0?ot=it:mt>0&&(j=W),xt<0?J=dt:xt>0&&(V=rt),ct=Wc),sr.attr("cursor",eo[Ht]),R());break;default:return}bd()}if(A.event.touches){if(A.event.changedTouches.length<A.event.touches.length)return bd()}else if(m)return;if(_.apply(this,arguments)){var j,W,V,rt,ot,it,J,dt,pt,At,bt,Mt,Jt,Pt=this,Ht=A.event.target.__data__.type,ct=(A.event.metaKey?Ht="overlay":Ht)==="selection"?nv:A.event.altKey?Xc:Wc,mt=e===Md?null:D1[Ht],xt=e===wd?null:F1[Ht],Gt=Ui(Pt),Vt=Gt.extent,Me=Gt.selection,fn=Vt[0][0],an=Vt[0][1],Be=Vt[1][0],tn=Vt[1][1],Qn=mt&&xt&&A.event.shiftKey,Xt=as(Pt),oe=Xt,Oe=s(Pt,arguments).beforestart();Ht==="overlay"?Gt.selection=Me=[[j=e===Md?fn:Xt[0],V=e===wd?an:Xt[1]],[ot=e===Md?Be:j,J=e===wd?tn:V]]:(j=Me[0][0],V=Me[0][1],ot=Me[1][0],J=Me[1][1]),W=j,rt=V,it=ot,dt=J;var Kt=ci(Pt).attr("pointer-events","none"),sr=Kt.selectAll(".overlay").attr("cursor",eo[Ht]);if(A.event.touches)Kt.on("touchmove.brush",M,!0).on("touchend.brush touchcancel.brush",O,!0);else{var Ru=ci(A.event.view).on("keydown.brush",I,!0).on("keyup.brush",H,!0).on("mousemove.brush",M,!0).on("mouseup.brush",O,!0);ld(A.event.view)}Fa(),_u(Pt),a.call(Pt),Oe.start()}}function p(){var M=this.__brush||{selection:null};return M.extent=x.apply(this,arguments),M.dim=e,M}var m,x=vi,_=Ro,E=Ye(r,"start","brush","end"),S=6;return r.move=function(M,R){M.selection?M.on("start.brush",function(){s(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){s(this,arguments).end()}).tween("brush",function(){function O(ot){H.selection=ot===1&&Mr(V)?null:rt(ot),a.call(I),j.brush()}var I=this,H=I.__brush,j=s(I,arguments),W=H.selection,V=e.input(typeof R=="function"?R.apply(this,arguments):R,H.extent),rt=Uh(W,V);return W&&V?O:O(1)}):M.each(function(){var O=this,I=arguments,H=O.__brush,j=e.input(typeof R=="function"?R.apply(O,I):R,H.extent),W=s(O,I).beforestart();_u(O),H.selection=j==null||Mr(j)?null:j,a.call(O),W.start().brush().end()})},c.prototype={beforestart:function(){return++this.active==1&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return--this.active==0&&(delete this.state.emitter,this.emit("end")),this},emit:function(M){tt(new O1(r,M,e.output(this.state.selection)),E.apply,E,[M,this.that,this.args])}},r.extent=function(M){return arguments.length?(x=typeof M=="function"?M:ev([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),r):x},r.filter=function(M){return arguments.length?(_=typeof M=="function"?M:ev(!!M),r):_},r.handleSize=function(M){return arguments.length?(S=+M,r):S},r.on=function(){var M=E.on.apply(E,arguments);return M===E?r:M},r}function _l(e){return function(r,a){return e(r.source.value+r.target.value,a.source.value+a.target.value)}}function Er(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Fi(){return new Er}function bl(e){return e.source}function Bs(e){return e.target}function wl(e){return e.radius}function Bu(e){return e.startAngle}function An(e){return e.endAngle}function Ha(){}function er(e,r){var a=new Ha;if(e instanceof Ha)e.each(function(m,x){a.set(x,m)});else if(Array.isArray(e)){var s,c=-1,h=e.length;if(r==null)for(;++c<h;)a.set(c,e[c]);else for(;++c<h;)a.set(r(s=e[c],c,e),s)}else if(e)for(var p in e)a.set(p,e[p]);return a}function ku(){return{}}function Hu(e,r,a){e[r]=a}function ks(){return er()}function Hs(e,r,a){e.set(r,a)}function Ga(){}function Gs(e,r){var a=new Ga;if(e instanceof Ga)e.each(function(h){a.add(h)});else if(e){var s=-1,c=e.length;if(r==null)for(;++s<c;)a.add(e[s]);else for(;++s<c;)a.add(r(e[s],s,e))}return a}function Vs(e){return new Function("d","return {"+e.map(function(r,a){return JSON.stringify(r)+": d["+a+"]"}).join(",")+"}")}function Tr(e,r){var a=Vs(e);return function(s,c){return r(a(s),c,e)}}function Gu(e){var r=Object.create(null),a=[];return e.forEach(function(s){for(var c in s)c in r||a.push(r[c]=c)}),a}function Lo(e,r,a,s){if(isNaN(r)||isNaN(a))return e;var c,h,p,m,x,_,E,S,M,R=e._root,O={data:s},I=e._x0,H=e._y0,j=e._x1,W=e._y1;if(!R)return e._root=O,e;for(;R.length;)if((_=r>=(h=(I+j)/2))?I=h:j=h,(E=a>=(p=(H+W)/2))?H=p:W=p,c=R,!(R=R[S=E<<1|_]))return c[S]=O,e;if(m=+e._x.call(null,R.data),x=+e._y.call(null,R.data),r===m&&a===x)return O.next=R,c?c[S]=O:e._root=O,e;do c=c?c[S]=new Array(4):e._root=new Array(4),(_=r>=(h=(I+j)/2))?I=h:j=h,(E=a>=(p=(H+W)/2))?H=p:W=p;while((S=E<<1|_)==(M=(x>=p)<<1|m>=h));return c[M]=R,c[S]=O,e}function Vu(e){var r,a,s,c,h=e.length,p=new Array(h),m=new Array(h),x=1/0,_=1/0,E=-1/0,S=-1/0;for(a=0;a<h;++a)isNaN(s=+this._x.call(null,r=e[a]))||isNaN(c=+this._y.call(null,r))||(p[a]=s,m[a]=c,s<x&&(x=s),s>E&&(E=s),c<_&&(_=c),c>S&&(S=c));for(E<x&&(x=this._x0,E=this._x1),S<_&&(_=this._y0,S=this._y1),this.cover(x,_).cover(E,S),a=0;a<h;++a)Lo(this,p[a],m[a],e[a]);return this}function Va(e){for(var r=0,a=e.length;r<a;++r)this.remove(e[r]);return this}function Co(e){return e[0]}function ju(e){return e[1]}function aa(e,r,a){var s=new oa(r==null?Co:r,a==null?ju:a,NaN,NaN,NaN,NaN);return e==null?s:s.addAll(e)}function oa(e,r,a,s,c,h){this._x=e,this._y=r,this._x0=a,this._y0=s,this._x1=c,this._y1=h,this._root=void 0}function js(e){for(var r={data:e.data},a=r;e=e.next;)a=a.next={data:e.data};return r}function Wu(e){return e.x+e.vx}function Xu(e){return e.y+e.vy}function ja(e){return e.index}function Sr(e,r){var a=e.get(r);if(!a)throw new Error("missing: "+r);return a}function qu(e){return e.x}function Ml(e){return e.y}function yi(e){return new Ws(e)}function Ws(e){if(!(r=Ex.exec(e)))throw new Error("invalid format: "+e);var r,a=r[1]||" ",s=r[2]||">",c=r[3]||"-",h=r[4]||"",p=!!r[5],m=r[6]&&+r[6],x=!!r[7],_=r[8]&&+r[8].slice(1),E=r[9]||"";E==="n"?(x=!0,E="g"):pv[E]||(E=""),(p||a==="0"&&s==="=")&&(p=!0,a="0",s="="),this.fill=a,this.align=s,this.sign=c,this.symbol=h,this.zero=p,this.width=m,this.comma=x,this.precision=_,this.type=E}function El(e){return Rd=vv(e),A.format=Rd.format,A.formatPrefix=Rd.formatPrefix,Rd}function Xs(){this.reset()}function pf(e,r,a){var s=e.s=r+a,c=s-r,h=s-c;e.t=r-h+(a-c)}function mf(e){return e>1?0:e<-1?Qe:Math.acos(e)}function Ar(e){return e>1?Wn:e<-1?-Wn:Math.asin(e)}function Po(e){return(e=re(e/2))*e}function Mn(){}function Yu(e,r){e&&Lv.hasOwnProperty(e.type)&&Lv[e.type](e,r)}function Tl(e,r,a){var s,c=-1,h=e.length-a;for(r.lineStart();++c<h;)s=e[c],r.point(s[0],s[1],s[2]);r.lineEnd()}function gf(e,r){var a=-1,s=e.length;for(r.polygonStart();++a<s;)Tl(e[a],r,1);r.polygonEnd()}function qs(){_a.point=xi}function vn(){No(bv,wv)}function xi(e,r){_a.point=No,bv=e,wv=r,e*=ye,r*=ye,bm=e,wm=ue(r=r/2+Fd),Mm=re(r)}function No(e,r){e*=ye,r*=ye,r=r/2+Fd;var a=e-bm,s=a>=0?1:-1,c=s*a,h=ue(r),p=re(r),m=Mm*p,x=wm*h+m*ue(c),_=m*s*re(c);kd.add(Br(_,x)),bm=e,wm=h,Mm=p}function jr(e){return[Br(e[1],e[0]),Ar(e[2])]}function Rr(e){var r=e[0],a=e[1],s=ue(a);return[s*ue(r),s*re(r),re(a)]}function zi(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}function ni(e,r){return[e[1]*r[2]-e[2]*r[1],e[2]*r[0]-e[0]*r[2],e[0]*r[1]-e[1]*r[0]]}function Wa(e,r){e[0]+=r[0],e[1]+=r[1],e[2]+=r[2]}function _i(e,r){return[e[0]*r,e[1]*r,e[2]*r]}function Io(e){var r=Kn(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=r,e[1]/=r,e[2]/=r}function Ys(e,r){cs.push(no=[Dn=e,Hn=e]),r<hi&&(hi=r),r>bi&&(bi=r)}function Sl(e,r){var a=Rr([e*ye,r*ye]);if(Yc){var s=ni(Yc,a),c=[s[1],-s[0],0],h=ni(c,s);Io(h),h=jr(h);var p,m=e-wu,x=m>0?1:-1,_=h[0]*Tn*x,E=sn(m)>180;E^(x*wu<_&&_<x*e)?(p=h[1]*Tn)>bi&&(bi=p):(_=(_+360)%360-180,E^(x*wu<_&&_<x*e)?(p=-h[1]*Tn)<hi&&(hi=p):(r<hi&&(hi=r),r>bi&&(bi=r))),E?e<wu?hr(Dn,e)>hr(Dn,Hn)&&(Hn=e):hr(e,Hn)>hr(Dn,Hn)&&(Dn=e):Hn>=Dn?(e<Dn&&(Dn=e),e>Hn&&(Hn=e)):e>wu?hr(Dn,e)>hr(Dn,Hn)&&(Hn=e):hr(e,Hn)>hr(Dn,Hn)&&(Dn=e)}else cs.push(no=[Dn=e,Hn=e]);r<hi&&(hi=r),r>bi&&(bi=r),Yc=a,wu=e}function Zu(){ro.point=Sl}function Al(){no[0]=Dn,no[1]=Hn,ro.point=Ys,Yc=null}function Oo(e,r){if(Yc){var a=e-wu;Hh.add(sn(a)>180?a+(a>0?360:-360):a)}else Mv=e,Ev=r;_a.point(e,r),Sl(e,r)}function Rl(){_a.lineStart()}function Uo(){Oo(Mv,Ev),_a.lineEnd(),sn(Hh)>he&&(Dn=-(Hn=180)),no[0]=Dn,no[1]=Hn,Yc=null}function hr(e,r){return(r-=e)<0?r+360:r}function Ll(e,r){return e[0]-r[0]}function Ku(e,r){return e[0]<=e[1]?e[0]<=r&&r<=e[1]:r<e[0]||e[1]<r}function Qu(e,r){e*=ye,r*=ye;var a=ue(r);On(a*ue(e),a*re(e),re(r))}function On(e,r,a){++Bh,Cd+=(e-Cd)/Bh,Pd+=(r-Pd)/Bh,Nd+=(a-Nd)/Bh}function Cl(){Yi.point=vf}function vf(e,r){e*=ye,r*=ye;var a=ue(r);Dr=a*ue(e),Fr=a*re(e),zr=re(r),Yi.point=yf,On(Dr,Fr,zr)}function yf(e,r){e*=ye,r*=ye;var a=ue(r),s=a*ue(e),c=a*re(e),h=re(r),p=Br(Kn((p=Fr*h-zr*c)*p+(p=zr*s-Dr*h)*p+(p=Dr*c-Fr*s)*p),Dr*s+Fr*c+zr*h);Ld+=p,Id+=p*(Dr+(Dr=s)),Od+=p*(Fr+(Fr=c)),Ud+=p*(zr+(zr=h)),On(Dr,Fr,zr)}function Zs(){Yi.point=Qu}function Pl(){Yi.point=Do}function Nl(){$u(Tv,Sv),Yi.point=Qu}function Do(e,r){Tv=e,Sv=r,e*=ye,r*=ye,Yi.point=$u;var a=ue(r);Dr=a*ue(e),Fr=a*re(e),zr=re(r),On(Dr,Fr,zr)}function $u(e,r){e*=ye,r*=ye;var a=ue(r),s=a*ue(e),c=a*re(e),h=re(r),p=Fr*h-zr*c,m=zr*s-Dr*h,x=Dr*c-Fr*s,_=Kn(p*p+m*m+x*x),E=Ar(_),S=_&&-E/_;Em+=S*p,Tm+=S*m,Sm+=S*x,Ld+=E,Id+=E*(Dr+(Dr=s)),Od+=E*(Fr+(Fr=c)),Ud+=E*(zr+(zr=h)),On(Dr,Fr,zr)}function Ks(e,r){return[e>Qe?e-Zr:e<-Qe?e+Zr:e,r]}function Ju(e,r,a){return(e%=Zr)?r||a?Cv(tc(e),Ol(r,a)):tc(e):r||a?Ol(r,a):Ks}function Il(e){return function(r,a){return r+=e,[r>Qe?r-Zr:r<-Qe?r+Zr:r,a]}}function tc(e){var r=Il(e);return r.invert=Il(-e),r}function Ol(e,r){function a(m,x){var _=ue(x),E=ue(m)*_,S=re(m)*_,M=re(x),R=M*s+E*c;return[Br(S*h-R*p,E*s-M*c),Ar(R*h+S*p)]}var s=ue(e),c=re(e),h=ue(r),p=re(r);return a.invert=function(m,x){var _=ue(x),E=ue(m)*_,S=re(m)*_,M=re(x),R=M*h-S*p;return[Br(S*h+M*p,E*s+R*c),Ar(R*s-E*c)]},a}function Ul(e,r,a,s,c,h){if(a){var p=ue(r),m=re(r),x=s*a;c==null?(c=r+s*Zr,h=r-x/2):(c=Dl(p,c),h=Dl(p,h),(s>0?c<h:c>h)&&(c+=s*Zr));for(var _,E=c;s>0?E>h:E<h;E-=x)_=jr([p,-m*ue(E),-m*re(E)]),e.point(_[0],_[1])}}function Dl(e,r){r=Rr(r),r[0]-=e,Io(r);var a=mf(-r[1]);return((-r[2]<0?-a:a)+Zr-he)%Zr}function sa(e,r,a,s){this.x=e,this.z=r,this.o=a,this.e=s,this.v=!1,this.n=this.p=null}function Fo(e){if(r=e.length){for(var r,a,s=0,c=e[0];++s<r;)c.n=a=e[s],a.p=c,c=a;c.n=a=e[0],a.p=c}}function ua(e,r,a,s){function c(_,E){return e<=_&&_<=a&&r<=E&&E<=s}function h(_,E,S,M){var R=0,O=0;if(_==null||(R=p(_,S))!==(O=p(E,S))||x(_,E)<0^S>0)do M.point(R===0||R===3?e:a,R>1?s:r);while((R=(R+S+4)%4)!==O);else M.point(E[0],E[1])}function p(_,E){return sn(_[0]-e)<he?E>0?0:3:sn(_[0]-a)<he?E>0?2:1:sn(_[1]-r)<he?E>0?1:0:E>0?3:2}function m(_,E){return x(_.x,E.x)}function x(_,E){var S=p(_,1),M=p(E,1);return S!==M?S-M:S===0?E[1]-_[1]:S===1?_[0]-E[0]:S===2?_[1]-E[1]:E[0]-_[0]}return function(_){function E(Ht,ct){c(Ht,ct)&&Mt.point(Ht,ct)}function S(){for(var Ht=0,ct=0,mt=W.length;ct<mt;++ct)for(var xt,Gt,Vt=W[ct],Me=1,fn=Vt.length,an=Vt[0],Be=an[0],tn=an[1];Me<fn;++Me)xt=Be,Gt=tn,an=Vt[Me],Be=an[0],tn=an[1],Gt<=s?tn>s&&(Be-xt)*(s-Gt)>(tn-Gt)*(e-xt)&&++Ht:tn<=s&&(Be-xt)*(s-Gt)<(tn-Gt)*(e-xt)&&--Ht;return Ht}function M(){Mt=Jt,j=[],W=[],bt=!0}function R(){var Ht=S(),ct=bt&&Ht,mt=(j=xu(j)).length;(ct||mt)&&(_.polygonStart(),ct&&(_.lineStart(),h(null,null,1,_),_.lineEnd()),mt&&Fv(j,m,Ht,h,_),_.polygonEnd()),Mt=_,j=W=V=null}function O(){Pt.point=H,W&&W.push(V=[]),At=!0,pt=!1,J=dt=NaN}function I(){j&&(H(rt,ot),it&&pt&&Jt.rejoin(),j.push(Jt.result())),Pt.point=E,pt&&Mt.lineEnd()}function H(Ht,ct){var mt=c(Ht,ct);if(W&&V.push([Ht,ct]),At)rt=Ht,ot=ct,it=mt,At=!1,mt&&(Mt.lineStart(),Mt.point(Ht,ct));else if(mt&&pt)Mt.point(Ht,ct);else{var xt=[J=Math.max(Wd,Math.min(Gh,J)),dt=Math.max(Wd,Math.min(Gh,dt))],Gt=[Ht=Math.max(Wd,Math.min(Gh,Ht)),ct=Math.max(Wd,Math.min(Gh,ct))];Lx(xt,Gt,e,r,a,s)?(pt||(Mt.lineStart(),Mt.point(xt[0],xt[1])),Mt.point(Gt[0],Gt[1]),mt||Mt.lineEnd(),bt=!1):mt&&(Mt.lineStart(),Mt.point(Ht,ct),bt=!1)}J=Ht,dt=ct,pt=mt}var j,W,V,rt,ot,it,J,dt,pt,At,bt,Mt=_,Jt=Dv(),Pt={point:E,lineStart:O,lineEnd:I,polygonStart:M,polygonEnd:R};return Pt}}function xf(){Qc.point=Bo,Qc.lineEnd=zo}function zo(){Qc.point=Qc.lineEnd=Mn}function Bo(e,r){e*=ye,r*=ye,Lm=e,Gd=re(r),Vd=ue(r),Qc.point=ko}function ko(e,r){e*=ye,r*=ye;var a=re(r),s=ue(r),c=sn(e-Lm),h=ue(c),p=re(c),m=s*p,x=Vd*a-Gd*s*h,_=Gd*a+Vd*s*h;Im.add(Br(Kn(m*m+x*x),_)),Lm=e,Gd=a,Vd=s}function Bi(e,r){return!(!e||!Hv.hasOwnProperty(e.type))&&Hv[e.type](e,r)}function Ho(e,r){return Vh(e,r)===0}function Qs(e,r){var a=Vh(e[0],e[1]);return Vh(e[0],r)+Vh(r,e[1])<=a+he}function Go(e,r){return!!zv(e.map(Vo),jo(r))}function Vo(e){return e=e.map(jo),e.pop(),e}function jo(e){return[e[0]*ye,e[1]*ye]}function ca(e,r,a){var s=me(e,r-he,a).concat(r);return function(c){return s.map(function(h){return[c,h]})}}function Wo(e,r,a){var s=me(e,r-he,a).concat(r);return function(c){return s.map(function(h){return[h,c]})}}function Xo(){function e(){return{type:"MultiLineString",coordinates:r()}}function r(){return me(zd(h/H)*H,c,H).map(M).concat(me(zd(_/j)*j,x,j).map(R)).concat(me(zd(s/O)*O,a,O).filter(function(V){return sn(V%H)>he}).map(E)).concat(me(zd(m/I)*I,p,I).filter(function(V){return sn(V%j)>he}).map(S))}var a,s,c,h,p,m,x,_,E,S,M,R,O=10,I=O,H=90,j=360,W=2.5;return e.lines=function(){return r().map(function(V){return{type:"LineString",coordinates:V}})},e.outline=function(){return{type:"Polygon",coordinates:[M(h).concat(R(x).slice(1),M(c).reverse().slice(1),R(_).reverse().slice(1))]}},e.extent=function(V){return arguments.length?e.extentMajor(V).extentMinor(V):e.extentMinor()},e.extentMajor=function(V){return arguments.length?(h=+V[0][0],c=+V[1][0],_=+V[0][1],x=+V[1][1],h>c&&(V=h,h=c,c=V),_>x&&(V=_,_=x,x=V),e.precision(W)):[[h,_],[c,x]]},e.extentMinor=function(V){return arguments.length?(s=+V[0][0],a=+V[1][0],m=+V[0][1],p=+V[1][1],s>a&&(V=s,s=a,a=V),m>p&&(V=m,m=p,p=V),e.precision(W)):[[s,m],[a,p]]},e.step=function(V){return arguments.length?e.stepMajor(V).stepMinor(V):e.stepMinor()},e.stepMajor=function(V){return arguments.length?(H=+V[0],j=+V[1],e):[H,j]},e.stepMinor=function(V){return arguments.length?(O=+V[0],I=+V[1],e):[O,I]},e.precision=function(V){return arguments.length?(W=+V,E=ca(m,p,90),S=Wo(s,a,W),M=ca(_,x,90),R=Wo(h,c,W),e):W},e.extentMajor([[-180,-90+he],[180,90-he]]).extentMinor([[-180,-80-he],[180,80+he]])}function Xa(){return Xo()()}function ec(){io.point=Fl}function Fl(e,r){io.point=Wr,Pv=Cm=e,Nv=Pm=r}function Wr(e,r){Dm.add(Pm*e-Cm*r),Cm=e,Pm=r}function $s(){Wr(Pv,Nv)}function Js(e,r){e<$c&&($c=e),e>jh&&(jh=e),r<Xd&&(Xd=r),r>qd&&(qd=r)}function ri(e,r){Fm+=e,zm+=r,++Wh}function tu(){wi.point=mp}function mp(e,r){wi.point=gp,ri(ba=e,wa=r)}function gp(e,r){var a=e-ba,s=r-wa,c=Kn(a*a+s*s);Zd+=c*(ba+e)/2,Kd+=c*(wa+r)/2,Jc+=c,ri(ba=e,wa=r)}function _f(){wi.point=ri}function vp(){wi.point=xp}function yp(){bf(Iv,Ov)}function xp(e,r){wi.point=bf,ri(Iv=ba=e,Ov=wa=r)}function bf(e,r){var a=e-ba,s=r-wa,c=Kn(a*a+s*s);Zd+=c*(ba+e)/2,Kd+=c*(wa+r)/2,Jc+=c,c=wa*e-ba*r,Bm+=c*(ba+e),km+=c*(wa+r),Xh+=3*c,ri(ba=e,wa=r)}function wf(e){this._context=e}function _p(e,r){Zh.point=Mf,Gv=qh=e,Vv=Yh=r}function Mf(e,r){qh-=e,Yh-=r,Gm.add(Kn(qh*qh+Yh*Yh)),qh=e,Yh=r}function Ef(){this._string=[]}function Tf(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function bp(e){return e.length>1}function wp(e,r){return((e=e.x)[0]<0?e[1]-Wn-he:Wn-e[1])-((r=r.x)[0]<0?r[1]-Wn-he:Wn-r[1])}function Mp(e){var r,a=NaN,s=NaN,c=NaN;return{lineStart:function(){e.lineStart(),r=1},point:function(h,p){var m=h>0?Qe:-Qe,x=sn(h-a);sn(x-Qe)<he?(e.point(a,s=(s+p)/2>0?Wn:-Wn),e.point(c,s),e.lineEnd(),e.lineStart(),e.point(m,s),e.point(h,s),r=0):c!==m&&x>=Qe&&(sn(a-c)<he&&(a-=c*he),sn(h-m)<he&&(h-=m*he),s=Ep(a,s,h,p),e.point(c,s),e.lineEnd(),e.lineStart(),e.point(m,s),r=0),e.point(a=h,s=p),c=m},lineEnd:function(){e.lineEnd(),a=s=NaN},clean:function(){return 2-r}}}function Ep(e,r,a,s){var c,h,p=re(e-a);return sn(p)>he?Zc((re(r)*(h=ue(s))*re(a)-re(s)*(c=ue(r))*re(e))/(c*h*p)):(r+s)/2}function Tp(e,r,a,s){var c;if(e==null)c=a*Wn,s.point(-Qe,c),s.point(0,c),s.point(Qe,c),s.point(Qe,0),s.point(Qe,-c),s.point(0,-c),s.point(-Qe,-c),s.point(-Qe,0),s.point(-Qe,c);else if(sn(e[0]-r[0])>he){var h=e[0]<r[0]?Qe:-Qe;c=a*h/2,s.point(-h,c),s.point(0,c),s.point(h,c)}else s.point(r[0],r[1])}function nc(e){return function(r){var a=new zl;for(var s in e)a[s]=e[s];return a.stream=r,a}}function zl(){}function rc(e,r,a){var s=r[1][0]-r[0][0],c=r[1][1]-r[0][1],h=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),h!=null&&e.clipExtent(null),qi(a,e.stream(Yd));var p=Yd.result(),m=Math.min(s/(p[1][0]-p[0][0]),c/(p[1][1]-p[0][1])),x=+r[0][0]+(s-m*(p[1][0]+p[0][0]))/2,_=+r[0][1]+(c-m*(p[1][1]+p[0][1]))/2;return h!=null&&e.clipExtent(h),e.scale(150*m).translate([x,_])}function ic(e,r,a){return rc(e,[[0,0],r],a)}function Sf(e){return nc({point:function(r,a){r=e(r,a),this.stream.point(r[0],r[1])}})}function Bl(e,r){function a(s,c,h,p,m,x,_,E,S,M,R,O,I,H){var j=_-s,W=E-c,V=j*j+W*W;if(V>4*r&&I--){var rt=p+M,ot=m+R,it=x+O,J=Kn(rt*rt+ot*ot+it*it),dt=Ar(it/=J),pt=sn(sn(it)-1)<he||sn(h-S)<he?(h+S)/2:Br(ot,rt),At=e(pt,dt),bt=At[0],Mt=At[1],Jt=bt-s,Pt=Mt-c,Ht=W*Jt-j*Pt;(Ht*Ht/V>r||sn((j*Jt+W*Pt)/V-.5)>.3||p*M+m*R+x*O<Fx)&&(a(s,c,h,p,m,x,bt,Mt,pt,rt/=J,ot/=J,it,I,H),H.point(bt,Mt),a(bt,Mt,pt,rt,ot,it,_,E,S,M,R,O,I,H))}}return function(s){function c(dt,pt){dt=e(dt,pt),s.point(dt[0],dt[1])}function h(){W=NaN,J.point=p,s.lineStart()}function p(dt,pt){var At=Rr([dt,pt]),bt=e(dt,pt);a(W,V,j,rt,ot,it,W=bt[0],V=bt[1],j=dt,rt=At[0],ot=At[1],it=At[2],Xv,s),s.point(W,V)}function m(){J.point=c,s.lineEnd()}function x(){h(),J.point=_,J.lineEnd=E}function _(dt,pt){p(S=dt,pt),M=W,R=V,O=rt,I=ot,H=it,J.point=p}function E(){a(W,V,j,rt,ot,it,M,R,S,O,I,H,Xv,s),J.lineEnd=m,m()}var S,M,R,O,I,H,j,W,V,rt,ot,it,J={point:c,lineStart:h,lineEnd:m,polygonStart:function(){s.polygonStart(),J.lineStart=x},polygonEnd:function(){s.polygonEnd(),J.lineStart=h}};return J}}function la(e){return kl(function(){return e})()}function kl(e){function r(Pt){return Pt=E(Pt[0]*ye,Pt[1]*ye),[Pt[0]*H+m,x-Pt[1]*H]}function a(Pt){return(Pt=E.invert((Pt[0]-m)/H,(x-Pt[1])/H))&&[Pt[0]*Tn,Pt[1]*Tn]}function s(Pt,Ht){return Pt=p(Pt,Ht),[Pt[0]*H+m,x-Pt[1]*H]}function c(){E=Cv(_=Ju(ot,it,J),p);var Pt=p(V,rt);return m=j-Pt[0]*H,x=W+Pt[1]*H,h()}function h(){return O=I=null,r}var p,m,x,_,E,S,M,R,O,I,H=150,j=480,W=250,V=0,rt=0,ot=0,it=0,J=0,dt=null,pt=Wv,At=null,bt=Mu,Mt=.5,Jt=qv(s,Mt);return r.stream=function(Pt){return O&&I===Pt?O:O=zx(pt(_,Jt(bt(I=Pt))))},r.clipAngle=function(Pt){return arguments.length?(pt=+Pt?Ux(dt=Pt*ye,6*ye):(dt=null,Wv),h()):dt*Tn},r.clipExtent=function(Pt){return arguments.length?(bt=Pt==null?(At=S=M=R=null,Mu):ua(At=+Pt[0][0],S=+Pt[0][1],M=+Pt[1][0],R=+Pt[1][1]),h()):At==null?null:[[At,S],[M,R]]},r.scale=function(Pt){return arguments.length?(H=+Pt,c()):H},r.translate=function(Pt){return arguments.length?(j=+Pt[0],W=+Pt[1],c()):[j,W]},r.center=function(Pt){return arguments.length?(V=Pt[0]%360*ye,rt=Pt[1]%360*ye,c()):[V*Tn,rt*Tn]},r.rotate=function(Pt){return arguments.length?(ot=Pt[0]%360*ye,it=Pt[1]%360*ye,J=Pt.length>2?Pt[2]%360*ye:0,c()):[ot*Tn,it*Tn,J*Tn]},r.precision=function(Pt){return arguments.length?(Jt=qv(s,Mt=Pt*Pt),h()):Kn(Mt)},r.fitExtent=function(Pt,Ht){return rc(r,Pt,Ht)},r.fitSize=function(Pt,Ht){return ic(r,Pt,Ht)},function(){return p=e.apply(this,arguments),r.invert=p.invert&&a,c()}}function Hl(e){var r=0,a=Qe/3,s=kl(e),c=s(r,a);return c.parallels=function(h){return arguments.length?s(r=h[0]*ye,a=h[1]*ye):[r*Tn,a*Tn]},c}function Sp(e){function r(s,c){return[s*a,re(c)/a]}var a=ue(e);return r.invert=function(s,c){return[s/a,Ar(c*a)]},r}function Af(e,r){function a(m,x){var _=Kn(h-2*c*re(x))/c;return[_*re(m*=c),p-_*ue(m)]}var s=re(e),c=(s+re(r))/2;if(sn(c)<he)return Sp(e);var h=1+s*(2*c-s),p=Kn(h)/c;return a.invert=function(m,x){var _=p-x;return[Br(m,sn(_))/c*kh(_),Ar((h-(m*m+_*_)*c*c)/(2*c))]},a}function Ap(e){var r=e.length;return{point:function(a,s){for(var c=-1;++c<r;)e[c].point(a,s)},sphere:function(){for(var a=-1;++a<r;)e[a].sphere()},lineStart:function(){for(var a=-1;++a<r;)e[a].lineStart()},lineEnd:function(){for(var a=-1;++a<r;)e[a].lineEnd()},polygonStart:function(){for(var a=-1;++a<r;)e[a].polygonStart()},polygonEnd:function(){for(var a=-1;++a<r;)e[a].polygonEnd()}}}function Rf(e){return function(r,a){var s=ue(r),c=ue(a),h=e(s*c);return[h*c*re(r),h*re(a)]}}function qo(e){return function(r,a){var s=Kn(r*r+a*a),c=e(s),h=re(c),p=ue(c);return[Br(r*h,s*p),Ar(s&&a*h/s)]}}function eu(e,r){return[e,Bd(Rm((Wn+r)/2))]}function Gl(e){function r(){var S=Qe*m(),M=h(Uv(h.rotate()).invert([0,0]));return _(E==null?[[M[0]-S,M[1]-S],[M[0]+S,M[1]+S]]:e===eu?[[Math.max(M[0]-S,E),a],[Math.min(M[0]+S,s),c]]:[[E,Math.max(M[1]-S,a)],[s,Math.min(M[1]+S,c)]])}var a,s,c,h=la(e),p=h.center,m=h.scale,x=h.translate,_=h.clipExtent,E=null;return h.scale=function(S){return arguments.length?(m(S),r()):m()},h.translate=function(S){return arguments.length?(x(S),r()):x()},h.center=function(S){return arguments.length?(p(S),r()):p()},h.clipExtent=function(S){return arguments.length?(S==null?E=a=s=c=null:(E=+S[0][0],a=+S[0][1],s=+S[1][0],c=+S[1][1]),r()):E==null?null:[[E,a],[s,c]]},r()}function ha(e){return Rm((Wn+e)/2)}function ac(e,r){function a(p,m){h>0?m<-Wn+he&&(m=-Wn+he):m>Wn-he&&(m=Wn-he);var x=h/Am(ha(m),c);return[x*re(c*p),h-x*ue(c*p)]}var s=ue(e),c=e===r?re(e):Bd(s/ue(r))/Bd(ha(r)/ha(e)),h=s*Am(ha(e),c)/c;return c?(a.invert=function(p,m){var x=h-m,_=kh(c)*Kn(p*p+x*x);return[Br(p,sn(x))/c*kh(x),2*Zc(Am(h/_,1/c))-Wn]},a):eu}function nu(e,r){return[e,r]}function Vl(e,r){function a(p,m){var x=h-m,_=c*p;return[x*re(_),h-x*ue(_)]}var s=ue(e),c=e===r?re(e):(s-ue(r))/(r-e),h=s/c+e;return sn(c)<he?nu:(a.invert=function(p,m){var x=h-m;return[Br(p,sn(x))/c*kh(x),h-kh(c)*Kn(p*p+x*x)]},a)}function jl(e,r){var a=ue(r),s=ue(e)*a;return[a*re(e)/s,re(r)/s]}function oc(e,r,a,s){return e===1&&r===1&&a===0&&s===0?Mu:nc({point:function(c,h){this.stream.point(c*e+a,h*r+s)}})}function ru(e,r){return[ue(r)*re(e),re(r)]}function sc(e,r){var a=ue(r),s=1+ue(e)*a;return[a*re(e)/s,re(r)/s]}function fa(e,r){return[Bd(Rm((Wn+r)/2)),-e]}function da(e,r){return e.parent===r.parent?1:2}function Yo(e){return e.reduce(Wl,0)/e.length}function Wl(e,r){return e+r.x}function Rp(e){return 1+e.reduce(uc,0)}function uc(e,r){return Math.max(e,r.y)}function Xl(e){for(var r;r=e.children;)e=r[0];return e}function qa(e){for(var r;r=e.children;)e=r[r.length-1];return e}function cc(e){var r=0,a=e.children,s=a&&a.length;if(s)for(;--s>=0;)r+=a[s].value;else r=1;e.value=r}function Zo(e,r){if(e===r)return e;var a=e.ancestors(),s=r.ancestors(),c=null;for(e=a.pop(),r=s.pop();e===r;)c=e,e=a.pop(),r=s.pop();return c}function iu(e,r){var a,s,c,h,p,m=new Ya(e),x=+e.value&&(m.value=e.value),_=[m];for(r==null&&(r=Yl);a=_.pop();)if(x&&(a.value=+a.data.value),(c=r(a.data))&&(p=c.length))for(a.children=new Array(p),h=p-1;h>=0;--h)_.push(s=a.children[h]=new Ya(c[h])),s.parent=a,s.depth=a.depth+1;return m.eachBefore(lc)}function ql(){return iu(this).eachBefore(Zl)}function Yl(e){return e.children}function Zl(e){e.data=e.data.data}function lc(e){var r=0;do e.height=r;while((e=e.parent)&&e.height<++r)}function Ya(e){this.data=e,this.depth=this.height=0,this.parent=null}function Lf(e){for(var r,a,s=e.length;s;)a=Math.random()*s--|0,r=e[s],e[s]=e[a],e[a]=r;return e}function Kl(e,r){var a,s;if(hc(r,e))return[r];for(a=0;a<e.length;++a)if(Ko(r,e[a])&&hc(Za(e[a],r),e))return[e[a],r];for(a=0;a<e.length-1;++a)for(s=a+1;s<e.length;++s)if(Ko(Za(e[a],e[s]),r)&&Ko(Za(e[a],r),e[s])&&Ko(Za(e[s],r),e[a])&&hc(fc(e[a],e[s],r),e))return[e[a],e[s],r];throw new Error}function Ko(e,r){var a=e.r-r.r,s=r.x-e.x,c=r.y-e.y;return a<0||a*a<s*s+c*c}function Ql(e,r){var a=e.r-r.r+1e-6,s=r.x-e.x,c=r.y-e.y;return a>0&&a*a>s*s+c*c}function hc(e,r){for(var a=0;a<r.length;++a)if(!Ql(e,r[a]))return!1;return!0}function Cf(e){switch(e.length){case 1:return Pf(e[0]);case 2:return Za(e[0],e[1]);case 3:return fc(e[0],e[1],e[2])}}function Pf(e){return{x:e.x,y:e.y,r:e.r}}function Za(e,r){var a=e.x,s=e.y,c=e.r,h=r.x,p=r.y,m=r.r,x=h-a,_=p-s,E=m-c,S=Math.sqrt(x*x+_*_);return{x:(a+h+x/S*E)/2,y:(s+p+_/S*E)/2,r:(S+c+m)/2}}function fc(e,r,a){var s=e.x,c=e.y,h=e.r,p=r.x,m=r.y,x=r.r,_=a.x,E=a.y,S=a.r,M=s-p,R=s-_,O=c-m,I=c-E,H=x-h,j=S-h,W=s*s+c*c-h*h,V=W-p*p-m*m+x*x,rt=W-_*_-E*E+S*S,ot=R*O-M*I,it=(O*rt-I*V)/(2*ot)-s,J=(I*H-O*j)/ot,dt=(R*V-M*rt)/(2*ot)-c,pt=(M*j-R*H)/ot,At=J*J+pt*pt-1,bt=2*(h+it*J+dt*pt),Mt=it*it+dt*dt-h*h,Jt=-(At?(bt+Math.sqrt(bt*bt-4*At*Mt))/(2*At):Mt/bt);return{x:s+it+J*Jt,y:c+dt+pt*Jt,r:Jt}}function $l(e,r,a){var s=e.x,c=e.y,h=r.r+a.r,p=e.r+a.r,m=r.x-s,x=r.y-c,_=m*m+x*x;if(_){var E=.5+((p*=p)-(h*=h))/(2*_),S=Math.sqrt(Math.max(0,2*h*(p+_)-(p-=_)*p-h*h))/(2*_);a.x=s+E*m+S*x,a.y=c+E*x-S*m}else a.x=s+p,a.y=c}function Jl(e,r){var a=r.x-e.x,s=r.y-e.y,c=e.r+r.r;return c*c-1e-6>a*a+s*s}function th(e){var r=e._,a=e.next._,s=r.r+a.r,c=(r.x*a.r+a.x*r.r)/s,h=(r.y*a.r+a.y*r.r)/s;return c*c+h*h}function au(e){this._=e,this.next=null,this.previous=null}function eh(e){if(!(c=e.length))return 0;var r,a,s,c,h,p,m,x,_,E,S;if(r=e[0],r.x=0,r.y=0,!(c>1))return r.r;if(a=e[1],r.x=-a.r,a.x=r.r,a.y=0,!(c>2))return r.r+a.r;$l(a,r,s=e[2]),r=new au(r),a=new au(a),s=new au(s),r.next=s.previous=a,a.next=r.previous=s,s.next=a.previous=r;t:for(m=3;m<c;++m){$l(r._,a._,s=e[m]),s=new au(s),x=a.next,_=r.previous,E=a._.r,S=r._.r;do if(E<=S){if(Jl(x._,s._)){a=x,r.next=a,a.previous=r,--m;continue t}E+=x._.r,x=x.next}else{if(Jl(_._,s._)){r=_,r.next=a,a.previous=r,--m;continue t}S+=_._.r,_=_.previous}while(x!==_.next);for(s.previous=r,s.next=a,r.next=a.previous=a=s,h=th(r);(s=s.next)!==a;)(p=th(s))<h&&(r=s,h=p);a=r.next}for(r=[a._],s=a;(s=s.next)!==a;)r.push(s._);for(s=Zv(r),m=0;m<c;++m)r=e[m],r.x-=s.x,r.y-=s.y;return s.r}function Nf(e){return e==null?null:ou(e)}function ou(e){if(typeof e!="function")throw new Error;return e}function pa(){return 0}function dc(e){return Math.sqrt(e.value)}function nh(e){return function(r){r.children||(r.r=Math.max(0,+e(r)||0))}}function pc(e,r){return function(a){if(s=a.children){var s,c,h,p=s.length,m=e(a)*r||0;if(m)for(c=0;c<p;++c)s[c].r+=m;if(h=eh(s),m)for(c=0;c<p;++c)s[c].r-=m;a.r=h+m}}}function rh(e){return function(r){var a=r.parent;r.r*=e,a&&(r.x=a.x+e*r.x,r.y=a.y+e*r.y)}}function If(e){return e.id}function su(e){return e.parentId}function Of(e,r){return e.parent===r.parent?1:2}function mc(e){var r=e.children;return r?r[0]:e.t}function Qo(e){var r=e.children;return r?r[r.length-1]:e.t}function ih(e,r,a){var s=a/(r.i-e.i);r.c-=s,r.s+=a,e.c+=s,r.z+=a,r.m+=a}function Uf(e){for(var r,a=0,s=0,c=e.children,h=c.length;--h>=0;)r=c[h],r.z+=a,r.m+=a,a+=r.s+(s+=r.c)}function Df(e,r,a){return e.a.parent===r.parent?e.a:a}function uu(e,r){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=r}function gc(e){for(var r,a,s,c,h,p=new uu(e,0),m=[p];r=m.pop();)if(s=r._.children)for(r.children=new Array(h=s.length),c=h-1;c>=0;--c)m.push(a=r.children[c]=new uu(s[c],c)),a.parent=r;return(p.parent=new uu(null,0)).children=[p],p}function cu(e,r,a,s,c,h){for(var p,m,x,_,E,S,M,R,O,I,H,j=[],W=r.children,V=0,rt=0,ot=W.length,it=r.value;V<ot;){x=c-a,_=h-s;do E=W[rt++].value;while(!E&&rt<ot);for(S=M=E,I=Math.max(_/x,x/_)/(it*e),H=E*E*I,O=Math.max(M/H,H/S);rt<ot;++rt){if(E+=m=W[rt].value,m<S&&(S=m),m>M&&(M=m),H=E*E*I,(R=Math.max(M/H,H/S))>O){E-=m;break}O=R}j.push(p={value:E,dice:x<_,children:W.slice(V,rt)}),p.dice?Kh(p,a,s,c,it?s+=_*E/it:h):$d(p,a,s,it?a+=x*E/it:c,h),it-=E,V=rt}return j}function vc(e,r){return e[0]-r[0]||e[1]-r[1]}function yc(e){for(var r=e.length,a=[0,1],s=2,c=2;c<r;++c){for(;s>1&&w_(e[a[s-2]],e[a[s-1]],e[c])<=0;)--s;a[s++]=c}return a.slice(0,s)}function $o(e){this._size=e,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function xc(e){if(!e._start)try{_c(e)}catch(r){if(e._tasks[e._ended+e._active-1])ii(e,r);else if(!e._data)throw r}}function _c(e){for(;e._start=e._waiting&&e._active<e._size;){var r=e._ended+e._active,a=e._tasks[r],s=a.length-1,c=a[s];a[s]=bc(e,r),--e._waiting,++e._active,a=c.apply(null,a),e._tasks[r]&&(e._tasks[r]=a||A_)}}function bc(e,r){return function(a,s){e._tasks[r]&&(--e._active,++e._ended,e._tasks[r]=null,e._error==null&&(a!=null?ii(e,a):(e._data[r]=s,e._waiting?xc(e):nr(e))))}}function ii(e,r){var a,s=e._tasks.length;for(e._error=r,e._data=void 0,e._waiting=NaN;--s>=0;)if((a=e._tasks[s])&&(e._tasks[s]=null,a.abort))try{a.abort()}catch{}e._active=NaN,nr(e)}function nr(e){if(!e._active&&e._call){var r=e._data;e._data=void 0,e._call(e._error,r)}}function ma(e){if(e==null)e=1/0;else if(!((e=+e)>=1))throw new Error("invalid concurrency");return new $o(e)}function Lr(e){return function(r,a){e(r==null?a:null)}}function wc(e){var r=e.responseType;return r&&r!=="text"?e.response:e.responseText}function Mc(e,r){return function(a){return e(a.responseText,r)}}function rr(e){function r(h){var p=h+"",m=a.get(p);if(!m){if(c!==qm)return c;a.set(p,m=s.push(h))}return e[(m-1)%e.length]}var a=er(),s=[],c=qm;return e=e==null?[]:ls.call(e),r.domain=function(h){if(!arguments.length)return s.slice();s=[],a=er();for(var p,m,x=-1,_=h.length;++x<_;)a.has(m=(p=h[x])+"")||a.set(m,s.push(p));return r},r.range=function(h){return arguments.length?(e=ls.call(h),r):e.slice()},r.unknown=function(h){return arguments.length?(c=h,r):c},r.copy=function(){return rr().domain(s).range(e).unknown(c)},r}function lu(){function e(){var S=c().length,M=p[1]<p[0],R=p[M-0],O=p[1-M];r=(O-R)/Math.max(1,S-x+2*_),m&&(r=Math.floor(r)),R+=(O-R-r*(S-x))*E,a=r*(1-x),m&&(R=Math.round(R),a=Math.round(a));var I=me(S).map(function(H){return R+r*H});return h(M?I.reverse():I)}var r,a,s=rr().unknown(void 0),c=s.domain,h=s.range,p=[0,1],m=!1,x=0,_=0,E=.5;return delete s.unknown,s.domain=function(S){return arguments.length?(c(S),e()):c()},s.range=function(S){return arguments.length?(p=[+S[0],+S[1]],e()):p.slice()},s.rangeRound=function(S){return p=[+S[0],+S[1]],m=!0,e()},s.bandwidth=function(){return a},s.step=function(){return r},s.round=function(S){return arguments.length?(m=!!S,e()):m},s.padding=function(S){return arguments.length?(x=_=Math.max(0,Math.min(1,S)),e()):x},s.paddingInner=function(S){return arguments.length?(x=Math.max(0,Math.min(1,S)),e()):x},s.paddingOuter=function(S){return arguments.length?(_=Math.max(0,Math.min(1,S)),e()):_},s.align=function(S){return arguments.length?(E=Math.max(0,Math.min(1,S)),e()):E},s.copy=function(){return lu().domain(c()).range(p).round(m).paddingInner(x).paddingOuter(_).align(E)},e()}function Jo(e){var r=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Jo(r())},e}function Ec(){return Jo(lu().paddingInner(1))}function Tc(e,r){return(r-=e=+e)?function(a){return(a-e)/r}:Ym(r)}function Ff(e){return function(r,a){var s=e(r=+r,a=+a);return function(c){return c<=r?0:c>=a?1:s(c)}}}function hu(e){return function(r,a){var s=e(r=+r,a=+a);return function(c){return c<=0?r:c>=1?a:s(c)}}}function zf(e,r,a,s){var c=e[0],h=e[1],p=r[0],m=r[1];return h<c?(c=a(h,c),p=s(m,p)):(c=a(c,h),p=s(p,m)),function(x){return p(c(x))}}function ah(e,r,a,s){var c=Math.min(e.length,r.length)-1,h=new Array(c),p=new Array(c),m=-1;for(e[c]<e[0]&&(e=e.slice().reverse(),r=r.slice().reverse());++m<c;)h[m]=a(e[m],e[m+1]),p[m]=s(r[m],r[m+1]);return function(x){var _=Pr(e,x,1,c)-1;return p[_](h[_](x))}}function ki(e,r){return r.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function Ka(e,r){function a(){return c=Math.min(m.length,x.length)>2?ah:zf,h=p=null,s}function s(S){return(h||(h=c(m,x,E?Ff(e):e,_)))(+S)}var c,h,p,m=o0,x=o0,_=Uh,E=!1;return s.invert=function(S){return(p||(p=c(x,m,Tc,E?hu(r):r)))(+S)},s.domain=function(S){return arguments.length?(m=Xm.call(S,a0),a()):m.slice()},s.range=function(S){return arguments.length?(x=ls.call(S),a()):x.slice()},s.rangeRound=function(S){return x=ls.call(S),_=Bg,a()},s.clamp=function(S){return arguments.length?(E=!!S,a()):E},s.interpolate=function(S){return arguments.length?(_=S,a()):_},a()}function ts(e){var r=e.domain;return e.ticks=function(a){var s=r();return Ke(s[0],s[s.length-1],a==null?10:a)},e.tickFormat=function(a,s){return z_(r(),a,s)},e.nice=function(a){a==null&&(a=10);var s,c=r(),h=0,p=c.length-1,m=c[h],x=c[p];return x<m&&(s=m,m=x,x=s,s=h,h=p,p=s),s=Bt(m,x,a),s>0?(m=Math.floor(m/s)*s,x=Math.ceil(x/s)*s,s=Bt(m,x,a)):s<0&&(m=Math.ceil(m*s)/s,x=Math.floor(x*s)/s,s=Bt(m,x,a)),s>0?(c[h]=Math.floor(m/s)*s,c[p]=Math.ceil(x/s)*s,r(c)):s<0&&(c[h]=Math.ceil(m*s)/s,c[p]=Math.floor(x*s)/s,r(c)),e},e}function oh(){var e=Ka(Tc,li);return e.copy=function(){return ki(e,oh())},ts(e)}function sh(){function e(a){return+a}var r=[0,1];return e.invert=e,e.domain=e.range=function(a){return arguments.length?(r=Xm.call(a,a0),e):r.slice()},e.copy=function(){return sh().domain(r)},ts(e)}function fu(e,r){return(r=Math.log(r/e))?function(a){return Math.log(a/e)/r}:Ym(r)}function Bf(e,r){return e<0?function(a){return-Math.pow(-r,a)*Math.pow(-e,1-a)}:function(a){return Math.pow(r,a)*Math.pow(e,1-a)}}function es(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ai(e){return e===10?es:e===Math.E?Math.exp:function(r){return Math.pow(e,r)}}function uh(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),function(r){return Math.log(r)/e})}function ch(e){return function(r){return-e(-r)}}function kf(){function e(){return c=uh(s),h=ai(s),a()[0]<0&&(c=ch(c),h=ch(h)),r}var r=Ka(fu,Bf).domain([1,10]),a=r.domain,s=10,c=uh(10),h=ai(10);return r.base=function(p){return arguments.length?(s=+p,e()):s},r.domain=function(p){return arguments.length?(a(p),e()):a()},r.ticks=function(p){var m,x=a(),_=x[0],E=x[x.length-1];(m=E<_)&&(O=_,_=E,E=O);var S,M,R,O=c(_),I=c(E),H=p==null?10:+p,j=[];if(!(s%1)&&I-O<H){if(O=Math.round(O)-1,I=Math.round(I)+1,_>0){for(;O<I;++O)for(M=1,S=h(O);M<s;++M)if(!((R=S*M)<_)){if(R>E)break;j.push(R)}}else for(;O<I;++O)for(M=s-1,S=h(O);M>=1;--M)if(!((R=S*M)<_)){if(R>E)break;j.push(R)}}else j=Ke(O,I,Math.min(I-O,H)).map(h);return m?j.reverse():j},r.tickFormat=function(p,m){if(m==null&&(m=s===10?".0e":","),typeof m!="function"&&(m=A.format(m)),p===1/0)return m;p==null&&(p=10);var x=Math.max(1,s*p/r.ticks().length);return function(_){var E=_/h(Math.round(c(_)));return E*s<s-.5&&(E*=s),E<=x?m(_):""}},r.nice=function(){return a(s0(a(),{floor:function(p){return h(Math.floor(c(p)))},ceil:function(p){return h(Math.ceil(c(p)))}}))},r.copy=function(){return ki(r,kf().base(s))},r}function Xr(e,r){return e<0?-Math.pow(-e,r):Math.pow(e,r)}function ga(){function e(h,p){return(p=Xr(p,a)-(h=Xr(h,a)))?function(m){return(Xr(m,a)-h)/p}:Ym(p)}function r(h,p){return p=Xr(p,a)-(h=Xr(h,a)),function(m){return Xr(h+p*m,1/a)}}var a=1,s=Ka(e,r),c=s.domain;return s.exponent=function(h){return arguments.length?(a=+h,c(c())):a},s.copy=function(){return ki(s,ga().exponent(a))},ts(s)}function lh(){return ga().exponent(.5)}function Sc(){function e(){var h=0,p=Math.max(1,s.length);for(c=new Array(p-1);++h<p;)c[h-1]=jn(a,h/p);return r}function r(h){if(!isNaN(h=+h))return s[Pr(c,h)]}var a=[],s=[],c=[];return r.invertExtent=function(h){var p=s.indexOf(h);return p<0?[NaN,NaN]:[p>0?c[p-1]:a[0],p<c.length?c[p]:a[a.length-1]]},r.domain=function(h){if(!arguments.length)return a.slice();a=[];for(var p,m=0,x=h.length;m<x;++m)(p=h[m])==null||isNaN(p=+p)||a.push(p);return a.sort(ya),e()},r.range=function(h){return arguments.length?(s=ls.call(h),e()):s.slice()},r.quantiles=function(){return c.slice()},r.copy=function(){return Sc().domain(a).range(s)},r}function Ac(){function e(m){if(m<=m)return p[Pr(h,m,0,c)]}function r(){var m=-1;for(h=new Array(c);++m<c;)h[m]=((m+1)*s-(m-c)*a)/(c+1);return e}var a=0,s=1,c=1,h=[.5],p=[0,1];return e.domain=function(m){return arguments.length?(a=+m[0],s=+m[1],r()):[a,s]},e.range=function(m){return arguments.length?(c=(p=ls.call(m)).length-1,r()):p.slice()},e.invertExtent=function(m){var x=p.indexOf(m);return x<0?[NaN,NaN]:x<1?[a,h[0]]:x>=c?[h[c-1],s]:[h[x-1],h[x]]},e.copy=function(){return Ac().domain([a,s]).range(p)},ts(e)}function Rc(){function e(c){if(c<=c)return a[Pr(r,c,0,s)]}var r=[.5],a=[0,1],s=1;return e.domain=function(c){return arguments.length?(r=ls.call(c),s=Math.min(r.length,a.length-1),e):r.slice()},e.range=function(c){return arguments.length?(a=ls.call(c),s=Math.min(r.length,a.length-1),e):a.slice()},e.invertExtent=function(c){var h=a.indexOf(c);return[r[h-1],r[h]]},e.copy=function(){return Rc().domain(r).range(a)},e}function Cn(e,r,a,s){function c(h){return e(h=new Date(+h)),h}return c.floor=c,c.ceil=function(h){return e(h=new Date(h-1)),r(h,1),e(h),h},c.round=function(h){var p=c(h),m=c.ceil(h);return h-p<m-h?p:m},c.offset=function(h,p){return r(h=new Date(+h),p==null?1:Math.floor(p)),h},c.range=function(h,p,m){var x=[];if(h=c.ceil(h),m=m==null?1:Math.floor(m),!(h<p&&m>0))return x;do x.push(new Date(+h));while(r(h,m),e(h),h<p);return x},c.filter=function(h){return Cn(function(p){if(p>=p)for(;e(p),!h(p);)p.setTime(p-1)},function(p,m){if(p>=p)if(m<0)for(;++m<=0;)for(;r(p,-1),!h(p););else for(;--m>=0;)for(;r(p,1),!h(p););})},a&&(c.count=function(h,p){return Zm.setTime(+h),Km.setTime(+p),e(Zm),e(Km),Math.floor(a(Zm,Km))},c.every=function(h){return h=Math.floor(h),isFinite(h)&&h>0?h>1?c.filter(s?function(p){return s(p)%h==0}:function(p){return c.count(0,p)%h==0}):c:null}),c}function Hi(e){return Cn(function(r){r.setDate(r.getDate()-(r.getDay()+7-e)%7),r.setHours(0,0,0,0)},function(r,a){r.setDate(r.getDate()+7*a)},function(r,a){return(a-r-(a.getTimezoneOffset()-r.getTimezoneOffset())*ao)/c0})}function Gi(e){return Cn(function(r){r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-e)%7),r.setUTCHours(0,0,0,0)},function(r,a){r.setUTCDate(r.getUTCDate()+7*a)},function(r,a){return(a-r)/c0})}function hh(e){if(0<=e.y&&e.y<100){var r=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return r.setFullYear(e.y),r}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Lc(e){if(0<=e.y&&e.y<100){var r=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return r.setUTCFullYear(e.y),r}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Cc(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function fh(e){function r(Xt,oe){return function(Oe){var Kt,sr,Ru,Fn=[],oo=-1,uf=0,sw=Xt.length;for(Oe instanceof Date||(Oe=new Date(+Oe));++oo<sw;)Xt.charCodeAt(oo)===37&&(Fn.push(Xt.slice(uf,oo)),(sr=M0[Kt=Xt.charAt(++oo)])!=null?Kt=Xt.charAt(++oo):sr=Kt==="e"?" ":"0",(Ru=oe[Kt])&&(Kt=Ru(Oe,sr)),Fn.push(Kt),uf=oo+1);return Fn.push(Xt.slice(uf,oo)),Fn.join("")}}function a(Xt,oe){return function(Oe){var Kt=Cc(1900);if(s(Kt,Xt,Oe+="",0)!=Oe.length)return null;if("p"in Kt&&(Kt.H=Kt.H%12+12*Kt.p),"W"in Kt||"U"in Kt){"w"in Kt||(Kt.w="W"in Kt?1:0);var sr="Z"in Kt?Lc(Cc(Kt.y)).getUTCDay():oe(Cc(Kt.y)).getDay();Kt.m=0,Kt.d="W"in Kt?(Kt.w+6)%7+7*Kt.W-(sr+5)%7:Kt.w+7*Kt.U-(sr+6)%7}return"Z"in Kt?(Kt.H+=Kt.Z/100|0,Kt.M+=Kt.Z%100,Lc(Kt)):oe(Kt)}}function s(Xt,oe,Oe,Kt){for(var sr,Ru,Fn=0,oo=oe.length,uf=Oe.length;Fn<oo;){if(Kt>=uf)return-1;if((sr=oe.charCodeAt(Fn++))===37){if(sr=oe.charAt(Fn++),!(Ru=Qn[sr in M0?oe.charAt(Fn++):sr])||(Kt=Ru(Xt,Oe,Kt))<0)return-1}else if(sr!=Oe.charCodeAt(Kt++))return-1}return Kt}function c(Xt,oe,Oe){var Kt=Pt.exec(oe.slice(Oe));return Kt?(Xt.p=Ht[Kt[0].toLowerCase()],Oe+Kt[0].length):-1}function h(Xt,oe,Oe){var Kt=xt.exec(oe.slice(Oe));return Kt?(Xt.w=Gt[Kt[0].toLowerCase()],Oe+Kt[0].length):-1}function p(Xt,oe,Oe){var Kt=ct.exec(oe.slice(Oe));return Kt?(Xt.w=mt[Kt[0].toLowerCase()],Oe+Kt[0].length):-1}function m(Xt,oe,Oe){var Kt=fn.exec(oe.slice(Oe));return Kt?(Xt.m=an[Kt[0].toLowerCase()],Oe+Kt[0].length):-1}function x(Xt,oe,Oe){var Kt=Vt.exec(oe.slice(Oe));return Kt?(Xt.m=Me[Kt[0].toLowerCase()],Oe+Kt[0].length):-1}function _(Xt,oe,Oe){return s(Xt,it,oe,Oe)}function E(Xt,oe,Oe){return s(Xt,J,oe,Oe)}function S(Xt,oe,Oe){return s(Xt,dt,oe,Oe)}function M(Xt){return bt[Xt.getDay()]}function R(Xt){return At[Xt.getDay()]}function O(Xt){return Jt[Xt.getMonth()]}function I(Xt){return Mt[Xt.getMonth()]}function H(Xt){return pt[+(Xt.getHours()>=12)]}function j(Xt){return bt[Xt.getUTCDay()]}function W(Xt){return At[Xt.getUTCDay()]}function V(Xt){return Jt[Xt.getUTCMonth()]}function rt(Xt){return Mt[Xt.getUTCMonth()]}function ot(Xt){return pt[+(Xt.getUTCHours()>=12)]}var it=e.dateTime,J=e.date,dt=e.time,pt=e.periods,At=e.days,bt=e.shortDays,Mt=e.months,Jt=e.shortMonths,Pt=Vi(pt),Ht=va(pt),ct=Vi(At),mt=va(At),xt=Vi(bt),Gt=va(bt),Vt=Vi(Mt),Me=va(Mt),fn=Vi(Jt),an=va(Jt),Be={a:M,A:R,b:O,B:I,c:null,d:vh,e:vh,H:Xf,I:Ce,j:Cp,L:qf,m:Yf,M:Zf,p:H,S:Kf,U:Qf,w:$f,W:yh,x:null,X:null,y:Pp,Y:se,Z:vr,"%":td},tn={a:j,A:W,b:V,B:rt,c:null,d:Je,e:Je,H:Ja,I:Np,j:Ip,L:Op,m:Up,M:oi,p:ot,S:si,U:Dp,w:gu,W:Cr,x:null,X:null,y:ir,Y:ji,Z:Jf,"%":td},Qn={a:h,A:p,b:m,B:x,c:_,d:ph,e:ph,H:gh,I:gh,j:mh,L:jf,m:mu,M:Lp,p:c,S:Vf,U:$a,w:Qa,W:pu,x:E,X:S,y:Hf,Y:dh,Z:Gf,"%":Wf};return Be.x=r(J,Be),Be.X=r(dt,Be),Be.c=r(it,Be),tn.x=r(J,tn),tn.X=r(dt,tn),tn.c=r(it,tn),{format:function(Xt){var oe=r(Xt+="",Be);return oe.toString=function(){return Xt},oe},parse:function(Xt){var oe=a(Xt+="",hh);return oe.toString=function(){return Xt},oe},utcFormat:function(Xt){var oe=r(Xt+="",tn);return oe.toString=function(){return Xt},oe},utcParse:function(Xt){var oe=a(Xt,Lc);return oe.toString=function(){return Xt},oe}}}function ln(e,r,a){var s=e<0?"-":"",c=(s?-e:e)+"",h=c.length;return s+(h<a?new Array(a-h+1).join(r)+c:c)}function du(e){return e.replace(ub,"\\$&")}function Vi(e){return new RegExp("^(?:"+e.map(du).join("|")+")","i")}function va(e){for(var r={},a=-1,s=e.length;++a<s;)r[e[a].toLowerCase()]=a;return r}function Qa(e,r,a){var s=Mi.exec(r.slice(a,a+1));return s?(e.w=+s[0],a+s[0].length):-1}function $a(e,r,a){var s=Mi.exec(r.slice(a));return s?(e.U=+s[0],a+s[0].length):-1}function pu(e,r,a){var s=Mi.exec(r.slice(a));return s?(e.W=+s[0],a+s[0].length):-1}function dh(e,r,a){var s=Mi.exec(r.slice(a,a+4));return s?(e.y=+s[0],a+s[0].length):-1}function Hf(e,r,a){var s=Mi.exec(r.slice(a,a+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),a+s[0].length):-1}function Gf(e,r,a){var s=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(r.slice(a,a+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),a+s[0].length):-1}function mu(e,r,a){var s=Mi.exec(r.slice(a,a+2));return s?(e.m=s[0]-1,a+s[0].length):-1}function ph(e,r,a){var s=Mi.exec(r.slice(a,a+2));return s?(e.d=+s[0],a+s[0].length):-1}function mh(e,r,a){var s=Mi.exec(r.slice(a,a+3));return s?(e.m=0,e.d=+s[0],a+s[0].length):-1}function gh(e,r,a){var s=Mi.exec(r.slice(a,a+2));return s?(e.H=+s[0],a+s[0].length):-1}function Lp(e,r,a){var s=Mi.exec(r.slice(a,a+2));return s?(e.M=+s[0],a+s[0].length):-1}function Vf(e,r,a){var s=Mi.exec(r.slice(a,a+2));return s?(e.S=+s[0],a+s[0].length):-1}function jf(e,r,a){var s=Mi.exec(r.slice(a,a+3));return s?(e.L=+s[0],a+s[0].length):-1}function Wf(e,r,a){var s=sb.exec(r.slice(a,a+1));return s?a+s[0].length:-1}function vh(e,r){return ln(e.getDate(),r,2)}function Xf(e,r){return ln(e.getHours(),r,2)}function Ce(e,r){return ln(e.getHours()%12||12,r,2)}function Cp(e,r){return ln(1+tp.count(Tu(e),e),r,3)}function qf(e,r){return ln(e.getMilliseconds(),r,3)}function Yf(e,r){return ln(e.getMonth()+1,r,2)}function Zf(e,r){return ln(e.getMinutes(),r,2)}function Kf(e,r){return ln(e.getSeconds(),r,2)}function Qf(e,r){return ln($h.count(Tu(e),e),r,2)}function $f(e){return e.getDay()}function yh(e,r){return ln(Jm.count(Tu(e),e),r,2)}function Pp(e,r){return ln(e.getFullYear()%100,r,2)}function se(e,r){return ln(e.getFullYear()%1e4,r,4)}function vr(e){var r=e.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+ln(r/60|0,"0",2)+ln(r%60,"0",2)}function Je(e,r){return ln(e.getUTCDate(),r,2)}function Ja(e,r){return ln(e.getUTCHours(),r,2)}function Np(e,r){return ln(e.getUTCHours()%12||12,r,2)}function Ip(e,r){return ln(1+ep.count(Su(e),e),r,3)}function Op(e,r){return ln(e.getUTCMilliseconds(),r,3)}function Up(e,r){return ln(e.getUTCMonth()+1,r,2)}function oi(e,r){return ln(e.getUTCMinutes(),r,2)}function si(e,r){return ln(e.getUTCSeconds(),r,2)}function Dp(e,r){return ln(Jh.count(Su(e),e),r,2)}function gu(e){return e.getUTCDay()}function Cr(e,r){return ln(rg.count(Su(e),e),r,2)}function ir(e,r){return ln(e.getUTCFullYear()%100,r,2)}function ji(e,r){return ln(e.getUTCFullYear()%1e4,r,4)}function Jf(){return"+0000"}function td(){return"%"}function xh(e){return nl=fh(e),A.timeFormat=nl.format,A.timeParse=nl.parse,A.utcFormat=nl.utcFormat,A.utcParse=nl.utcParse,nl}function ed(e){return e.toISOString()}function _h(e){var r=new Date(e);return isNaN(r)?null:r}function Pc(e){return new Date(e)}function bh(e){return e instanceof Date?+e:+new Date(+e)}function ns(e,r,a,s,c,h,p,m,x){function _(J){return(p(J)<J?O:h(J)<J?I:c(J)<J?H:s(J)<J?j:r(J)<J?a(J)<J?W:V:e(J)<J?rt:ot)(J)}function E(J,dt,pt,At){if(J==null&&(J=10),typeof J=="number"){var bt=Math.abs(pt-dt)/J,Mt=Fc(function(Jt){return Jt[2]}).right(it,bt);Mt===it.length?(At=de(dt/ag,pt/ag,J),J=e):Mt?(Mt=it[bt/it[Mt-1][2]<it[Mt][2]/bt?Mt-1:Mt],At=Mt[1],J=Mt[0]):(At=de(dt,pt,J),J=m)}return At==null?J:J.every(At)}var S=Ka(Tc,li),M=S.invert,R=S.domain,O=x(".%L"),I=x(":%S"),H=x("%I:%M"),j=x("%I %p"),W=x("%a %d"),V=x("%b %d"),rt=x("%B"),ot=x("%Y"),it=[[p,1,tf],[p,5,5*tf],[p,15,15*tf],[p,30,30*tf],[h,1,ef],[h,5,5*ef],[h,15,15*ef],[h,30,30*ef],[c,1,nf],[c,3,3*nf],[c,6,6*nf],[c,12,12*nf],[s,1,rf],[s,2,2*rf],[a,1,hb],[r,1,E0],[r,3,3*E0],[e,1,ag]];return S.invert=function(J){return new Date(M(J))},S.domain=function(J){return arguments.length?R(Xm.call(J,bh)):R().map(Pc)},S.ticks=function(J,dt){var pt,At=R(),bt=At[0],Mt=At[At.length-1],Jt=Mt<bt;return Jt&&(pt=bt,bt=Mt,Mt=pt),pt=E(J,bt,Mt,dt),pt=pt?pt.range(bt,Mt+1):[],Jt?pt.reverse():pt},S.tickFormat=function(J,dt){return dt==null?_:x(dt)},S.nice=function(J,dt){var pt=R();return(J=E(J,pt[0],pt[pt.length-1],dt))?R(s0(pt,J)):S},S.copy=function(){return ki(S,ns(e,r,a,s,c,h,p,m,x))},S}function rs(e){var r=e.length;return function(a){return e[Math.max(0,Math.min(r-1,Math.floor(a*r)))]}}function vu(e){function r(h){var p=(h-a)/(s-a);return e(c?Math.max(0,Math.min(1,p)):p)}var a=0,s=1,c=!1;return r.domain=function(h){return arguments.length?(a=+h[0],s=+h[1],r):[a,s]},r.clamp=function(h){return arguments.length?(c=!!h,r):c},r.interpolator=function(h){return arguments.length?(e=h,r):e},r.copy=function(){return vu(e).domain([a,s]).clamp(c)},ts(r)}function wh(e){return e>1?0:e<-1?fs:Math.acos(e)}function Nc(e){return e>=1?rp:e<=-1?-rp:Math.asin(e)}function Mh(e){return e.innerRadius}function Fp(e){return e.outerRadius}function zp(e){return e.startAngle}function Bp(e){return e.endAngle}function kp(e){return e&&e.padAngle}function Hp(e,r,a,s,c,h,p,m){var x=a-e,_=s-r,E=p-c,S=m-h,M=(E*(r-h)-S*(e-c))/(S*x-E*_);return[e+M*x,r+M*_]}function t(e,r,a,s,c,h,p){var m=e-a,x=r-s,_=(p?h:-h)/rl(m*m+x*x),E=_*x,S=-_*m,M=e+E,R=r+S,O=a+E,I=s+S,H=(M+O)/2,j=(R+I)/2,W=O-M,V=I-R,rt=W*W+V*V,ot=c-h,it=M*I-O*R,J=(V<0?-1:1)*rl(Sb(0,ot*ot*rt-it*it)),dt=(it*V-W*J)/rt,pt=(-it*W-V*J)/rt,At=(it*V+W*J)/rt,bt=(-it*W+V*J)/rt,Mt=dt-H,Jt=pt-j,Pt=At-H,Ht=bt-j;return Mt*Mt+Jt*Jt>Pt*Pt+Ht*Ht&&(dt=At,pt=bt),{cx:dt,cy:pt,x01:-E,y01:-S,x11:dt*(c/ot-1),y11:pt*(c/ot-1)}}function n(e){this._context=e}function i(e){return e[0]}function o(e){return e[1]}function u(e){this._curve=e}function l(e){function r(a){return new u(e(a))}return r._curve=e,r}function f(e){var r=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(a){return arguments.length?r(l(a)):r()._curve},e}function d(e){return e.source}function g(e){return e.target}function v(e){function r(){var m,x=ug.call(arguments),_=a.apply(this,x),E=s.apply(this,x);if(p||(p=m=Fi()),e(p,+c.apply(this,(x[0]=_,x)),+h.apply(this,x),+c.apply(this,(x[0]=E,x)),+h.apply(this,x)),m)return p=null,m+""||null}var a=d,s=g,c=i,h=o,p=null;return r.source=function(m){return arguments.length?(a=m,r):a},r.target=function(m){return arguments.length?(s=m,r):s},r.x=function(m){return arguments.length?(c=typeof m=="function"?m:Ge(+m),r):c},r.y=function(m){return arguments.length?(h=typeof m=="function"?m:Ge(+m),r):h},r.context=function(m){return arguments.length?(p=m==null?null:m,r):p},r}function y(e,r,a,s,c){e.moveTo(r,a),e.bezierCurveTo(r=(r+s)/2,a,r,c,s,c)}function b(e,r,a,s,c){e.moveTo(r,a),e.bezierCurveTo(r,a=(a+c)/2,s,a,s,c)}function w(e,r,a,s,c){var h=af(r,a),p=af(r,a=(a+c)/2),m=af(s,a),x=af(s,c);e.moveTo(h[0],h[1]),e.bezierCurveTo(p[0],p[1],m[0],m[1],x[0],x[1])}function T(){return v(y)}function L(){return v(b)}function N(){var e=v(w);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}function F(e,r,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+r)/6,(e._y0+4*e._y1+a)/6)}function D(e){this._context=e}function U(e){this._context=e}function z(e){this._context=e}function B(e,r){this._basis=new D(e),this._beta=r}function Q(e,r,a){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-r),e._y2+e._k*(e._y1-a),e._x2,e._y2)}function $(e,r){this._context=e,this._k=(1-r)/6}function K(e,r){this._context=e,this._k=(1-r)/6}function lt(e,r){this._context=e,this._k=(1-r)/6}function Y(e,r,a){var s=e._x1,c=e._y1,h=e._x2,p=e._y2;if(e._l01_a>_r){var m=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,x=3*e._l01_a*(e._l01_a+e._l12_a);s=(s*m-e._x0*e._l12_2a+e._x2*e._l01_2a)/x,c=(c*m-e._y0*e._l12_2a+e._y2*e._l01_2a)/x}if(e._l23_a>_r){var _=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,E=3*e._l23_a*(e._l23_a+e._l12_a);h=(h*_+e._x1*e._l23_2a-r*e._l12_2a)/E,p=(p*_+e._y1*e._l23_2a-a*e._l12_2a)/E}e._context.bezierCurveTo(s,c,h,p,e._x2,e._y2)}function et(e,r){this._context=e,this._alpha=r}function ht(e,r){this._context=e,this._alpha=r}function Tt(e,r){this._context=e,this._alpha=r}function Z(e){this._context=e}function X(e){return e<0?-1:1}function ft(e,r,a){var s=e._x1-e._x0,c=r-e._x1,h=(e._y1-e._y0)/(s||c<0&&-0),p=(a-e._y1)/(c||s<0&&-0),m=(h*c+p*s)/(s+c);return(X(h)+X(p))*Math.min(Math.abs(h),Math.abs(p),.5*Math.abs(m))||0}function at(e,r){var a=e._x1-e._x0;return a?(3*(e._y1-e._y0)/a-r)/2:r}function wt(e,r,a){var s=e._x0,c=e._y0,h=e._x1,p=e._y1,m=(h-s)/3;e._context.bezierCurveTo(s+m,c+m*r,h-m,p-m*a,h,p)}function vt(e){this._context=e}function Et(e){this._context=new St(e)}function St(e){this._context=e}function qt(e){return new vt(e)}function It(e){return new Et(e)}function Ft(e){this._context=e}function Wt(e){var r,a,s=e.length-1,c=new Array(s),h=new Array(s),p=new Array(s);for(c[0]=0,h[0]=2,p[0]=e[0]+2*e[1],r=1;r<s-1;++r)c[r]=1,h[r]=4,p[r]=4*e[r]+2*e[r+1];for(c[s-1]=2,h[s-1]=7,p[s-1]=8*e[s-1]+e[s],r=1;r<s;++r)a=c[r]/h[r-1],h[r]-=a,p[r]-=a*p[r-1];for(c[s-1]=p[s-1]/h[s-1],r=s-2;r>=0;--r)c[r]=(p[r]-c[r+1])/h[r];for(h[s-1]=(e[s]+c[s-1])/2,r=0;r<s-1;++r)h[r]=2*e[r+1]-c[r+1];return[c,h]}function ne(e,r){this._context=e,this._t=r}function kt(e){return new ne(e,0)}function $t(e){return new ne(e,1)}function Le(e,r){return e[r]}function be(e){for(var r,a=0,s=-1,c=e.length;++s<c;)(r=+e[s][1])&&(a+=r);return a}function Rn(e){return e[0]}function Vn(e){return e[1]}function Ot(){this._=null}function Ze(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function yn(e,r){var a=r,s=r.R,c=a.U;c?c.L===a?c.L=s:c.R=s:e._=s,s.U=c,a.U=s,a.R=s.L,a.R&&(a.R.U=a),s.L=a}function En(e,r){var a=r,s=r.L,c=a.U;c?c.L===a?c.L=s:c.R=s:e._=s,s.U=c,a.U=s,a.L=s.R,a.L&&(a.L.U=a),s.R=a}function ar(e){for(;e.L;)e=e.L;return e}function Yn(e,r,a,s){var c=[null,null],h=br.push(c)-1;return c.left=e,c.right=r,a&&Pn(c,e,r,a),s&&Pn(c,r,e,s),fi[e.index].halfedges.push(h),fi[r.index].halfedges.push(h),c}function or(e,r,a){var s=[r,a];return s.left=e,s}function Pn(e,r,a,s){e[0]||e[1]?e.left===a?e[1]=s:e[0]=s:(e[0]=s,e.left=r,e.right=a)}function ze(e,r,a,s,c){var h,p=e[0],m=e[1],x=p[0],_=p[1],E=m[0],S=m[1],M=0,R=1,O=E-x,I=S-_;if(h=r-x,O||!(h>0)){if(h/=O,O<0){if(h<M)return;h<R&&(R=h)}else if(O>0){if(h>R)return;h>M&&(M=h)}if(h=s-x,O||!(h<0)){if(h/=O,O<0){if(h>R)return;h>M&&(M=h)}else if(O>0){if(h<M)return;h<R&&(R=h)}if(h=a-_,I||!(h>0)){if(h/=I,I<0){if(h<M)return;h<R&&(R=h)}else if(I>0){if(h>R)return;h>M&&(M=h)}if(h=c-_,I||!(h<0)){if(h/=I,I<0){if(h>R)return;h>M&&(M=h)}else if(I>0){if(h<M)return;h<R&&(R=h)}return!(M>0||R<1)||(M>0&&(e[0]=[x+M*O,_+M*I]),R<1&&(e[1]=[x+R*O,_+R*I]),!0)}}}}}function Pe(e,r,a,s,c){var h=e[1];if(h)return!0;var p,m,x=e[0],_=e.left,E=e.right,S=_[0],M=_[1],R=E[0],O=E[1],I=(S+R)/2,H=(M+O)/2;if(O===M){if(I<r||I>=s)return;if(S>R){if(x){if(x[1]>=c)return}else x=[I,a];h=[I,c]}else{if(x){if(x[1]<a)return}else x=[I,c];h=[I,a]}}else if(p=(S-R)/(O-M),m=H-p*I,p<-1||p>1)if(S>R){if(x){if(x[1]>=c)return}else x=[(a-m)/p,a];h=[(c-m)/p,c]}else{if(x){if(x[1]<a)return}else x=[(c-m)/p,c];h=[(a-m)/p,a]}else if(M<O){if(x){if(x[0]>=s)return}else x=[r,p*r+m];h=[s,p*s+m]}else{if(x){if(x[0]<r)return}else x=[s,p*s+m];h=[r,p*r+m]}return e[0]=x,e[1]=h,!0}function Ue(e,r,a,s){for(var c,h=br.length;h--;)Pe(c=br[h],e,r,a,s)&&ze(c,e,r,a,s)&&(Math.abs(c[0][0]-c[1][0])>gn||Math.abs(c[0][1]-c[1][1])>gn)||delete br[h]}function Ne(e){return fi[e.index]={site:e,halfedges:[]}}function st(e,r){var a=e.site,s=r.left,c=r.right;return a===c&&(c=s,s=a),c?Math.atan2(c[1]-s[1],c[0]-s[0]):(a===s?(s=r[1],c=r[0]):(s=r[0],c=r[1]),Math.atan2(s[0]-c[0],c[1]-s[1]))}function ce(e,r){return r[+(r.left!==e.site)]}function we(e,r){return r[+(r.left===e.site)]}function ke(){for(var e,r,a,s,c=0,h=fi.length;c<h;++c)if((e=fi[c])&&(s=(r=e.halfedges).length)){var p=new Array(s),m=new Array(s);for(a=0;a<s;++a)p[a]=a,m[a]=st(e,br[r[a]]);for(p.sort(function(x,_){return m[_]-m[x]}),a=0;a<s;++a)m[a]=r[p[a]];for(a=0;a<s;++a)r[a]=m[a]}}function te(e,r,a,s){var c,h,p,m,x,_,E,S,M,R,O,I,H=fi.length,j=!0;for(c=0;c<H;++c)if(h=fi[c]){for(p=h.site,x=h.halfedges,m=x.length;m--;)br[x[m]]||x.splice(m,1);for(m=0,_=x.length;m<_;)R=we(h,br[x[m]]),O=R[0],I=R[1],E=ce(h,br[x[++m%_]]),S=E[0],M=E[1],(Math.abs(O-S)>gn||Math.abs(I-M)>gn)&&(x.splice(m,0,br.push(or(p,R,Math.abs(O-e)<gn&&s-I>gn?[e,Math.abs(S-e)<gn?M:s]:Math.abs(I-s)<gn&&a-O>gn?[Math.abs(M-s)<gn?S:a,s]:Math.abs(O-a)<gn&&I-r>gn?[a,Math.abs(S-a)<gn?M:r]:Math.abs(I-r)<gn&&O-e>gn?[Math.abs(M-r)<gn?S:e,r]:null))-1),++_);_&&(j=!1)}if(j){var W,V,rt,ot=1/0;for(c=0,j=null;c<H;++c)(h=fi[c])&&(p=h.site,W=p[0]-e,V=p[1]-r,(rt=W*W+V*V)<ot&&(ot=rt,j=h));if(j){var it=[e,r],J=[e,s],dt=[a,s],pt=[a,r];j.halfedges.push(br.push(or(p=j.site,it,J))-1,br.push(or(p,J,dt))-1,br.push(or(p,dt,pt))-1,br.push(or(p,pt,it))-1)}}for(c=0;c<H;++c)(h=fi[c])&&(h.halfedges.length||delete fi[c])}function Ve(){Ze(this),this.x=this.y=this.arc=this.site=this.cy=null}function qe(e){var r=e.P,a=e.N;if(r&&a){var s=r.site,c=e.site,h=a.site;if(s!==h){var p=c[0],m=c[1],x=s[0]-p,_=s[1]-m,E=h[0]-p,S=h[1]-m,M=2*(x*S-_*E);if(!(M>=-iw)){var R=x*x+_*_,O=E*E+S*S,I=(S*R-_*O)/M,H=(x*O-E*R)/M,j=k0.pop()||new Ve;j.arc=e,j.site=c,j.x=I+p,j.y=(j.cy=H+m)+Math.sqrt(I*I+H*H),e.circle=j;for(var W=null,V=of._;V;)if(j.y<V.y||j.y===V.y&&j.x<=V.x){if(!V.L){W=V.P;break}V=V.L}else{if(!V.R){W=V;break}V=V.R}of.insert(W,j),W||(fg=j)}}}}function on(e){var r=e.circle;r&&(r.P||(fg=r.N),of.remove(r),k0.push(r),Ze(r),e.circle=null)}function fr(){Ze(this),this.edge=this.site=this.circle=null}function hn(e){var r=H0.pop()||new fr;return r.site=e,r}function Ln(e){on(e),ol.remove(e),H0.push(e),Ze(e)}function yt(e){var r=e.circle,a=r.x,s=r.cy,c=[a,s],h=e.P,p=e.N,m=[e];Ln(e);for(var x=h;x.circle&&Math.abs(a-x.circle.x)<gn&&Math.abs(s-x.circle.cy)<gn;)h=x.P,m.unshift(x),Ln(x),x=h;m.unshift(x),on(x);for(var _=p;_.circle&&Math.abs(a-_.circle.x)<gn&&Math.abs(s-_.circle.cy)<gn;)p=_.N,m.push(_),Ln(_),_=p;m.push(_),on(_);var E,S=m.length;for(E=1;E<S;++E)_=m[E],x=m[E-1],Pn(_.edge,x.site,_.site,c);x=m[0],_=m[S-1],_.edge=Yn(x.site,_.site,null,c),qe(x),qe(_)}function Ic(e){for(var r,a,s,c,h=e[0],p=e[1],m=ol._;m;)if((s=mn(m,p)-h)>gn)m=m.L;else{if(!((c=h-yr(m,p))>gn)){s>-gn?(r=m.P,a=m):c>-gn?(r=m,a=m.N):r=a=m;break}if(!m.R){r=m;break}m=m.R}Ne(e);var x=hn(e);if(ol.insert(r,x),r||a){if(r===a)return on(r),a=hn(r.site),ol.insert(x,a),x.edge=a.edge=Yn(r.site,x.site),qe(r),void qe(a);if(!a)return void(x.edge=Yn(r.site,x.site));on(r),on(a);var _=r.site,E=_[0],S=_[1],M=e[0]-E,R=e[1]-S,O=a.site,I=O[0]-E,H=O[1]-S,j=2*(M*H-R*I),W=M*M+R*R,V=I*I+H*H,rt=[(H*W-R*V)/j+E,(M*V-I*W)/j+S];Pn(a.edge,_,O,rt),x.edge=Yn(_,e,null,rt),a.edge=Yn(e,O,null,rt),qe(r),qe(a)}}function mn(e,r){var a=e.site,s=a[0],c=a[1],h=c-r;if(!h)return s;var p=e.P;if(!p)return-1/0;a=p.site;var m=a[0],x=a[1],_=x-r;if(!_)return m;var E=m-s,S=1/h-1/_,M=E/_;return S?(-M+Math.sqrt(M*M-2*S*(E*E/(-2*_)-x+_/2+c-h/2)))/S+s:(s+m)/2}function yr(e,r){var a=e.N;if(a)return mn(a,r);var s=e.site;return s[1]===r?s[0]:1/0}function Ie(e,r,a){return(e[0]-a[0])*(r[1]-e[1])-(e[0]-r[0])*(a[1]-e[1])}function Zn(e,r){return r[1]-e[1]||r[0]-e[0]}function ui(e,r){var a,s,c,h=e.sort(Zn).pop();for(br=[],fi=new Array(e.length),ol=new Ot,of=new Ot;;)if(c=fg,h&&(!c||h[1]<c.y||h[1]===c.y&&h[0]<c.x))h[0]===a&&h[1]===s||(Ic(h),a=h[0],s=h[1]),h=e.pop();else{if(!c)break;yt(c.arc)}if(ke(),r){var p=+r[0][0],m=+r[0][1],x=+r[1][0],_=+r[1][1];Ue(p,m,x,_),te(p,m,x,_)}this.edges=br,this.cells=fi,ol=of=br=fi=null}function Oc(e,r,a){this.target=e,this.type=r,this.transform=a}function qr(e,r,a){this.k=e,this.x=r,this.y=a}function Uc(e){return e.__zoom||ap}function Un(){A.event.stopImmediatePropagation()}function is(){return!A.event.button}function Dc(){var e,r,a=this;return a instanceof SVGElement?(a=a.ownerSVGElement||a,e=a.width.baseVal.value,r=a.height.baseVal.value):(e=a.clientWidth,r=a.clientHeight),[[0,0],[e,r]]}function to(){return this.__zoom||ap}function nd(){return-A.event.deltaY*(A.event.deltaMode?120:1)/500}function rd(){return"ontouchstart"in this}var ya=function(e,r){return e<r?-1:e>r?1:e>=r?0:NaN},Fc=function(e){return e.length===1&&(e=gt(e)),{left:function(r,a,s,c){for(s==null&&(s=0),c==null&&(c=r.length);s<c;){var h=s+c>>>1;e(r[h],a)<0?s=h+1:c=h}return s},right:function(r,a,s,c){for(s==null&&(s=0),c==null&&(c=r.length);s<c;){var h=s+c>>>1;e(r[h],a)>0?c=h:s=h+1}return s}}},Eh=Fc(ya),Pr=Eh.right,Wi=Eh.left,id=function(e,r){r==null&&(r=Dt);for(var a=0,s=e.length-1,c=e[0],h=new Array(s<0?0:s);a<s;)h[a]=r(c,c=e[++a]);return h},ad=function(e,r,a){var s,c,h,p,m=e.length,x=r.length,_=new Array(m*x);for(a==null&&(a=Dt),s=h=0;s<m;++s)for(p=e[s],c=0;c<x;++c,++h)_[h]=a(p,r[c]);return _},Th=function(e,r){return r<e?-1:r>e?1:r>=e?0:NaN},k=function(e){return e===null?NaN:+e},q=function(e,r){var a,s,c=e.length,h=0,p=-1,m=0,x=0;if(r==null)for(;++p<c;)isNaN(a=k(e[p]))||(s=a-m,m+=s/++h,x+=s*(a-m));else for(;++p<c;)isNaN(a=k(r(e[p],p,e)))||(s=a-m,m+=s/++h,x+=s*(a-m));if(h>1)return x/(h-1)},nt=function(e,r){var a=q(e,r);return a&&Math.sqrt(a)},Lt=function(e,r){var a,s,c,h=e.length,p=-1;if(r==null){for(;++p<h;)if((a=e[p])!=null&&a>=a)for(s=c=a;++p<h;)(a=e[p])!=null&&(s>a&&(s=a),c<a&&(c=a))}else for(;++p<h;)if((a=r(e[p],p,e))!=null&&a>=a)for(s=c=a;++p<h;)(a=r(e[p],p,e))!=null&&(s>a&&(s=a),c<a&&(c=a));return[s,c]},Qt=Array.prototype,ve=Qt.slice,De=Qt.map,Te=function(e){return function(){return e}},He=function(e){return e},me=function(e,r,a){e=+e,r=+r,a=(c=arguments.length)<2?(r=e,e=0,1):c<3?1:+a;for(var s=-1,c=0|Math.max(0,Math.ceil((r-e)/a)),h=new Array(c);++s<c;)h[s]=e+s*a;return h},Se=Math.sqrt(50),ae=Math.sqrt(10),kn=Math.sqrt(2),Ke=function(e,r,a){var s,c,h,p=r<e,m=-1;if(p&&(s=e,e=r,r=s),(h=Bt(e,r,a))===0||!isFinite(h))return[];if(h>0)for(e=Math.ceil(e/h),r=Math.floor(r/h),c=new Array(s=Math.ceil(r-e+1));++m<s;)c[m]=(e+m)*h;else for(e=Math.floor(e*h),r=Math.ceil(r*h),c=new Array(s=Math.ceil(e-r+1));++m<s;)c[m]=(e-m)/h;return p&&c.reverse(),c},Nr=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1},Nn=function(){function e(c){var h,p,m=c.length,x=new Array(m);for(h=0;h<m;++h)x[h]=r(c[h],h,c);var _=a(x),E=_[0],S=_[1],M=s(x,E,S);Array.isArray(M)||(M=de(E,S,M),M=me(Math.ceil(E/M)*M,Math.floor(S/M)*M,M));for(var R=M.length;M[0]<=E;)M.shift(),--R;for(;M[R-1]>S;)M.pop(),--R;var O,I=new Array(R+1);for(h=0;h<=R;++h)O=I[h]=[],O.x0=h>0?M[h-1]:E,O.x1=h<R?M[h]:S;for(h=0;h<m;++h)p=x[h],E<=p&&p<=S&&I[Pr(M,p,0,R)].push(c[h]);return I}var r=He,a=Lt,s=Nr;return e.value=function(c){return arguments.length?(r=typeof c=="function"?c:Te(c),e):r},e.domain=function(c){return arguments.length?(a=typeof c=="function"?c:Te([c[0],c[1]]),e):a},e.thresholds=function(c){return arguments.length?(s=typeof c=="function"?c:Te(Array.isArray(c)?ve.call(c):c),e):s},e},jn=function(e,r,a){if(a==null&&(a=k),s=e.length){if((r=+r)<=0||s<2)return+a(e[0],0,e);if(r>=1)return+a(e[s-1],s-1,e);var s,c=(s-1)*r,h=Math.floor(c),p=+a(e[h],h,e);return p+(+a(e[h+1],h+1,e)-p)*(c-h)}},Xi=function(e,r,a){return e=De.call(e,k).sort(ya),Math.ceil((a-r)/(2*(jn(e,.75)-jn(e,.25))*Math.pow(e.length,-1/3)))},yu=function(e,r,a){return Math.ceil((a-r)/(3.5*nt(e)*Math.pow(e.length,-1/3)))},Yr=function(e,r){var a,s,c=e.length,h=-1;if(r==null){for(;++h<c;)if((a=e[h])!=null&&a>=a)for(s=a;++h<c;)(a=e[h])!=null&&a>s&&(s=a)}else for(;++h<c;)if((a=r(e[h],h,e))!=null&&a>=a)for(s=a;++h<c;)(a=r(e[h],h,e))!=null&&a>s&&(s=a);return s},Gp=function(e,r){var a,s=e.length,c=s,h=-1,p=0;if(r==null)for(;++h<s;)isNaN(a=k(e[h]))?--c:p+=a;else for(;++h<s;)isNaN(a=k(r(e[h],h,e)))?--c:p+=a;if(c)return p/c},Sh=function(e,r){var a,s=e.length,c=-1,h=[];if(r==null)for(;++c<s;)isNaN(a=k(e[c]))||h.push(a);else for(;++c<s;)isNaN(a=k(r(e[c],c,e)))||h.push(a);return jn(h.sort(ya),.5)},xu=function(e){for(var r,a,s,c=e.length,h=-1,p=0;++h<c;)p+=e[h].length;for(a=new Array(p);--c>=0;)for(s=e[c],r=s.length;--r>=0;)a[--p]=s[r];return a},pg=function(e,r){var a,s,c=e.length,h=-1;if(r==null){for(;++h<c;)if((a=e[h])!=null&&a>=a)for(s=a;++h<c;)(a=e[h])!=null&&s>a&&(s=a)}else for(;++h<c;)if((a=r(e[h],h,e))!=null&&a>=a)for(s=a;++h<c;)(a=r(e[h],h,e))!=null&&s>a&&(s=a);return s},V0=function(e,r){for(var a=r.length,s=new Array(a);a--;)s[a]=e[r[a]];return s},j0=function(e,r){if(a=e.length){var a,s,c=0,h=0,p=e[h];for(r==null&&(r=ya);++c<a;)(r(s=e[c],p)<0||r(p,p)!==0)&&(p=s,h=c);return r(p,p)===0?h:void 0}},W0=function(e,r,a){for(var s,c,h=(a==null?e.length:a)-(r=r==null?0:+r);h;)c=Math.random()*h--|0,s=e[h+r],e[h+r]=e[c+r],e[c+r]=s;return e},X0=function(e,r){var a,s=e.length,c=-1,h=0;if(r==null)for(;++c<s;)(a=+e[c])&&(h+=a);else for(;++c<s;)(a=+r(e[c],c,e))&&(h+=a);return h},mg=function(e){if(!(c=e.length))return[];for(var r=-1,a=pg(e,fe),s=new Array(a);++r<a;)for(var c,h=-1,p=s[r]=new Array(c);++h<c;)p[h]=e[h][r];return s},q0=function(){return mg(arguments)},Vp=Array.prototype.slice,Y0=function(e){return e},od=1,sd=2,jp=3,Ah=4,gg=1e-6,Z0={value:function(){}};Fe.prototype=Ye.prototype={constructor:Fe,on:function(e,r){var a,s=this._,c=In(e+"",s),h=-1,p=c.length;{if(!(arguments.length<2)){if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++h<p;)if(a=(e=c[h]).type)s[a]=Rt(s[a],e.name,r);else if(r==null)for(a in s)s[a]=Rt(s[a],e.name,null);return this}for(;++h<p;)if((a=(e=c[h]).type)&&(a=dr(s[a],e.name)))return a}},copy:function(){var e={},r=this._;for(var a in r)e[a]=r[a].slice();return new Fe(e)},call:function(e,r){if((a=arguments.length-2)>0)for(var a,s,c=new Array(a),h=0;h<a;++h)c[h]=arguments[h+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],h=0,a=s.length;h<a;++h)s[h].value.apply(r,c)},apply:function(e,r,a){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],c=0,h=s.length;c<h;++c)s[c].value.apply(r,a)}};var Wp="http://www.w3.org/1999/xhtml",Xp={svg:"http://www.w3.org/2000/svg",xhtml:Wp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Rh=function(e){var r=e+="",a=r.indexOf(":");return a>=0&&(r=e.slice(0,a))!=="xmlns"&&(e=e.slice(a+1)),Xp.hasOwnProperty(r)?{space:Xp[r],local:e}:e},qp=function(e){var r=Rh(e);return(r.local?$e:je)(r)},K0=0;ur.prototype=xn.prototype={constructor:ur,get:function(e){for(var r=this._;!(r in e);)if(!(e=e.parentNode))return;return e[r]},set:function(e,r){return e[this._]=r},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var vg=function(e){return function(){return this.matches(e)}};if(typeof document!="undefined"){var Lh=document.documentElement;if(!Lh.matches){var Q0=Lh.webkitMatchesSelector||Lh.msMatchesSelector||Lh.mozMatchesSelector||Lh.oMatchesSelector;vg=function(e){return function(){return Q0.call(this,e)}}}}var Yp=vg,yg={};A.event=null,typeof document!="undefined"&&("onmouseenter"in document.documentElement||(yg={mouseenter:"mouseover",mouseleave:"mouseout"}));var $0=function(e,r,a){var s,c,h=ut(e+""),p=h.length;{if(!(arguments.length<2)){for(m=r?Ae:Nt,a==null&&(a=!1),s=0;s<p;++s)this.each(m(h[s],r,a));return this}var m=this.node().__on;if(m){for(var x,_=0,E=m.length;_<E;++_)for(s=0,x=m[_];s<p;++s)if((c=h[s]).type===x.type&&c.name===x.name)return x.value}}},Zp=function(){for(var e,r=A.event;e=r.sourceEvent;)r=e;return r},Kp=function(e,r){var a=e.ownerSVGElement||e;if(a.createSVGPoint){var s=a.createSVGPoint();return s.x=r.clientX,s.y=r.clientY,s=s.matrixTransform(e.getScreenCTM().inverse()),[s.x,s.y]}var c=e.getBoundingClientRect();return[r.clientX-c.left-e.clientLeft,r.clientY-c.top-e.clientTop]},as=function(e){var r=Zp();return r.changedTouches&&(r=r.changedTouches[0]),Kp(e,r)},ud=function(e){return e==null?_n:function(){return this.querySelector(e)}},J0=function(e){typeof e!="function"&&(e=ud(e));for(var r=this._groups,a=r.length,s=new Array(a),c=0;c<a;++c)for(var h,p,m=r[c],x=m.length,_=s[c]=new Array(x),E=0;E<x;++E)(h=m[E])&&(p=e.call(h,h.__data__,E,m))&&("__data__"in h&&(p.__data__=h.__data__),_[E]=p);return new Bn(s,this._parents)},Qp=function(e){return e==null?Sn:function(){return this.querySelectorAll(e)}},ty=function(e){typeof e!="function"&&(e=Qp(e));for(var r=this._groups,a=r.length,s=[],c=[],h=0;h<a;++h)for(var p,m=r[h],x=m.length,_=0;_<x;++_)(p=m[_])&&(s.push(e.call(p,p.__data__,_,m)),c.push(p));return new Bn(s,c)},ey=function(e){typeof e!="function"&&(e=Yp(e));for(var r=this._groups,a=r.length,s=new Array(a),c=0;c<a;++c)for(var h,p=r[c],m=p.length,x=s[c]=[],_=0;_<m;++_)(h=p[_])&&e.call(h,h.__data__,_,p)&&x.push(h);return new Bn(s,this._parents)},xg=function(e){return new Array(e.length)},ny=function(){return new Bn(this._enter||this._groups.map(xg),this._parents)};cr.prototype={constructor:cr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,r){return this._parent.insertBefore(e,r)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var ry=function(e){return function(){return e}},_g="$",iy=function(e,r){if(!e)return R=new Array(this.size()),_=-1,this.each(function(ot){R[++_]=ot}),R;var a=r?cn:We,s=this._parents,c=this._groups;typeof e!="function"&&(e=ry(e));for(var h=c.length,p=new Array(h),m=new Array(h),x=new Array(h),_=0;_<h;++_){var E=s[_],S=c[_],M=S.length,R=e.call(E,E&&E.__data__,_,s),O=R.length,I=m[_]=new Array(O),H=p[_]=new Array(O);a(E,S,I,H,x[_]=new Array(M),R,r);for(var j,W,V=0,rt=0;V<O;++V)if(j=I[V]){for(V>=rt&&(rt=V+1);!(W=H[rt])&&++rt<O;);j._next=W||null}}return p=new Bn(p,s),p._enter=m,p._exit=x,p},ay=function(){return new Bn(this._exit||this._groups.map(xg),this._parents)},oy=function(e){for(var r=this._groups,a=e._groups,s=r.length,c=a.length,h=Math.min(s,c),p=new Array(s),m=0;m<h;++m)for(var x,_=r[m],E=a[m],S=_.length,M=p[m]=new Array(S),R=0;R<S;++R)(x=_[R]||E[R])&&(M[R]=x);for(;m<s;++m)p[m]=r[m];return new Bn(p,this._parents)},sy=function(){for(var e=this._groups,r=-1,a=e.length;++r<a;)for(var s,c=e[r],h=c.length-1,p=c[h];--h>=0;)(s=c[h])&&(p&&p!==s.nextSibling&&p.parentNode.insertBefore(s,p),p=s);return this},uy=function(e){function r(S,M){return S&&M?e(S.__data__,M.__data__):!S-!M}e||(e=Lu);for(var a=this._groups,s=a.length,c=new Array(s),h=0;h<s;++h){for(var p,m=a[h],x=m.length,_=c[h]=new Array(x),E=0;E<x;++E)(p=m[E])&&(_[E]=p);_.sort(r)}return new Bn(c,this._parents).order()},cy=function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},ly=function(){var e=new Array(this.size()),r=-1;return this.each(function(){e[++r]=this}),e},hy=function(){for(var e=this._groups,r=0,a=e.length;r<a;++r)for(var s=e[r],c=0,h=s.length;c<h;++c){var p=s[c];if(p)return p}return null},fy=function(){var e=0;return this.each(function(){++e}),e},dy=function(){return!this.node()},py=function(e){for(var r=this._groups,a=0,s=r.length;a<s;++a)for(var c,h=r[a],p=0,m=h.length;p<m;++p)(c=h[p])&&e.call(c,c.__data__,p,h);return this},my=function(e,r){var a=Rh(e);if(arguments.length<2){var s=this.node();return a.local?s.getAttributeNS(a.space,a.local):s.getAttribute(a)}return this.each((r==null?a.local?Si:Jn:typeof r=="function"?a.local?Ai:Ea:a.local?uo:so)(a,r))},$p=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView},gy=function(e,r,a){return arguments.length>1?this.each((r==null?Zi:typeof r=="function"?ee:pr)(e,r,a==null?"":a)):Xn(this.node(),e)},vy=function(e,r){return arguments.length>1?this.each((r==null?Ki:typeof r=="function"?Qi:kr)(e,r)):this.node()[e]};Hr.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var r=this._names.indexOf(e);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var yy=function(e,r){var a=_e(e+"");if(arguments.length<2){for(var s=qn(this.node()),c=-1,h=a.length;++c<h;)if(!s.contains(a[c]))return!1;return!0}return this.each((typeof r=="function"?bn:r?Xe:dn)(a,r))},xy=function(e){return arguments.length?this.each(e==null?Ri:(typeof e=="function"?op:Li)(e)):this.node().textContent},_y=function(e){return arguments.length?this.each(e==null?$i:(typeof e=="function"?Yt:sl)(e)):this.node().innerHTML},by=function(){return this.each(di)},wy=function(){return this.each(co)},My=function(e){var r=typeof e=="function"?e:qp(e);return this.select(function(){return this.appendChild(r.apply(this,arguments))})},Ey=function(e,r){var a=typeof e=="function"?e:qp(e),s=r==null?zn:typeof r=="function"?r:ud(r);return this.select(function(){return this.insertBefore(a.apply(this,arguments),s.apply(this,arguments)||null)})},Ty=function(){return this.each(Ci)},Sy=function(e){return arguments.length?this.property("__data__",e):this.node().__data__},Ay=function(e,r){return this.each((typeof r=="function"?Re:Ee)(e,r))},Jp=[null];Bn.prototype=Qr.prototype={constructor:Bn,select:J0,selectAll:ty,filter:ey,data:iy,enter:ny,exit:ay,merge:oy,order:sy,sort:uy,call:cy,nodes:ly,node:hy,size:fy,empty:dy,each:py,attr:my,style:gy,property:vy,classed:yy,text:xy,html:_y,raise:by,lower:wy,append:My,insert:Ey,remove:Ty,datum:Sy,on:$0,dispatch:Ay};var ci=function(e){return typeof e=="string"?new Bn([[document.querySelector(e)]],[document.documentElement]):new Bn([[e]],Jp)},Ry=function(e){return typeof e=="string"?new Bn([document.querySelectorAll(e)],[document.documentElement]):new Bn([e==null?[]:e],Jp)},cd=function(e,r,a){arguments.length<3&&(a=r,r=Zp().changedTouches);for(var s,c=0,h=r?r.length:0;c<h;++c)if((s=r[c]).identifier===a)return Kp(e,s);return null},Ly=function(e,r){r==null&&(r=Zp().touches);for(var a=0,s=r?r.length:0,c=new Array(s);a<s;++a)c[a]=Kp(e,r[a]);return c},zc=function(){A.event.preventDefault(),A.event.stopImmediatePropagation()},ld=function(e){var r=e.document.documentElement,a=ci(e).on("dragstart.drag",zc,!0);"onselectstart"in r?a.on("selectstart.drag",zc,!0):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")},tm=function(e){return function(){return e}};Pi.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var Cy=function(){function e(V){V.on("mousedown.drag",r).filter(vs).on("touchstart.drag",c).on("touchmove.drag",h).on("touchend.drag touchcancel.drag",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function r(){if(!S&&M.apply(this,arguments)){var V=m("mouse",R.apply(this,arguments),as,this,arguments);V&&(ci(A.event.view).on("mousemove.drag",a,!0).on("mouseup.drag",s,!0),ld(A.event.view),Ta(),E=!1,x=A.event.clientX,_=A.event.clientY,V("start"))}}function a(){if(zc(),!E){var V=A.event.clientX-x,rt=A.event.clientY-_;E=V*V+rt*rt>W}I.mouse("drag")}function s(){ci(A.event.view).on("mousemove.drag mouseup.drag",null),Ji(A.event.view,E),zc(),I.mouse("end")}function c(){if(M.apply(this,arguments)){var V,rt,ot=A.event.changedTouches,it=R.apply(this,arguments),J=ot.length;for(V=0;V<J;++V)(rt=m(ot[V].identifier,it,cd,this,arguments))&&(Ta(),rt("start"))}}function h(){var V,rt,ot=A.event.changedTouches,it=ot.length;for(V=0;V<it;++V)(rt=I[ot[V].identifier])&&(zc(),rt("drag"))}function p(){var V,rt,ot=A.event.changedTouches,it=ot.length;for(S&&clearTimeout(S),S=setTimeout(function(){S=null},500),V=0;V<it;++V)(rt=I[ot[V].identifier])&&(Ta(),rt("end"))}function m(V,rt,ot,it,J){var dt,pt,At,bt=ot(rt,V),Mt=H.copy();if(tt(new Pi(e,"beforestart",dt,V,j,bt[0],bt[1],0,0,Mt),function(){return(A.event.subject=dt=O.apply(it,J))!=null&&(pt=dt.x-bt[0]||0,At=dt.y-bt[1]||0,!0)}))return function Jt(Pt){var Ht,ct=bt;switch(Pt){case"start":I[V]=Jt,Ht=j++;break;case"end":delete I[V],--j;case"drag":bt=ot(rt,V),Ht=j}tt(new Pi(e,Pt,dt,V,Ht,bt[0]+pt,bt[1]+At,bt[0]-ct[0],bt[1]-ct[1],Mt),Mt.apply,Mt,[Pt,it,J])}}var x,_,E,S,M=gs,R=Sa,O=jt,I={},H=Ye("start","drag","end"),j=0,W=0;return e.filter=function(V){return arguments.length?(M=typeof V=="function"?V:tm(!!V),e):M},e.container=function(V){return arguments.length?(R=typeof V=="function"?V:tm(V),e):R},e.subject=function(V){return arguments.length?(O=typeof V=="function"?V:tm(V),e):O},e.on=function(){var V=H.on.apply(H,arguments);return V===H?e:V},e.clickDistance=function(V){return arguments.length?(W=(V=+V)*V,e):Math.sqrt(W)},e},Bc=function(e,r,a){e.prototype=r.prototype=a,a.constructor=e},kc="\\s*([+-]?\\d+)\\s*",Ch="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",xa="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Py=/^#([0-9a-f]{3})$/,Ny=/^#([0-9a-f]{6})$/,Iy=new RegExp("^rgb\\("+[kc,kc,kc]+"\\)$"),Oy=new RegExp("^rgb\\("+[xa,xa,xa]+"\\)$"),Uy=new RegExp("^rgba\\("+[kc,kc,kc,Ch]+"\\)$"),Dy=new RegExp("^rgba\\("+[xa,xa,xa,Ch]+"\\)$"),Fy=new RegExp("^hsl\\("+[Ch,xa,xa]+"\\)$"),zy=new RegExp("^hsla\\("+[Ch,xa,xa,Ch]+"\\)$"),bg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Bc(pi,Zt,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Bc(nn,$r,lo(pi,{brighter:function(e){return e=e==null?1/.7:Math.pow(1/.7,e),new nn(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?.7:Math.pow(.7,e),new nn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}})),Bc(wn,Gr,lo(pi,{brighter:function(e){return e=e==null?1/.7:Math.pow(1/.7,e),new wn(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?.7:Math.pow(.7,e),new wn(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),r=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*r,c=2*a-s;return new nn(ul(e>=240?e-240:e+120,c,s),ul(e,c,s),ul(e<120?e+240:e-120,c,s),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var wg=Math.PI/180,Mg=180/Math.PI,Eg=.95047,Tg=1,Sg=1.08883,Ag=4/29,Hc=6/29,Rg=3*Hc*Hc,By=Hc*Hc*Hc;Bc(Ni,Pu,lo(pi,{brighter:function(e){return new Ni(this.l+18*(e==null?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Ni(this.l-18*(e==null?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,r=isNaN(this.a)?e:e+this.a/500,a=isNaN(this.b)?e:e-this.b/200;return e=Tg*hl(e),r=Eg*hl(r),a=Sg*hl(a),new nn(fl(3.2404542*r-1.5371385*e-.4985314*a),fl(-.969266*r+1.8760108*e+.041556*a),fl(.0556434*r-.2040259*e+1.0572252*a),this.opacity)}})),Bc(na,Nu,lo(pi,{brighter:function(e){return new na(this.h,this.c,this.l+18*(e==null?1:e),this.opacity)},darker:function(e){return new na(this.h,this.c,this.l-18*(e==null?1:e),this.opacity)},rgb:function(){return cl(this).rgb()}}));var Lg=-.14861,em=1.78277,nm=-.29227,hd=-.90649,Ph=1.97294,Cg=Ph*hd,Pg=Ph*em,Ng=em*nm-hd*Lg;Bc(La,Jr,lo(pi,{brighter:function(e){return e=e==null?1/.7:Math.pow(1/.7,e),new La(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?.7:Math.pow(.7,e),new La(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*wg,r=+this.l,a=isNaN(this.s)?0:this.s*r*(1-r),s=Math.cos(e),c=Math.sin(e);return new nn(255*(r+a*(Lg*s+em*c)),255*(r+a*(nm*s+hd*c)),255*(r+a*(Ph*s)),this.opacity)}}));var Nh,rm,Ig,fd,dd,Ih,Og=function(e){var r=e.length-1;return function(a){var s=a<=0?a=0:a>=1?(a=1,r-1):Math.floor(a*r),c=e[s],h=e[s+1],p=s>0?e[s-1]:2*c-h,m=s<r-1?e[s+2]:2*h-c;return pl((a-s/r)*r,p,c,h,m)}},Ug=function(e){var r=e.length;return function(a){var s=Math.floor(((a%=1)<0?++a:a)*r),c=e[(s+r-1)%r],h=e[s%r],p=e[(s+1)%r],m=e[(s+2)%r];return pl((a-s/r)*r,c,h,p,m)}},pd=function(e){return function(){return e}},Oh=function e(r){function a(c,h){var p=s((c=$r(c)).r,(h=$r(h)).r),m=s(c.g,h.g),x=s(c.b,h.b),_=Gn(c.opacity,h.opacity);return function(E){return c.r=p(E),c.g=m(E),c.b=x(E),c.opacity=_(E),c+""}}var s=cp(r);return a.gamma=e,a}(1),ky=cf(Og),Hy=cf(Ug),Dg=function(e,r){var a,s=r?r.length:0,c=e?Math.min(s,e.length):0,h=new Array(s),p=new Array(s);for(a=0;a<c;++a)h[a]=Uh(e[a],r[a]);for(;a<s;++a)p[a]=r[a];return function(m){for(a=0;a<c;++a)p[a]=h[a](m);return p}},Fg=function(e,r){var a=new Date;return e=+e,r-=e,function(s){return a.setTime(e+r*s),a}},li=function(e,r){return e=+e,r-=e,function(a){return e+r*a}},zg=function(e,r){var a,s={},c={};e!==null&&typeof e=="object"||(e={}),r!==null&&typeof r=="object"||(r={});for(a in r)a in e?s[a]=Uh(e[a],r[a]):c[a]=r[a];return function(h){for(a in s)c[a]=s[a](h);return c}},im=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,am=new RegExp(im.source,"g"),om=function(e,r){var a,s,c,h=im.lastIndex=am.lastIndex=0,p=-1,m=[],x=[];for(e+="",r+="";(a=im.exec(e))&&(s=am.exec(r));)(c=s.index)>h&&(c=r.slice(h,c),m[p]?m[p]+=c:m[++p]=c),(a=a[0])===(s=s[0])?m[p]?m[p]+=s:m[++p]=s:(m[++p]=null,x.push({i:p,x:li(a,s)})),h=am.lastIndex;return h<r.length&&(c=r.slice(h),m[p]?m[p]+=c:m[++p]=c),m.length<2?x[0]?ys(x[0].x):lp(r):(r=x.length,function(_){for(var E,S=0;S<r;++S)m[(E=x[S]).i]=E.x(_);return m.join("")})},Uh=function(e,r){var a,s=typeof r;return r==null||s==="boolean"?pd(r):(s==="number"?li:s==="string"?(a=Zt(r))?(r=a,Oh):om:r instanceof Zt?Oh:r instanceof Date?Fg:Array.isArray(r)?Dg:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?zg:li)(e,r)},Bg=function(e,r){return e=+e,r-=e,function(a){return Math.round(e+r*a)}},kg=180/Math.PI,sm={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Hg=function(e,r,a,s,c,h){var p,m,x;return(p=Math.sqrt(e*e+r*r))&&(e/=p,r/=p),(x=e*a+r*s)&&(a-=e*x,s-=r*x),(m=Math.sqrt(a*a+s*s))&&(a/=m,s/=m,x/=m),e*s<r*a&&(e=-e,r=-r,x=-x,p=-p),{translateX:c,translateY:h,rotate:Math.atan2(r,e)*kg,skewX:Math.atan(x)*kg,scaleX:p,scaleY:m}},Gg=xl(lf,"px, ","px)","deg)"),Vg=xl(yl,", ",")",")"),Dh=Math.SQRT2,jg=function(e,r){var a,s,c=e[0],h=e[1],p=e[2],m=r[0],x=r[1],_=r[2],E=m-c,S=x-h,M=E*E+S*S;if(M<1e-12)s=Math.log(_/p)/Dh,a=function(W){return[c+W*E,h+W*S,p*Math.exp(Dh*W*s)]};else{var R=Math.sqrt(M),O=(_*_-p*p+4*M)/(2*p*2*R),I=(_*_-p*p-4*M)/(2*_*2*R),H=Math.log(Math.sqrt(O*O+1)-O),j=Math.log(Math.sqrt(I*I+1)-I);s=(j-H)/Dh,a=function(W){var V=W*s,rt=hf(H),ot=p/(2*R)*(rt*fp(Dh*V+H)-hp(H));return[c+ot*E,h+ot*S,p*rt/hf(Dh*V+H)]}}return a.duration=1e3*s,a},Gy=ff(vl),Vy=ff(Gn),jy=df(vl),Wy=df(Gn),Xy=xs(vl),md=xs(Gn),qy=function(e,r){for(var a=new Array(r),s=0;s<r;++s)a[s]=e(s/(r-1));return a},Gc=0,Fh=0,zh=0,Wg=1e3,gd=0,os=0,um=0,cm=typeof performance=="object"&&performance.now?performance:Date,Xg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};_s.prototype=bs.prototype={constructor:_s,restart:function(e,r,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?fo():+a)+(r==null?0:+r),this._next||Ih===this||(Ih?Ih._next=this:dd=this,Ih=this),this._call=e,this._time=a,ws()},stop:function(){this._call&&(this._call=null,this._time=1/0,ws())}};var lm=function(e,r,a){var s=new _s;return r=r==null?0:+r,s.restart(function(c){s.stop(),e(c+r)},r,a),s},Yy=function(e,r,a){var s=new _s,c=r;return r==null?(s.restart(e,r,a),s):(r=+r,a=a==null?fo():+a,s.restart(function h(p){p+=c,s.restart(h,c+=r,a),e(p)},r,a),s)},Zy=Ye("start","end","interrupt"),Ky=[],qg=0,hm=1,vd=2,fm=3,Yg=4,dm=5,yd=6,xd=function(e,r,a,s,c,h){var p=e.__transition;if(p){if(a in p)return}else e.__transition={};Ms(e,a,{name:r,index:s,group:c,on:Zy,tween:Ky,time:h.time,delay:h.delay,duration:h.duration,ease:h.ease,timer:null,state:qg})},_u=function(e,r){var a,s,c,h=e.__transition,p=!0;if(h){r=r==null?null:r+"";for(c in h)(a=h[c]).name===r?(s=a.state>vd&&a.state<dm,a.state=yd,a.timer.stop(),s&&a.on.call("interrupt",e,e.__data__,a.index,a.group),delete h[c]):p=!1;p&&delete e.__transition}},Qy=function(e){return this.each(function(){_u(this,e)})},$y=function(e,r){var a=this._id;if(e+="",arguments.length<2){for(var s,c=wr(this.node(),a).tween,h=0,p=c.length;h<p;++h)if((s=c[h]).name===e)return s.value;return null}return this.each((r==null?Uu:Du)(a,e,r))},Zg=function(e,r){var a;return(typeof r=="number"?li:r instanceof Zt?Oh:(a=Zt(r))?(r=a,Oh):om)(e,r)},Jy=function(e,r){var a=Rh(e),s=a==="transform"?Vg:Zg;return this.attrTween(e,typeof r=="function"?(a.local?Es:mo)(a,s,rn(this,"attr."+e,r)):r==null?(a.local?pn:mr)(a):(a.local?ei:Fu)(a,s,r+""))},t1=function(e,r){var a="attr."+e;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(r==null)return this.tween(a,null);if(typeof r!="function")throw new Error;var s=Rh(e);return this.tween(a,(s.local?zu:go)(s,r))},e1=function(e){var r=this._id;return arguments.length?this.each((typeof e=="function"?Ts:vo)(r,e)):wr(this.node(),r).delay},n1=function(e){var r=this._id;return arguments.length?this.each((typeof e=="function"?Ss:yo)(r,e)):wr(this.node(),r).duration},r1=function(e){var r=this._id;return arguments.length?this.each(As(r,e)):wr(this.node(),r).ease},i1=function(e){typeof e!="function"&&(e=Yp(e));for(var r=this._groups,a=r.length,s=new Array(a),c=0;c<a;++c)for(var h,p=r[c],m=p.length,x=s[c]=[],_=0;_<m;++_)(h=p[_])&&e.call(h,h.__data__,_,p)&&x.push(h);return new lr(s,this._parents,this._name,this._id)},a1=function(e){if(e._id!==this._id)throw new Error;for(var r=this._groups,a=e._groups,s=r.length,c=a.length,h=Math.min(s,c),p=new Array(s),m=0;m<h;++m)for(var x,_=r[m],E=a[m],S=_.length,M=p[m]=new Array(S),R=0;R<S;++R)(x=_[R]||E[R])&&(M[R]=x);for(;m<s;++m)p[m]=r[m];return new lr(p,this._parents,this._name,this._id)},o1=function(e,r){var a=this._id;return arguments.length<2?wr(this.node(),a).on.on(e):this.each(Rs(a,e,r))},s1=function(){return this.on("end.remove",xo(this._id))},u1=function(e){var r=this._name,a=this._id;typeof e!="function"&&(e=ud(e));for(var s=this._groups,c=s.length,h=new Array(c),p=0;p<c;++p)for(var m,x,_=s[p],E=_.length,S=h[p]=new Array(E),M=0;M<E;++M)(m=_[M])&&(x=e.call(m,m.__data__,M,_))&&("__data__"in m&&(x.__data__=m.__data__),S[M]=x,xd(S[M],r,a,M,S,wr(m,a)));return new lr(h,this._parents,r,a)},c1=function(e){var r=this._name,a=this._id;typeof e!="function"&&(e=Qp(e));for(var s=this._groups,c=s.length,h=[],p=[],m=0;m<c;++m)for(var x,_=s[m],E=_.length,S=0;S<E;++S)if(x=_[S]){for(var M,R=e.call(x,x.__data__,S,_),O=wr(x,a),I=0,H=R.length;I<H;++I)(M=R[I])&&xd(M,r,a,I,R,O);h.push(R),p.push(x)}return new lr(h,p,r,a)},l1=Qr.prototype.constructor,h1=function(){return new l1(this._groups,this._parents)},f1=function(e,r,a){var s=(e+="")=="transform"?Gg:Zg;return r==null?this.styleTween(e,Ls(e,s)).on("end.style."+e,Pa(e)):this.styleTween(e,typeof r=="function"?_o(e,s,rn(this,"style."+e,r)):Cs(e,s,r+""),a)},d1=function(e,r,a){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(r==null)return this.tween(s,null);if(typeof r!="function")throw new Error;return this.tween(s,Ps(e,r,a==null?"":a))},p1=function(e){return this.tween("text",typeof e=="function"?Ns(rn(this,"text",e)):bo(e==null?"":e+""))},m1=function(){for(var e=this._name,r=this._id,a=Na(),s=this._groups,c=s.length,h=0;h<c;++h)for(var p,m=s[h],x=m.length,_=0;_<x;++_)if(p=m[_]){var E=wr(p,r);xd(p,e,a,_,m,{time:E.time+E.delay+E.duration,delay:0,duration:E.duration,ease:E.ease})}return new lr(s,this._parents,e,a)},g1=0,Vc=Qr.prototype;lr.prototype=wo.prototype={constructor:lr,select:u1,selectAll:c1,filter:i1,merge:a1,selection:h1,transition:m1,call:Vc.call,nodes:Vc.nodes,node:Vc.node,size:Vc.size,empty:Vc.empty,each:Vc.each,on:o1,attr:Jy,attrTween:t1,style:f1,styleTween:d1,text:p1,remove:s1,tween:$y,delay:e1,duration:n1,ease:r1};var v1=function e(r){function a(s){return Math.pow(s,r)}return r=+r,a.exponent=e,a}(3),y1=function e(r){function a(s){return 1-Math.pow(1-s,r)}return r=+r,a.exponent=e,a}(3),Kg=function e(r){function a(s){return((s*=2)<=1?Math.pow(s,r):2-Math.pow(2-s,r))/2}return r=+r,a.exponent=e,a}(3),Qg=Math.PI,$g=Qg/2,pm=4/11,x1=6/11,_1=8/11,b1=.75,w1=9/11,M1=10/11,E1=.9375,T1=21/22,S1=63/64,_d=1/pm/pm,A1=function e(r){function a(s){return s*s*((r+1)*s-r)}return r=+r,a.overshoot=e,a}(1.70158),R1=function e(r){function a(s){return--s*s*((r+1)*s+r)+1}return r=+r,a.overshoot=e,a}(1.70158),Jg=function e(r){function a(s){return((s*=2)<1?s*s*((r+1)*s-r):(s-=2)*s*((r+1)*s+r)+2)/2}return r=+r,a.overshoot=e,a}(1.70158),jc=2*Math.PI,L1=function e(r,a){function s(h){return r*Math.pow(2,10*--h)*Math.sin((c-h)/a)}var c=Math.asin(1/(r=Math.max(1,r)))*(a/=jc);return s.amplitude=function(h){return e(h,a*jc)},s.period=function(h){return e(r,h)},s}(1,.3),tv=function e(r,a){function s(h){return 1-r*Math.pow(2,-10*(h=+h))*Math.sin((h+c)/a)}var c=Math.asin(1/(r=Math.max(1,r)))*(a/=jc);return s.amplitude=function(h){return e(h,a*jc)},s.period=function(h){return e(r,h)},s}(1,.3),C1=function e(r,a){function s(h){return((h=2*h-1)<0?r*Math.pow(2,10*h)*Math.sin((c-h)/a):2-r*Math.pow(2,-10*h)*Math.sin((c+h)/a))/2}var c=Math.asin(1/(r=Math.max(1,r)))*(a/=jc);return s.amplitude=function(h){return e(h,a*jc)},s.period=function(h){return e(r,h)},s}(1,.3),mm={time:null,delay:0,duration:250,ease:Ia},P1=function(e){var r,a;e instanceof lr?(r=e._id,e=e._name):(r=Na(),(a=mm).time=fo(),e=e==null?null:e+"");for(var s=this._groups,c=s.length,h=0;h<c;++h)for(var p,m=s[h],x=m.length,_=0;_<x;++_)(p=m[_])&&xd(p,e,r,_,m,a||zs(p,r));return new lr(s,this._parents,e,r)};Qr.prototype.interrupt=Qy,Qr.prototype.transition=P1;var N1=[null],I1=function(e,r){var a,s,c=e.__transition;if(c){r=r==null?null:r+"";for(s in c)if((a=c[s]).state>hm&&a.name===r)return new lr([[e]],N1,r,+s)}return null},ev=function(e){return function(){return e}},O1=function(e,r,a){this.target=e,this.type=r,this.selection=a},bd=function(){A.event.preventDefault(),A.event.stopImmediatePropagation()},nv={name:"drag"},gm={name:"space"},Wc={name:"handle"},Xc={name:"center"},wd={name:"x",handles:["e","w"].map(gi),input:function(e,r){return e&&[[e[0],r[0][1]],[e[1],r[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Md={name:"y",handles:["n","s"].map(gi),input:function(e,r){return e&&[[r[0][0],e[0]],[r[1][0],e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},U1={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(gi),input:function(e){return e},output:function(e){return e}},eo={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},rv={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},iv={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},D1={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},F1={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},z1=function(){return Di(U1)},av=Math.cos,ov=Math.sin,sv=Math.PI,Ed=sv/2,uv=2*sv,cv=Math.max,B1=function(){function e(h){var p,m,x,_,E,S,M=h.length,R=[],O=me(M),I=[],H=[],j=H.groups=new Array(M),W=new Array(M*M);for(p=0,E=-1;++E<M;){for(m=0,S=-1;++S<M;)m+=h[E][S];R.push(m),I.push(me(M)),p+=m}for(a&&O.sort(function(At,bt){return a(R[At],R[bt])}),s&&I.forEach(function(At,bt){At.sort(function(Mt,Jt){return s(h[bt][Mt],h[bt][Jt])})}),p=cv(0,uv-r*M)/p,_=p?r:uv/M,m=0,E=-1;++E<M;){for(x=m,S=-1;++S<M;){var V=O[E],rt=I[V][S],ot=h[V][rt],it=m,J=m+=ot*p;W[rt*M+V]={index:V,subindex:rt,startAngle:it,endAngle:J,value:ot}}j[V]={index:V,startAngle:x,endAngle:m,value:R[V]},m+=_}for(E=-1;++E<M;)for(S=E-1;++S<M;){var dt=W[S*M+E],pt=W[E*M+S];(dt.value||pt.value)&&H.push(dt.value<pt.value?{source:pt,target:dt}:{source:dt,target:pt})}return c?H.sort(c):H}var r=0,a=null,s=null,c=null;return e.padAngle=function(h){return arguments.length?(r=cv(0,h),e):r},e.sortGroups=function(h){return arguments.length?(a=h,e):a},e.sortSubgroups=function(h){return arguments.length?(s=h,e):s},e.sortChords=function(h){return arguments.length?(h==null?c=null:(c=_l(h))._=h,e):c&&c._},e},k1=Array.prototype.slice,vm=function(e){return function(){return e}},ym=Math.PI,xm=2*ym,H1=xm-1e-6;Er.prototype=Fi.prototype={constructor:Er,moveTo:function(e,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+r)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,r){this._+="L"+(this._x1=+e)+","+(this._y1=+r)},quadraticCurveTo:function(e,r,a,s){this._+="Q"+ +e+","+ +r+","+(this._x1=+a)+","+(this._y1=+s)},bezierCurveTo:function(e,r,a,s,c,h){this._+="C"+ +e+","+ +r+","+ +a+","+ +s+","+(this._x1=+c)+","+(this._y1=+h)},arcTo:function(e,r,a,s,c){e=+e,r=+r,a=+a,s=+s,c=+c;var h=this._x1,p=this._y1,m=a-e,x=s-r,_=h-e,E=p-r,S=_*_+E*E;if(c<0)throw new Error("negative radius: "+c);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=r);else if(S>1e-6)if(Math.abs(E*m-x*_)>1e-6&&c){var M=a-h,R=s-p,O=m*m+x*x,I=M*M+R*R,H=Math.sqrt(O),j=Math.sqrt(S),W=c*Math.tan((ym-Math.acos((O+S-I)/(2*H*j)))/2),V=W/j,rt=W/H;Math.abs(V-1)>1e-6&&(this._+="L"+(e+V*_)+","+(r+V*E)),this._+="A"+c+","+c+",0,0,"+ +(E*M>_*R)+","+(this._x1=e+rt*m)+","+(this._y1=r+rt*x)}else this._+="L"+(this._x1=e)+","+(this._y1=r)},arc:function(e,r,a,s,c,h){e=+e,r=+r,a=+a;var p=a*Math.cos(s),m=a*Math.sin(s),x=e+p,_=r+m,E=1^h,S=h?s-c:c-s;if(a<0)throw new Error("negative radius: "+a);this._x1===null?this._+="M"+x+","+_:(Math.abs(this._x1-x)>1e-6||Math.abs(this._y1-_)>1e-6)&&(this._+="L"+x+","+_),a&&(S<0&&(S=S%xm+xm),S>H1?this._+="A"+a+","+a+",0,1,"+E+","+(e-p)+","+(r-m)+"A"+a+","+a+",0,1,"+E+","+(this._x1=x)+","+(this._y1=_):S>1e-6&&(this._+="A"+a+","+a+",0,"+ +(S>=ym)+","+E+","+(this._x1=e+a*Math.cos(c))+","+(this._y1=r+a*Math.sin(c))))},rect:function(e,r,a,s){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+r)+"h"+ +a+"v"+ +s+"h"+-a+"Z"},toString:function(){return this._}};var G1=function(){function e(){var m,x=k1.call(arguments),_=r.apply(this,x),E=a.apply(this,x),S=+s.apply(this,(x[0]=_,x)),M=c.apply(this,x)-Ed,R=h.apply(this,x)-Ed,O=S*av(M),I=S*ov(M),H=+s.apply(this,(x[0]=E,x)),j=c.apply(this,x)-Ed,W=h.apply(this,x)-Ed;if(p||(p=m=Fi()),p.moveTo(O,I),p.arc(0,0,S,M,R),M===j&&R===W||(p.quadraticCurveTo(0,0,H*av(j),H*ov(j)),p.arc(0,0,H,j,W)),p.quadraticCurveTo(0,0,O,I),p.closePath(),m)return p=null,m+""||null}var r=bl,a=Bs,s=wl,c=Bu,h=An,p=null;return e.radius=function(m){return arguments.length?(s=typeof m=="function"?m:vm(+m),e):s},e.startAngle=function(m){return arguments.length?(c=typeof m=="function"?m:vm(+m),e):c},e.endAngle=function(m){return arguments.length?(h=typeof m=="function"?m:vm(+m),e):h},e.source=function(m){return arguments.length?(r=m,e):r},e.target=function(m){return arguments.length?(a=m,e):a},e.context=function(m){return arguments.length?(p=m==null?null:m,e):p},e};Ha.prototype=er.prototype={constructor:Ha,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,r){return this["$"+e]=r,this},remove:function(e){var r="$"+e;return r in this&&delete this[r]},clear:function(){for(var e in this)e[0]==="$"&&delete this[e]},keys:function(){var e=[];for(var r in this)r[0]==="$"&&e.push(r.slice(1));return e},values:function(){var e=[];for(var r in this)r[0]==="$"&&e.push(this[r]);return e},entries:function(){var e=[];for(var r in this)r[0]==="$"&&e.push({key:r.slice(1),value:this[r]});return e},size:function(){var e=0;for(var r in this)r[0]==="$"&&++e;return e},empty:function(){for(var e in this)if(e[0]==="$")return!1;return!0},each:function(e){for(var r in this)r[0]==="$"&&e(this[r],r.slice(1),this)}};var V1=function(){function e(m,x,_,E){if(x>=h.length)return a!=null&&m.sort(a),s!=null?s(m):m;for(var S,M,R,O=-1,I=m.length,H=h[x++],j=er(),W=_();++O<I;)(R=j.get(S=H(M=m[O])+""))?R.push(M):j.set(S,[M]);return j.each(function(V,rt){E(W,rt,e(V,x,_,E))}),W}function r(m,x){if(++x>h.length)return m;var _,E=p[x-1];return s!=null&&x>=h.length?_=m.entries():(_=[],m.each(function(S,M){_.push({key:M,values:r(S,x)})})),E!=null?_.sort(function(S,M){return E(S.key,M.key)}):_}var a,s,c,h=[],p=[];return c={object:function(m){return e(m,0,ku,Hu)},map:function(m){return e(m,0,ks,Hs)},entries:function(m){return r(e(m,0,ks,Hs),0)},key:function(m){return h.push(m),c},sortKeys:function(m){return p[h.length-1]=m,c},sortValues:function(m){return a=m,c},rollup:function(m){return s=m,c}}},bu=er.prototype;Ga.prototype=Gs.prototype={constructor:Ga,has:bu.has,add:function(e){return e+="",this["$"+e]=e,this},remove:bu.remove,clear:bu.clear,values:bu.keys,size:bu.size,empty:bu.empty,each:bu.each};var j1=function(e){var r=[];for(var a in e)r.push(a);return r},W1=function(e){var r=[];for(var a in e)r.push(e[a]);return r},X1=function(e){var r=[];for(var a in e)r.push({key:a,value:e[a]});return r},_m=function(e){function r(_,E){var S,M,R=a(_,function(O,I){if(S)return S(O,I-1);M=O,S=E?Tr(O,E):Vs(O)});return R.columns=M,R}function a(_,E){function S(){if(W>=j)return I;if(R)return R=!1,O;var ot,it=W;if(_.charCodeAt(it)===34){for(var J=it;J++<j;)if(_.charCodeAt(J)===34){if(_.charCodeAt(J+1)!==34)break;++J}return W=J+2,ot=_.charCodeAt(J+1),ot===13?(R=!0,_.charCodeAt(J+2)===10&&++W):ot===10&&(R=!0),_.slice(it+1,J).replace(/""/g,'"')}for(;W<j;){var dt=1;if((ot=_.charCodeAt(W++))===10)R=!0;else if(ot===13)R=!0,_.charCodeAt(W)===10&&(++W,++dt);else if(ot!==x)continue;return _.slice(it,W-dt)}return _.slice(it)}for(var M,R,O={},I={},H=[],j=_.length,W=0,V=0;(M=S())!==I;){for(var rt=[];M!==O&&M!==I;)rt.push(M),M=S();E&&(rt=E(rt,V++))==null||H.push(rt)}return H}function s(_,E){return E==null&&(E=Gu(_)),[E.map(p).join(e)].concat(_.map(function(S){return E.map(function(M){return p(S[M])}).join(e)})).join(`
`)}function c(_){return _.map(h).join(`
`)}function h(_){return _.map(p).join(e)}function p(_){return _==null?"":m.test(_+="")?'"'+_.replace(/\"/g,'""')+'"':_}var m=new RegExp('["'+e+`
\r]`),x=e.charCodeAt(0);return{parse:r,parseRows:a,format:s,formatRows:c}},Td=_m(","),lv=Td.parse,q1=Td.parseRows,Y1=Td.format,Z1=Td.formatRows,Sd=_m("	"),hv=Sd.parse,K1=Sd.parseRows,Q1=Sd.format,$1=Sd.formatRows,J1=function(e,r){function a(){var c,h,p=s.length,m=0,x=0;for(c=0;c<p;++c)h=s[c],m+=h.x,x+=h.y;for(m=m/p-e,x=x/p-r,c=0;c<p;++c)h=s[c],h.x-=m,h.y-=x}var s;return e==null&&(e=0),r==null&&(r=0),a.initialize=function(c){s=c},a.x=function(c){return arguments.length?(e=+c,a):e},a.y=function(c){return arguments.length?(r=+c,a):r},a},Ir=function(e){return function(){return e}},ss=function(){return 1e-6*(Math.random()-.5)},tx=function(e){var r=+this._x.call(null,e),a=+this._y.call(null,e);return Lo(this.cover(r,a),r,a,e)},ex=function(e,r){if(isNaN(e=+e)||isNaN(r=+r))return this;var a=this._x0,s=this._y0,c=this._x1,h=this._y1;if(isNaN(a))c=(a=Math.floor(e))+1,h=(s=Math.floor(r))+1;else{if(!(a>e||e>c||s>r||r>h))return this;var p,m,x=c-a,_=this._root;switch(m=(r<(s+h)/2)<<1|e<(a+c)/2){case 0:do p=new Array(4),p[m]=_,_=p;while(x*=2,c=a+x,h=s+x,e>c||r>h);break;case 1:do p=new Array(4),p[m]=_,_=p;while(x*=2,a=c-x,h=s+x,a>e||r>h);break;case 2:do p=new Array(4),p[m]=_,_=p;while(x*=2,c=a+x,s=h-x,e>c||s>r);break;case 3:do p=new Array(4),p[m]=_,_=p;while(x*=2,a=c-x,s=h-x,a>e||s>r)}this._root&&this._root.length&&(this._root=_)}return this._x0=a,this._y0=s,this._x1=c,this._y1=h,this},nx=function(){var e=[];return this.visit(function(r){if(!r.length)do e.push(r.data);while(r=r.next)}),e},rx=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Or=function(e,r,a,s,c){this.node=e,this.x0=r,this.y0=a,this.x1=s,this.y1=c},ix=function(e,r,a){var s,c,h,p,m,x,_,E=this._x0,S=this._y0,M=this._x1,R=this._y1,O=[],I=this._root;for(I&&O.push(new Or(I,E,S,M,R)),a==null?a=1/0:(E=e-a,S=r-a,M=e+a,R=r+a,a*=a);x=O.pop();)if(!(!(I=x.node)||(c=x.x0)>M||(h=x.y0)>R||(p=x.x1)<E||(m=x.y1)<S))if(I.length){var H=(c+p)/2,j=(h+m)/2;O.push(new Or(I[3],H,j,p,m),new Or(I[2],c,j,H,m),new Or(I[1],H,h,p,j),new Or(I[0],c,h,H,j)),(_=(r>=j)<<1|e>=H)&&(x=O[O.length-1],O[O.length-1]=O[O.length-1-_],O[O.length-1-_]=x)}else{var W=e-+this._x.call(null,I.data),V=r-+this._y.call(null,I.data),rt=W*W+V*V;if(rt<a){var ot=Math.sqrt(a=rt);E=e-ot,S=r-ot,M=e+ot,R=r+ot,s=I.data}}return s},ax=function(e){if(isNaN(h=+this._x.call(null,e))||isNaN(p=+this._y.call(null,e)))return this;var r,a,s,c,h,p,m,x,_,E,S,M,R=this._root,O=this._x0,I=this._y0,H=this._x1,j=this._y1;if(!R)return this;if(R.length)for(;;){if((_=h>=(m=(O+H)/2))?O=m:H=m,(E=p>=(x=(I+j)/2))?I=x:j=x,r=R,!(R=R[S=E<<1|_]))return this;if(!R.length)break;(r[S+1&3]||r[S+2&3]||r[S+3&3])&&(a=r,M=S)}for(;R.data!==e;)if(s=R,!(R=R.next))return this;return(c=R.next)&&delete R.next,s?(c?s.next=c:delete s.next,this):r?(c?r[S]=c:delete r[S],(R=r[0]||r[1]||r[2]||r[3])&&R===(r[3]||r[2]||r[1]||r[0])&&!R.length&&(a?a[M]=R:this._root=R),this):(this._root=c,this)},ox=function(){return this._root},sx=function(){var e=0;return this.visit(function(r){if(!r.length)do++e;while(r=r.next)}),e},ux=function(e){var r,a,s,c,h,p,m=[],x=this._root;for(x&&m.push(new Or(x,this._x0,this._y0,this._x1,this._y1));r=m.pop();)if(!e(x=r.node,s=r.x0,c=r.y0,h=r.x1,p=r.y1)&&x.length){var _=(s+h)/2,E=(c+p)/2;(a=x[3])&&m.push(new Or(a,_,E,h,p)),(a=x[2])&&m.push(new Or(a,s,E,_,p)),(a=x[1])&&m.push(new Or(a,_,c,h,E)),(a=x[0])&&m.push(new Or(a,s,c,_,E))}return this},cx=function(e){var r,a=[],s=[];for(this._root&&a.push(new Or(this._root,this._x0,this._y0,this._x1,this._y1));r=a.pop();){var c=r.node;if(c.length){var h,p=r.x0,m=r.y0,x=r.x1,_=r.y1,E=(p+x)/2,S=(m+_)/2;(h=c[0])&&a.push(new Or(h,p,m,E,S)),(h=c[1])&&a.push(new Or(h,E,m,x,S)),(h=c[2])&&a.push(new Or(h,p,S,E,_)),(h=c[3])&&a.push(new Or(h,E,S,x,_))}s.push(r)}for(;r=s.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this},lx=function(e){return arguments.length?(this._x=e,this):this._x},hx=function(e){return arguments.length?(this._y=e,this):this._y},Ur=aa.prototype=oa.prototype;Ur.copy=function(){var e,r,a=new oa(this._x,this._y,this._x0,this._y0,this._x1,this._y1),s=this._root;if(!s)return a;if(!s.length)return a._root=js(s),a;for(e=[{source:s,target:a._root=new Array(4)}];s=e.pop();)for(var c=0;c<4;++c)(r=s.source[c])&&(r.length?e.push({source:r,target:s.target[c]=new Array(4)}):s.target[c]=js(r));return a},Ur.add=tx,Ur.addAll=Vu,Ur.cover=ex,Ur.data=nx,Ur.extent=rx,Ur.find=ix,Ur.remove=ax,Ur.removeAll=Va,Ur.root=ox,Ur.size=sx,Ur.visit=ux,Ur.visitAfter=cx,Ur.x=lx,Ur.y=hx;var fv,fx=function(e){function r(){function x(W,V,rt,ot,it){var J=W.data,dt=W.r,pt=O+dt;{if(!J)return V>M+pt||ot<M-pt||rt>R+pt||it<R-pt;if(J.index>S.index){var At=M-J.x-J.vx,bt=R-J.y-J.vy,Mt=At*At+bt*bt;Mt<pt*pt&&(At===0&&(At=ss(),Mt+=At*At),bt===0&&(bt=ss(),Mt+=bt*bt),Mt=(pt-(Mt=Math.sqrt(Mt)))/Mt*p,S.vx+=(At*=Mt)*(pt=(dt*=dt)/(I+dt)),S.vy+=(bt*=Mt)*pt,J.vx-=At*(pt=1-pt),J.vy-=bt*pt)}}}for(var _,E,S,M,R,O,I,H=c.length,j=0;j<m;++j)for(E=aa(c,Wu,Xu).visitAfter(a),_=0;_<H;++_)S=c[_],O=h[S.index],I=O*O,M=S.x+S.vx,R=S.y+S.vy,E.visit(x)}function a(x){if(x.data)return x.r=h[x.data.index];for(var _=x.r=0;_<4;++_)x[_]&&x[_].r>x.r&&(x.r=x[_].r)}function s(){if(c){var x,_,E=c.length;for(h=new Array(E),x=0;x<E;++x)_=c[x],h[_.index]=+e(_,x,c)}}var c,h,p=1,m=1;return typeof e!="function"&&(e=Ir(e==null?1:+e)),r.initialize=function(x){c=x,s()},r.iterations=function(x){return arguments.length?(m=+x,r):m},r.strength=function(x){return arguments.length?(p=+x,r):p},r.radius=function(x){return arguments.length?(e=typeof x=="function"?x:Ir(+x),s(),r):e},r},dx=function(e){function r(I){return 1/Math.min(_[I.source.index],_[I.target.index])}function a(I){for(var H=0,j=e.length;H<O;++H)for(var W,V,rt,ot,it,J,dt,pt=0;pt<j;++pt)W=e[pt],V=W.source,rt=W.target,ot=rt.x+rt.vx-V.x-V.vx||ss(),it=rt.y+rt.vy-V.y-V.vy||ss(),J=Math.sqrt(ot*ot+it*it),J=(J-m[pt])/J*I*p[pt],ot*=J,it*=J,rt.vx-=ot*(dt=E[pt]),rt.vy-=it*dt,V.vx+=ot*(dt=1-dt),V.vy+=it*dt}function s(){if(x){var I,H,j=x.length,W=e.length,V=er(x,S);for(I=0,_=new Array(j);I<W;++I)H=e[I],H.index=I,typeof H.source!="object"&&(H.source=Sr(V,H.source)),typeof H.target!="object"&&(H.target=Sr(V,H.target)),_[H.source.index]=(_[H.source.index]||0)+1,_[H.target.index]=(_[H.target.index]||0)+1;for(I=0,E=new Array(W);I<W;++I)H=e[I],E[I]=_[H.source.index]/(_[H.source.index]+_[H.target.index]);p=new Array(W),c(),m=new Array(W),h()}}function c(){if(x)for(var I=0,H=e.length;I<H;++I)p[I]=+M(e[I],I,e)}function h(){if(x)for(var I=0,H=e.length;I<H;++I)m[I]=+R(e[I],I,e)}var p,m,x,_,E,S=ja,M=r,R=Ir(30),O=1;return e==null&&(e=[]),a.initialize=function(I){x=I,s()},a.links=function(I){return arguments.length?(e=I,s(),a):e},a.id=function(I){return arguments.length?(S=I,a):S},a.iterations=function(I){return arguments.length?(O=+I,a):O},a.strength=function(I){return arguments.length?(M=typeof I=="function"?I:Ir(+I),c(),a):M},a.distance=function(I){return arguments.length?(R=typeof I=="function"?I:Ir(+I),h(),a):R},a},px=10,mx=Math.PI*(3-Math.sqrt(5)),gx=function(e){function r(){a(),R.call("tick",h),p<m&&(M.stop(),R.call("end",h))}function a(){var O,I,H=e.length;for(p+=(_-p)*x,S.each(function(j){j(p)}),O=0;O<H;++O)I=e[O],I.fx==null?I.x+=I.vx*=E:(I.x=I.fx,I.vx=0),I.fy==null?I.y+=I.vy*=E:(I.y=I.fy,I.vy=0)}function s(){for(var O,I=0,H=e.length;I<H;++I){if(O=e[I],O.index=I,isNaN(O.x)||isNaN(O.y)){var j=px*Math.sqrt(I),W=I*mx;O.x=j*Math.cos(W),O.y=j*Math.sin(W)}(isNaN(O.vx)||isNaN(O.vy))&&(O.vx=O.vy=0)}}function c(O){return O.initialize&&O.initialize(e),O}var h,p=1,m=.001,x=1-Math.pow(m,1/300),_=0,E=.6,S=er(),M=bs(r),R=Ye("tick","end");return e==null&&(e=[]),s(),h={tick:a,restart:function(){return M.restart(r),h},stop:function(){return M.stop(),h},nodes:function(O){return arguments.length?(e=O,s(),S.each(c),h):e},alpha:function(O){return arguments.length?(p=+O,h):p},alphaMin:function(O){return arguments.length?(m=+O,h):m},alphaDecay:function(O){return arguments.length?(x=+O,h):+x},alphaTarget:function(O){return arguments.length?(_=+O,h):_},velocityDecay:function(O){return arguments.length?(E=1-O,h):1-E},force:function(O,I){return arguments.length>1?(I==null?S.remove(O):S.set(O,c(I)),h):S.get(O)},find:function(O,I,H){var j,W,V,rt,ot,it=0,J=e.length;for(H==null?H=1/0:H*=H,it=0;it<J;++it)rt=e[it],j=O-rt.x,W=I-rt.y,(V=j*j+W*W)<H&&(ot=rt,H=V);return ot},on:function(O,I){return arguments.length>1?(R.on(O,I),h):R.on(O)}}},vx=function(){function e(M){var R,O=c.length,I=aa(c,qu,Ml).visitAfter(a);for(p=M,R=0;R<O;++R)h=c[R],I.visit(s)}function r(){if(c){var M,R,O=c.length;for(m=new Array(O),M=0;M<O;++M)R=c[M],m[R.index]=+x(R,M,c)}}function a(M){var R,O,I,H,j,W=0;if(M.length){for(I=H=j=0;j<4;++j)(R=M[j])&&(O=R.value)&&(W+=O,I+=O*R.x,H+=O*R.y);M.x=I/W,M.y=H/W}else{R=M,R.x=R.data.x,R.y=R.data.y;do W+=m[R.data.index];while(R=R.next)}M.value=W}function s(M,R,O,I){if(!M.value)return!0;var H=M.x-h.x,j=M.y-h.y,W=I-R,V=H*H+j*j;if(W*W/S<V)return V<E&&(H===0&&(H=ss(),V+=H*H),j===0&&(j=ss(),V+=j*j),V<_&&(V=Math.sqrt(_*V)),h.vx+=H*M.value*p/V,h.vy+=j*M.value*p/V),!0;if(!(M.length||V>=E)){(M.data!==h||M.next)&&(H===0&&(H=ss(),V+=H*H),j===0&&(j=ss(),V+=j*j),V<_&&(V=Math.sqrt(_*V)));do M.data!==h&&(W=m[M.data.index]*p/V,h.vx+=H*W,h.vy+=j*W);while(M=M.next)}}var c,h,p,m,x=Ir(-30),_=1,E=1/0,S=.81;return e.initialize=function(M){c=M,r()},e.strength=function(M){return arguments.length?(x=typeof M=="function"?M:Ir(+M),r(),e):x},e.distanceMin=function(M){return arguments.length?(_=M*M,e):Math.sqrt(_)},e.distanceMax=function(M){return arguments.length?(E=M*M,e):Math.sqrt(E)},e.theta=function(M){return arguments.length?(S=M*M,e):Math.sqrt(S)},e},yx=function(e){function r(m){for(var x,_=0,E=s.length;_<E;++_)x=s[_],x.vx+=(h[_]-x.x)*c[_]*m}function a(){if(s){var m,x=s.length;for(c=new Array(x),h=new Array(x),m=0;m<x;++m)c[m]=isNaN(h[m]=+e(s[m],m,s))?0:+p(s[m],m,s)}}var s,c,h,p=Ir(.1);return typeof e!="function"&&(e=Ir(e==null?0:+e)),r.initialize=function(m){s=m,a()},r.strength=function(m){return arguments.length?(p=typeof m=="function"?m:Ir(+m),a(),r):p},r.x=function(m){return arguments.length?(e=typeof m=="function"?m:Ir(+m),a(),r):e},r},xx=function(e){function r(m){for(var x,_=0,E=s.length;_<E;++_)x=s[_],x.vy+=(h[_]-x.y)*c[_]*m}function a(){if(s){var m,x=s.length;for(c=new Array(x),h=new Array(x),m=0;m<x;++m)c[m]=isNaN(h[m]=+e(s[m],m,s))?0:+p(s[m],m,s)}}var s,c,h,p=Ir(.1);return typeof e!="function"&&(e=Ir(e==null?0:+e)),r.initialize=function(m){s=m,a()},r.strength=function(m){return arguments.length?(p=typeof m=="function"?m:Ir(+m),a(),r):p},r.y=function(m){return arguments.length?(e=typeof m=="function"?m:Ir(+m),a(),r):e},r},Ad=function(e,r){if((a=(e=r?e.toExponential(r-1):e.toExponential()).indexOf("e"))<0)return null;var a,s=e.slice(0,a);return[s.length>1?s[0]+s.slice(2):s,+e.slice(a+1)]},qc=function(e){return e=Ad(Math.abs(e)),e?e[1]:NaN},_x=function(e,r){return function(a,s){for(var c=a.length,h=[],p=0,m=e[0],x=0;c>0&&m>0&&(x+m+1>s&&(m=Math.max(1,s-x)),h.push(a.substring(c-=m,c+m)),!((x+=m+1)>s));)m=e[p=(p+1)%e.length];return h.reverse().join(r)}},bx=function(e){return function(r){return r.replace(/[0-9]/g,function(a){return e[+a]})}},wx=function(e,r){e=e.toPrecision(r);t:for(var a,s=e.length,c=1,h=-1;c<s;++c)switch(e[c]){case".":h=a=c;break;case"0":h===0&&(h=c),a=c;break;case"e":break t;default:h>0&&(h=0)}return h>0?e.slice(0,h)+e.slice(a+1):e},Mx=function(e,r){var a=Ad(e,r);if(!a)return e+"";var s=a[0],c=a[1],h=c-(fv=3*Math.max(-8,Math.min(8,Math.floor(c/3))))+1,p=s.length;return h===p?s:h>p?s+new Array(h-p+1).join("0"):h>0?s.slice(0,h)+"."+s.slice(h):"0."+new Array(1-h).join("0")+Ad(e,Math.max(0,r+h-1))[0]},dv=function(e,r){var a=Ad(e,r);if(!a)return e+"";var s=a[0],c=a[1];return c<0?"0."+new Array(-c).join("0")+s:s.length>c+1?s.slice(0,c+1)+"."+s.slice(c+1):s+new Array(c-s.length+2).join("0")},pv={"":wx,"%":function(e,r){return(100*e).toFixed(r)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,r){return e.toExponential(r)},f:function(e,r){return e.toFixed(r)},g:function(e,r){return e.toPrecision(r)},o:function(e){return Math.round(e).toString(8)},p:function(e,r){return dv(100*e,r)},r:dv,s:Mx,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},Ex=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;yi.prototype=Ws.prototype,Ws.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,0|this.precision))+this.type};var Rd,mv=function(e){return e},gv=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],vv=function(e){function r(x){function _(J){var dt,pt,At,bt=V,Mt=rt;if(W==="c")Mt=ot(J)+Mt,J="";else{J=+J;var Jt=J<0;if(J=ot(Math.abs(J),j),Jt&&+J==0&&(Jt=!1),bt=(Jt?M==="("?M:"-":M==="-"||M==="("?"":M)+bt,Mt=Mt+(W==="s"?gv[8+fv/3]:"")+(Jt&&M==="("?")":""),it){for(dt=-1,pt=J.length;++dt<pt;)if(48>(At=J.charCodeAt(dt))||At>57){Mt=(At===46?h+J.slice(dt+1):J.slice(dt))+Mt,J=J.slice(0,dt);break}}}H&&!O&&(J=s(J,1/0));var Pt=bt.length+J.length+Mt.length,Ht=Pt<I?new Array(I-Pt+1).join(E):"";switch(H&&O&&(J=s(Ht+J,Ht.length?I-Mt.length:1/0),Ht=""),S){case"<":J=bt+J+Mt+Ht;break;case"=":J=bt+Ht+J+Mt;break;case"^":J=Ht.slice(0,Pt=Ht.length>>1)+bt+J+Mt+Ht.slice(Pt);break;default:J=Ht+bt+J+Mt}return p(J)}x=yi(x);var E=x.fill,S=x.align,M=x.sign,R=x.symbol,O=x.zero,I=x.width,H=x.comma,j=x.precision,W=x.type,V=R==="$"?c[0]:R==="#"&&/[boxX]/.test(W)?"0"+W.toLowerCase():"",rt=R==="$"?c[1]:/[%p]/.test(W)?m:"",ot=pv[W],it=!W||/[defgprs%]/.test(W);return j=j==null?W?6:12:/[gprs]/.test(W)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j)),_.toString=function(){return x+""},_}function a(x,_){var E=r((x=yi(x),x.type="f",x)),S=3*Math.max(-8,Math.min(8,Math.floor(qc(_)/3))),M=Math.pow(10,-S),R=gv[8+S/3];return function(O){return E(M*O)+R}}var s=e.grouping&&e.thousands?_x(e.grouping,e.thousands):mv,c=e.currency,h=e.decimal,p=e.numerals?bx(e.numerals):mv,m=e.percent||"%";return{format:r,formatPrefix:a}};El({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var yv=function(e){return Math.max(0,-qc(Math.abs(e)))},xv=function(e,r){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(qc(r)/3)))-qc(Math.abs(e)))},_v=function(e,r){return e=Math.abs(e),r=Math.abs(r)-e,Math.max(0,qc(r)-qc(e))+1},us=function(){return new Xs};Xs.prototype={constructor:Xs,reset:function(){this.s=this.t=0},add:function(e){pf(Dd,e,this.t),pf(this,Dd.s,this.s),this.s?this.t+=Dd.t:this.s=Dd.t},valueOf:function(){return this.s}};var bv,wv,bm,wm,Mm,Dn,hi,Hn,bi,wu,Mv,Ev,Yc,cs,no,Bh,Ld,Cd,Pd,Nd,Id,Od,Ud,Em,Tm,Sm,Tv,Sv,Dr,Fr,zr,Dd=new Xs,he=1e-6,Qe=Math.PI,Wn=Qe/2,Fd=Qe/4,Zr=2*Qe,Tn=180/Qe,ye=Qe/180,sn=Math.abs,Zc=Math.atan,Br=Math.atan2,ue=Math.cos,zd=Math.ceil,Av=Math.exp,Bd=Math.log,Am=Math.pow,re=Math.sin,kh=Math.sign||function(e){return e>0?1:e<0?-1:0},Kn=Math.sqrt,Rm=Math.tan,Rv={Feature:function(e,r){Yu(e.geometry,r)},FeatureCollection:function(e,r){for(var a=e.features,s=-1,c=a.length;++s<c;)Yu(a[s].geometry,r)}},Lv={Sphere:function(e,r){r.sphere()},Point:function(e,r){e=e.coordinates,r.point(e[0],e[1],e[2])},MultiPoint:function(e,r){for(var a=e.coordinates,s=-1,c=a.length;++s<c;)e=a[s],r.point(e[0],e[1],e[2])},LineString:function(e,r){Tl(e.coordinates,r,0)},MultiLineString:function(e,r){for(var a=e.coordinates,s=-1,c=a.length;++s<c;)Tl(a[s],r,0)},Polygon:function(e,r){gf(e.coordinates,r)},MultiPolygon:function(e,r){for(var a=e.coordinates,s=-1,c=a.length;++s<c;)gf(a[s],r)},GeometryCollection:function(e,r){for(var a=e.geometries,s=-1,c=a.length;++s<c;)Yu(a[s],r)}},qi=function(e,r){e&&Rv.hasOwnProperty(e.type)?Rv[e.type](e,r):Yu(e,r)},kd=us(),Hd=us(),_a={point:Mn,lineStart:Mn,lineEnd:Mn,polygonStart:function(){kd.reset(),_a.lineStart=qs,_a.lineEnd=vn},polygonEnd:function(){var e=+kd;Hd.add(e<0?Zr+e:e),this.lineStart=this.lineEnd=this.point=Mn},sphere:function(){Hd.add(Zr)}},Tx=function(e){return Hd.reset(),qi(e,_a),2*Hd},Hh=us(),ro={point:Ys,lineStart:Zu,lineEnd:Al,polygonStart:function(){ro.point=Oo,ro.lineStart=Rl,ro.lineEnd=Uo,Hh.reset(),_a.polygonStart()},polygonEnd:function(){_a.polygonEnd(),ro.point=Ys,ro.lineStart=Zu,ro.lineEnd=Al,kd<0?(Dn=-(Hn=180),hi=-(bi=90)):Hh>he?bi=90:Hh<-he&&(hi=-90),no[0]=Dn,no[1]=Hn}},Sx=function(e){var r,a,s,c,h,p,m;if(bi=Hn=-(Dn=hi=1/0),cs=[],qi(e,ro),a=cs.length){for(cs.sort(Ll),r=1,s=cs[0],h=[s];r<a;++r)c=cs[r],Ku(s,c[0])||Ku(s,c[1])?(hr(s[0],c[1])>hr(s[0],s[1])&&(s[1]=c[1]),hr(c[0],s[1])>hr(s[0],s[1])&&(s[0]=c[0])):h.push(s=c);for(p=-1/0,a=h.length-1,r=0,s=h[a];r<=a;s=c,++r)c=h[r],(m=hr(s[1],c[0]))>p&&(p=m,Dn=c[0],Hn=s[1])}return cs=no=null,Dn===1/0||hi===1/0?[[NaN,NaN],[NaN,NaN]]:[[Dn,hi],[Hn,bi]]},Yi={sphere:Mn,point:Qu,lineStart:Cl,lineEnd:Zs,polygonStart:function(){Yi.lineStart=Pl,Yi.lineEnd=Nl},polygonEnd:function(){Yi.lineStart=Cl,Yi.lineEnd=Zs}},Ax=function(e){Bh=Ld=Cd=Pd=Nd=Id=Od=Ud=Em=Tm=Sm=0,qi(e,Yi);var r=Em,a=Tm,s=Sm,c=r*r+a*a+s*s;return c<1e-12&&(r=Id,a=Od,s=Ud,Ld<he&&(r=Cd,a=Pd,s=Nd),(c=r*r+a*a+s*s)<1e-12)?[NaN,NaN]:[Br(a,r)*Tn,Ar(s/Kn(c))*Tn]},Kc=function(e){return function(){return e}},Cv=function(e,r){function a(s,c){return s=e(s,c),r(s[0],s[1])}return e.invert&&r.invert&&(a.invert=function(s,c){return(s=r.invert(s,c))&&e.invert(s[0],s[1])}),a};Ks.invert=Ks;var Lm,Gd,Vd,Pv,Nv,Cm,Pm,Iv,Ov,ba,wa,Uv=function(e){function r(a){return a=e(a[0]*ye,a[1]*ye),a[0]*=Tn,a[1]*=Tn,a}return e=Ju(e[0]*ye,e[1]*ye,e.length>2?e[2]*ye:0),r.invert=function(a){return a=e.invert(a[0]*ye,a[1]*ye),a[0]*=Tn,a[1]*=Tn,a},r},Rx=function(){function e(x,_){a.push(x=s(x,_)),x[0]*=Tn,x[1]*=Tn}function r(){var x=c.apply(this,arguments),_=h.apply(this,arguments)*ye,E=p.apply(this,arguments)*ye;return a=[],s=Ju(-x[0]*ye,-x[1]*ye,0).invert,Ul(m,_,E,1),x={type:"Polygon",coordinates:[a]},a=s=null,x}var a,s,c=Kc([0,0]),h=Kc(90),p=Kc(6),m={point:e};return r.center=function(x){return arguments.length?(c=typeof x=="function"?x:Kc([+x[0],+x[1]]),r):c},r.radius=function(x){return arguments.length?(h=typeof x=="function"?x:Kc(+x),r):h},r.precision=function(x){return arguments.length?(p=typeof x=="function"?x:Kc(+x),r):p},r},Dv=function(){var e,r=[];return{point:function(a,s){e.push([a,s])},lineStart:function(){r.push(e=[])},lineEnd:Mn,rejoin:function(){r.length>1&&r.push(r.pop().concat(r.shift()))},result:function(){var a=r;return r=[],e=null,a}}},Lx=function(e,r,a,s,c,h){var p,m=e[0],x=e[1],_=r[0],E=r[1],S=0,M=1,R=_-m,O=E-x;if(p=a-m,R||!(p>0)){if(p/=R,R<0){if(p<S)return;p<M&&(M=p)}else if(R>0){if(p>M)return;p>S&&(S=p)}if(p=c-m,R||!(p<0)){if(p/=R,R<0){if(p>M)return;p>S&&(S=p)}else if(R>0){if(p<S)return;p<M&&(M=p)}if(p=s-x,O||!(p>0)){if(p/=O,O<0){if(p<S)return;p<M&&(M=p)}else if(O>0){if(p>M)return;p>S&&(S=p)}if(p=h-x,O||!(p<0)){if(p/=O,O<0){if(p>M)return;p>S&&(S=p)}else if(O>0){if(p<S)return;p<M&&(M=p)}return S>0&&(e[0]=m+S*R,e[1]=x+S*O),M<1&&(r[0]=m+M*R,r[1]=x+M*O),!0}}}}},jd=function(e,r){return sn(e[0]-r[0])<he&&sn(e[1]-r[1])<he},Fv=function(e,r,a,s,c){var h,p,m=[],x=[];if(e.forEach(function(O){if(!((I=O.length-1)<=0)){var I,H,j=O[0],W=O[I];if(jd(j,W)){for(c.lineStart(),h=0;h<I;++h)c.point((j=O[h])[0],j[1]);return void c.lineEnd()}m.push(H=new sa(j,O,null,!0)),x.push(H.o=new sa(j,null,H,!1)),m.push(H=new sa(W,O,null,!1)),x.push(H.o=new sa(W,null,H,!0))}}),m.length){for(x.sort(r),Fo(m),Fo(x),h=0,p=x.length;h<p;++h)x[h].e=a=!a;for(var _,E,S=m[0];;){for(var M=S,R=!0;M.v;)if((M=M.n)===S)return;_=M.z,c.lineStart();do{if(M.v=M.o.v=!0,M.e){if(R)for(h=0,p=_.length;h<p;++h)c.point((E=_[h])[0],E[1]);else s(M.x,M.n.x,1,c);M=M.n}else{if(R)for(_=M.p.z,h=_.length-1;h>=0;--h)c.point((E=_[h])[0],E[1]);else s(M.x,M.p.x,-1,c);M=M.p}M=M.o,_=M.z,R=!R}while(!M.v);c.lineEnd()}}},Gh=1e9,Wd=-Gh,Cx=function(){var e,r,a,s=0,c=0,h=960,p=500;return a={stream:function(m){return e&&r===m?e:e=ua(s,c,h,p)(r=m)},extent:function(m){return arguments.length?(s=+m[0][0],c=+m[0][1],h=+m[1][0],p=+m[1][1],e=r=null,a):[[s,c],[h,p]]}}},Nm=us(),zv=function(e,r){var a=r[0],s=r[1],c=[re(a),-ue(a),0],h=0,p=0;Nm.reset();for(var m=0,x=e.length;m<x;++m)if(E=(_=e[m]).length)for(var _,E,S=_[E-1],M=S[0],R=S[1]/2+Fd,O=re(R),I=ue(R),H=0;H<E;++H,M=W,O=rt,I=ot,S=j){var j=_[H],W=j[0],V=j[1]/2+Fd,rt=re(V),ot=ue(V),it=W-M,J=it>=0?1:-1,dt=J*it,pt=dt>Qe,At=O*rt;if(Nm.add(Br(At*J*re(dt),I*ot+At*ue(dt))),h+=pt?it+J*Zr:it,pt^M>=a^W>=a){var bt=ni(Rr(S),Rr(j));Io(bt);var Mt=ni(c,bt);Io(Mt);var Jt=(pt^it>=0?-1:1)*Ar(Mt[2]);(s>Jt||s===Jt&&(bt[0]||bt[1]))&&(p+=pt^it>=0?1:-1)}}return(h<-he||h<he&&Nm<-he)^1&p},Im=us(),Qc={sphere:Mn,point:Mn,lineStart:xf,lineEnd:Mn,polygonStart:Mn,polygonEnd:Mn},Bv=function(e){return Im.reset(),qi(e,Qc),+Im},Om=[null,null],Px={type:"LineString",coordinates:Om},Vh=function(e,r){return Om[0]=e,Om[1]=r,Bv(Px)},kv={Feature:function(e,r){return Bi(e.geometry,r)},FeatureCollection:function(e,r){for(var a=e.features,s=-1,c=a.length;++s<c;)if(Bi(a[s].geometry,r))return!0;return!1}},Hv={Sphere:function(){return!0},Point:function(e,r){return Ho(e.coordinates,r)},MultiPoint:function(e,r){for(var a=e.coordinates,s=-1,c=a.length;++s<c;)if(Ho(a[s],r))return!0;return!1},LineString:function(e,r){return Qs(e.coordinates,r)},MultiLineString:function(e,r){for(var a=e.coordinates,s=-1,c=a.length;++s<c;)if(Qs(a[s],r))return!0;return!1},Polygon:function(e,r){return Go(e.coordinates,r)},MultiPolygon:function(e,r){for(var a=e.coordinates,s=-1,c=a.length;++s<c;)if(Go(a[s],r))return!0;return!1},GeometryCollection:function(e,r){for(var a=e.geometries,s=-1,c=a.length;++s<c;)if(Bi(a[s],r))return!0;return!1}},Nx=function(e,r){return(e&&kv.hasOwnProperty(e.type)?kv[e.type]:Bi)(e,r)},Ix=function(e,r){var a=e[0]*ye,s=e[1]*ye,c=r[0]*ye,h=r[1]*ye,p=ue(s),m=re(s),x=ue(h),_=re(h),E=p*ue(a),S=p*re(a),M=x*ue(c),R=x*re(c),O=2*Ar(Kn(Po(h-s)+p*x*Po(c-a))),I=re(O),H=O?function(j){var W=re(j*=O)/I,V=re(O-j)/I,rt=V*E+W*M,ot=V*S+W*R,it=V*m+W*_;return[Br(ot,rt)*Tn,Br(it,Kn(rt*rt+ot*ot))*Tn]}:function(){return[a*Tn,s*Tn]};return H.distance=O,H},Mu=function(e){return e},Um=us(),Dm=us(),io={point:Mn,lineStart:Mn,lineEnd:Mn,polygonStart:function(){io.lineStart=ec,io.lineEnd=$s},polygonEnd:function(){io.lineStart=io.lineEnd=io.point=Mn,Um.add(sn(Dm)),Dm.reset()},result:function(){var e=Um/2;return Um.reset(),e}},$c=1/0,Xd=$c,jh=-$c,qd=jh,Yd={point:Js,lineStart:Mn,lineEnd:Mn,polygonStart:Mn,polygonEnd:Mn,result:function(){var e=[[$c,Xd],[jh,qd]];return jh=qd=-(Xd=$c=1/0),e}},Fm=0,zm=0,Wh=0,Zd=0,Kd=0,Jc=0,Bm=0,km=0,Xh=0,wi={point:ri,lineStart:tu,lineEnd:_f,polygonStart:function(){wi.lineStart=vp,wi.lineEnd=yp},polygonEnd:function(){wi.point=ri,wi.lineStart=tu,wi.lineEnd=_f},result:function(){var e=Xh?[Bm/Xh,km/Xh]:Jc?[Zd/Jc,Kd/Jc]:Wh?[Fm/Wh,zm/Wh]:[NaN,NaN];return Fm=zm=Wh=Zd=Kd=Jc=Bm=km=Xh=0,e}};wf.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,r){switch(this._point){case 0:this._context.moveTo(e,r),this._point=1;break;case 1:this._context.lineTo(e,r);break;default:this._context.moveTo(e+this._radius,r),this._context.arc(e,r,this._radius,0,Zr)}},result:Mn};var Hm,Gv,Vv,qh,Yh,Gm=us(),Zh={point:Mn,lineStart:function(){Zh.point=_p},lineEnd:function(){Hm&&Mf(Gv,Vv),Zh.point=Mn},polygonStart:function(){Hm=!0},polygonEnd:function(){Hm=null},result:function(){var e=+Gm;return Gm.reset(),e}};Ef.prototype={_radius:4.5,_circle:Tf(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,r){switch(this._point){case 0:this._string.push("M",e,",",r),this._point=1;break;case 1:this._string.push("L",e,",",r);break;default:this._circle==null&&(this._circle=Tf(this._radius)),this._string.push("M",e,",",r,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}};var Ox=function(e,r){function a(p){return p&&(typeof h=="function"&&c.pointRadius(+h.apply(this,arguments)),qi(p,s(c))),c.result()}var s,c,h=4.5;return a.area=function(p){return qi(p,s(io)),io.result()},a.measure=function(p){return qi(p,s(Zh)),Zh.result()},a.bounds=function(p){return qi(p,s(Yd)),Yd.result()},a.centroid=function(p){return qi(p,s(wi)),wi.result()},a.projection=function(p){return arguments.length?(s=p==null?(e=null,Mu):(e=p).stream,a):e},a.context=function(p){return arguments.length?(c=p==null?(r=null,new Ef):new wf(r=p),typeof h!="function"&&c.pointRadius(h),a):r},a.pointRadius=function(p){return arguments.length?(h=typeof p=="function"?p:(c.pointRadius(+p),+p),a):h},a.projection(e).context(r)},jv=function(e,r,a,s){return function(c,h){function p(it,J){var dt=c(it,J);e(it=dt[0],J=dt[1])&&h.point(it,J)}function m(it,J){var dt=c(it,J);H.point(dt[0],dt[1])}function x(){ot.point=m,H.lineStart()}function _(){ot.point=p,H.lineEnd()}function E(it,J){I.push([it,J]);var dt=c(it,J);V.point(dt[0],dt[1])}function S(){V.lineStart(),I=[]}function M(){E(I[0][0],I[0][1]),V.lineEnd();var it,J,dt,pt,At=V.clean(),bt=W.result(),Mt=bt.length;if(I.pop(),R.push(I),I=null,Mt)if(1&At){if(dt=bt[0],(J=dt.length-1)>0){for(rt||(h.polygonStart(),rt=!0),h.lineStart(),it=0;it<J;++it)h.point((pt=dt[it])[0],pt[1]);h.lineEnd()}}else Mt>1&&2&At&&bt.push(bt.pop().concat(bt.shift())),O.push(bt.filter(bp))}var R,O,I,H=r(h),j=c.invert(s[0],s[1]),W=Dv(),V=r(W),rt=!1,ot={point:p,lineStart:x,lineEnd:_,polygonStart:function(){ot.point=E,ot.lineStart=S,ot.lineEnd=M,O=[],R=[]},polygonEnd:function(){ot.point=p,ot.lineStart=x,ot.lineEnd=_,O=xu(O);var it=zv(R,j);O.length?(rt||(h.polygonStart(),rt=!0),Fv(O,wp,it,a,h)):it&&(rt||(h.polygonStart(),rt=!0),h.lineStart(),a(null,null,1,h),h.lineEnd()),rt&&(h.polygonEnd(),rt=!1),O=R=null},sphere:function(){h.polygonStart(),h.lineStart(),a(null,null,1,h),h.lineEnd(),h.polygonEnd()}};return ot}},Wv=jv(function(){return!0},Mp,Tp,[-Qe,-Wn]),Ux=function(e,r){function a(E,S,M,R){Ul(R,e,r,M,E,S)}function s(E,S){return ue(E)*ue(S)>m}function c(E){var S,M,R,O,I;return{lineStart:function(){O=R=!1,I=1},point:function(H,j){var W,V=[H,j],rt=s(H,j),ot=x?rt?0:p(H,j):rt?p(H+(H<0?Qe:-Qe),j):0;if(!S&&(O=R=rt)&&E.lineStart(),rt!==R&&(!(W=h(S,V))||jd(S,W)||jd(V,W))&&(V[0]+=he,V[1]+=he,rt=s(V[0],V[1])),rt!==R)I=0,rt?(E.lineStart(),W=h(V,S),E.point(W[0],W[1])):(W=h(S,V),E.point(W[0],W[1]),E.lineEnd()),S=W;else if(_&&S&&x^rt){var it;ot&M||!(it=h(V,S,!0))||(I=0,x?(E.lineStart(),E.point(it[0][0],it[0][1]),E.point(it[1][0],it[1][1]),E.lineEnd()):(E.point(it[1][0],it[1][1]),E.lineEnd(),E.lineStart(),E.point(it[0][0],it[0][1])))}!rt||S&&jd(S,V)||E.point(V[0],V[1]),S=V,R=rt,M=ot},lineEnd:function(){R&&E.lineEnd(),S=null},clean:function(){return I|(O&&R)<<1}}}function h(E,S,M){var R=Rr(E),O=Rr(S),I=[1,0,0],H=ni(R,O),j=zi(H,H),W=H[0],V=j-W*W;if(!V)return!M&&E;var rt=m*j/V,ot=-m*W/V,it=ni(I,H),J=_i(I,rt);Wa(J,_i(H,ot));var dt=it,pt=zi(J,dt),At=zi(dt,dt),bt=pt*pt-At*(zi(J,J)-1);if(!(bt<0)){var Mt=Kn(bt),Jt=_i(dt,(-pt-Mt)/At);if(Wa(Jt,J),Jt=jr(Jt),!M)return Jt;var Pt,Ht=E[0],ct=S[0],mt=E[1],xt=S[1];ct<Ht&&(Pt=Ht,Ht=ct,ct=Pt);var Gt=ct-Ht,Vt=sn(Gt-Qe)<he,Me=Vt||Gt<he;if(!Vt&&xt<mt&&(Pt=mt,mt=xt,xt=Pt),Me?Vt?mt+xt>0^Jt[1]<(sn(Jt[0]-Ht)<he?mt:xt):mt<=Jt[1]&&Jt[1]<=xt:Gt>Qe^(Ht<=Jt[0]&&Jt[0]<=ct)){var fn=_i(dt,(-pt+Mt)/At);return Wa(fn,J),[Jt,jr(fn)]}}}function p(E,S){var M=x?e:Qe-e,R=0;return E<-M?R|=1:E>M&&(R|=2),S<-M?R|=4:S>M&&(R|=8),R}var m=ue(e),x=m>0,_=sn(m)>he;return jv(s,c,a,x?[0,-e]:[-Qe,e-Qe])},Dx=function(e){return{stream:nc(e)}};zl.prototype={constructor:zl,point:function(e,r){this.stream.point(e,r)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Xv=16,Fx=ue(30*ye),qv=function(e,r){return+r?Bl(e,r):Sf(e)},zx=nc({point:function(e,r){this.stream.point(e*ye,r*ye)}}),Qd=function(){return Hl(Af).scale(155.424).center([0,33.6442])},Yv=function(){return Qd().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},Bx=function(){function e(M){var R=M[0],O=M[1];return m=null,c.point(R,O),m||(h.point(R,O),m)||(p.point(R,O),m)}function r(){return a=s=null,e}var a,s,c,h,p,m,x=Yv(),_=Qd().rotate([154,0]).center([-2,58.5]).parallels([55,65]),E=Qd().rotate([157,0]).center([-3,19.9]).parallels([8,18]),S={point:function(M,R){m=[M,R]}};return e.invert=function(M){var R=x.scale(),O=x.translate(),I=(M[0]-O[0])/R,H=(M[1]-O[1])/R;return(H>=.12&&H<.234&&I>=-.425&&I<-.214?_:H>=.166&&H<.234&&I>=-.214&&I<-.115?E:x).invert(M)},e.stream=function(M){return a&&s===M?a:a=Ap([x.stream(s=M),_.stream(M),E.stream(M)])},e.precision=function(M){return arguments.length?(x.precision(M),_.precision(M),E.precision(M),r()):x.precision()},e.scale=function(M){return arguments.length?(x.scale(M),_.scale(.35*M),E.scale(M),e.translate(x.translate())):x.scale()},e.translate=function(M){if(!arguments.length)return x.translate();var R=x.scale(),O=+M[0],I=+M[1];return c=x.translate(M).clipExtent([[O-.455*R,I-.238*R],[O+.455*R,I+.238*R]]).stream(S),h=_.translate([O-.307*R,I+.201*R]).clipExtent([[O-.425*R+he,I+.12*R+he],[O-.214*R-he,I+.234*R-he]]).stream(S),p=E.translate([O-.205*R,I+.212*R]).clipExtent([[O-.214*R+he,I+.166*R+he],[O-.115*R-he,I+.234*R-he]]).stream(S),r()},e.fitExtent=function(M,R){return rc(e,M,R)},e.fitSize=function(M,R){return ic(e,M,R)},e.scale(1070)},Vm=Rf(function(e){return Kn(2/(1+e))});Vm.invert=qo(function(e){return 2*Ar(e/2)});var kx=function(){return la(Vm).scale(124.75).clipAngle(179.999)},jm=Rf(function(e){return(e=mf(e))&&e/re(e)});jm.invert=qo(function(e){return e});var Hx=function(){return la(jm).scale(79.4188).clipAngle(179.999)};eu.invert=function(e,r){return[e,2*Zc(Av(r))-Wn]};var Gx=function(){return Gl(eu).scale(961/Zr)},Vx=function(){return Hl(ac).scale(109.5).parallels([30,30])};nu.invert=nu;var jx=function(){return la(nu).scale(152.63)},Wx=function(){return Hl(Vl).scale(131.154).center([0,13.9389])};jl.invert=qo(Zc);var Xx=function(){return la(jl).scale(144.049).clipAngle(60)},qx=function(){function e(){return c=h=null,p}var r,a,s,c,h,p,m=1,x=0,_=0,E=1,S=1,M=Mu,R=null,O=Mu;return p={stream:function(I){return c&&h===I?c:c=M(O(h=I))},clipExtent:function(I){return arguments.length?(O=I==null?(R=r=a=s=null,Mu):ua(R=+I[0][0],r=+I[0][1],a=+I[1][0],s=+I[1][1]),e()):R==null?null:[[R,r],[a,s]]},scale:function(I){return arguments.length?(M=oc((m=+I)*E,m*S,x,_),e()):m},translate:function(I){return arguments.length?(M=oc(m*E,m*S,x=+I[0],_=+I[1]),e()):[x,_]},reflectX:function(I){return arguments.length?(M=oc(m*(E=I?-1:1),m*S,x,_),e()):E<0},reflectY:function(I){return arguments.length?(M=oc(m*E,m*(S=I?-1:1),x,_),e()):S<0},fitExtent:function(I,H){return rc(p,I,H)},fitSize:function(I,H){return ic(p,I,H)}}};ru.invert=qo(Ar);var Yx=function(){return la(ru).scale(249.5).clipAngle(90+he)};sc.invert=qo(function(e){return 2*Zc(e)});var Zx=function(){return la(sc).scale(250).clipAngle(142)};fa.invert=function(e,r){return[-r,2*Zc(Av(e))-Wn]};var Kx=function(){var e=Gl(fa),r=e.center,a=e.rotate;return e.center=function(s){return arguments.length?r([-s[1],s[0]]):(s=r(),[s[1],-s[0]])},e.rotate=function(s){return arguments.length?a([s[0],s[1],s.length>2?s[2]+90:90]):(s=a(),[s[0],s[1],s[2]-90])},a([0,0,90]).scale(159.155)},Qx=function(){function e(h){var p,m=0;h.eachAfter(function(M){var R=M.children;R?(M.x=Yo(R),M.y=Rp(R)):(M.x=p?m+=r(M,p):0,M.y=0,p=M)});var x=Xl(h),_=qa(h),E=x.x-r(x,_)/2,S=_.x+r(_,x)/2;return h.eachAfter(c?function(M){M.x=(M.x-h.x)*a,M.y=(h.y-M.y)*s}:function(M){M.x=(M.x-E)/(S-E)*a,M.y=(1-(h.y?M.y/h.y:1))*s})}var r=da,a=1,s=1,c=!1;return e.separation=function(h){return arguments.length?(r=h,e):r},e.size=function(h){return arguments.length?(c=!1,a=+h[0],s=+h[1],e):c?null:[a,s]},e.nodeSize=function(h){return arguments.length?(c=!0,a=+h[0],s=+h[1],e):c?[a,s]:null},e},$x=function(){return this.eachAfter(cc)},Jx=function(e){var r,a,s,c,h=this,p=[h];do for(r=p.reverse(),p=[];h=r.pop();)if(e(h),a=h.children)for(s=0,c=a.length;s<c;++s)p.push(a[s]);while(p.length);return this},t_=function(e){for(var r,a,s=this,c=[s];s=c.pop();)if(e(s),r=s.children)for(a=r.length-1;a>=0;--a)c.push(r[a]);return this},e_=function(e){for(var r,a,s,c=this,h=[c],p=[];c=h.pop();)if(p.push(c),r=c.children)for(a=0,s=r.length;a<s;++a)h.push(r[a]);for(;c=p.pop();)e(c);return this},n_=function(e){return this.eachAfter(function(r){for(var a=+e(r.data)||0,s=r.children,c=s&&s.length;--c>=0;)a+=s[c].value;r.value=a})},r_=function(e){return this.eachBefore(function(r){r.children&&r.children.sort(e)})},i_=function(e){for(var r=this,a=Zo(r,e),s=[r];r!==a;)r=r.parent,s.push(r);for(var c=s.length;e!==a;)s.splice(c,0,e),e=e.parent;return s},a_=function(){for(var e=this,r=[e];e=e.parent;)r.push(e);return r},o_=function(){var e=[];return this.each(function(r){e.push(r)}),e},s_=function(){var e=[];return this.eachBefore(function(r){r.children||e.push(r)}),e},u_=function(){var e=this,r=[];return e.each(function(a){a!==e&&r.push({source:a.parent,target:a})}),r};Ya.prototype=iu.prototype={constructor:Ya,count:$x,each:Jx,eachAfter:e_,eachBefore:t_,sum:n_,sort:r_,path:i_,ancestors:a_,descendants:o_,leaves:s_,links:u_,copy:ql};var c_=Array.prototype.slice,Zv=function(e){for(var r,a,s=0,c=(e=Lf(c_.call(e))).length,h=[];s<c;)r=e[s],a&&Ql(a,r)?++s:(a=Cf(h=Kl(h,r)),s=0);return a},l_=function(e){return eh(e),e},tl=function(e){return function(){return e}},h_=function(){function e(h){return h.x=a/2,h.y=s/2,r?h.eachBefore(nh(r)).eachAfter(pc(c,.5)).eachBefore(rh(1)):h.eachBefore(nh(dc)).eachAfter(pc(pa,1)).eachAfter(pc(c,h.r/Math.min(a,s))).eachBefore(rh(Math.min(a,s)/(2*h.r))),h}var r=null,a=1,s=1,c=pa;return e.radius=function(h){return arguments.length?(r=Nf(h),e):r},e.size=function(h){return arguments.length?(a=+h[0],s=+h[1],e):[a,s]},e.padding=function(h){return arguments.length?(c=typeof h=="function"?h:tl(+h),e):c},e},Kv=function(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)},Kh=function(e,r,a,s,c){for(var h,p=e.children,m=-1,x=p.length,_=e.value&&(s-r)/e.value;++m<x;)h=p[m],h.y0=a,h.y1=c,h.x0=r,h.x1=r+=h.value*_},f_=function(){function e(p){var m=p.height+1;return p.x0=p.y0=c,p.x1=a,p.y1=s/m,p.eachBefore(r(s,m)),h&&p.eachBefore(Kv),p}function r(p,m){return function(x){x.children&&Kh(x,x.x0,p*(x.depth+1)/m,x.x1,p*(x.depth+2)/m);var _=x.x0,E=x.y0,S=x.x1-c,M=x.y1-c;S<_&&(_=S=(_+S)/2),M<E&&(E=M=(E+M)/2),x.x0=_,x.y0=E,x.x1=S,x.y1=M}}var a=1,s=1,c=0,h=!1;return e.round=function(p){return arguments.length?(h=!!p,e):h},e.size=function(p){return arguments.length?(a=+p[0],s=+p[1],e):[a,s]},e.padding=function(p){return arguments.length?(c=+p,e):c},e},Qv="$",d_={depth:-1},$v={},p_=function(){function e(s){var c,h,p,m,x,_,E,S=s.length,M=new Array(S),R={};for(h=0;h<S;++h)c=s[h],x=M[h]=new Ya(c),(_=r(c,h,s))!=null&&(_+="")&&(E=Qv+(x.id=_),R[E]=E in R?$v:x);for(h=0;h<S;++h)if(x=M[h],(_=a(s[h],h,s))!=null&&(_+="")){if(!(m=R[Qv+_]))throw new Error("missing: "+_);if(m===$v)throw new Error("ambiguous: "+_);m.children?m.children.push(x):m.children=[x],x.parent=m}else{if(p)throw new Error("multiple roots");p=x}if(!p)throw new Error("no root");if(p.parent=d_,p.eachBefore(function(O){O.depth=O.parent.depth+1,--S}).eachBefore(lc),p.parent=null,S>0)throw new Error("cycle");return p}var r=If,a=su;return e.id=function(s){return arguments.length?(r=ou(s),e):r},e.parentId=function(s){return arguments.length?(a=ou(s),e):a},e};uu.prototype=Object.create(Ya.prototype);var m_=function(){function e(_){var E=gc(_);if(E.eachAfter(r),E.parent.m=-E.z,E.eachBefore(a),x)_.eachBefore(c);else{var S=_,M=_,R=_;_.eachBefore(function(W){W.x<S.x&&(S=W),W.x>M.x&&(M=W),W.depth>R.depth&&(R=W)});var O=S===M?1:h(S,M)/2,I=O-S.x,H=p/(M.x+O+I),j=m/(R.depth||1);_.eachBefore(function(W){W.x=(W.x+I)*H,W.y=W.depth*j})}return _}function r(_){var E=_.children,S=_.parent.children,M=_.i?S[_.i-1]:null;if(E){Uf(_);var R=(E[0].z+E[E.length-1].z)/2;M?(_.z=M.z+h(_._,M._),_.m=_.z-R):_.z=R}else M&&(_.z=M.z+h(_._,M._));_.parent.A=s(_,M,_.parent.A||S[0])}function a(_){_._.x=_.z+_.parent.m,_.m+=_.parent.m}function s(_,E,S){if(E){for(var M,R=_,O=_,I=E,H=R.parent.children[0],j=R.m,W=O.m,V=I.m,rt=H.m;I=Qo(I),R=mc(R),I&&R;)H=mc(H),O=Qo(O),O.a=_,M=I.z+V-R.z-j+h(I._,R._),M>0&&(ih(Df(I,_,S),_,M),j+=M,W+=M),V+=I.m,j+=R.m,rt+=H.m,W+=O.m;I&&!Qo(O)&&(O.t=I,O.m+=V-W),R&&!mc(H)&&(H.t=R,H.m+=j-rt,S=_)}return S}function c(_){_.x*=p,_.y=_.depth*m}var h=Of,p=1,m=1,x=null;return e.separation=function(_){return arguments.length?(h=_,e):h},e.size=function(_){return arguments.length?(x=!1,p=+_[0],m=+_[1],e):x?null:[p,m]},e.nodeSize=function(_){return arguments.length?(x=!0,p=+_[0],m=+_[1],e):x?[p,m]:null},e},$d=function(e,r,a,s,c){for(var h,p=e.children,m=-1,x=p.length,_=e.value&&(c-a)/e.value;++m<x;)h=p[m],h.x0=r,h.x1=s,h.y0=a,h.y1=a+=h.value*_},Jv=(1+Math.sqrt(5))/2,t0=function e(r){function a(s,c,h,p,m){cu(r,s,c,h,p,m)}return a.ratio=function(s){return e((s=+s)>1?s:1)},a}(Jv),g_=function(){function e(M){return M.x0=M.y0=0,M.x1=c,M.y1=h,M.eachBefore(r),p=[0],s&&M.eachBefore(Kv),M}function r(M){var R=p[M.depth],O=M.x0+R,I=M.y0+R,H=M.x1-R,j=M.y1-R;H<O&&(O=H=(O+H)/2),j<I&&(I=j=(I+j)/2),M.x0=O,M.y0=I,M.x1=H,M.y1=j,M.children&&(R=p[M.depth+1]=m(M)/2,O+=S(M)-R,I+=x(M)-R,H-=_(M)-R,j-=E(M)-R,H<O&&(O=H=(O+H)/2),j<I&&(I=j=(I+j)/2),a(M,O,I,H,j))}var a=t0,s=!1,c=1,h=1,p=[0],m=pa,x=pa,_=pa,E=pa,S=pa;return e.round=function(M){return arguments.length?(s=!!M,e):s},e.size=function(M){return arguments.length?(c=+M[0],h=+M[1],e):[c,h]},e.tile=function(M){return arguments.length?(a=ou(M),e):a},e.padding=function(M){return arguments.length?e.paddingInner(M).paddingOuter(M):e.paddingInner()},e.paddingInner=function(M){return arguments.length?(m=typeof M=="function"?M:tl(+M),e):m},e.paddingOuter=function(M){return arguments.length?e.paddingTop(M).paddingRight(M).paddingBottom(M).paddingLeft(M):e.paddingTop()},e.paddingTop=function(M){return arguments.length?(x=typeof M=="function"?M:tl(+M),e):x},e.paddingRight=function(M){return arguments.length?(_=typeof M=="function"?M:tl(+M),e):_},e.paddingBottom=function(M){return arguments.length?(E=typeof M=="function"?M:tl(+M),e):E},e.paddingLeft=function(M){return arguments.length?(S=typeof M=="function"?M:tl(+M),e):S},e},v_=function(e,r,a,s,c){function h(S,M,R,O,I,H,j){if(S>=M-1){var W=x[S];return W.x0=O,W.y0=I,W.x1=H,W.y1=j,void 0}for(var V=E[S],rt=R/2+V,ot=S+1,it=M-1;ot<it;){var J=ot+it>>>1;E[J]<rt?ot=J+1:it=J}rt-E[ot-1]<E[ot]-rt&&S+1<ot&&--ot;var dt=E[ot]-V,pt=R-dt;if(H-O>j-I){var At=(O*pt+H*dt)/R;h(S,ot,dt,O,I,At,j),h(ot,M,pt,At,I,H,j)}else{var bt=(I*pt+j*dt)/R;h(S,ot,dt,O,I,H,bt),h(ot,M,pt,O,bt,H,j)}}var p,m,x=e.children,_=x.length,E=new Array(_+1);for(E[0]=m=p=0;p<_;++p)E[p+1]=m+=x[p].value;h(0,_,e.value,r,a,s,c)},y_=function(e,r,a,s,c){(1&e.depth?$d:Kh)(e,r,a,s,c)},x_=function e(r){function a(s,c,h,p,m){if((x=s._squarify)&&x.ratio===r)for(var x,_,E,S,M,R=-1,O=x.length,I=s.value;++R<O;){for(_=x[R],E=_.children,S=_.value=0,M=E.length;S<M;++S)_.value+=E[S].value;_.dice?Kh(_,c,h,p,h+=(m-h)*_.value/I):$d(_,c,h,c+=(p-c)*_.value/I,m),I-=_.value}else s._squarify=x=cu(r,s,c,h,p,m),x.ratio=r}return a.ratio=function(s){return e((s=+s)>1?s:1)},a}(Jv),__=function(e){for(var r,a=-1,s=e.length,c=e[s-1],h=0;++a<s;)r=c,c=e[a],h+=r[1]*c[0]-r[0]*c[1];return h/2},b_=function(e){for(var r,a,s=-1,c=e.length,h=0,p=0,m=e[c-1],x=0;++s<c;)r=m,m=e[s],x+=a=r[0]*m[1]-m[0]*r[1],h+=(r[0]+m[0])*a,p+=(r[1]+m[1])*a;return x*=3,[h/x,p/x]},w_=function(e,r,a){return(r[0]-e[0])*(a[1]-e[1])-(r[1]-e[1])*(a[0]-e[0])},M_=function(e){if((a=e.length)<3)return null;var r,a,s=new Array(a),c=new Array(a);for(r=0;r<a;++r)s[r]=[+e[r][0],+e[r][1],r];for(s.sort(vc),r=0;r<a;++r)c[r]=[s[r][0],-s[r][1]];var h=yc(s),p=yc(c),m=p[0]===h[0],x=p[p.length-1]===h[h.length-1],_=[];for(r=h.length-1;r>=0;--r)_.push(e[s[h[r]][2]]);for(r=+m;r<p.length-x;++r)_.push(e[s[p[r]][2]]);return _},E_=function(e,r){for(var a,s,c=e.length,h=e[c-1],p=r[0],m=r[1],x=h[0],_=h[1],E=!1,S=0;S<c;++S)h=e[S],a=h[0],s=h[1],s>m!=_>m&&p<(x-a)*(m-s)/(_-s)+a&&(E=!E),x=a,_=s;return E},T_=function(e){for(var r,a,s=-1,c=e.length,h=e[c-1],p=h[0],m=h[1],x=0;++s<c;)r=p,a=m,h=e[s],p=h[0],m=h[1],r-=p,a-=m,x+=Math.sqrt(r*r+a*a);return x},S_=[].slice,A_={};$o.prototype=ma.prototype={constructor:$o,defer:function(e){if(typeof e!="function")throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(this._error!=null)return this;var r=S_.call(arguments,1);return r.push(e),++this._waiting,this._tasks.push(r),xc(this),this},abort:function(){return this._error==null&&ii(this,new Error("abort")),this},await:function(e){if(typeof e!="function")throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(r,a){e.apply(null,[r].concat(a))},nr(this),this},awaitAll:function(e){if(typeof e!="function")throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=e,nr(this),this}};var el=function(){return Math.random()},R_=function e(r){function a(s,c){return s=s==null?0:+s,c=c==null?1:+c,arguments.length===1?(c=s,s=0):c-=s,function(){return r()*c+s}}return a.source=e,a}(el),e0=function e(r){function a(s,c){var h,p;return s=s==null?0:+s,c=c==null?1:+c,function(){var m;if(h!=null)m=h,h=null;else do h=2*r()-1,m=2*r()-1,p=h*h+m*m;while(!p||p>1);return s+c*m*Math.sqrt(-2*Math.log(p)/p)}}return a.source=e,a}(el),L_=function e(r){function a(){var s=e0.source(r).apply(this,arguments);return function(){return Math.exp(s())}}return a.source=e,a}(el),n0=function e(r){function a(s){return function(){for(var c=0,h=0;h<s;++h)c+=r();return c}}return a.source=e,a}(el),C_=function e(r){function a(s){var c=n0.source(r)(s);return function(){return c()/s}}return a.source=e,a}(el),P_=function e(r){function a(s){return function(){return-Math.log(1-r())/s}}return a.source=e,a}(el),Wm=function(e,r){function a(R){var O,I=_.status;if(!I&&wc(_)||I>=200&&I<300||I===304){if(h)try{O=h.call(s,_)}catch(H){return void m.call("error",s,H)}else O=_;m.call("load",s,O)}else m.call("error",s,R)}var s,c,h,p,m=Ye("beforesend","progress","load","error"),x=er(),_=new XMLHttpRequest,E=null,S=null,M=0;if(typeof XDomainRequest=="undefined"||"withCredentials"in _||!/^(http(s)?:)?\/\//.test(e)||(_=new XDomainRequest),"onload"in _?_.onload=_.onerror=_.ontimeout=a:_.onreadystatechange=function(R){_.readyState>3&&a(R)},_.onprogress=function(R){m.call("progress",s,R)},s={header:function(R,O){return R=(R+"").toLowerCase(),arguments.length<2?x.get(R):(O==null?x.remove(R):x.set(R,O+""),s)},mimeType:function(R){return arguments.length?(c=R==null?null:R+"",s):c},responseType:function(R){return arguments.length?(p=R,s):p},timeout:function(R){return arguments.length?(M=+R,s):M},user:function(R){return arguments.length<1?E:(E=R==null?null:R+"",s)},password:function(R){return arguments.length<1?S:(S=R==null?null:R+"",s)},response:function(R){return h=R,s},get:function(R,O){return s.send("GET",R,O)},post:function(R,O){return s.send("POST",R,O)},send:function(R,O,I){return _.open(R,e,!0,E,S),c==null||x.has("accept")||x.set("accept",c+",*/*"),_.setRequestHeader&&x.each(function(H,j){_.setRequestHeader(j,H)}),c!=null&&_.overrideMimeType&&_.overrideMimeType(c),p!=null&&(_.responseType=p),M>0&&(_.timeout=M),I==null&&typeof O=="function"&&(I=O,O=null),I!=null&&I.length===1&&(I=Lr(I)),I!=null&&s.on("error",I).on("load",function(H){I(null,H)}),m.call("beforesend",s,_),_.send(O==null?null:O),s},abort:function(){return _.abort(),s},on:function(){var R=m.on.apply(m,arguments);return R===m?s:R}},r!=null){if(typeof r!="function")throw new Error("invalid callback: "+r);return s.get(r)}return s},Jd=function(e,r){return function(a,s){var c=Wm(a).mimeType(e).response(r);if(s!=null){if(typeof s!="function")throw new Error("invalid callback: "+s);return c.get(s)}return c}},N_=Jd("text/html",function(e){return document.createRange().createContextualFragment(e.responseText)}),I_=Jd("application/json",function(e){return JSON.parse(e.responseText)}),O_=Jd("text/plain",function(e){return e.responseText}),U_=Jd("application/xml",function(e){var r=e.responseXML;if(!r)throw new Error("parse error");return r}),r0=function(e,r){return function(a,s,c){arguments.length<3&&(c=s,s=null);var h=Wm(a).mimeType(e);return h.row=function(p){return arguments.length?h.response(Mc(r,s=p)):s},h.row(s),c?h.get(c):h}},D_=r0("text/csv",lv),F_=r0("text/tab-separated-values",hv),i0=Array.prototype,Xm=i0.map,ls=i0.slice,qm={name:"implicit"},Ym=function(e){return function(){return e}},a0=function(e){return+e},o0=[0,1],z_=function(e,r,a){var s,c=e[0],h=e[e.length-1],p=de(c,h,r==null?10:r);switch(a=yi(a==null?",f":a),a.type){case"s":var m=Math.max(Math.abs(c),Math.abs(h));return a.precision!=null||isNaN(s=xv(p,m))||(a.precision=s),A.formatPrefix(a,m);case"":case"e":case"g":case"p":case"r":a.precision!=null||isNaN(s=_v(p,Math.max(Math.abs(c),Math.abs(h))))||(a.precision=s-(a.type==="e"));break;case"f":case"%":a.precision!=null||isNaN(s=yv(p))||(a.precision=s-2*(a.type==="%"))}return A.format(a)},s0=function(e,r){e=e.slice();var a,s=0,c=e.length-1,h=e[s],p=e[c];return p<h&&(a=s,s=c,c=a,a=h,h=p,p=a),e[s]=r.floor(h),e[c]=r.ceil(p),e},Zm=new Date,Km=new Date,Eu=Cn(function(){},function(e,r){e.setTime(+e+r)},function(e,r){return r-e});Eu.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Cn(function(r){r.setTime(Math.floor(r/e)*e)},function(r,a){r.setTime(+r+a*e)},function(r,a){return(a-r)/e}):Eu:null};var u0=Eu.range,ao=6e4,c0=6048e5,Qh=Cn(function(e){e.setTime(1e3*Math.floor(e/1e3))},function(e,r){e.setTime(+e+1e3*r)},function(e,r){return(r-e)/1e3},function(e){return e.getUTCSeconds()}),l0=Qh.range,Qm=Cn(function(e){e.setTime(Math.floor(e/ao)*ao)},function(e,r){e.setTime(+e+r*ao)},function(e,r){return(r-e)/ao},function(e){return e.getMinutes()}),B_=Qm.range,$m=Cn(function(e){var r=e.getTimezoneOffset()*ao%36e5;r<0&&(r+=36e5),e.setTime(36e5*Math.floor((+e-r)/36e5)+r)},function(e,r){e.setTime(+e+36e5*r)},function(e,r){return(r-e)/36e5},function(e){return e.getHours()}),k_=$m.range,tp=Cn(function(e){e.setHours(0,0,0,0)},function(e,r){e.setDate(e.getDate()+r)},function(e,r){return(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*ao)/864e5},function(e){return e.getDate()-1}),H_=tp.range,$h=Hi(0),Jm=Hi(1),h0=Hi(2),f0=Hi(3),d0=Hi(4),p0=Hi(5),m0=Hi(6),g0=$h.range,G_=Jm.range,V_=h0.range,j_=f0.range,W_=d0.range,X_=p0.range,q_=m0.range,tg=Cn(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,r){e.setMonth(e.getMonth()+r)},function(e,r){return r.getMonth()-e.getMonth()+12*(r.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),Y_=tg.range,Tu=Cn(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,r){e.setFullYear(e.getFullYear()+r)},function(e,r){return r.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});Tu.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Cn(function(r){r.setFullYear(Math.floor(r.getFullYear()/e)*e),r.setMonth(0,1),r.setHours(0,0,0,0)},function(r,a){r.setFullYear(r.getFullYear()+a*e)}):null};var Z_=Tu.range,eg=Cn(function(e){e.setUTCSeconds(0,0)},function(e,r){e.setTime(+e+r*ao)},function(e,r){return(r-e)/ao},function(e){return e.getUTCMinutes()}),K_=eg.range,ng=Cn(function(e){e.setUTCMinutes(0,0,0)},function(e,r){e.setTime(+e+36e5*r)},function(e,r){return(r-e)/36e5},function(e){return e.getUTCHours()}),Q_=ng.range,ep=Cn(function(e){e.setUTCHours(0,0,0,0)},function(e,r){e.setUTCDate(e.getUTCDate()+r)},function(e,r){return(r-e)/864e5},function(e){return e.getUTCDate()-1}),$_=ep.range,Jh=Gi(0),rg=Gi(1),v0=Gi(2),y0=Gi(3),x0=Gi(4),_0=Gi(5),b0=Gi(6),w0=Jh.range,J_=rg.range,tb=v0.range,eb=y0.range,nb=x0.range,rb=_0.range,ib=b0.range,ig=Cn(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,r){e.setUTCMonth(e.getUTCMonth()+r)},function(e,r){return r.getUTCMonth()-e.getUTCMonth()+12*(r.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),ab=ig.range,Su=Cn(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,r){e.setUTCFullYear(e.getUTCFullYear()+r)},function(e,r){return r.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});Su.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Cn(function(r){r.setUTCFullYear(Math.floor(r.getUTCFullYear()/e)*e),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},function(r,a){r.setUTCFullYear(r.getUTCFullYear()+a*e)}):null};var nl,ob=Su.range,M0={"-":"",_:" ",0:"0"},Mi=/^\s*\d+/,sb=/^%/,ub=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;xh({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var cb=Date.prototype.toISOString?ed:A.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),lb=+new Date("2000-01-01T00:00:00.000Z")?_h:A.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),tf=1e3,ef=60*tf,nf=60*ef,rf=24*nf,hb=7*rf,E0=30*rf,ag=365*rf,fb=function(){return ns(Tu,tg,$h,tp,$m,Qm,Qh,Eu,A.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},db=function(){return ns(Su,ig,Jh,ep,ng,eg,Qh,Eu,A.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},hs=function(e){return e.match(/.{6}/g).map(function(r){return"#"+r})},pb=hs("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),mb=hs("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),gb=hs("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),vb=hs("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),yb=md(Jr(300,.5,0),Jr(-240,.5,1)),xb=md(Jr(-100,.75,.35),Jr(80,1.5,.8)),_b=md(Jr(260,.75,.35),Jr(80,1.5,.8)),np=Jr(),bb=function(e){(e<0||e>1)&&(e-=Math.floor(e));var r=Math.abs(e-.5);return np.h=360*e-100,np.s=1.5-1.5*r,np.l=.8-.9*r,np+""},wb=rs(hs("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Mb=rs(hs("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Eb=rs(hs("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Tb=rs(hs("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Ge=function(e){return function(){return e}},T0=Math.abs,xr=Math.atan2,Au=Math.cos,Sb=Math.max,og=Math.min,Ma=Math.sin,rl=Math.sqrt,_r=1e-12,fs=Math.PI,rp=fs/2,ds=2*fs,Ab=function(){function e(){var _,E,S=+r.apply(this,arguments),M=+a.apply(this,arguments),R=h.apply(this,arguments)-rp,O=p.apply(this,arguments)-rp,I=T0(O-R),H=O>R;if(x||(x=_=Fi()),M<S&&(E=M,M=S,S=E),M>_r)if(I>ds-_r)x.moveTo(M*Au(R),M*Ma(R)),x.arc(0,0,M,R,O,!H),S>_r&&(x.moveTo(S*Au(O),S*Ma(O)),x.arc(0,0,S,O,R,H));else{var j,W,V=R,rt=O,ot=R,it=O,J=I,dt=I,pt=m.apply(this,arguments)/2,At=pt>_r&&(c?+c.apply(this,arguments):rl(S*S+M*M)),bt=og(T0(M-S)/2,+s.apply(this,arguments)),Mt=bt,Jt=bt;if(At>_r){var Pt=Nc(At/S*Ma(pt)),Ht=Nc(At/M*Ma(pt));(J-=2*Pt)>_r?(Pt*=H?1:-1,ot+=Pt,it-=Pt):(J=0,ot=it=(R+O)/2),(dt-=2*Ht)>_r?(Ht*=H?1:-1,V+=Ht,rt-=Ht):(dt=0,V=rt=(R+O)/2)}var ct=M*Au(V),mt=M*Ma(V),xt=S*Au(it),Gt=S*Ma(it);if(bt>_r){var Vt=M*Au(rt),Me=M*Ma(rt),fn=S*Au(ot),an=S*Ma(ot);if(I<fs){var Be=J>_r?Hp(ct,mt,fn,an,Vt,Me,xt,Gt):[xt,Gt],tn=ct-Be[0],Qn=mt-Be[1],Xt=Vt-Be[0],oe=Me-Be[1],Oe=1/Ma(wh((tn*Xt+Qn*oe)/(rl(tn*tn+Qn*Qn)*rl(Xt*Xt+oe*oe)))/2),Kt=rl(Be[0]*Be[0]+Be[1]*Be[1]);Mt=og(bt,(S-Kt)/(Oe-1)),Jt=og(bt,(M-Kt)/(Oe+1))}}dt>_r?Jt>_r?(j=t(fn,an,ct,mt,M,Jt,H),W=t(Vt,Me,xt,Gt,M,Jt,H),x.moveTo(j.cx+j.x01,j.cy+j.y01),Jt<bt?x.arc(j.cx,j.cy,Jt,xr(j.y01,j.x01),xr(W.y01,W.x01),!H):(x.arc(j.cx,j.cy,Jt,xr(j.y01,j.x01),xr(j.y11,j.x11),!H),x.arc(0,0,M,xr(j.cy+j.y11,j.cx+j.x11),xr(W.cy+W.y11,W.cx+W.x11),!H),x.arc(W.cx,W.cy,Jt,xr(W.y11,W.x11),xr(W.y01,W.x01),!H))):(x.moveTo(ct,mt),x.arc(0,0,M,V,rt,!H)):x.moveTo(ct,mt),S>_r&&J>_r?Mt>_r?(j=t(xt,Gt,Vt,Me,S,-Mt,H),W=t(ct,mt,fn,an,S,-Mt,H),x.lineTo(j.cx+j.x01,j.cy+j.y01),Mt<bt?x.arc(j.cx,j.cy,Mt,xr(j.y01,j.x01),xr(W.y01,W.x01),!H):(x.arc(j.cx,j.cy,Mt,xr(j.y01,j.x01),xr(j.y11,j.x11),!H),x.arc(0,0,S,xr(j.cy+j.y11,j.cx+j.x11),xr(W.cy+W.y11,W.cx+W.x11),H),x.arc(W.cx,W.cy,Mt,xr(W.y11,W.x11),xr(W.y01,W.x01),!H))):x.arc(0,0,S,it,ot,H):x.lineTo(xt,Gt)}else x.moveTo(0,0);if(x.closePath(),_)return x=null,_+""||null}var r=Mh,a=Fp,s=Ge(0),c=null,h=zp,p=Bp,m=kp,x=null;return e.centroid=function(){var _=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2,E=(+h.apply(this,arguments)+ +p.apply(this,arguments))/2-fs/2;return[Au(E)*_,Ma(E)*_]},e.innerRadius=function(_){return arguments.length?(r=typeof _=="function"?_:Ge(+_),e):r},e.outerRadius=function(_){return arguments.length?(a=typeof _=="function"?_:Ge(+_),e):a},e.cornerRadius=function(_){return arguments.length?(s=typeof _=="function"?_:Ge(+_),e):s},e.padRadius=function(_){return arguments.length?(c=_==null?null:typeof _=="function"?_:Ge(+_),e):c},e.startAngle=function(_){return arguments.length?(h=typeof _=="function"?_:Ge(+_),e):h},e.endAngle=function(_){return arguments.length?(p=typeof _=="function"?_:Ge(+_),e):p},e.padAngle=function(_){return arguments.length?(m=typeof _=="function"?_:Ge(+_),e):m},e.context=function(_){return arguments.length?(x=_==null?null:_,e):x},e};n.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;default:this._context.lineTo(e,r)}}};var ip=function(e){return new n(e)},sg=function(){function e(m){var x,_,E,S=m.length,M=!1;for(c==null&&(p=h(E=Fi())),x=0;x<=S;++x)!(x<S&&s(_=m[x],x,m))===M&&((M=!M)?p.lineStart():p.lineEnd()),M&&p.point(+r(_,x,m),+a(_,x,m));if(E)return p=null,E+""||null}var r=i,a=o,s=Ge(!0),c=null,h=ip,p=null;return e.x=function(m){return arguments.length?(r=typeof m=="function"?m:Ge(+m),e):r},e.y=function(m){return arguments.length?(a=typeof m=="function"?m:Ge(+m),e):a},e.defined=function(m){return arguments.length?(s=typeof m=="function"?m:Ge(!!m),e):s},e.curve=function(m){return arguments.length?(h=m,c!=null&&(p=h(c)),e):h},e.context=function(m){return arguments.length?(m==null?c=p=null:p=h(c=m),e):c},e},S0=function(){function e(E){var S,M,R,O,I,H=E.length,j=!1,W=new Array(H),V=new Array(H);for(m==null&&(_=x(I=Fi())),S=0;S<=H;++S){if(!(S<H&&p(O=E[S],S,E))===j)if(j=!j)M=S,_.areaStart(),_.lineStart();else{for(_.lineEnd(),_.lineStart(),R=S-1;R>=M;--R)_.point(W[R],V[R]);_.lineEnd(),_.areaEnd()}j&&(W[S]=+a(O,S,E),V[S]=+c(O,S,E),_.point(s?+s(O,S,E):W[S],h?+h(O,S,E):V[S]))}if(I)return _=null,I+""||null}function r(){return sg().defined(p).curve(x).context(m)}var a=i,s=null,c=Ge(0),h=o,p=Ge(!0),m=null,x=ip,_=null;return e.x=function(E){return arguments.length?(a=typeof E=="function"?E:Ge(+E),s=null,e):a},e.x0=function(E){return arguments.length?(a=typeof E=="function"?E:Ge(+E),e):a},e.x1=function(E){return arguments.length?(s=E==null?null:typeof E=="function"?E:Ge(+E),e):s},e.y=function(E){return arguments.length?(c=typeof E=="function"?E:Ge(+E),h=null,e):c},e.y0=function(E){return arguments.length?(c=typeof E=="function"?E:Ge(+E),e):c},e.y1=function(E){return arguments.length?(h=E==null?null:typeof E=="function"?E:Ge(+E),e):h},e.lineX0=e.lineY0=function(){return r().x(a).y(c)},e.lineY1=function(){return r().x(a).y(h)},e.lineX1=function(){return r().x(s).y(c)},e.defined=function(E){return arguments.length?(p=typeof E=="function"?E:Ge(!!E),e):p},e.curve=function(E){return arguments.length?(x=E,m!=null&&(_=x(m)),e):x},e.context=function(E){return arguments.length?(E==null?m=_=null:_=x(m=E),e):m},e},Rb=function(e,r){return r<e?-1:r>e?1:r>=e?0:NaN},Lb=function(e){return e},Cb=function(){function e(m){var x,_,E,S,M,R=m.length,O=0,I=new Array(R),H=new Array(R),j=+c.apply(this,arguments),W=Math.min(ds,Math.max(-ds,h.apply(this,arguments)-j)),V=Math.min(Math.abs(W)/R,p.apply(this,arguments)),rt=V*(W<0?-1:1);for(x=0;x<R;++x)(M=H[I[x]=x]=+r(m[x],x,m))>0&&(O+=M);for(a!=null?I.sort(function(ot,it){return a(H[ot],H[it])}):s!=null&&I.sort(function(ot,it){return s(m[ot],m[it])}),x=0,E=O?(W-R*rt)/O:0;x<R;++x,j=S)_=I[x],M=H[_],S=j+(M>0?M*E:0)+rt,H[_]={data:m[_],index:x,value:M,startAngle:j,endAngle:S,padAngle:V};return H}var r=Lb,a=Rb,s=null,c=Ge(0),h=Ge(ds),p=Ge(0);return e.value=function(m){return arguments.length?(r=typeof m=="function"?m:Ge(+m),e):r},e.sortValues=function(m){return arguments.length?(a=m,s=null,e):a},e.sort=function(m){return arguments.length?(s=m,a=null,e):s},e.startAngle=function(m){return arguments.length?(c=typeof m=="function"?m:Ge(+m),e):c},e.endAngle=function(m){return arguments.length?(h=typeof m=="function"?m:Ge(+m),e):h},e.padAngle=function(m){return arguments.length?(p=typeof m=="function"?m:Ge(+m),e):p},e},A0=l(ip);u.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,r){this._curve.point(r*Math.sin(e),r*-Math.cos(e))}};var R0=function(){return f(sg().curve(A0))},L0=function(){var e=S0().curve(A0),r=e.curve,a=e.lineX0,s=e.lineX1,c=e.lineY0,h=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return f(a())},delete e.lineX0,e.lineEndAngle=function(){return f(s())},delete e.lineX1,e.lineInnerRadius=function(){return f(c())},delete e.lineY0,e.lineOuterRadius=function(){return f(h())},delete e.lineY1,e.curve=function(p){return arguments.length?r(l(p)):r()._curve},e},af=function(e,r){return[(r=+r)*Math.cos(e-=Math.PI/2),r*Math.sin(e)]},ug=Array.prototype.slice,cg={draw:function(e,r){var a=Math.sqrt(r/fs);e.moveTo(a,0),e.arc(0,0,a,0,ds)}},C0={draw:function(e,r){var a=Math.sqrt(r/5)/2;e.moveTo(-3*a,-a),e.lineTo(-a,-a),e.lineTo(-a,-3*a),e.lineTo(a,-3*a),e.lineTo(a,-a),e.lineTo(3*a,-a),e.lineTo(3*a,a),e.lineTo(a,a),e.lineTo(a,3*a),e.lineTo(-a,3*a),e.lineTo(-a,a),e.lineTo(-3*a,a),e.closePath()}},P0=Math.sqrt(1/3),Pb=2*P0,N0={draw:function(e,r){var a=Math.sqrt(r/Pb),s=a*P0;e.moveTo(0,-a),e.lineTo(s,0),e.lineTo(0,a),e.lineTo(-s,0),e.closePath()}},I0=Math.sin(fs/10)/Math.sin(7*fs/10),Nb=Math.sin(ds/10)*I0,Ib=-Math.cos(ds/10)*I0,O0={draw:function(e,r){var a=Math.sqrt(.8908130915292852*r),s=Nb*a,c=Ib*a;e.moveTo(0,-a),e.lineTo(s,c);for(var h=1;h<5;++h){var p=ds*h/5,m=Math.cos(p),x=Math.sin(p);e.lineTo(x*a,-m*a),e.lineTo(m*s-x*c,x*s+m*c)}e.closePath()}},U0={draw:function(e,r){var a=Math.sqrt(r),s=-a/2;e.rect(s,s,a,a)}},lg=Math.sqrt(3),D0={draw:function(e,r){var a=-Math.sqrt(r/(3*lg));e.moveTo(0,2*a),e.lineTo(-lg*a,-a),e.lineTo(lg*a,-a),e.closePath()}},Ei=-.5,Ti=Math.sqrt(3)/2,hg=1/Math.sqrt(12),Ob=3*(hg/2+1),F0={draw:function(e,r){var a=Math.sqrt(r/Ob),s=a/2,c=a*hg,h=s,p=a*hg+a,m=-h,x=p;e.moveTo(s,c),e.lineTo(h,p),e.lineTo(m,x),e.lineTo(Ei*s-Ti*c,Ti*s+Ei*c),e.lineTo(Ei*h-Ti*p,Ti*h+Ei*p),e.lineTo(Ei*m-Ti*x,Ti*m+Ei*x),e.lineTo(Ei*s+Ti*c,Ei*c-Ti*s),e.lineTo(Ei*h+Ti*p,Ei*p-Ti*h),e.lineTo(Ei*m+Ti*x,Ei*x-Ti*m),e.closePath()}},Ub=[cg,C0,N0,U0,O0,D0,F0],Db=function(){function e(){var c;if(s||(s=c=Fi()),r.apply(this,arguments).draw(s,+a.apply(this,arguments)),c)return s=null,c+""||null}var r=Ge(cg),a=Ge(64),s=null;return e.type=function(c){return arguments.length?(r=typeof c=="function"?c:Ge(c),e):r},e.size=function(c){return arguments.length?(a=typeof c=="function"?c:Ge(+c),e):a},e.context=function(c){return arguments.length?(s=c==null?null:c,e):s},e},ps=function(){};D.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:F(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:F(this,e,r)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};var Fb=function(e){return new D(e)};U.prototype={areaStart:ps,areaEnd:ps,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._x2=e,this._y2=r;break;case 1:this._point=2,this._x3=e,this._y3=r;break;case 2:this._point=3,this._x4=e,this._y4=r,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+r)/6);break;default:F(this,e,r)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};var zb=function(e){return new U(e)};z.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(a,s):this._context.moveTo(a,s);break;case 3:this._point=4;default:F(this,e,r)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};var Bb=function(e){return new z(e)};B.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,r=this._y,a=e.length-1;if(a>0)for(var s,c=e[0],h=r[0],p=e[a]-c,m=r[a]-h,x=-1;++x<=a;)s=x/a,this._basis.point(this._beta*e[x]+(1-this._beta)*(c+s*p),this._beta*r[x]+(1-this._beta)*(h+s*m));this._x=this._y=null,this._basis.lineEnd()},point:function(e,r){this._x.push(+e),this._y.push(+r)}};var kb=function e(r){function a(s){return r===1?new D(s):new B(s,r)}return a.beta=function(s){return e(+s)},a}(.85);$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Q(this,this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2,this._x1=e,this._y1=r;break;case 2:this._point=3;default:Q(this,e,r)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=r}};var Hb=function e(r){function a(s){return new $(s,r)}return a.tension=function(s){return e(+s)},a}(0);K.prototype={areaStart:ps,areaEnd:ps,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._x3=e,this._y3=r;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=r);break;case 2:this._point=3,this._x5=e,this._y5=r;break;default:Q(this,e,r)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=r}};var Gb=function e(r){function a(s){return new K(s,r)}return a.tension=function(s){return e(+s)},a}(0);lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Q(this,e,r)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=r}};var Vb=function e(r){function a(s){return new lt(s,r)}return a.tension=function(s){return e(+s)},a}(0);et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){if(e=+e,r=+r,this._point){var a=this._x2-e,s=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;break;case 2:this._point=3;default:Y(this,e,r)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=r}};var jb=function e(r){function a(s){return r?new et(s,r):new $(s,0)}return a.alpha=function(s){return e(+s)},a}(.5);ht.prototype={areaStart:ps,areaEnd:ps,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,r){if(e=+e,r=+r,this._point){var a=this._x2-e,s=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=r;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=r);break;case 2:this._point=3,this._x5=e,this._y5=r;break;default:Y(this,e,r)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=r}};var Wb=function e(r){function a(s){return r?new ht(s,r):new K(s,0)}return a.alpha=function(s){return e(+s)},a}(.5);Tt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){if(e=+e,r=+r,this._point){var a=this._x2-e,s=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+s*s,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Y(this,e,r)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=r}};var Xb=function e(r){function a(s){return r?new Tt(s,r):new lt(s,0)}return a.alpha=function(s){return e(+s)},a}(.5);Z.prototype={areaStart:ps,areaEnd:ps,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,r){e=+e,r=+r,this._point?this._context.lineTo(e,r):(this._point=1,this._context.moveTo(e,r))}};var qb=function(e){return new Z(e)};vt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:wt(this,this._t0,at(this,this._t0))}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){var a=NaN;if(e=+e,r=+r,e!==this._x1||r!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;break;case 2:this._point=3,wt(this,at(this,a=ft(this,e,r)),a);break;default:wt(this,this._t0,a=ft(this,e,r))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r,this._t0=a}}},(Et.prototype=Object.create(vt.prototype)).point=function(e,r){vt.prototype.point.call(this,r,e)},St.prototype={moveTo:function(e,r){this._context.moveTo(r,e)},closePath:function(){this._context.closePath()},lineTo:function(e,r){this._context.lineTo(r,e)},bezierCurveTo:function(e,r,a,s,c,h){this._context.bezierCurveTo(r,e,s,a,h,c)}},Ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,r=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],r[0]):this._context.moveTo(e[0],r[0]),a===2)this._context.lineTo(e[1],r[1]);else for(var s=Wt(e),c=Wt(r),h=0,p=1;p<a;++h,++p)this._context.bezierCurveTo(s[0][h],c[0][h],s[1][h],c[1][h],e[p],r[p]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,r){this._x.push(+e),this._y.push(+r)}};var Yb=function(e){return new Ft(e)};ne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(e,r);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,r)}}this._x=e,this._y=r}};var Zb=function(e){return new ne(e,.5)},il=function(e,r){if((c=e.length)>1)for(var a,s,c,h=1,p=e[r[0]],m=p.length;h<c;++h)for(s=p,p=e[r[h]],a=0;a<m;++a)p[a][1]+=p[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]},al=function(e){for(var r=e.length,a=new Array(r);--r>=0;)a[r]=r;return a},Kb=function(){function e(h){var p,m,x=r.apply(this,arguments),_=h.length,E=x.length,S=new Array(E);for(p=0;p<E;++p){for(var M,R=x[p],O=S[p]=new Array(_),I=0;I<_;++I)O[I]=M=[0,+c(h[I],R,I,h)],M.data=h[I];O.key=R}for(p=0,m=a(S);p<E;++p)S[m[p]].index=p;return s(S,m),S}var r=Ge([]),a=al,s=il,c=Le;return e.keys=function(h){return arguments.length?(r=typeof h=="function"?h:Ge(ug.call(h)),e):r},e.value=function(h){return arguments.length?(c=typeof h=="function"?h:Ge(+h),e):c},e.order=function(h){return arguments.length?(a=h==null?al:typeof h=="function"?h:Ge(ug.call(h)),e):a},e.offset=function(h){return arguments.length?(s=h==null?il:h,e):s},e},Qb=function(e,r){if((s=e.length)>0){for(var a,s,c,h=0,p=e[0].length;h<p;++h){for(c=a=0;a<s;++a)c+=e[a][h][1]||0;if(c)for(a=0;a<s;++a)e[a][h][1]/=c}il(e,r)}},$b=function(e,r){if((m=e.length)>1)for(var a,s,c,h,p,m,x=0,_=e[r[0]].length;x<_;++x)for(h=p=0,a=0;a<m;++a)(c=(s=e[r[a]][x])[1]-s[0])>=0?(s[0]=h,s[1]=h+=c):c<0?(s[1]=p,s[0]=p+=c):s[0]=h},Jb=function(e,r){if((a=e.length)>0){for(var a,s=0,c=e[r[0]],h=c.length;s<h;++s){for(var p=0,m=0;p<a;++p)m+=e[p][s][1]||0;c[s][1]+=c[s][0]=-m/2}il(e,r)}},tw=function(e,r){if((c=e.length)>0&&(s=(a=e[r[0]]).length)>0){for(var a,s,c,h=0,p=1;p<s;++p){for(var m=0,x=0,_=0;m<c;++m){for(var E=e[r[m]],S=E[p][1]||0,M=E[p-1][1]||0,R=(S-M)/2,O=0;O<m;++O){var I=e[r[O]];R+=(I[p][1]||0)-(I[p-1][1]||0)}x+=S,_+=R*S}a[p-1][1]+=a[p-1][0]=h,x&&(h-=_/x)}a[p-1][1]+=a[p-1][0]=h,il(e,r)}},z0=function(e){var r=e.map(be);return al(e).sort(function(a,s){return r[a]-r[s]})},ew=function(e){return z0(e).reverse()},nw=function(e){var r,a,s=e.length,c=e.map(be),h=al(e).sort(function(E,S){return c[S]-c[E]}),p=0,m=0,x=[],_=[];for(r=0;r<s;++r)a=h[r],p<m?(p+=c[a],x.push(a)):(m+=c[a],_.push(a));return _.reverse().concat(x)},rw=function(e){return al(e).reverse()},B0=function(e){return function(){return e}};Ot.prototype={constructor:Ot,insert:function(e,r){var a,s,c;if(e){if(r.P=e,r.N=e.N,e.N&&(e.N.P=r),e.N=r,e.R){for(e=e.R;e.L;)e=e.L;e.L=r}else e.R=r;a=e}else this._?(e=ar(this._),r.P=null,r.N=e,e.P=e.L=r,a=e):(r.P=r.N=null,this._=r,a=null);for(r.L=r.R=null,r.U=a,r.C=!0,e=r;a&&a.C;)s=a.U,a===s.L?(c=s.R,c&&c.C?(a.C=c.C=!1,s.C=!0,e=s):(e===a.R&&(yn(this,a),e=a,a=e.U),a.C=!1,s.C=!0,En(this,s))):(c=s.L,c&&c.C?(a.C=c.C=!1,s.C=!0,e=s):(e===a.L&&(En(this,a),e=a,a=e.U),a.C=!1,s.C=!0,yn(this,s))),a=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var r,a,s,c=e.U,h=e.L,p=e.R;if(a=h?p?ar(p):h:p,c?c.L===e?c.L=a:c.R=a:this._=a,h&&p?(s=a.C,a.C=e.C,a.L=h,h.U=a,a!==p?(c=a.U,a.U=e.U,e=a.R,c.L=e,a.R=p,p.U=a):(a.U=c,c=a,e=a.R)):(s=e.C,e=a),e&&(e.U=c),!s){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===c.L){if(r=c.R,r.C&&(r.C=!1,c.C=!0,yn(this,c),r=c.R),r.L&&r.L.C||r.R&&r.R.C){r.R&&r.R.C||(r.L.C=!1,r.C=!0,En(this,r),r=c.R),r.C=c.C,c.C=r.R.C=!1,yn(this,c),e=this._;break}}else if(r=c.L,r.C&&(r.C=!1,c.C=!0,En(this,c),r=c.L),r.L&&r.L.C||r.R&&r.R.C){r.L&&r.L.C||(r.R.C=!1,r.C=!0,yn(this,r),r=c.L),r.C=c.C,c.C=r.L.C=!1,En(this,c),e=this._;break}r.C=!0,e=c,c=c.U}while(!e.C);e&&(e.C=!1)}}};var fg,ol,fi,of,br,k0=[],H0=[],gn=1e-6,iw=1e-12;ui.prototype={constructor:ui,polygons:function(){var e=this.edges;return this.cells.map(function(r){var a=r.halfedges.map(function(s){return ce(r,e[s])});return a.data=r.site.data,a})},triangles:function(){var e=[],r=this.edges;return this.cells.forEach(function(a,s){if(h=(c=a.halfedges).length)for(var c,h,p,m=a.site,x=-1,_=r[c[h-1]],E=_.left===m?_.right:_.left;++x<h;)p=E,_=r[c[x]],E=_.left===m?_.right:_.left,p&&E&&s<p.index&&s<E.index&&Ie(m,p,E)<0&&e.push([m.data,p.data,E.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,r,a){for(var s,c,h=this,p=h._found||0,m=h.cells.length;!(c=h.cells[p]);)if(++p>=m)return null;var x=e-c.site[0],_=r-c.site[1],E=x*x+_*_;do c=h.cells[s=p],p=null,c.halfedges.forEach(function(S){var M=h.edges[S],R=M.left;if(R!==c.site&&R||(R=M.right)){var O=e-R[0],I=r-R[1],H=O*O+I*I;H<E&&(E=H,p=R.index)}});while(p!==null);return h._found=s,a==null||E<=a*a?c.site:null}};var aw=function(){function e(c){return new ui(c.map(function(h,p){var m=[Math.round(r(h,p,c)/gn)*gn,Math.round(a(h,p,c)/gn)*gn];return m.index=p,m.data=h,m}),s)}var r=Rn,a=Vn,s=null;return e.polygons=function(c){return e(c).polygons()},e.links=function(c){return e(c).links()},e.triangles=function(c){return e(c).triangles()},e.x=function(c){return arguments.length?(r=typeof c=="function"?c:B0(+c),e):r},e.y=function(c){return arguments.length?(a=typeof c=="function"?c:B0(+c),e):a},e.extent=function(c){return arguments.length?(s=c==null?null:[[+c[0][0],+c[0][1]],[+c[1][0],+c[1][1]]],e):s&&[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},e.size=function(c){return arguments.length?(s=c==null?null:[[0,0],[+c[0],+c[1]]],e):s&&[s[1][0]-s[0][0],s[1][1]-s[0][1]]},e},dg=function(e){return function(){return e}};qr.prototype={constructor:qr,scale:function(e){return e===1?this:new qr(this.k*e,this.x,this.y)},translate:function(e,r){return e===0&r===0?this:new qr(this.k,this.x+this.k*e,this.y+this.k*r)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ap=new qr(1,0,0);Uc.prototype=qr.prototype;var sf=function(){A.event.preventDefault(),A.event.stopImmediatePropagation()},ow=function(){function e(ct){ct.property("__zoom",to).on("wheel.zoom",x).on("mousedown.zoom",_).on("dblclick.zoom",E).filter(rd).on("touchstart.zoom",S).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",R).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function r(ct,mt){return mt=Math.max(V,Math.min(rt,mt)),mt===ct.k?ct:new qr(mt,ct.x,ct.y)}function a(ct,mt,xt){var Gt=mt[0]-xt[0]*ct.k,Vt=mt[1]-xt[1]*ct.k;return Gt===ct.x&&Vt===ct.y?ct:new qr(ct.k,Gt,Vt)}function s(ct,mt){var xt=ct.invertX(mt[0][0])-ot,Gt=ct.invertX(mt[1][0])-it,Vt=ct.invertY(mt[0][1])-J,Me=ct.invertY(mt[1][1])-dt;return ct.translate(Gt>xt?(xt+Gt)/2:Math.min(0,xt)||Math.max(0,Gt),Me>Vt?(Vt+Me)/2:Math.min(0,Vt)||Math.max(0,Me))}function c(ct){return[(+ct[0][0]+ +ct[1][0])/2,(+ct[0][1]+ +ct[1][1])/2]}function h(ct,mt,xt){ct.on("start.zoom",function(){p(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){p(this,arguments).end()}).tween("zoom",function(){var Gt=this,Vt=arguments,Me=p(Gt,Vt),fn=j.apply(Gt,Vt),an=xt||c(fn),Be=Math.max(fn[1][0]-fn[0][0],fn[1][1]-fn[0][1]),tn=Gt.__zoom,Qn=typeof mt=="function"?mt.apply(Gt,Vt):mt,Xt=At(tn.invert(an).concat(Be/tn.k),Qn.invert(an).concat(Be/Qn.k));return function(oe){if(oe===1)oe=Qn;else{var Oe=Xt(oe),Kt=Be/Oe[2];oe=new qr(Kt,an[0]-Oe[0]*Kt,an[1]-Oe[1]*Kt)}Me.zoom(null,oe)}})}function p(ct,mt){for(var xt,Gt=0,Vt=bt.length;Gt<Vt;++Gt)if((xt=bt[Gt]).that===ct)return xt;return new m(ct,mt)}function m(ct,mt){this.that=ct,this.args=mt,this.index=-1,this.active=0,this.extent=j.apply(ct,mt)}function x(){function ct(){mt.wheel=null,mt.end()}if(H.apply(this,arguments)){var mt=p(this,arguments),xt=this.__zoom,Gt=Math.max(V,Math.min(rt,xt.k*Math.pow(2,W.apply(this,arguments)))),Vt=as(this);if(mt.wheel)mt.mouse[0][0]===Vt[0]&&mt.mouse[0][1]===Vt[1]||(mt.mouse[1]=xt.invert(mt.mouse[0]=Vt)),clearTimeout(mt.wheel);else{if(xt.k===Gt)return;mt.mouse=[Vt,xt.invert(Vt)],_u(this),mt.start()}sf(),mt.wheel=setTimeout(ct,Pt),mt.zoom("mouse",s(a(r(xt,Gt),mt.mouse[0],mt.mouse[1]),mt.extent))}}function _(){function ct(){if(sf(),!xt.moved){var an=A.event.clientX-Me,Be=A.event.clientY-fn;xt.moved=an*an+Be*Be>Ht}xt.zoom("mouse",s(a(xt.that.__zoom,xt.mouse[0]=as(xt.that),xt.mouse[1]),xt.extent))}function mt(){Gt.on("mousemove.zoom mouseup.zoom",null),Ji(A.event.view,xt.moved),sf(),xt.end()}if(!I&&H.apply(this,arguments)){var xt=p(this,arguments),Gt=ci(A.event.view).on("mousemove.zoom",ct,!0).on("mouseup.zoom",mt,!0),Vt=as(this),Me=A.event.clientX,fn=A.event.clientY;ld(A.event.view),Un(),xt.mouse=[Vt,this.__zoom.invert(Vt)],_u(this),xt.start()}}function E(){if(H.apply(this,arguments)){var ct=this.__zoom,mt=as(this),xt=ct.invert(mt),Gt=ct.k*(A.event.shiftKey?.5:2),Vt=s(a(r(ct,Gt),mt,xt),j.apply(this,arguments));sf(),pt>0?ci(this).transition().duration(pt).call(h,Vt,mt):ci(this).call(e.transform,Vt)}}function S(){if(H.apply(this,arguments)){var ct,mt,xt,Gt,Vt=p(this,arguments),Me=A.event.changedTouches,fn=Me.length;for(Un(),mt=0;mt<fn;++mt)xt=Me[mt],Gt=cd(this,Me,xt.identifier),Gt=[Gt,this.__zoom.invert(Gt),xt.identifier],Vt.touch0?Vt.touch1||(Vt.touch1=Gt):(Vt.touch0=Gt,ct=!0);if(O&&(O=clearTimeout(O),!Vt.touch1))return Vt.end(),void((Gt=ci(this).on("dblclick.zoom"))&&Gt.apply(this,arguments));ct&&(O=setTimeout(function(){O=null},Jt),_u(this),Vt.start())}}function M(){var ct,mt,xt,Gt,Vt=p(this,arguments),Me=A.event.changedTouches,fn=Me.length;for(sf(),O&&(O=clearTimeout(O)),ct=0;ct<fn;++ct)mt=Me[ct],xt=cd(this,Me,mt.identifier),Vt.touch0&&Vt.touch0[2]===mt.identifier?Vt.touch0[0]=xt:Vt.touch1&&Vt.touch1[2]===mt.identifier&&(Vt.touch1[0]=xt);if(mt=Vt.that.__zoom,Vt.touch1){var an=Vt.touch0[0],Be=Vt.touch0[1],tn=Vt.touch1[0],Qn=Vt.touch1[1],Xt=(Xt=tn[0]-an[0])*Xt+(Xt=tn[1]-an[1])*Xt,oe=(oe=Qn[0]-Be[0])*oe+(oe=Qn[1]-Be[1])*oe;mt=r(mt,Math.sqrt(Xt/oe)),xt=[(an[0]+tn[0])/2,(an[1]+tn[1])/2],Gt=[(Be[0]+Qn[0])/2,(Be[1]+Qn[1])/2]}else{if(!Vt.touch0)return;xt=Vt.touch0[0],Gt=Vt.touch0[1]}Vt.zoom("touch",s(a(mt,xt,Gt),Vt.extent))}function R(){var ct,mt,xt=p(this,arguments),Gt=A.event.changedTouches,Vt=Gt.length;for(Un(),I&&clearTimeout(I),I=setTimeout(function(){I=null},Jt),ct=0;ct<Vt;++ct)mt=Gt[ct],xt.touch0&&xt.touch0[2]===mt.identifier?delete xt.touch0:xt.touch1&&xt.touch1[2]===mt.identifier&&delete xt.touch1;xt.touch1&&!xt.touch0&&(xt.touch0=xt.touch1,delete xt.touch1),xt.touch0?xt.touch0[1]=this.__zoom.invert(xt.touch0[0]):xt.end()}var O,I,H=is,j=Dc,W=nd,V=0,rt=1/0,ot=-rt,it=rt,J=ot,dt=it,pt=250,At=jg,bt=[],Mt=Ye("start","zoom","end"),Jt=500,Pt=150,Ht=0;return e.transform=function(ct,mt){var xt=ct.selection?ct.selection():ct;xt.property("__zoom",to),ct!==xt?h(ct,mt):xt.interrupt().each(function(){p(this,arguments).start().zoom(null,typeof mt=="function"?mt.apply(this,arguments):mt).end()})},e.scaleBy=function(ct,mt){e.scaleTo(ct,function(){return this.__zoom.k*(typeof mt=="function"?mt.apply(this,arguments):mt)})},e.scaleTo=function(ct,mt){e.transform(ct,function(){var xt=j.apply(this,arguments),Gt=this.__zoom,Vt=c(xt),Me=Gt.invert(Vt);return s(a(r(Gt,typeof mt=="function"?mt.apply(this,arguments):mt),Vt,Me),xt)})},e.translateBy=function(ct,mt,xt){e.transform(ct,function(){return s(this.__zoom.translate(typeof mt=="function"?mt.apply(this,arguments):mt,typeof xt=="function"?xt.apply(this,arguments):xt),j.apply(this,arguments))})},e.translateTo=function(ct,mt,xt){e.transform(ct,function(){var Gt=j.apply(this,arguments),Vt=this.__zoom,Me=c(Gt);return s(ap.translate(Me[0],Me[1]).scale(Vt.k).translate(typeof mt=="function"?-mt.apply(this,arguments):-mt,typeof xt=="function"?-xt.apply(this,arguments):-xt),Gt)})},m.prototype={start:function(){return++this.active==1&&(this.index=bt.push(this)-1,this.emit("start")),this},zoom:function(ct,mt){return this.mouse&&ct!=="mouse"&&(this.mouse[1]=mt.invert(this.mouse[0])),this.touch0&&ct!=="touch"&&(this.touch0[1]=mt.invert(this.touch0[0])),this.touch1&&ct!=="touch"&&(this.touch1[1]=mt.invert(this.touch1[0])),this.that.__zoom=mt,this.emit("zoom"),this},end:function(){return--this.active==0&&(bt.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(ct){tt(new Oc(e,ct,this.that.__zoom),Mt.apply,Mt,[ct,this.that,this.args])}},e.wheelDelta=function(ct){return arguments.length?(W=typeof ct=="function"?ct:dg(+ct),e):W},e.filter=function(ct){return arguments.length?(H=typeof ct=="function"?ct:dg(!!ct),e):H},e.extent=function(ct){return arguments.length?(j=typeof ct=="function"?ct:dg([[+ct[0][0],+ct[0][1]],[+ct[1][0],+ct[1][1]]]),e):j},e.scaleExtent=function(ct){return arguments.length?(V=+ct[0],rt=+ct[1],e):[V,rt]},e.translateExtent=function(ct){return arguments.length?(ot=+ct[0][0],it=+ct[1][0],J=+ct[0][1],dt=+ct[1][1],e):[[ot,J],[it,dt]]},e.duration=function(ct){return arguments.length?(pt=+ct,e):pt},e.interpolate=function(ct){return arguments.length?(At=ct,e):At},e.on=function(){var ct=Mt.on.apply(Mt,arguments);return ct===Mt?e:ct},e.clickDistance=function(ct){return arguments.length?(Ht=(ct=+ct)*ct,e):Math.sqrt(Ht)},e};A.version="4.10.0",A.bisect=Pr,A.bisectRight=Pr,A.bisectLeft=Wi,A.ascending=ya,A.bisector=Fc,A.cross=ad,A.descending=Th,A.deviation=nt,A.extent=Lt,A.histogram=Nn,A.thresholdFreedmanDiaconis=Xi,A.thresholdScott=yu,A.thresholdSturges=Nr,A.max=Yr,A.mean=Gp,A.median=Sh,A.merge=xu,A.min=pg,A.pairs=id,A.permute=V0,A.quantile=jn,A.range=me,A.scan=j0,A.shuffle=W0,A.sum=X0,A.ticks=Ke,A.tickIncrement=Bt,A.tickStep=de,A.transpose=mg,A.variance=q,A.zip=q0,A.axisTop=ie,A.axisRight=un,A.axisBottom=ge,A.axisLeft=en,A.brush=z1,A.brushX=Ba,A.brushY=ka,A.brushSelection=za,A.chord=B1,A.ribbon=G1,A.nest=V1,A.set=Gs,A.map=er,A.keys=j1,A.values=W1,A.entries=X1,A.color=Zt,A.rgb=$r,A.hsl=Gr,A.lab=Pu,A.hcl=Nu,A.cubehelix=Jr,A.dispatch=Ye,A.drag=Cy,A.dragDisable=ld,A.dragEnable=Ji,A.dsvFormat=_m,A.csvParse=lv,A.csvParseRows=q1,A.csvFormat=Y1,A.csvFormatRows=Z1,A.tsvParse=hv,A.tsvParseRows=K1,A.tsvFormat=Q1,A.tsvFormatRows=$1,A.easeLinear=Is,A.easeQuad=Vr,A.easeQuadIn=Mo,A.easeQuadOut=ra,A.easeQuadInOut=Vr,A.easeCubic=Ia,A.easeCubicIn=Os,A.easeCubicOut=Eo,A.easeCubicInOut=Ia,A.easePoly=Kg,A.easePolyIn=v1,A.easePolyOut=y1,A.easePolyInOut=Kg,A.easeSin=Ua,A.easeSinIn=Oa,A.easeSinOut=Us,A.easeSinInOut=Ua,A.easeExp=Da,A.easeExpIn=Ds,A.easeExpOut=To,A.easeExpInOut=Da,A.easeCircle=ia,A.easeCircleIn=So,A.easeCircleOut=Ao,A.easeCircleInOut=ia,A.easeBounce=Oi,A.easeBounceIn=Ii,A.easeBounceOut=Oi,A.easeBounceInOut=Fs,A.easeBack=Jg,A.easeBackIn=A1,A.easeBackOut=R1,A.easeBackInOut=Jg,A.easeElastic=tv,A.easeElasticIn=L1,A.easeElasticOut=tv,A.easeElasticInOut=C1,A.forceCenter=J1,A.forceCollide=fx,A.forceLink=dx,A.forceManyBody=vx,A.forceSimulation=gx,A.forceX=yx,A.forceY=xx,A.formatDefaultLocale=El,A.formatLocale=vv,A.formatSpecifier=yi,A.precisionFixed=yv,A.precisionPrefix=xv,A.precisionRound=_v,A.geoArea=Tx,A.geoBounds=Sx,A.geoCentroid=Ax,A.geoCircle=Rx,A.geoClipExtent=Cx,A.geoContains=Nx,A.geoDistance=Vh,A.geoGraticule=Xo,A.geoGraticule10=Xa,A.geoInterpolate=Ix,A.geoLength=Bv,A.geoPath=Ox,A.geoAlbers=Yv,A.geoAlbersUsa=Bx,A.geoAzimuthalEqualArea=kx,A.geoAzimuthalEqualAreaRaw=Vm,A.geoAzimuthalEquidistant=Hx,A.geoAzimuthalEquidistantRaw=jm,A.geoConicConformal=Vx,A.geoConicConformalRaw=ac,A.geoConicEqualArea=Qd,A.geoConicEqualAreaRaw=Af,A.geoConicEquidistant=Wx,A.geoConicEquidistantRaw=Vl,A.geoEquirectangular=jx,A.geoEquirectangularRaw=nu,A.geoGnomonic=Xx,A.geoGnomonicRaw=jl,A.geoIdentity=qx,A.geoProjection=la,A.geoProjectionMutator=kl,A.geoMercator=Gx,A.geoMercatorRaw=eu,A.geoOrthographic=Yx,A.geoOrthographicRaw=ru,A.geoStereographic=Zx,A.geoStereographicRaw=sc,A.geoTransverseMercator=Kx,A.geoTransverseMercatorRaw=fa,A.geoRotation=Uv,A.geoStream=qi,A.geoTransform=Dx,A.cluster=Qx,A.hierarchy=iu,A.pack=h_,A.packSiblings=l_,A.packEnclose=Zv,A.partition=f_,A.stratify=p_,A.tree=m_,A.treemap=g_,A.treemapBinary=v_,A.treemapDice=Kh,A.treemapSlice=$d,A.treemapSliceDice=y_,A.treemapSquarify=t0,A.treemapResquarify=x_,A.interpolate=Uh,A.interpolateArray=Dg,A.interpolateBasis=Og,A.interpolateBasisClosed=Ug,A.interpolateDate=Fg,A.interpolateNumber=li,A.interpolateObject=zg,A.interpolateRound=Bg,A.interpolateString=om,A.interpolateTransformCss=Gg,A.interpolateTransformSvg=Vg,A.interpolateZoom=jg,A.interpolateRgb=Oh,A.interpolateRgbBasis=ky,A.interpolateRgbBasisClosed=Hy,A.interpolateHsl=Gy,A.interpolateHslLong=Vy,A.interpolateLab=dp,A.interpolateHcl=jy,A.interpolateHclLong=Wy,A.interpolateCubehelix=Xy,A.interpolateCubehelixLong=md,A.quantize=qy,A.path=Fi,A.polygonArea=__,A.polygonCentroid=b_,A.polygonHull=M_,A.polygonContains=E_,A.polygonLength=T_,A.quadtree=aa,A.queue=ma,A.randomUniform=R_,A.randomNormal=e0,A.randomLogNormal=L_,A.randomBates=C_,A.randomIrwinHall=n0,A.randomExponential=P_,A.request=Wm,A.html=N_,A.json=I_,A.text=O_,A.xml=U_,A.csv=D_,A.tsv=F_,A.scaleBand=lu,A.scalePoint=Ec,A.scaleIdentity=sh,A.scaleLinear=oh,A.scaleLog=kf,A.scaleOrdinal=rr,A.scaleImplicit=qm,A.scalePow=ga,A.scaleSqrt=lh,A.scaleQuantile=Sc,A.scaleQuantize=Ac,A.scaleThreshold=Rc,A.scaleTime=fb,A.scaleUtc=db,A.schemeCategory10=pb,A.schemeCategory20b=mb,A.schemeCategory20c=gb,A.schemeCategory20=vb,A.interpolateCubehelixDefault=yb,A.interpolateRainbow=bb,A.interpolateWarm=xb,A.interpolateCool=_b,A.interpolateViridis=wb,A.interpolateMagma=Mb,A.interpolateInferno=Eb,A.interpolatePlasma=Tb,A.scaleSequential=vu,A.creator=qp,A.local=xn,A.matcher=Yp,A.mouse=as,A.namespace=Rh,A.namespaces=Xp,A.select=ci,A.selectAll=Ry,A.selection=Qr,A.selector=ud,A.selectorAll=Qp,A.style=Xn,A.touch=cd,A.touches=Ly,A.window=$p,A.customEvent=tt,A.arc=Ab,A.area=S0,A.line=sg,A.pie=Cb,A.areaRadial=L0,A.radialArea=L0,A.lineRadial=R0,A.radialLine=R0,A.pointRadial=af,A.linkHorizontal=T,A.linkVertical=L,A.linkRadial=N,A.symbol=Db,A.symbols=Ub,A.symbolCircle=cg,A.symbolCross=C0,A.symbolDiamond=N0,A.symbolSquare=U0,A.symbolStar=O0,A.symbolTriangle=D0,A.symbolWye=F0,A.curveBasisClosed=zb,A.curveBasisOpen=Bb,A.curveBasis=Fb,A.curveBundle=kb,A.curveCardinalClosed=Gb,A.curveCardinalOpen=Vb,A.curveCardinal=Hb,A.curveCatmullRomClosed=Wb,A.curveCatmullRomOpen=Xb,A.curveCatmullRom=jb,A.curveLinearClosed=qb,A.curveLinear=ip,A.curveMonotoneX=qt,A.curveMonotoneY=It,A.curveNatural=Yb,A.curveStep=Zb,A.curveStepAfter=$t,A.curveStepBefore=kt,A.stack=Kb,A.stackOffsetExpand=Qb,A.stackOffsetDiverging=$b,A.stackOffsetNone=il,A.stackOffsetSilhouette=Jb,A.stackOffsetWiggle=tw,A.stackOrderAscending=z0,A.stackOrderDescending=ew,A.stackOrderInsideOut=nw,A.stackOrderNone=al,A.stackOrderReverse=rw,A.timeInterval=Cn,A.timeMillisecond=Eu,A.timeMilliseconds=u0,A.utcMillisecond=Eu,A.utcMilliseconds=u0,A.timeSecond=Qh,A.timeSeconds=l0,A.utcSecond=Qh,A.utcSeconds=l0,A.timeMinute=Qm,A.timeMinutes=B_,A.timeHour=$m,A.timeHours=k_,A.timeDay=tp,A.timeDays=H_,A.timeWeek=$h,A.timeWeeks=g0,A.timeSunday=$h,A.timeSundays=g0,A.timeMonday=Jm,A.timeMondays=G_,A.timeTuesday=h0,A.timeTuesdays=V_,A.timeWednesday=f0,A.timeWednesdays=j_,A.timeThursday=d0,A.timeThursdays=W_,A.timeFriday=p0,A.timeFridays=X_,A.timeSaturday=m0,A.timeSaturdays=q_,A.timeMonth=tg,A.timeMonths=Y_,A.timeYear=Tu,A.timeYears=Z_,A.utcMinute=eg,A.utcMinutes=K_,A.utcHour=ng,A.utcHours=Q_,A.utcDay=ep,A.utcDays=$_,A.utcWeek=Jh,A.utcWeeks=w0,A.utcSunday=Jh,A.utcSundays=w0,A.utcMonday=rg,A.utcMondays=J_,A.utcTuesday=v0,A.utcTuesdays=tb,A.utcWednesday=y0,A.utcWednesdays=eb,A.utcThursday=x0,A.utcThursdays=nb,A.utcFriday=_0,A.utcFridays=rb,A.utcSaturday=b0,A.utcSaturdays=ib,A.utcMonth=ig,A.utcMonths=ab,A.utcYear=Su,A.utcYears=ob,A.timeFormatDefaultLocale=xh,A.timeFormatLocale=fh,A.isoFormat=cb,A.isoParse=lb,A.now=fo,A.timer=bs,A.timerFlush=Iu,A.timeout=lm,A.interval=Yy,A.transition=wo,A.active=I1,A.interrupt=_u,A.voronoi=aw,A.zoom=ow,A.zoomTransform=Uc,A.zoomIdentity=ap,Object.defineProperty(A,"__esModule",{value:!0})})},function($n,P){THREE.OrbitControls=function(C,A){function gt(){return 2*Math.PI/60/60*tt.autoRotateSpeed}function Dt(){return Math.pow(.95,tt.zoomSpeed)}function Bt(_t){Si.theta-=_t}function de(_t){Si.phi-=_t}function fe(_t){tt.object instanceof THREE.PerspectiveCamera?so/=_t:tt.object instanceof THREE.OrthographicCamera?(tt.object.zoom=Math.max(tt.minZoom,Math.min(tt.maxZoom,tt.object.zoom*_t)),tt.object.updateProjectionMatrix(),Ea=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),tt.enableZoom=!1)}function Ct(_t){tt.object instanceof THREE.PerspectiveCamera?so*=_t:tt.object instanceof THREE.OrthographicCamera?(tt.object.zoom=Math.max(tt.minZoom,Math.min(tt.maxZoom,tt.object.zoom/_t)),tt.object.updateProjectionMatrix(),Ea=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),tt.enableZoom=!1)}function G(_t){Ai.set(_t.clientX,_t.clientY)}function Ut(_t){kr.set(_t.clientX,_t.clientY)}function le(_t){ee.set(_t.clientX,_t.clientY)}function pe(_t){Zi.set(_t.clientX,_t.clientY),pr.subVectors(Zi,Ai);var Xe=tt.domElement===document?tt.domElement.body:tt.domElement;Bt(2*Math.PI*pr.x/Xe.clientWidth*tt.rotateSpeed),de(2*Math.PI*pr.y/Xe.clientHeight*tt.rotateSpeed),Ai.copy(Zi),tt.update()}function xe(_t){Qi.set(_t.clientX,_t.clientY),_e.subVectors(Qi,kr),_e.y>0?fe(Dt()):_e.y<0&&Ct(Dt()),kr.copy(Qi),tt.update()}function ie(_t){Xn.set(_t.clientX,_t.clientY),Ki.subVectors(Xn,ee),tr(Ki.x,Ki.y),ee.copy(Xn),tt.update()}function un(_t){_t.deltaY<0?Ct(Dt()):_t.deltaY>0&&fe(Dt()),tt.update()}function ge(_t){switch(_t.keyCode){case tt.keys.UP:tr(0,tt.keyPanSpeed),tt.update();break;case tt.keys.BOTTOM:tr(0,-tt.keyPanSpeed),tt.update();break;case tt.keys.LEFT:tr(tt.keyPanSpeed,0),tt.update();break;case tt.keys.RIGHT:tr(-tt.keyPanSpeed,0),tt.update()}}function en(_t){Ai.set(_t.touches[0].pageX,_t.touches[0].pageY)}function Ye(_t){var Xe=_t.touches[0].pageX-_t.touches[1].pageX,dn=_t.touches[0].pageY-_t.touches[1].pageY,bn=Math.sqrt(Xe*Xe+dn*dn);kr.set(0,bn)}function Fe(_t){ee.set(_t.touches[0].pageX,_t.touches[0].pageY)}function In(_t){Zi.set(_t.touches[0].pageX,_t.touches[0].pageY),pr.subVectors(Zi,Ai);var Xe=tt.domElement===document?tt.domElement.body:tt.domElement;Bt(2*Math.PI*pr.x/Xe.clientWidth*tt.rotateSpeed),de(2*Math.PI*pr.y/Xe.clientHeight*tt.rotateSpeed),Ai.copy(Zi),tt.update()}function dr(_t){var Xe=_t.touches[0].pageX-_t.touches[1].pageX,dn=_t.touches[0].pageY-_t.touches[1].pageY,bn=Math.sqrt(Xe*Xe+dn*dn);Qi.set(0,bn),_e.subVectors(Qi,kr),_e.y>0?Ct(Dt()):_e.y<0&&fe(Dt()),kr.copy(Qi),tt.update()}function Rt(_t){Xn.set(_t.touches[0].pageX,_t.touches[0].pageY),Ki.subVectors(Xn,ee),tr(Ki.x,Ki.y),ee.copy(Xn),tt.update()}function je(_t){if(tt.enabled!==!1){switch(_t.preventDefault(),_t.button){case tt.mouseButtons.ORBIT:if(tt.enableRotate===!1)return;G(_t),cn=We.ROTATE;break;case tt.mouseButtons.ZOOM:if(tt.enableZoom===!1)return;Ut(_t),cn=We.DOLLY;break;case tt.mouseButtons.PAN:if(tt.enablePan===!1)return;le(_t),cn=We.PAN}cn!==We.NONE&&(document.addEventListener("mousemove",$e,!1),document.addEventListener("mouseup",xn,!1),tt.dispatchEvent(Sn))}}function $e(_t){if(tt.enabled!==!1)switch(_t.preventDefault(),cn){case We.ROTATE:if(tt.enableRotate===!1)return;pe(_t);break;case We.DOLLY:if(tt.enableZoom===!1)return;xe(_t);break;case We.PAN:if(tt.enablePan===!1)return;ie(_t)}}function xn(_t){tt.enabled!==!1&&(document.removeEventListener("mousemove",$e,!1),document.removeEventListener("mouseup",xn,!1),tt.dispatchEvent(cr),cn=We.NONE)}function ur(_t){tt.enabled===!1||tt.enableZoom===!1||cn!==We.NONE&&cn!==We.ROTATE||(_t.preventDefault(),_t.stopPropagation(),un(_t),tt.dispatchEvent(Sn),tt.dispatchEvent(cr))}function Kr(_t){tt.enabled!==!1&&tt.enableKeys!==!1&&tt.enablePan!==!1&&ge(_t)}function zt(_t){if(tt.enabled!==!1){switch(_t.touches.length){case 1:if(tt.enableRotate===!1)return;en(_t),cn=We.TOUCH_ROTATE;break;case 2:if(tt.enableZoom===!1)return;Ye(_t),cn=We.TOUCH_DOLLY;break;case 3:if(tt.enablePan===!1)return;Fe(_t),cn=We.TOUCH_PAN;break;default:cn=We.NONE}cn!==We.NONE&&tt.dispatchEvent(Sn)}}function ut(_t){if(tt.enabled!==!1)switch(_t.preventDefault(),_t.stopPropagation(),_t.touches.length){case 1:if(tt.enableRotate===!1||cn!==We.TOUCH_ROTATE)return;In(_t);break;case 2:if(tt.enableZoom===!1||cn!==We.TOUCH_DOLLY)return;dr(_t);break;case 3:if(tt.enablePan===!1||cn!==We.TOUCH_PAN)return;Rt(_t);break;default:cn=We.NONE}}function Nt(_t){tt.enabled!==!1&&(tt.dispatchEvent(cr),cn=We.NONE)}function Ae(_t){tt.enabled!==!1&&_t.preventDefault()}this.object=C,this.domElement=A!==void 0?A:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return Jn.phi},this.getAzimuthalAngle=function(){return Jn.theta},this.saveState=function(){tt.target0.copy(tt.target),tt.position0.copy(tt.object.position),tt.zoom0=tt.object.zoom},this.reset=function(){tt.target.copy(tt.target0),tt.object.position.copy(tt.position0),tt.object.zoom=tt.zoom0,tt.object.updateProjectionMatrix(),tt.dispatchEvent(_n),tt.update(),cn=We.NONE},this.update=function(){var _t=new THREE.Vector3,Xe=new THREE.Quaternion().setFromUnitVectors(C.up,new THREE.Vector3(0,1,0)),dn=Xe.clone().inverse(),bn=new THREE.Vector3,Ri=new THREE.Quaternion;return function(){var Li=tt.object.position;return _t.copy(Li).sub(tt.target),_t.applyQuaternion(Xe),Jn.setFromVector3(_t),tt.autoRotate&&cn===We.NONE&&Bt(gt()),Jn.theta+=Si.theta,Jn.phi+=Si.phi,Jn.theta=Math.max(tt.minAzimuthAngle,Math.min(tt.maxAzimuthAngle,Jn.theta)),Jn.phi=Math.max(tt.minPolarAngle,Math.min(tt.maxPolarAngle,Jn.phi)),Jn.makeSafe(),Jn.radius*=so,Jn.radius=Math.max(tt.minDistance,Math.min(tt.maxDistance,Jn.radius)),tt.target.add(uo),_t.setFromSpherical(Jn),_t.applyQuaternion(dn),Li.copy(tt.target).add(_t),tt.object.lookAt(tt.target),tt.enableDamping===!0?(Si.theta*=1-tt.dampingFactor,Si.phi*=1-tt.dampingFactor):Si.set(0,0,0),so=1,uo.set(0,0,0),!!(Ea||bn.distanceToSquared(tt.object.position)>Lu||8*(1-Ri.dot(tt.object.quaternion))>Lu)&&(tt.dispatchEvent(_n),bn.copy(tt.object.position),Ri.copy(tt.object.quaternion),Ea=!1,!0)}}(),this.dispose=function(){tt.domElement.removeEventListener("contextmenu",Ae,!1),tt.domElement.removeEventListener("mousedown",je,!1),tt.domElement.removeEventListener("wheel",ur,!1),tt.domElement.removeEventListener("touchstart",zt,!1),tt.domElement.removeEventListener("touchend",Nt,!1),tt.domElement.removeEventListener("touchmove",ut,!1),document.removeEventListener("mousemove",$e,!1),document.removeEventListener("mouseup",xn,!1),window.removeEventListener("keydown",Kr,!1)};var tt=this,_n={type:"change"},Sn={type:"start"},cr={type:"end"},We={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},cn=We.NONE,Lu=1e-6,Jn=new THREE.Spherical,Si=new THREE.Spherical,so=1,uo=new THREE.Vector3,Ea=!1,Ai=new THREE.Vector2,Zi=new THREE.Vector2,pr=new THREE.Vector2,ee=new THREE.Vector2,Xn=new THREE.Vector2,Ki=new THREE.Vector2,kr=new THREE.Vector2,Qi=new THREE.Vector2,_e=new THREE.Vector2,qn=function(){var _t=new THREE.Vector3;return function(Xe,dn){_t.setFromMatrixColumn(dn,0),_t.multiplyScalar(-Xe),uo.add(_t)}}(),Hr=function(){var _t=new THREE.Vector3;return function(Xe,dn){_t.setFromMatrixColumn(dn,1),_t.multiplyScalar(Xe),uo.add(_t)}}(),tr=function(){var _t=new THREE.Vector3;return function(Xe,dn){var bn=tt.domElement===document?tt.domElement.body:tt.domElement;if(tt.object instanceof THREE.PerspectiveCamera){var Ri=tt.object.position;_t.copy(Ri).sub(tt.target);var Li=_t.length();Li*=Math.tan(tt.object.fov/2*Math.PI/180),qn(2*Xe*Li/bn.clientHeight,tt.object.matrix),Hr(2*dn*Li/bn.clientHeight,tt.object.matrix)}else tt.object instanceof THREE.OrthographicCamera?(qn(Xe*(tt.object.right-tt.object.left)/tt.object.zoom/bn.clientWidth,tt.object.matrix),Hr(dn*(tt.object.top-tt.object.bottom)/tt.object.zoom/bn.clientHeight,tt.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),tt.enablePan=!1)}}();tt.domElement.addEventListener("contextmenu",Ae,!1),tt.domElement.addEventListener("mousedown",je,!1),tt.domElement.addEventListener("wheel",ur,!1),tt.domElement.addEventListener("touchstart",zt,!1),tt.domElement.addEventListener("touchend",Nt,!1),tt.domElement.addEventListener("touchmove",ut,!1),window.addEventListener("keydown",Kr,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(C){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!C}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(C){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!C}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(C){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!C}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(C){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!C}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(C){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!C}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(C){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=C}}})},function($n,P,C){Object.defineProperty(P,"__esModule",{value:!0});var A=C(2);C.d(P,"hsv",function(){return A.a});var gt=C(12);C.d(P,"interpolateHsv",function(){return gt.a}),C.d(P,"interpolateHsvLong",function(){return gt.b})},function($n,P,C){var A=C(0);C.d(P,"a",function(){return A.e}),C.d(P,"b",function(){return A.f}),C(10),C(11)},function($n,P,C){function A(Rt){if(Rt instanceof Dt)return new Dt(Rt.l,Rt.a,Rt.b,Rt.opacity);if(Rt instanceof le){var je=Rt.h*ie.a;return new Dt(Rt.l,Math.cos(je)*Rt.c,Math.sin(je)*Rt.c,Rt.opacity)}Rt instanceof xe.b||(Rt=Object(xe.g)(Rt));var $e=Ct(Rt.r),xn=Ct(Rt.g),ur=Ct(Rt.b),Kr=Bt((.4124564*$e+.3575761*xn+.1804375*ur)/un),zt=Bt((.2126729*$e+.7151522*xn+.072175*ur)/ge);return new Dt(116*zt-16,500*(Kr-zt),200*(zt-Bt((.0193339*$e+.119192*xn+.9503041*ur)/en)),Rt.opacity)}function gt(Rt,je,$e,xn){return arguments.length===1?A(Rt):new Dt(Rt,je,$e,xn==null?1:xn)}function Dt(Rt,je,$e,xn){this.l=+Rt,this.a=+je,this.b=+$e,this.opacity=+xn}function Bt(Rt){return Rt>dr?Math.pow(Rt,1/3):Rt/In+Ye}function de(Rt){return Rt>Fe?Rt*Rt*Rt:In*(Rt-Ye)}function fe(Rt){return 255*(Rt<=.0031308?12.92*Rt:1.055*Math.pow(Rt,1/2.4)-.055)}function Ct(Rt){return(Rt/=255)<=.04045?Rt/12.92:Math.pow((Rt+.055)/1.055,2.4)}function G(Rt){if(Rt instanceof le)return new le(Rt.h,Rt.c,Rt.l,Rt.opacity);Rt instanceof Dt||(Rt=A(Rt));var je=Math.atan2(Rt.b,Rt.a)*ie.b;return new le(je<0?je+360:je,Math.sqrt(Rt.a*Rt.a+Rt.b*Rt.b),Rt.l,Rt.opacity)}function Ut(Rt,je,$e,xn){return arguments.length===1?G(Rt):new le(Rt,je,$e,xn==null?1:xn)}function le(Rt,je,$e,xn){this.h=+Rt,this.c=+je,this.l=+$e,this.opacity=+xn}var pe=C(1),xe=C(0),ie=C(3),un=.95047,ge=1,en=1.08883,Ye=4/29,Fe=6/29,In=3*Fe*Fe,dr=Fe*Fe*Fe;Object(pe.a)(Dt,gt,Object(pe.b)(xe.a,{brighter:function(Rt){return new Dt(this.l+18*(Rt==null?1:Rt),this.a,this.b,this.opacity)},darker:function(Rt){return new Dt(this.l-18*(Rt==null?1:Rt),this.a,this.b,this.opacity)},rgb:function(){var Rt=(this.l+16)/116,je=isNaN(this.a)?Rt:Rt+this.a/500,$e=isNaN(this.b)?Rt:Rt-this.b/200;return Rt=ge*de(Rt),je=un*de(je),$e=en*de($e),new xe.b(fe(3.2404542*je-1.5371385*Rt-.4985314*$e),fe(-.969266*je+1.8760108*Rt+.041556*$e),fe(.0556434*je-.2040259*Rt+1.0572252*$e),this.opacity)}})),Object(pe.a)(le,Ut,Object(pe.b)(xe.a,{brighter:function(Rt){return new le(this.h,this.c,this.l+18*(Rt==null?1:Rt),this.opacity)},darker:function(Rt){return new le(this.h,this.c,this.l-18*(Rt==null?1:Rt),this.opacity)},rgb:function(){return A(this).rgb()}}))},function($n,P,C){function A(ge){if(ge instanceof Dt)return new Dt(ge.h,ge.s,ge.l,ge.opacity);ge instanceof de.b||(ge=Object(de.g)(ge));var en=ge.r/255,Ye=ge.g/255,Fe=ge.b/255,In=(un*Fe+xe*en-ie*Ye)/(un+xe-ie),dr=Fe-In,Rt=(pe*(Ye-In)-Ut*dr)/le,je=Math.sqrt(Rt*Rt+dr*dr)/(pe*In*(1-In)),$e=je?Math.atan2(Rt,dr)*fe.b-120:NaN;return new Dt($e<0?$e+360:$e,je,In,ge.opacity)}function gt(ge,en,Ye,Fe){return arguments.length===1?A(ge):new Dt(ge,en,Ye,Fe==null?1:Fe)}function Dt(ge,en,Ye,Fe){this.h=+ge,this.s=+en,this.l=+Ye,this.opacity=+Fe}var Bt=C(1),de=C(0),fe=C(3),Ct=-.14861,G=1.78277,Ut=-.29227,le=-.90649,pe=1.97294,xe=pe*le,ie=pe*G,un=G*Ut-le*Ct;Object(Bt.a)(Dt,gt,Object(Bt.b)(de.a,{brighter:function(ge){return ge=ge==null?de.c:Math.pow(de.c,ge),new Dt(this.h,this.s,this.l*ge,this.opacity)},darker:function(ge){return ge=ge==null?de.d:Math.pow(de.d,ge),new Dt(this.h,this.s,this.l*ge,this.opacity)},rgb:function(){var ge=isNaN(this.h)?0:(this.h+120)*fe.a,en=+this.l,Ye=isNaN(this.s)?0:this.s*en*(1-en),Fe=Math.cos(ge),In=Math.sin(ge);return new de.b(255*(en+Ye*(Ct*Fe+G*In)),255*(en+Ye*(Ut*Fe+le*In)),255*(en+Ye*(pe*Fe)),this.opacity)}}))},function($n,P,C){function A(de){return function(fe,Ct){var G=de((fe=Object(Dt.a)(fe)).h,(Ct=Object(Dt.a)(Ct)).h),Ut=Object(gt.a)(fe.s,Ct.s),le=Object(gt.a)(fe.v,Ct.v),pe=Object(gt.a)(fe.opacity,Ct.opacity);return function(xe){return fe.h=G(xe),fe.s=Ut(xe),fe.v=le(xe),fe.opacity=pe(xe),fe+""}}}C.d(P,"b",function(){return Bt});var gt=C(13),Dt=C(2);P.a=A(gt.b);var Bt=A(gt.a)},function($n,P,C){function A(Bt,de){return function(fe){return Bt+fe*de}}function gt(Bt,de){var fe=de-Bt;return fe?A(Bt,fe>180||fe<-180?fe-360*Math.round(fe/360):fe):Object(Dt.a)(isNaN(Bt)?de:Bt)}P.b=gt;var Dt=C(14);P.a=function(Bt,de){var fe=de-Bt;return fe?A(Bt,fe):Object(Dt.a)(isNaN(Bt)?de:Bt)}},function($n,P,C){P.a=function(A){return function(){return A}}}])})})(G0);var hw=cw(G0.exports);export{hw as C};
